var Rn=Object.defineProperty;var Ke=Object.getOwnPropertySymbols;var Nt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var Bt=(r,e,n)=>e in r?Rn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Tt=(r,e)=>{for(var n in e||(e={}))Nt.call(e,n)&&Bt(r,n,e[n]);if(Ke)for(var n of Ke(e))Pt.call(e,n)&&Bt(r,n,e[n]);return r};var ot=(r,e)=>{var n={};for(var t in r)Nt.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&Ke)for(var t of Ke(r))e.indexOf(t)<0&&Pt.call(r,t)&&(n[t]=r[t]);return n};import{a1 as g,a2 as N,a3 as Wn,S as j,i as x,s as Ne,F as Pe,J as Be,K as Te,L as Ie,q as p,o as E,r as me,D as _e,a4 as Ae,a5 as zn,a6 as le,t as qe,h as ve,g as A,d as L,e as ee,c as te,a as oe,b as M,I as It,j as At,M as we,l as I,n as X,p as G,a7 as pe,w as z,x as Y,y as H,B as V,a8 as ne,a9 as Hn,Q as Mt,O as fe,P as Ue,aa as Rt,ab as Wt,v as at,ac as Vn,ad as Ye,ae as Xe,C as Me,af as lt,ag as Kn,ah as qn,ai as zt,aj as Ht,ak as J,al as Q,z as vn,am as Un,an as Vt,u as Yn,E as Kt,ao as W,ap as Xn,aq as Gn,ar as Jn}from"./vendor-1ba91cd3.js";const Ge=new WeakMap,Je=new WeakMap,st=new WeakMap,Qe=new WeakMap,ke=new WeakMap,Ee=new WeakMap,ct=new WeakMap,be=new WeakMap,qt=new WeakMap,ye=new WeakMap,vt=new WeakMap,Re=Symbol("placeholder");let Qn=0;class Zn{constructor(){this.id=`${Qn++}`}toString(){return this.id}}function ft(r){return r&&r.ownerDocument&&r.ownerDocument.defaultView||null}function jn(r){return ue(r)&&r.nodeType===8}function re(r){return ue(r)&&r.nodeType===1}function ue(r){const e=ft(r);return!!e&&r instanceof e.Node}function Ut(r){const e=r&&r.anchorNode&&ft(r.anchorNode);return!!e&&r instanceof e.Selection}function Yt(r){return ue(r)&&r.nodeType===3}function xn(r){return r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1}function $n(r){let[e,n]=r;if(re(e)&&e.childNodes.length){let t=n===e.childNodes.length,i=t?n-1:n;for([e,i]=Xt(e,i,t?"backward":"forward"),t=i<n;re(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=tr(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function er(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Xt(r,e,n){const{childNodes:t}=r;let i=t[e],a=e,o=!1,s=!1;for(;(jn(i)||re(i)&&i.childNodes.length===0||re(i)&&i.getAttribute("contenteditable")==="false")&&!(o&&s);){if(a>=t.length){o=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}i=t[a],e=a,a+=n==="forward"?1:-1}return[i,e]}function tr(r,e,n){const[t]=Xt(r,e,n);return t}function Gt(r){let e="";if(Yt(r)&&r.nodeValue)return r.nodeValue;if(re(r)){for(const t of Array.from(r.childNodes))e+=Gt(t);const n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e}const nr=/data-slate-fragment="(.+?)"/m;function rr(r){const e=r.getData("text/html"),[,n]=e.match(nr)||[];return n}const ir=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Jt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const ut=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),dt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),or=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Qt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),ar=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),lr=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),sr=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Zt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",jt=!ar&&!or&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function ht(r){const e=st.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function de(r){let e=ct.get(r);return e||(e=new Zn,ct.set(r,e)),e}function Ce(r){const e=[];let n=r;for(;;){const t=Je.get(n);if(t==null){if(g.isEditor(n))return e;break}const i=Ge.get(n);if(i==null)break;e.unshift(i),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(r)}`)}function We(r){const e=se(r,r),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function xt(r){return!!ye.get(r)}function cr(r){const e=se(r,r),n=We(r);ye.set(r,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function gt(r,e,n={}){const{editable:t=!1}=n,i=se(r,r);let a;try{a=re(e)?e:e.parentElement}catch(o){if(!o.message.includes('Permission denied to access property "nodeType"'))throw o}return a?a.closest("[data-svelte-editor]")===i&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===i||!!a.getAttribute("data-slate-zero-width")):!1}function se(r,e,n=!0){const t=be.get(r),i=g.isEditor(e)?Qe.get(r):t==null?void 0:t.get(de(e));if(!i&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return i}function $t(r,e,n=!0){const[t]=g.node(r,e.path),i=se(r,t,n);let a;g.void(r,{at:e})&&(e={path:e.path,offset:0});const o="[data-slate-string], [data-slate-zero-width]",s=i?Array.from(i.querySelectorAll(o)):[];let l=0;for(const c of s){const d=c.childNodes[0];if(d==null||d.textContent==null)continue;const{length:h}=d.textContent,u=c.getAttribute("data-slate-length"),m=u==null?h:parseInt(u,10),_=l+m;if(e.offset<=_){const y=Math.min(h,Math.max(0,e.offset-l));a=[d,y];break}l=_}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function Ze(r,e,n=!0){const{anchor:t,focus:i}=e,a=N.isBackward(e),o=$t(r,t,n);if(!o)return;const s=N.isCollapsed(e)?o:$t(r,i),c=ht(r).document.createRange(),[d,h]=a?s:o,[u,m]=a?o:s,y=!!(re(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),b=!!(re(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return c.setStart(d,y?1:h),c.setEnd(u,b?1:m),c}function he(r){let e=re(r)?r:r.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?ke.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function fr(r,e){const{clientX:n,clientY:t,target:i}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=he(e.target),o=Ce(a);if(g.isVoid(r,a)){const d=i.getBoundingClientRect(),h=r.isInline(a)?n-d.left<d.left+d.width-n:t-d.top<d.top+d.height-t,u=g.point(r,o,{edge:h?"start":"end"}),m=h?g.before(r,u):g.after(r,u);if(m)return g.range(r,m)}let s;const{document:l}=ht(r);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const d=l.caretPositionFromPoint(n,t);d&&(s=l.createRange(),s.setStart(d.offsetNode,d.offset),s.setEnd(d.offsetNode,d.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return ze(r,s,{exactMatch:!1,suppressThrow:!1})}function en(r,e,n){var u;const{exactMatch:t,suppressThrow:i}=n,[a,o]=t?e:$n(e),s=a.parentNode;let l=null,c=0;if(s){const m=s.closest('[data-slate-void="true"]');let _=s.closest("[data-slate-leaf]"),y=null;if(_){l=_.closest('[data-slate-node="text"]');const b=ht(r).document.createRange();b.setStart(l,0),b.setEnd(a,o);const O=b.cloneContents();[...Array.prototype.slice.call(O.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(O.querySelectorAll("[contenteditable=false]"))].forEach(U=>{U.parentNode.removeChild(U)}),c=O.textContent.length,y=l}else m&&(_=m.querySelector("[data-slate-leaf]"),_?(l=_.closest('[data-slate-node="text"]'),y=_,c=y.textContent.length,y.querySelectorAll("[data-slate-zero-width]").forEach(S=>{c-=S.textContent.length})):c=1);y&&c===y.textContent.length&&(s.hasAttribute("data-slate-zero-width")||ut&&((u=y.textContent)==null?void 0:u.endsWith(`

`)))&&c--}if(!l){if(i)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const d=he(l);return{path:Ce(d),offset:c}}function ze(r,e,n){const{exactMatch:t,suppressThrow:i}=n,a=Ut(e)?e.anchorNode:e.startContainer;let o,s,l,c,d;if(a&&(Ut(e)?(o=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Qt&&er()?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed):(o=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,d=e.collapsed)),o==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=en(r,[o,s],{exactMatch:t,suppressThrow:i});if(!h)return null;const u=d?h:en(r,[l,c],{exactMatch:t,suppressThrow:i});if(!u)return null;let m={anchor:h,focus:u};return N.isExpanded(m)&&N.isForward(m)&&re(l)&&g.void(r,{at:m.focus,mode:"highest"})&&(m=g.unhangRange(r,m,{voids:!0})),m}function ur(r,e){const{anchor:n,focus:t}=e;return g.hasPath(r,n.path)&&g.hasPath(r,t.path)}function tn(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let i=0;i<r.length;i++){const a=r[i],o=e[i],n=a,{anchor:s,focus:l}=n,c=ot(n,["anchor","focus"]),t=o,{anchor:d,focus:h}=t,u=ot(t,["anchor","focus"]);if(!N.equals(a,o)||a[Re]!==o[Re]||!Wn(c,u))return!1}return!0}function nn(r,e){return r===e||!!r&&!!e&&N.equals(r,e)}function dr(r){let e;const n=r[7].default,t=Pe(n,r,r[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,a){t&&t.m(i,a),e=!0},p(i,[a]){t&&t.p&&(!e||a&64)&&Be(t,n,i,i[6],e?Ie(n,i[6],a,null):Te(i[6]),null)},i(i){e||(p(t,i),e=!0)},o(i){E(t,i),e=!1},d(i){t&&t.d(i)}}}const rn={},on={},an={},ln={},sn={};function cn(){const r=Ae(rn);if(!r)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return r}function ge(){return zn(cn())}function fn(){const r=Ae(on);if(!r)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return r}function hr(){const r=Ae(an);if(!r)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return r}function un(){const r=Ae(ln);if(!r)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return r}function gr(){const r=Ae(sn);if(!r)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return r}function dn(r){return[]}function mr(r,e,n){let{$$slots:t={},$$scope:i}=e,{editor:a}=e,{value:o=a.children}=e,{selection:s=a.selection}=e;const l=_e(a);me(rn,l);const c=_e(!0);me(on,c);const d=_e(!1);me(an,d);const h=_e(dn);me(ln,h);const u=_e(a.selection);me(sn,u);function m(){a.children!==o&&n(0,o=a.children),n(1,s=a.selection)}vt.set(a,m);let _=a,y,S;return r.$$set=b=>{"editor"in b&&n(2,a=b.editor),"value"in b&&n(0,o=b.value),"selection"in b&&n(1,s=b.selection),"$$scope"in b&&n(6,i=b.$$scope)},r.$$.update=()=>{r.$$.dirty&12&&a!==_&&(n(3,_=a),l.set(a)),r.$$.dirty&17&&y!==o&&(l.update(b=>(b.children=o,b)),n(4,y=o)),r.$$.dirty&38&&(nn(S,s)||(l.set(a),u.set(s),n(5,S=s)))},[o,s,a,_,y,S,i,t]}class Di extends j{constructor(e){super();x(this,e,mr,dr,Ne,{editor:2,value:0,selection:1})}}const hn="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",gn="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",_r=new RegExp("^[^"+gn+"]*["+hn+"]"),wr=new RegExp("^[^"+hn+"]*["+gn+"]");function mn(r){const e=String(r||"");return _r.test(e)?"rtl":wr.test(e)?"ltr":"neutral"}function _n(r){let e=`
`,n;return{c(){n=qe(e)},l(t){n=ve(t,e)},m(t,i){A(t,n,i)},d(t){t&&L(n)}}}function pr(r){let e,n,t=r[1]&&_n();return{c(){e=ee("span"),n=qe(r[0]),t&&t.c(),this.h()},l(i){e=te(i,"SPAN",{"data-slate-string":!0});var a=oe(e);n=ve(a,r[0]),t&&t.l(a),a.forEach(L),this.h()},h(){M(e,"data-slate-string","true")},m(i,a){A(i,e,a),It(e,n),t&&t.m(e,null)},p(i,[a]){a&1&&At(n,i[0]),i[1]?t||(t=_n(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:we,o:we,d(i){i&&L(e),t&&t.d()}}}function kr(r,e,n){let{text:t}=e,{isTrailing:i=!1}=e;return r.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,i=a.isTrailing)},[t,i]}class Er extends j{constructor(e){super();x(this,e,kr,pr,le,{text:0,isTrailing:1})}}function wn(r){let e;return{c(){e=ee("br")},l(n){e=te(n,"BR",{})},m(n,t){A(n,e,t)},d(n){n&&L(e)}}}function br(r){let e,n="\uFEFF",t,i,a=r[1]&&wn();return{c(){e=ee("span"),t=qe(n),a&&a.c(),this.h()},l(o){e=te(o,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=oe(e);t=ve(s,n),a&&a.l(s),s.forEach(L),this.h()},h(){M(e,"data-slate-zero-width",i=r[1]?"n":"z"),M(e,"data-slate-length",r[0])},m(o,s){A(o,e,s),It(e,t),a&&a.m(e,null)},p(o,[s]){o[1]?a||(a=wn(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&i!==(i=o[1]?"n":"z")&&M(e,"data-slate-zero-width",i),s&1&&M(e,"data-slate-length",o[0])},i:we,o:we,d(o){o&&L(e),a&&a.d()}}}function yr(r,e,n){let{length:t=0}=e,{isLineBreak:i=!1}=e;return r.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,i=a.isLineBreak)},[t,i]}class mt extends j{constructor(e){super();x(this,e,yr,br,le,{length:0,isLineBreak:1})}}function Cr(r){let e,n;return e=new Er({props:{isTrailing:r[5],text:r[0].text}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&32&&(a.isTrailing=t[5]),i&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Dr(r){let e,n;return e=new mt({}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:we,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Lr(r){let e,n;return e=new mt({props:{isLineBreak:!0}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:we,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Sr(r){let e,n;return e=new mt({props:{length:ne.string(r[1]).length}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&2&&(a.length=ne.string(t[1]).length),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Fr(r){let e,n,t,i;const a=[Sr,Lr,Dr,Cr],o=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,[c]){let d=e;e=s(l),e===d?o[e].p(l,c):(X(),E(o[d],1,1,()=>{o[d]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),p(n,1),n.m(t.parentNode,t))},i(l){i||(p(n),i=!0)},o(l){E(n),i=!1},d(l){o[e].d(l),l&&L(t)}}}function Or(r,e,n){let t,i,a,o,s,l,{isLast:c}=e,{leaf:d}=e,{parent:h}=e,{text:u}=e;const m=ge();return r.$$set=_=>{"isLast"in _&&n(6,c=_.isLast),"leaf"in _&&n(0,d=_.leaf),"parent"in _&&n(1,h=_.parent),"text"in _&&n(7,u=_.text)},r.$$.update=()=>{r.$$.dirty&65&&n(5,t=c&&d.text.slice(-1)===`
`),r.$$.dirty&128&&n(9,i=Ce(u)),r.$$.dirty&512&&n(8,a=pe.parent(i)),r.$$.dirty&2&&n(4,o=m.isVoid(h)),r.$$.dirty&1&&n(2,s=d.text===""),r.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===u&&!m.isInline(h)&&g.string(m,a)==="")},[d,h,s,l,o,t,c,u,a,i]}class Nr extends j{constructor(e){super();x(this,e,Or,Fr,le,{isLast:6,leaf:0,parent:1,text:7})}}function pn(r){let e,n,t,i;function a(l){r[7](l)}var o=r[4];function s(l){let c={"data-slate-placeholder":!0,style:"position: absolute; pointer-events: none; width: 100%; max-width: 100%; display: block; opacity: 0.333; user-select: none; text-decoration: none;",contenteditable:"false",$$slots:{default:[Pr]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return o&&(e=new o(s(r)),fe.push(()=>Ue(e,"clientHeight",a))),{c(){e&&z(e.$$.fragment),t=I()},l(l){e&&Y(e.$$.fragment,l),t=I()},m(l,c){e&&H(e,l,c),A(l,t,c),i=!0},p(l,c){const d={};if(c&514&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.clientHeight=l[6],Mt(()=>n=!1)),o!==(o=l[4])){if(e){X();const h=e;E(h.$$.fragment,1,0,()=>{V(h,1)}),G()}o?(e=new o(s(l)),fe.push(()=>Ue(e,"clientHeight",a)),z(e.$$.fragment),p(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else o&&e.$set(d)},i(l){i||(e&&p(e.$$.fragment,l),i=!0)},o(l){e&&E(e.$$.fragment,l),i=!1},d(l){l&&L(t),e&&V(e,l)}}}function Pr(r){let e=r[1].placeholder+"",n;return{c(){n=qe(e)},l(t){n=ve(t,e)},m(t,i){A(t,n,i)},p(t,i){i&2&&e!==(e=t[1].placeholder+"")&&At(n,e)},d(t){t&&L(n)}}}function Br(r){let e,n,t,i=Re in r[1]&&pn(r);return n=new Nr({props:{isLast:r[0],leaf:r[1],parent:r[2],text:r[3]}}),{c(){i&&i.c(),e=I(),z(n.$$.fragment)},l(a){i&&i.l(a),e=I(),Y(n.$$.fragment,a)},m(a,o){i&&i.m(a,o),A(a,e,o),H(n,a,o),t=!0},p(a,o){Re in a[1]?i?(i.p(a,o),o&2&&p(i,1)):(i=pn(a),i.c(),p(i,1),i.m(e.parentNode,e)):i&&(X(),E(i,1,1,()=>{i=null}),G());const s={};o&1&&(s.isLast=a[0]),o&2&&(s.leaf=a[1]),o&4&&(s.parent=a[2]),o&8&&(s.text=a[3]),n.$set(s)},i(a){t||(p(i),p(n.$$.fragment,a),t=!0)},o(a){E(i),E(n.$$.fragment,a),t=!1},d(a){i&&i.d(a),a&&L(e),V(n,a)}}}function Tr(r){let e,n,t;var i=r[5];function a(o){return{props:{leaf:o[1],"data-slate-leaf":"true",$$slots:{default:[Br]},$$scope:{ctx:o}}}}return i&&(e=new i(a(r))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&H(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.leaf=o[1]),s&607&&(l.$$scope={dirty:s,ctx:o}),i!==(i=o[5])){if(e){X();const c=e;E(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(o)),z(e.$$.fragment),p(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(o){t||(e&&p(e.$$.fragment,o),t=!0)},o(o){e&&E(e.$$.fragment,o),t=!1},d(o){o&&L(n),e&&V(e,o)}}}function Ir(r,e,n){let{isLast:t}=e,{leaf:i}=e,{parent:a}=e,{text:o}=e,{Placeholder:s}=e,{Leaf:l}=e,c,d;Hn(()=>{if(Zt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight="")}});function h(u){c=u,n(6,c)}return r.$$set=u=>{"isLast"in u&&n(0,t=u.isLast),"leaf"in u&&n(1,i=u.leaf),"parent"in u&&n(2,a=u.parent),"text"in u&&n(3,o=u.text),"Placeholder"in u&&n(4,s=u.Placeholder),"Leaf"in u&&n(5,l=u.Leaf)},r.$$.update=()=>{if(r.$$.dirty&64&&c!==d&&Zt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight=`${c}px`)}},[t,i,a,o,s,l,c,h]}class kn extends j{constructor(e){super();x(this,e,Ir,Tr,le,{isLast:0,leaf:1,parent:2,text:3,Placeholder:4,Leaf:5})}}function En(r,e,n){const t=r.slice();return t[11]=e[n],t[13]=n,t}function bn(r,e){let n,t,i,a;var o=kn;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return o&&(t=new o(s(e))),{key:r,first:null,c(){n=I(),t&&z(t.$$.fragment),i=I(),this.h()},l(l){n=I(),t&&Y(t.$$.fragment,l),i=I(),this.h()},h(){this.first=n},m(l,c){A(l,n,c),t&&H(t,l,c),A(l,i,c),a=!0},p(l,c){e=l;const d={};if(c&8&&(d.Placeholder=e[3]),c&16&&(d.Leaf=e[4]),c&129&&(d.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(d.parent=e[1]),c&128&&(d.leaf=e[11]),c&4&&(d.text=e[2]),o!==(o=kn)){if(t){X();const h=t;E(h.$$.fragment,1,0,()=>{V(h,1)}),G()}o?(t=new o(s(e)),z(t.$$.fragment),p(t.$$.fragment,1),H(t,i.parentNode,i)):t=null}else o&&t.$set(d)},i(l){a||(t&&p(t.$$.fragment,l),a=!0)},o(l){t&&E(t.$$.fragment,l),a=!1},d(l){l&&L(n),l&&L(i),t&&V(t,l)}}}function Ar(r){let e,n=[],t=new Map,i,a=r[7];const o=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=En(r,a,s),c=o(l);t.set(c,n[s]=bn(c,l))}return{c(){e=ee("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=te(s,"SPAN",{"data-slate-node":!0});var l=oe(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(L),this.h()},h(){M(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);r[9](e),i=!0},p(s,[l]){l&223&&(a=s[7],X(),n=Rt(n,l,o,1,s,a,t,e,Wt,bn,null,En),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)p(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)E(n[l]);i=!1},d(s){s&&L(e);for(let l=0;l<n.length;l+=1)n[l].d();r[9](null)}}}function Mr(r,e,n){let t,i,{decorations:a}=e,{isLast:o}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:d}=e;const h=ge();let u;at(()=>{var _;(_=be.get(h))==null||_.set(i,u),Ee.set(l,u),ke.set(u,l)});function m(_){fe[_?"unshift":"push"](()=>{u=_,n(5,u)})}return r.$$set=_=>{"decorations"in _&&n(8,a=_.decorations),"isLast"in _&&n(0,o=_.isLast),"parent"in _&&n(1,s=_.parent),"text"in _&&n(2,l=_.text),"Placeholder"in _&&n(3,c=_.Placeholder),"Leaf"in _&&n(4,d=_.Leaf)},r.$$.update=()=>{var _;r.$$.dirty&260&&n(7,t=Vn.decorations(l,a)),r.$$.dirty&4&&n(6,i=de(l)),r.$$.dirty&100&&u&&((_=be.get(h))==null||_.set(i,u),Ee.set(l,u),ke.set(u,l))},[o,s,l,c,d,u,i,t,a,m]}class De extends j{constructor(e){super();x(this,e,Mr,Ar,le,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Rr(r){let e,n;return e=new Sn({props:{node:r[0],decorations:r[1],selection:r[2],Element:r[3],Placeholder:r[5],Leaf:r[4]}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&1&&(a.node=t[0]),i&2&&(a.decorations=t[1]),i&4&&(a.selection=t[2]),i&8&&(a.Element=t[3]),i&32&&(a.Placeholder=t[5]),i&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Wr(r){let e,n,t,i;const a=[Hr,zr],o=[];function s(l,c){return l[7]?0:1}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?o[e].p(l,c):(X(),E(o[d],1,1,()=>{o[d]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),p(n,1),n.m(t.parentNode,t))},i(l){i||(p(n),i=!0)},o(l){E(n),i=!1},d(l){o[e].d(l),l&&L(t)}}}function zr(r){let e,n,t;var i=De;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return i&&(n=new i(a(r))),{c(){e=ee("div"),n&&z(n.$$.fragment),this.h()},l(o){e=te(o,"DIV",{"data-slate-spacer":!0,class:!0});var s=oe(e);n&&Y(n.$$.fragment,s),s.forEach(L),this.h()},h(){M(e,"data-slate-spacer",""),M(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),n&&H(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),i!==(i=De)){if(n){X();const c=n;E(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(o)),z(n.$$.fragment),p(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(o){t||(n&&p(n.$$.fragment,o),t=!0)},o(o){n&&E(n.$$.fragment,o),t=!1},d(o){o&&L(e),n&&V(n)}}}function Hr(r){let e,n,t;var i=De;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return i&&(n=new i(a(r))),{c(){e=ee("span"),n&&z(n.$$.fragment),this.h()},l(o){e=te(o,"SPAN",{"data-slate-spacer":!0,class:!0});var s=oe(e);n&&Y(n.$$.fragment,s),s.forEach(L),this.h()},h(){M(e,"data-slate-spacer",""),M(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),n&&H(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),i!==(i=De)){if(n){X();const c=n;E(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(o)),z(n.$$.fragment),p(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(o){t||(n&&p(n.$$.fragment,o),t=!0)},o(o){n&&E(n.$$.fragment,o),t=!1},d(o){o&&L(e),n&&V(n)}}}function Vr(r){let e,n,t,i;const a=[Wr,Rr],o=[];function s(l,c){return l[8]?0:1}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?o[e].p(l,c):(X(),E(o[d],1,1,()=>{o[d]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),p(n,1),n.m(t.parentNode,t))},i(l){i||(p(n),i=!0)},o(l){E(n),i=!1},d(l){o[e].d(l),l&&L(t)}}}function Kr(r){let e,n,t,i;function a(l){r[18](l)}var o=r[3];function s(l){let c={"data-slate-node":"element","data-slate-void":l[8],"data-slate-inline":l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Vr]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return o&&(e=new o(s(r)),fe.push(()=>Ue(e,"ref",a))),{c(){e&&z(e.$$.fragment),t=I()},l(l){e&&Y(e.$$.fragment,l),t=I()},m(l,c){e&&H(e,l,c),A(l,t,c),i=!0},p(l,[c]){const d={};if(c&256&&(d["data-slate-void"]=l[8]),c&128&&(d["data-slate-inline"]=l[7]),c&2048&&(d.contenteditable=l[11]),c&1&&(d.element=l[0]),c&512&&(d.dir=l[9]),c&1050047&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.ref=l[6],Mt(()=>n=!1)),o!==(o=l[3])){if(e){X();const h=e;E(h.$$.fragment,1,0,()=>{V(h,1)}),G()}o?(e=new o(s(l)),fe.push(()=>Ue(e,"ref",a)),z(e.$$.fragment),p(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else o&&e.$set(d)},i(l){i||(e&&p(e.$$.fragment,l),i=!0)},o(l){e&&E(e.$$.fragment,l),i=!1},d(l){l&&L(t),e&&V(e,l)}}}function qr(r,e,n){let t,i,a,o,s,l,{element:c}=e,{decorations:d}=e,{selection:h=null}=e,{Element:u}=e,{Leaf:m}=e,{Placeholder:_}=e;const y=ge(),S=fn();Ye(r,S,B=>n(17,l=B));let b,O,K,U,C;at(()=>{var B;(B=be.get(y))==null||B.set(b,C),Ee.set(c,C),ke.set(C,c)});function ae(B){C=B,n(6,C)}return r.$$set=B=>{"element"in B&&n(0,c=B.element),"decorations"in B&&n(1,d=B.decorations),"selection"in B&&n(2,h=B.selection),"Element"in B&&n(3,u=B.Element),"Leaf"in B&&n(4,m=B.Leaf),"Placeholder"in B&&n(5,_=B.Placeholder)},r.$$.update=()=>{var B;if(r.$$.dirty&131072&&n(15,t=l),r.$$.dirty&1&&n(7,i=y.isInline(c)),r.$$.dirty&1&&n(16,a=de(c)),r.$$.dirty&81920&&O!==a&&(n(13,b=a),n(14,O=a)),r.$$.dirty&129&&!i&&g.hasInlines(y,c)){const T=mn(ne.string(c));T==="rtl"&&n(9,K=T)}if(r.$$.dirty&1&&n(8,o=g.isVoid(y,c)),r.$$.dirty&32768&&n(11,s=!t),r.$$.dirty&33153&&o){!t&&i&&n(11,s=!1);const[[T]]=ne.texts(c);n(10,U=T),Ge.set(T,0),Je.set(T,c)}r.$$.dirty&8257&&C&&((B=be.get(y))==null||B.set(b,C),Ee.set(c,C),ke.set(C,c))},[c,d,h,u,m,_,C,i,o,K,U,s,S,b,O,t,a,l,ae]}class yn extends j{constructor(e){super();x(this,e,qr,Kr,le,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function vr(r){let e,n,t;var i=yn;function a(o){return{props:{Element:o[1],Placeholder:o[3],Leaf:o[2],decorations:o[5],element:o[0],selection:o[4]}}}return i&&(e=new i(a(r))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&H(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.Element=o[1]),s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&32&&(l.decorations=o[5]),s&1&&(l.element=o[0]),s&16&&(l.selection=o[4]),i!==(i=yn)){if(e){X();const c=e;E(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(o)),z(e.$$.fragment),p(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(o){t||(e&&p(e.$$.fragment,o),t=!0)},o(o){e&&E(e.$$.fragment,o),t=!1},d(o){o&&L(n),e&&V(e,o)}}}const Ur={};function Yr(r,e,n){let t,i,a,o,{parent:s}=e,{element:l}=e,{path:c}=e,{index:d}=e,{decorate:h}=e,{decorations:u}=e,{selection:m=null}=e,{Element:_}=e,{Leaf:y}=e,{Placeholder:S}=e;const b=_e(!1);me(Ur,b);const O=ge();let K=d,U=s,C=l,ae=u,B=m;return r.$$set=T=>{"parent"in T&&n(6,s=T.parent),"element"in T&&n(0,l=T.element),"path"in T&&n(7,c=T.path),"index"in T&&n(8,d=T.index),"decorate"in T&&n(9,h=T.decorate),"decorations"in T&&n(10,u=T.decorations),"selection"in T&&n(11,m=T.selection),"Element"in T&&n(1,_=T.Element),"Leaf"in T&&n(2,y=T.Leaf),"Placeholder"in T&&n(3,S=T.Placeholder)},r.$$.update=()=>{r.$$.dirty&4352&&K!==d&&n(12,K=d),r.$$.dirty&8256&&U!==s&&n(13,U=s),r.$$.dirty&16385&&C!==l&&n(14,C=l),r.$$.dirty&33792&&(tn(ae,u)||n(15,ae=u)),r.$$.dirty&67584&&(nn(B,m)||n(16,B=m)),r.$$.dirty&20480&&Ge.set(C,K),r.$$.dirty&24576&&Je.set(C,U),r.$$.dirty&4224&&n(18,t=c.concat(K)),r.$$.dirty&262144&&n(17,i=g.range(O,t)),r.$$.dirty&442880&&n(5,a=Ln(h([C,t]),i,ae)),r.$$.dirty&196608&&n(4,o=B&&N.intersection(i,B)),r.$$.dirty&16&&b.set(!!o)},[l,_,y,S,o,a,s,c,d,h,u,m,K,U,C,ae,B,i,t]}class Xr extends j{constructor(e){super();x(this,e,Yr,vr,Ne,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Gr(r){let e,n,t;var i=De;function a(o){return{props:{Placeholder:o[3],Leaf:o[2],decorations:o[4],isLast:o[5],parent:o[0],text:o[1]}}}return i&&(e=new i(a(r))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&H(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&16&&(l.decorations=o[4]),s&32&&(l.isLast=o[5]),s&1&&(l.parent=o[0]),s&2&&(l.text=o[1]),i!==(i=De)){if(e){X();const c=e;E(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(o)),z(e.$$.fragment),p(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(o){t||(e&&p(e.$$.fragment,o),t=!0)},o(o){e&&E(e.$$.fragment,o),t=!1},d(o){o&&L(n),e&&V(e,o)}}}function Jr(r,e,n){let t,i,a,o,{parent:s}=e,{text:l}=e,{path:c}=e,{index:d}=e,{isLeafBlock:h}=e,{decorations:u}=e,{decorate:m}=e,{Leaf:_}=e,{Placeholder:y}=e;const S=ge();let b=d,O=l,K=s,U=u;return r.$$set=C=>{"parent"in C&&n(0,s=C.parent),"text"in C&&n(1,l=C.text),"path"in C&&n(6,c=C.path),"index"in C&&n(7,d=C.index),"isLeafBlock"in C&&n(8,h=C.isLeafBlock),"decorations"in C&&n(9,u=C.decorations),"decorate"in C&&n(10,m=C.decorate),"Leaf"in C&&n(2,_=C.Leaf),"Placeholder"in C&&n(3,y=C.Placeholder)},r.$$.update=()=>{r.$$.dirty&2176&&b!==d&&n(11,b=d),r.$$.dirty&4098&&O!==l&&n(12,O=l),r.$$.dirty&8193&&K!==s&&n(13,K=s),r.$$.dirty&16896&&(tn(U,u)||n(14,U=u)),r.$$.dirty&6144&&Ge.set(O,b),r.$$.dirty&12288&&Je.set(O,K),r.$$.dirty&2112&&n(16,t=c.concat(b)),r.$$.dirty&10496&&n(5,i=h&&b===K.children.length-1),r.$$.dirty&65536&&n(15,a=g.range(S,t)),r.$$.dirty&119808&&n(4,o=Ln(m([O,t]),a,U))},[s,l,_,y,o,i,c,d,h,u,m,b,O,K,U,a,t]}class Qr extends j{constructor(e){super();x(this,e,Jr,Gr,Ne,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function Cn(r,e,n){const t=r.slice();return t[13]=e[n],t[15]=n,t}function Zr(r){let e,n;return e=new Qr({props:{Placeholder:r[4],Leaf:r[3],decorations:r[0],parent:r[5],text:r[13],decorate:r[8],index:r[15],path:r[7],isLeafBlock:r[6]}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&32&&(a.parent=t[5]),i&32&&(a.text=t[13]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),i&64&&(a.isLeafBlock=t[6]),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function jr(r){let e,n;return e=new Xr({props:{Element:r[2],Placeholder:r[4],Leaf:r[3],decorations:r[0],selection:r[1],element:r[13],parent:r[5],decorate:r[8],index:r[15],path:r[7]}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&4&&(a.Element=t[2]),i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&2&&(a.selection=t[1]),i&32&&(a.element=t[13]),i&32&&(a.parent=t[5]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Dn(r,e){let n,t,i,a,o,s;const l=[jr,Zr],c=[];function d(h,u){return u&32&&(t=null),t==null&&(t=!!Xe.isElement(h[13])),t?0:1}return i=d(e,-1),a=c[i]=l[i](e),{key:r,first:null,c(){n=I(),a.c(),o=I(),this.h()},l(h){n=I(),a.l(h),o=I(),this.h()},h(){this.first=n},m(h,u){A(h,n,u),c[i].m(h,u),A(h,o,u),s=!0},p(h,u){e=h;let m=i;i=d(e,u),i===m?c[i].p(e,u):(X(),E(c[m],1,1,()=>{c[m]=null}),G(),a=c[i],a?a.p(e,u):(a=c[i]=l[i](e),a.c()),p(a,1),a.m(o.parentNode,o))},i(h){s||(p(a),s=!0)},o(h){E(a),s=!1},d(h){h&&L(n),c[i].d(h),h&&L(o)}}}function xr(r){let e=[],n=new Map,t,i,a=r[5].children;const o=s=>de(s[13]);for(let s=0;s<a.length;s+=1){let l=Cn(r,a,s),c=o(l);n.set(c,e[s]=Dn(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=I()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=I()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);A(s,t,l),i=!0},p(s,[l]){l&511&&(a=s[5].children,X(),e=Rt(e,l,o,1,s,a,n,t.parentNode,Wt,Dn,t,Cn),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)p(e[l]);i=!0}},o(s){for(let l=0;l<e.length;l+=1)E(e[l]);i=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&L(t)}}}function Ln(r,e,n=[]){for(const t of n){const i=N.intersection(t,e);i&&r.push(i)}return r}function $r(r,e,n){let t,i,a,o,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:d}=e,{Leaf:h}=e,{Placeholder:u}=e;const m=ge(),_=un();Ye(r,_,S=>n(11,o=S));let y=s;return r.$$set=S=>{"node"in S&&n(10,s=S.node),"decorations"in S&&n(0,l=S.decorations),"selection"in S&&n(1,c=S.selection),"Element"in S&&n(2,d=S.Element),"Leaf"in S&&n(3,h=S.Leaf),"Placeholder"in S&&n(4,u=S.Placeholder)},r.$$.update=()=>{r.$$.dirty&2048&&n(8,t=o),r.$$.dirty&1056&&(y!==s||s===m)&&n(5,y=s),r.$$.dirty&32&&n(7,i=Ce(y)),r.$$.dirty&32&&n(6,a=Xe.isElement(y)&&!m.isInline(y)&&g.hasInlines(m,y))},[l,c,d,h,u,y,a,i,t,_,s,o]}class Sn extends j{constructor(e){super();x(this,e,$r,xr,Ne,{node:10,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function ei(r){let e,n,t;const i=r[7].default,a=Pe(i,r,r[6],null);return{c(){e=ee("div"),a&&a.c(),this.h()},l(o){e=te(o,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=oe(e);a&&a.l(s),s.forEach(L),this.h()},h(){M(e,"data-slate-node","element"),M(e,"data-slate-void",n=r[5]["data-slate-void"]),M(e,"dir",r[2]),M(e,"contenteditable",r[3]),M(e,"class","svelte-19k8gul")},m(o,s){A(o,e,s),a&&a.m(e,null),r[9](e),t=!0},p(o,s){a&&a.p&&(!t||s&64)&&Be(a,i,o,o[6],t?Ie(i,o[6],s,null):Te(o[6]),null),(!t||s&32&&n!==(n=o[5]["data-slate-void"]))&&M(e,"data-slate-void",n),(!t||s&4)&&M(e,"dir",o[2]),(!t||s&8)&&M(e,"contenteditable",o[3])},i(o){t||(p(a,o),t=!0)},o(o){E(a,o),t=!1},d(o){o&&L(e),a&&a.d(o),r[9](null)}}}function ti(r){let e,n,t;const i=r[7].default,a=Pe(i,r,r[6],null);return{c(){e=ee("span"),a&&a.c(),this.h()},l(o){e=te(o,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=oe(e);a&&a.l(s),s.forEach(L),this.h()},h(){M(e,"data-slate-node","element"),M(e,"data-slate-inline","true"),M(e,"data-slate-void",n=r[5]["data-slate-void"]),M(e,"dir",r[2]),M(e,"contenteditable",r[3]),M(e,"class","svelte-19k8gul")},m(o,s){A(o,e,s),a&&a.m(e,null),r[8](e),t=!0},p(o,s){a&&a.p&&(!t||s&64)&&Be(a,i,o,o[6],t?Ie(i,o[6],s,null):Te(o[6]),null),(!t||s&32&&n!==(n=o[5]["data-slate-void"]))&&M(e,"data-slate-void",n),(!t||s&4)&&M(e,"dir",o[2]),(!t||s&8)&&M(e,"contenteditable",o[3])},i(o){t||(p(a,o),t=!0)},o(o){E(a,o),t=!1},d(o){o&&L(e),a&&a.d(o),r[8](null)}}}function ni(r){let e,n,t,i,a;const o=[ti,ei],s=[];function l(c,d){return d&2&&(e=null),e==null&&(e=!!c[4].isInline(c[1])),e?0:1}return n=l(r,-1),t=s[n]=o[n](r),{c(){t.c(),i=I()},l(c){t.l(c),i=I()},m(c,d){s[n].m(c,d),A(c,i,d),a=!0},p(c,[d]){let h=n;n=l(c,d),n===h?s[n].p(c,d):(X(),E(s[h],1,1,()=>{s[h]=null}),G(),t=s[n],t?t.p(c,d):(t=s[n]=o[n](c),t.c()),p(t,1),t.m(i.parentNode,i))},i(c){a||(p(t),a=!0)},o(c){E(t),a=!1},d(c){s[n].d(c),c&&L(i)}}}function ri(r,e,n){let{$$slots:t={},$$scope:i}=e,{element:a}=e,{ref:o}=e,{dir:s}=e,{contenteditable:l}=e;const c=ge();function d(u){fe[u?"unshift":"push"](()=>{o=u,n(0,o)})}function h(u){fe[u?"unshift":"push"](()=>{o=u,n(0,o)})}return r.$$set=u=>{n(5,e=Me(Me({},e),lt(u))),"element"in u&&n(1,a=u.element),"ref"in u&&n(0,o=u.ref),"dir"in u&&n(2,s=u.dir),"contenteditable"in u&&n(3,l=u.contenteditable),"$$scope"in u&&n(6,i=u.$$scope)},e=lt(e),[o,a,s,l,c,e,i,t,d,h]}class ii extends j{constructor(e){super();x(this,e,ri,ni,le,{element:1,ref:0,dir:2,contenteditable:3})}}function oi(r){let e,n;const t=r[1].default,i=Pe(t,r,r[0],null);return{c(){e=ee("span"),i&&i.c(),this.h()},l(a){e=te(a,"SPAN",{"data-slate-leaf":!0});var o=oe(e);i&&i.l(o),o.forEach(L),this.h()},h(){M(e,"data-slate-leaf","true")},m(a,o){A(a,e,o),i&&i.m(e,null),n=!0},p(a,[o]){i&&i.p&&(!n||o&1)&&Be(i,t,a,a[0],n?Ie(t,a[0],o,null):Te(a[0]),null)},i(a){n||(p(i,a),n=!0)},o(a){E(i,a),n=!1},d(a){a&&L(e),i&&i.d(a)}}}function ai(r,e,n){let{$$slots:t={},$$scope:i}=e;return r.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,t]}class li extends j{constructor(e){super();x(this,e,ai,oi,le,{})}}function si(r){let e,n,t;const i=r[2].default,a=Pe(i,r,r[1],null);return{c(){e=ee("span"),a&&a.c(),this.h()},l(o){e=te(o,"SPAN",{});var s=oe(e);a&&a.l(s),s.forEach(L),this.h()},h(){Kn(()=>r[3].call(e))},m(o,s){A(o,e,s),a&&a.m(e,null),n=qn(e,r[3].bind(e)),t=!0},p(o,[s]){a&&a.p&&(!t||s&2)&&Be(a,i,o,o[1],t?Ie(i,o[1],s,null):Te(o[1]),null)},i(o){t||(p(a,o),t=!0)},o(o){E(a,o),t=!1},d(o){o&&L(e),a&&a.d(o),n()}}}function ci(r,e,n){let{$$slots:t={},$$scope:i}=e,{clientHeight:a}=e;function o(){a=this.clientHeight,n(0,a)}return r.$$set=s=>{"clientHeight"in s&&n(0,a=s.clientHeight),"$$scope"in s&&n(1,i=s.$$scope)},[a,i,t,o]}class fi extends j{constructor(e){super();x(this,e,ci,si,le,{clientHeight:0})}}const ui=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),_t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Fn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:ui?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},wt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let r=1;r<20;r++)wt["f"+r]=111+r;function On(r,e={}){Array.isArray(r)||(r=[r]);const n=r.map(t=>di(t,e));return function(i){return n.some(a=>hi(a,i))}}function Li(r,e,n={}){return On(r,n)(e)}function pt(r){return On(r,{byKey:!0})}function di(r,e={}){const n=e&&e.byKey,t={};r=r.replace("++","+add");const i=r.split("+"),{length:a}=i;for(const o in _t)t[_t[o]]=!1;for(let o of i){const s=o.endsWith("?")&&o.length>1;s&&(o=o.slice(0,-1));const l=Nn(o),c=_t[l];if(o.length>1&&!c&&!Fn[o]&&!wt[l])throw new TypeError(`Unknown modifier: "${o}"`);(a===1||!c)&&(n?t.key=l:t.which=gi(o)),c&&(t[c]=s?null:!0)}return t}function hi(r,e){for(const n in r){const t=r[n];let i;if(t!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=t===91&&e.which===93?91:e.which:i=e[n],!(i==null&&t===!1)&&i!==t))return!1}return!0}function gi(r){return r=Nn(r),wt[r]||r.toUpperCase().charCodeAt(0)}function Nn(r){return r=r.toLowerCase(),r=Fn[r]||r,r}const mi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},_i={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},wi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function q(r){const e=mi[r],n=_i[r],t=wi[r],i=e&&pt(e),a=n&&pt(n),o=t&&pt(t);return s=>!!(i&&i(s)||Jt&&a&&a(s)||!Jt&&o&&o(s))}var v={isBold:q("bold"),isCompose:q("compose"),isMoveBackward:q("moveBackward"),isMoveForward:q("moveForward"),isDeleteBackward:q("deleteBackward"),isDeleteForward:q("deleteForward"),isDeleteLineBackward:q("deleteLineBackward"),isDeleteLineForward:q("deleteLineForward"),isDeleteWordBackward:q("deleteWordBackward"),isDeleteWordForward:q("deleteWordForward"),isExtendBackward:q("extendBackward"),isExtendForward:q("extendForward"),isExtendLineBackward:q("extendLineBackward"),isExtendLineForward:q("extendLineForward"),isItalic:q("italic"),isMoveLineBackward:q("moveLineBackward"),isMoveLineForward:q("moveLineForward"),isMoveWordBackward:q("moveWordBackward"),isMoveWordForward:q("moveWordForward"),isRedo:q("redo"),isSplitBlock:q("splitBlock"),isTransposeCharacter:q("transposeCharacter"),isUndo:q("undo")};function pi(r){let e,n,t,i,a,o,s,l;n=new Sn({props:{node:r[8],selection:r[9],decorations:r[26],Element:r[1],Leaf:r[2],Placeholder:r[3]}});let c=[r[29],{role:t=r[4]?void 0:"textbox"},{spellcheck:r[5]},{autocorrect:r[6]},{autocapitalize:r[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:i=!r[4]},{"z-index":a=-1}],d={};for(let h=0;h<c.length;h+=1)d=Me(d,c[h]);return{c(){e=ee("div"),z(n.$$.fragment),this.h()},l(h){e=te(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var u=oe(e);Y(n.$$.fragment,u),u.forEach(L),this.h()},h(){zt(e,d),Ht(e,"svelte-m59z04",!0)},m(h,u){A(h,e,u),H(n,e,null),r[42](e),o=!0,s||(l=[J(e,"beforeinput",function(){Q(r[25])&&r[25].apply(this,arguments)}),J(e,"keydown",function(){Q(r[23])&&r[23].apply(this,arguments)}),J(e,"input",function(){Q(r[24])&&r[24].apply(this,arguments)}),J(e,"focus",function(){Q(r[22])&&r[22].apply(this,arguments)}),J(e,"blur",function(){Q(r[21])&&r[21].apply(this,arguments)}),J(e,"click",function(){Q(r[20])&&r[20].apply(this,arguments)}),J(e,"compositionend",function(){Q(r[19])&&r[19].apply(this,arguments)}),J(e,"compositionupdate",function(){Q(r[18])&&r[18].apply(this,arguments)}),J(e,"compositionstart",function(){Q(r[17])&&r[17].apply(this,arguments)}),J(e,"paste",function(){Q(r[16])&&r[16].apply(this,arguments)}),J(e,"copy",function(){Q(r[15])&&r[15].apply(this,arguments)}),J(e,"cut",function(){Q(r[14])&&r[14].apply(this,arguments)}),J(e,"dragover",function(){Q(r[13])&&r[13].apply(this,arguments)}),J(e,"dragstart",function(){Q(r[12])&&r[12].apply(this,arguments)}),J(e,"drop",function(){Q(r[11])&&r[11].apply(this,arguments)}),J(e,"dragend",function(){Q(r[10])&&r[10].apply(this,arguments)})],s=!0)},p(h,u){r=h;const m={};u[0]&256&&(m.node=r[8]),u[0]&512&&(m.selection=r[9]),u[0]&67108864&&(m.decorations=r[26]),u[0]&2&&(m.Element=r[1]),u[0]&4&&(m.Leaf=r[2]),u[0]&8&&(m.Placeholder=r[3]),n.$set(m),zt(e,d=vn(c,[u[0]&536870912&&r[29],(!o||u[0]&16&&t!==(t=r[4]?void 0:"textbox"))&&{role:t},(!o||u[0]&32)&&{spellcheck:r[5]},(!o||u[0]&64)&&{autocorrect:r[6]},(!o||u[0]&128)&&{autocapitalize:r[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!o||u[0]&16&&i!==(i=!r[4]))&&{contenteditable:i},{"z-index":a}])),Ht(e,"svelte-m59z04",!0)},i(h){o||(p(n.$$.fragment,h),o=!0)},o(h){E(n.$$.fragment,h),o=!1},d(h){h&&L(e),V(n),r[42](null),s=!1,Un(l)}}}function Le(r,e){return ue(e)&&gt(r,e)}function $(r,e){return ue(e)&&gt(r,e,{editable:!0})}function Pn(r,e){if(qt.get(r))return!1;{const n=Le(r,e)&&he(e);return g.isVoid(r,n)}}function ki(r,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),Jn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function Ei(r,e,n){let t,i,a,o,s,l,c,d,h,u,m,_,y,S,b,O,K,U,C,ae,B,T;const kt=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let Et=Vt(e,kt),je,xe,{Element:bt=ii}=e,{Leaf:yt=li}=e,{Placeholder:Ct=fi}=e,{placeholder:$e}=e,{readOnly:Z=!1}=e,{autoFocus:Se=!1}=e,{decorate:Fe=dn}=e,{scrollSelectionIntoView:et=ki}=e,{ref:ie=void 0}=e,{spellcheck:Dt=!0}=e,{autocorrect:Lt="true"}=e,{autocapitalize:St="true"}=e,{onKeyDown:tt=()=>{}}=e;const Ft=cn();Ye(r,Ft,f=>n(41,xe=f));const In=fn(),He=hr(),An=un(),nt=gr();Ye(r,nt,f=>n(40,je=f));const D={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:!1,isDraggingInternally:!1,latestElement:null};let Oe=[],rt;function Ot(){l()}at(()=>{const f=ft(ie);return f&&(st.set(t,f),f.document.addEventListener("selectionchange",Ot)),Qe.set(t,ie),Ee.set(t,ie),ke.set(ie,t),()=>{Qe.delete(t),Ee.delete(t),f&&(st.delete(t),f.document.removeEventListener("selectionchange",Ot))}}),Yn(async()=>{const f=We(t),w=f?f.getSelection():null;if(D.isComposing||!w||!xt(t))return;const k=w.type!=="None";if(!k)return;const F=Qe.get(t);let P=!1;if(F.contains(w.anchorNode)&&F.contains(w.focusNode)&&(P=!0),k&&P&&i){const ce=ze(t,w,{exactMatch:!0,suppressThrow:!0});if(ce&&N.equals(ce,i))return}if(i&&!ur(t,i)){n(8,t.selection=ze(t,w,{exactMatch:!1,suppressThrow:!1}),t),n(9,i=t.selection),nt.set(i);return}n(35,D.isUpdatingSelection=!0,D),await Kt();const R=i&&Ze(t,i);R?(N.isBackward(i)?w.setBaseAndExtent(R.endContainer,R.endOffset,R.startContainer,R.startOffset):w.setBaseAndExtent(R.startContainer,R.startOffset,R.endContainer,R.endOffset),et(t,R)):w.removeAllRanges(),R&&ut&&se(t,t).focus(),n(35,D.isUpdatingSelection=!1,D)});function Mn(f){fe[f?"unshift":"push"](()=>{ie=f,n(0,ie)})}return r.$$set=f=>{e=Me(Me({},e),lt(f)),n(29,Et=Vt(e,kt)),"Element"in f&&n(1,bt=f.Element),"Leaf"in f&&n(2,yt=f.Leaf),"Placeholder"in f&&n(3,Ct=f.Placeholder),"placeholder"in f&&n(30,$e=f.placeholder),"readOnly"in f&&n(4,Z=f.readOnly),"autoFocus"in f&&n(31,Se=f.autoFocus),"decorate"in f&&n(32,Fe=f.decorate),"scrollSelectionIntoView"in f&&n(33,et=f.scrollSelectionIntoView),"ref"in f&&n(0,ie=f.ref),"spellcheck"in f&&n(5,Dt=f.spellcheck),"autocorrect"in f&&n(6,Lt=f.autocorrect),"autocapitalize"in f&&n(7,St=f.autocapitalize),"onKeyDown"in f&&n(34,tt=f.onKeyDown)},r.$$.update=()=>{if(r.$$.dirty[1]&1024&&n(8,t=xe),r.$$.dirty[1]&512&&n(9,i=je),r.$$.dirty[0]&256|r.$$.dirty[1]&2&&n(26,a=Fe([t,[]])),r.$$.dirty[0]&272&&qt.set(t,Z),r.$$.dirty[0]&16&&In.set(Z),r.$$.dirty[1]&2&&An.set(Fe),r.$$.dirty[0]&256|r.$$.dirty[1]&16&&n(39,o=()=>{if(!D.isComposing&&!D.isUpdatingSelection&&!D.isDraggingInternally){const f=We(t),{activeElement:w}=f,k=se(t,t),F=f.getSelection();if(w===k?(n(35,D.latestElement=w,D),ye.set(t,!0),He.set(!0)):(ye.delete(t),He.set(!1)),!F){W.deselect(t);return}const P=F.anchorNode,R=F.focusNode,ce=$(t,P)||Pn(t,P),Ve=$(t,R)||Pn(t,R);if(ce&&Ve){const it=ze(t,F,{exactMatch:!1,suppressThrow:!0});W.select(t,it)}}}),r.$$.dirty[1]&32&&n(24,d=f=>{for(const w of Oe)w();n(36,Oe.length=0,Oe)}),r.$$.dirty[0]&784|r.$$.dirty[1]&48&&n(25,c=f=>{if(!Z&&$(t,f.target)){const w=f.inputType,k=f.dataTransfer||f.data||void 0;if(w==="insertCompositionText"||w==="deleteCompositionText")return;let F=!1;if(w==="insertText"&&i&&N.isCollapsed(i)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&i.anchor.offset!==0){F=!0,t.marks&&(F=!1);const P=g.above(t,{at:i.anchor,match:R=>g.isInline(t,R),mode:"highest"});if(P){const[,R]=P;g.isEnd(t,i.anchor,R)&&(F=!1)}}if(F||f.preventDefault(),!w.startsWith("delete")||w.startsWith("deleteBy")){const[P]=f.getTargetRanges();if(P){const R=ze(t,P,{exactMatch:!1,suppressThrow:!1});(!i||!N.equals(i,R))&&W.select(t,R)}}if(i&&N.isExpanded(i)&&w.startsWith("delete")){const P=w.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:P});return}switch(w){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{w==="insertFromComposition"&&D.isComposing&&n(35,D.isComposing=!1,D),(k==null?void 0:k.constructor.name)==="DataTransfer"?t.insertData(k):typeof k=="string"&&(F?Oe.push(()=>g.insertText(t,k)):g.insertText(t,k));break}}}}),r.$$.dirty[0]&272|r.$$.dirty[1]&16&&n(22,u=f=>{if(!Z&&!D.isUpdatingSelection&&$(t,f.target)){const w=se(t,t),k=We(t);if(n(35,D.latestElement=k.activeElement,D),ut&&f.target!==w){w.focus();return}ye.set(t,!0),He.set(!0)}}),r.$$.dirty[0]&768|r.$$.dirty[1]&16&&n(19,y=f=>{if($(t,f.target)){n(35,D.isComposing=!1,D);const w=f.data;if(!dt&&!lr&&!ir&&!sr&&w&&g.insertText(t,w),i&&N.isCollapsed(i)){const k=i.anchor.path,F=ne.leaf(t,k);D.hasInsertPrefixInCompositon&&(n(35,D.hasInsertPrefixInCompositon=!1,D),g.withoutNormalizing(t,()=>{const P=F.text.replace(/^\uFEFF/,"");W.delete(t,{distance:F.text.length,reverse:!0}),W.insertText(t,P)}))}}}),r.$$.dirty[0]&256&&n(18,S=f=>{$(t,f.target)&&n(35,D.isComposing=!0,D)}),r.$$.dirty[0]&256&&n(17,b=f=>{if($(t,f.target)){const{selection:w,marks:k}=t;if(w){if(N.isExpanded(w)){g.deleteFragment(t);return}const F=g.above(t,{match:P=>g.isInline(t,P),mode:"highest"});if(F){const[,P]=F;if(g.isEnd(t,w.anchor,P)){const R=g.after(t,P);W.setSelection(t,{anchor:R,focus:R})}}k&&(n(35,D.hasInsertPrefixInCompositon=!0,D),W.insertNodes(t,Tt({text:"\uFEFF"},k),{select:!0}))}}}),r.$$.dirty[0]&272&&n(12,ae=f=>{if(!Z&&Le(t,f.target)){const w=he(f.target),k=Ce(w);if(g.isVoid(t,w)||g.void(t,{at:k,voids:!0})){const P=g.range(t,k);W.select(t,P)}n(35,D.isDraggingInternally=!0,D),t.setFragmentData(f.dataTransfer)}}),r.$$.dirty[0]&784|r.$$.dirty[1]&16&&n(11,B=f=>{if(!Z&&Le(t,f.target)){f.preventDefault();const w=i,k=fr(t,f),F=f.dataTransfer;W.select(t,k),D.isDraggingInternally&&(w&&!N.equals(w,k)&&!g.void(t,{at:k,voids:!0})&&W.delete(t,{at:w}),n(35,D.isDraggingInternally=!1,D)),t.insertData(F),xt(t)||cr(t)}}),r.$$.dirty[0]&272|r.$$.dirty[1]&16&&n(10,T=f=>{!Z&&D.isDraggingInternally&&Le(t,f.target)&&n(35,D.isDraggingInternally=!1,D)}),r.$$.dirty[0]&1073742080|r.$$.dirty[1]&18&&t.children.length===1&&Array.from(ne.texts(t)).length===1&&ne.string(t)===""&&!D.isComposing){const f=g.start(t,[]);n(26,a=[...Fe([t,[]]),{[Re]:!0,placeholder:$e,anchor:f,focus:f}])}r.$$.dirty[0]&1|r.$$.dirty[1]&65&&rt!==Se&&ie&&(Se&&ie.focus(),n(37,rt=Se)),r.$$.dirty[1]&256&&n(38,s=Xn(100,o)),r.$$.dirty[1]&128&&(l=Gn(0,!1,s)),r.$$.dirty[0]&784|r.$$.dirty[1]&24&&n(23,h=f=>{if(!Z&&!D.isComposing&&$(t,f.target)){const w=t.children[i!==null?i.focus.path[0]:0],k=mn(ne.string(w))==="rtl";if(v.isRedo(f)){f.preventDefault();const F=t;typeof F.redo=="function"&&F.redo()}else if(v.isUndo(f)){f.preventDefault();const F=t;typeof F.undo=="function"&&F.undo()}else if(v.isMoveLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",reverse:!0});else if(v.isMoveLineForward(f))f.preventDefault(),W.move(t,{unit:"line"});else if(v.isExtendLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus",reverse:!0});else if(v.isExtendLineForward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus"});else if(v.isMoveBackward(f))f.preventDefault(),i&&N.isCollapsed(i)?W.move(t,{reverse:!k}):W.collapse(t,{edge:"start"});else if(v.isMoveForward(f))f.preventDefault(),i&&N.isCollapsed(i)?W.move(t,{reverse:k}):W.collapse(t,{edge:"end"});else if(v.isMoveWordBackward(f))f.preventDefault(),i&&N.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:!k});else if(v.isMoveWordForward(f))f.preventDefault(),i&&N.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:k});else if(!jt)v.isBold(f)||v.isItalic(f)||v.isTransposeCharacter(f)?f.preventDefault():v.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):v.isDeleteBackward(f)?(f.preventDefault(),i&&N.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):v.isDeleteForward(f)?(f.preventDefault(),i&&N.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):v.isDeleteLineBackward(f)?(f.preventDefault(),i&&N.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):v.isDeleteLineForward(f)?(f.preventDefault(),i&&N.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):v.isDeleteWordBackward(f)?(f.preventDefault(),i&&N.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):v.isDeleteWordForward(f)&&(f.preventDefault(),i&&N.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((Qt||dt)&&i&&(v.isDeleteBackward(f)||v.isDeleteForward(f))&&N.isCollapsed(i)){const F=ne.parent(t,i.anchor.path);if(Xe.isElement(F)&&g.isVoid(t,F)&&g.isInline(t,F)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return tt(f)}}}),r.$$.dirty[0]&272|r.$$.dirty[1]&16&&n(21,m=f=>{if(Z||D.isUpdatingSelection||!$(t,f.target))return;const w=We(t);if(D.latestElement===w.activeElement)return;const k=f.relatedTarget,F=se(t,t);if(k!==F&&!(re(k)&&k.hasAttribute("data-slate-spacer"))){if(k!=null&&ue(k)&&gt(t,k)){const P=he(k);if(Xe.isElement(P)&&!t.isVoid(P))return}if(dt){const P=w.getSelection();P==null||P.removeAllRanges()}ye.delete(t),He.set(!1)}}),r.$$.dirty[0]&272&&n(20,_=f=>{if(!Z&&Le(t,f.target)&&ue(f.target)){const w=he(f.target),k=Ce(w);if(g.hasPath(t,k)&&ne.get(t,k)===w){const P=g.start(t,k),R=g.end(t,k),ce=g.void(t,{at:P}),Ve=g.void(t,{at:R});if(ce&&Ve&&pe.equals(ce[1],Ve[1])){const it=g.range(t,P);W.select(t,it)}}}}),r.$$.dirty[0]&272&&n(16,O=f=>{!Z&&$(t,f.target)&&(!jt||xn(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}),r.$$.dirty[0]&256&&n(15,K=f=>{$(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}),r.$$.dirty[0]&784&&n(14,U=f=>{if(!Z&&$(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),i))if(N.isExpanded(i))g.deleteFragment(t);else{const w=ne.parent(t,i.anchor.path);g.isVoid(t,w)&&W.delete(t)}}),r.$$.dirty[0]&256&&n(13,C=f=>{if(Le(t,f.target)){const w=he(f.target);g.isVoid(t,w)&&f.preventDefault()}})},[ie,bt,yt,Ct,Z,Dt,Lt,St,t,i,T,B,ae,C,U,K,O,b,S,y,_,m,u,h,d,c,a,Ft,nt,Et,$e,Se,Fe,et,tt,D,Oe,rt,s,o,je,xe,Mn]}class Si extends j{constructor(e){super();x(this,e,Ei,pi,Ne,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function Bn(r,e){const n=(e.top+e.bottom)/2;return r.top<=n&&r.bottom>=n}function Tn(r,e,n){const t=Ze(r,e).getBoundingClientRect(),i=Ze(r,n).getBoundingClientRect();return Bn(t,i)&&Bn(i,t)}function bi(r,e){const n=g.range(r,N.end(e)),t=Array.from(g.positions(r,{at:e}));let i=0,a=t.length,o=Math.floor(a/2);if(Tn(r,g.range(r,t[i]),n))return g.range(r,t[i],n);if(t.length<2)return g.range(r,t[t.length-1],n);for(;o!==t.length&&o!==i;)Tn(r,g.range(r,t[o]),n)?a=o:i=o,o=Math.floor((i+a)/2);return g.range(r,t[a],n)}function Fi(r){const e=r,{apply:n,onChange:t,deleteBackward:i}=e;return be.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return i(a);if(r.selection&&N.isCollapsed(r.selection)){const o=g.above(r,{match:s=>g.isBlock(r,s),at:r.selection});if(o){const[,s]=o,l=g.range(r,s,r.selection.anchor),c=bi(e,l);N.isCollapsed(c)||W.delete(r,{at:c})}}},e.apply=a=>{const o=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=de(s);o.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:pe.parent(a.path)})){const c=de(s);o.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:pe.common(pe.parent(a.path),pe.parent(a.newPath))})){const c=de(s);o.push([l,c])}break}}n(a);for(const[s,l]of o){const[c]=g.node(e,s);ct.set(c,l)}},e.setFragmentData=a=>{const{selection:o}=e;if(!o)return;const[s,l]=N.edges(o),c=g.void(e,{at:s.path}),d=g.void(e,{at:l.path});if(N.isCollapsed(o)&&!c)return;const h=Ze(e,o);let u=h.cloneContents(),m=u.childNodes[0];if(u.childNodes.forEach(O=>{O.textContent&&O.textContent.trim()!==""&&(m=O)}),d){const[O]=d,K=h.cloneRange(),U=se(e,O);K.setEndAfter(U),u=K.cloneContents()}if(c&&(m=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(O=>{const K=O.getAttribute("data-slate-zero-width")==="n";O.textContent=K?`
`:""}),Yt(m)){const O=document.createElement("span");O.style.whiteSpace="pre",O.appendChild(m),u.appendChild(O),m=O}const _=e.getFragment(),y=JSON.stringify(_),S=window.btoa(encodeURIComponent(y));m.setAttribute("data-slate-fragment",S),a.setData("application/x-slate-fragment",S);const b=document.createElement("div");return b.appendChild(u),b.setAttribute("hidden","true"),document.body.appendChild(b),a.setData("text/html",b.innerHTML),a.setData("text/plain",Gt(b)),document.body.removeChild(b),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const o=a.getData("application/x-slate-fragment")||rr(a);if(o){const s=decodeURIComponent(window.atob(o)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const o=a.getData("text/plain");if(o){const s=o.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&W.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=vt.get(e);a&&Kt().then(a),t()},e}export{Si as E,Di as S,cn as g,Li as i,Fi as w};
