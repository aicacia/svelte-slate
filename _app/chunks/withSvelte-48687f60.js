var Tn=Object.defineProperty;var Ye=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var Nt=(r,e,n)=>e in r?Tn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Bt=(r,e)=>{for(var n in e||(e={}))Pt.call(e,n)&&Nt(r,n,e[n]);if(Ye)for(var n of Ye(e))Ot.call(e,n)&&Nt(r,n,e[n]);return r};var ct=(r,e)=>{var n={};for(var t in r)Pt.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&Ye)for(var t of Ye(r))e.indexOf(t)<0&&Ot.call(r,t)&&(n[t]=r[t]);return n};import{V as h,aa as O,ab as In,S as Z,i as j,s as ue,F as Ae,J as Me,K as Re,L as We,q as k,o as y,r as pe,D as ke,ac as ze,ad as An,ae as Ee,t as Xe,h as Ge,g as A,d as S,e as ee,c as te,a as ie,b as ae,I as Tt,j as It,M as be,l as I,n as Y,p as X,af as ye,w as W,x as q,y as z,B as H,ag as ne,ah as Mn,_ as At,P as de,Z as Je,ai as Mt,aj as Rt,v as ut,ak as Rn,Y as Qe,W as Ze,N as he,C as x,O as je,Q as le,R as Ce,z as He,al as Wn,am as zn,T as G,U as J,an as Hn,u as Vn,E as Wt,X as R,ao as Kn,ap as vn}from"./vendor-ad8b7496.js";const xe=new WeakMap,$e=new WeakMap,dt=new WeakMap,et=new WeakMap,De=new WeakMap,Le=new WeakMap,ht=new WeakMap,Se=new WeakMap,zt=new WeakMap,Fe=new WeakMap,Ht=new WeakMap,Ve=Symbol("placeholder");let Un=0;class qn{constructor(){this.id=`${Un++}`}toString(){return this.id}}function gt(r){return r&&r.ownerDocument&&r.ownerDocument.defaultView||null}function Yn(r){return ge(r)&&r.nodeType===8}function re(r){return ge(r)&&r.nodeType===1}function ge(r){const e=gt(r);return!!e&&r instanceof e.Node}function Vt(r){const e=r&&r.anchorNode&&gt(r.anchorNode);return!!e&&r instanceof e.Selection}function Kt(r){return ge(r)&&r.nodeType===3}function Xn(r){return r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1}function Gn(r){let[e,n]=r;if(re(e)&&e.childNodes.length){let t=n===e.childNodes.length,o=t?n-1:n;for([e,o]=vt(e,o,t?"backward":"forward"),t=o<n;re(e)&&e.childNodes.length;){const l=t?e.childNodes.length-1:0;e=Qn(e,l,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function Jn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function vt(r,e,n){const{childNodes:t}=r;let o=t[e],l=e,a=!1,s=!1;for(;(Yn(o)||re(o)&&o.childNodes.length===0||re(o)&&o.getAttribute("contenteditable")==="false")&&!(a&&s);){if(l>=t.length){a=!0,l=e-1,n="backward";continue}if(l<0){s=!0,l=e+1,n="forward";continue}o=t[l],e=l,l+=n==="forward"?1:-1}return[o,e]}function Qn(r,e,n){const[t]=vt(r,e,n);return t}function Ut(r){let e="";if(Kt(r)&&r.nodeValue)return r.nodeValue;if(re(r)){for(const t of Array.from(r.childNodes))e+=Ut(t);const n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e}const Zn=/data-slate-fragment="(.+?)"/m;function jn(r){const e=r.getData("text/html"),[,n]=e.match(Zn)||[];return n}const xn=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,qt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const mt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),_t=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),$n=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Yt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),er=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),tr=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),nr=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Xt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Gt=!er&&!$n&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function wt(r){const e=dt.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function me(r){let e=ht.get(r);return e||(e=new qn,ht.set(r,e)),e}function Pe(r){const e=[];let n=r;for(;;){const t=$e.get(n);if(t==null){if(h.isEditor(n))return e;break}const o=xe.get(n);if(o==null)break;e.unshift(o),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(r)}`)}function Ke(r){const e=fe(r,r),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function Jt(r){return!!Fe.get(r)}function rr(r){const e=fe(r,r),n=Ke(r);Fe.set(r,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function pt(r,e,n={}){const{editable:t=!1}=n,o=fe(r,r);let l;try{l=re(e)?e:e.parentElement}catch(a){if(!a.message.includes('Permission denied to access property "nodeType"'))throw a}return l?l.closest("[data-svelte-editor]")===o&&(!t||l.isContentEditable?!0:typeof l.isContentEditable=="boolean"&&l.closest('[contenteditable="false"]')===o||!!l.getAttribute("data-slate-zero-width")):!1}function fe(r,e,n=!0){const t=Se.get(r),o=h.isEditor(e)?et.get(r):t==null?void 0:t.get(me(e));if(!o&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return o}function Qt(r,e,n=!0){const[t]=h.node(r,e.path),o=fe(r,t,n);let l;h.void(r,{at:e})&&(e={path:e.path,offset:0});const a="[data-slate-string], [data-slate-zero-width]",s=o?Array.from(o.querySelectorAll(a)):[];let i=0;for(const f of s){const u=f.childNodes[0];if(u==null||u.textContent==null)continue;const{length:g}=u.textContent,d=f.getAttribute("data-slate-length"),_=d==null?g:parseInt(d,10),m=i+_;if(e.offset<=m){const w=Math.min(g,Math.max(0,e.offset-i));l=[u,w];break}i=m}if(!l&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return l}function tt(r,e,n=!0){const{anchor:t,focus:o}=e,l=O.isBackward(e),a=Qt(r,t,n);if(!a)return;const s=O.isCollapsed(e)?a:Qt(r,o),f=wt(r).document.createRange(),[u,g]=l?s:a,[d,_]=l?a:s,w=!!(re(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),C=!!(re(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return f.setStart(u,w?1:g),f.setEnd(d,C?1:_),f}function _e(r){let e=re(r)?r:r.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?De.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function or(r,e){const{clientX:n,clientY:t,target:o}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const l=_e(e.target),a=Pe(l);if(h.isVoid(r,l)){const u=o.getBoundingClientRect(),g=r.isInline(l)?n-u.left<u.left+u.width-n:t-u.top<u.top+u.height-t,d=h.point(r,a,{edge:g?"start":"end"}),_=g?h.before(r,d):h.after(r,d);if(_)return h.range(r,_)}let s;const{document:i}=wt(r);if(i.caretRangeFromPoint)s=i.caretRangeFromPoint(n,t);else{const u=i.caretPositionFromPoint(n,t);u&&(s=i.createRange(),s.setStart(u.offsetNode,u.offset),s.setEnd(u.offsetNode,u.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return ve(r,s,{exactMatch:!1,suppressThrow:!1})}function Zt(r,e,n){var d;const{exactMatch:t,suppressThrow:o}=n,[l,a]=t?e:Gn(e),s=l.parentNode;let i=null,f=0;if(s){const _=s.closest('[data-slate-void="true"]');let m=s.closest("[data-slate-leaf]"),w=null;if(m){i=m.closest('[data-slate-node="text"]');const C=wt(r).document.createRange();C.setStart(i,0),C.setEnd(l,a);const P=C.cloneContents();[...Array.prototype.slice.call(P.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(P.querySelectorAll("[contenteditable=false]"))].forEach(U=>{U.parentNode.removeChild(U)}),f=P.textContent.length,w=i}else _&&(m=_.querySelector("[data-slate-leaf]"),m?(i=m.closest('[data-slate-node="text"]'),w=m,f=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(E=>{f-=E.textContent.length})):f=1);w&&f===w.textContent.length&&(s.hasAttribute("data-slate-zero-width")||mt&&((d=w.textContent)==null?void 0:d.endsWith(`

`)))&&f--}if(!i){if(o)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const u=_e(i);return{path:Pe(u),offset:f}}function ve(r,e,n){const{exactMatch:t,suppressThrow:o}=n,l=Vt(e)?e.anchorNode:e.startContainer;let a,s,i,f,u;if(l&&(Vt(e)?(a=e.anchorNode,s=e.anchorOffset,i=e.focusNode,f=e.focusOffset,Yt&&Jn()?u=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:u=e.isCollapsed):(a=e.startContainer,s=e.startOffset,i=e.endContainer,f=e.endOffset,u=e.collapsed)),a==null||i==null||s==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const g=Zt(r,[a,s],{exactMatch:t,suppressThrow:o});if(!g)return null;const d=u?g:Zt(r,[i,f],{exactMatch:t,suppressThrow:o});if(!d)return null;let _={anchor:g,focus:d};return O.isExpanded(_)&&O.isForward(_)&&re(i)&&h.void(r,{at:_.focus,mode:"highest"})&&(_=h.unhangRange(r,_,{voids:!0})),_}function ir(r,e){const{anchor:n,focus:t}=e;return h.hasPath(r,n.path)&&h.hasPath(r,t.path)}function jt(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let o=0;o<r.length;o++){const l=r[o],a=e[o],n=l,{anchor:s,focus:i}=n,f=ct(n,["anchor","focus"]),t=a,{anchor:u,focus:g}=t,d=ct(t,["anchor","focus"]);if(!O.equals(l,a)||l[Ve]!==a[Ve]||!In(f,d))return!1}return!0}function xt(r,e){return r===e||!!r&&!!e&&O.equals(r,e)}function ar(r){let e;const n=r[7].default,t=Ae(n,r,r[6],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,l){t&&t.m(o,l),e=!0},p(o,[l]){t&&t.p&&(!e||l&64)&&Me(t,n,o,o[6],e?We(n,o[6],l,null):Re(o[6]),null)},i(o){e||(k(t,o),e=!0)},o(o){y(t,o),e=!1},d(o){t&&t.d(o)}}}const $t={},en={},tn={},nn={},rn={};function on(){const r=ze($t);if(!r)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return r}function we(){return An(on())}function an(){const r=ze(en);if(!r)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return r}function lr(){const r=ze(tn);if(!r)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return r}function ln(){const r=ze(nn);if(!r)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return r}function sr(){const r=ze(rn);if(!r)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return r}function sn(r){return[]}function fr(r,e,n){let{$$slots:t={},$$scope:o}=e,{editor:l}=e,{value:a=l.children}=e,{selection:s=l.selection}=e;const i=ke(l);pe($t,i);const f=ke(!0);pe(en,f);const u=ke(!1);pe(tn,u);const g=ke(sn);pe(nn,g);const d=ke(l.selection);pe(rn,d);function _(){l.children!==a&&n(0,a=l.children),n(1,s=l.selection)}Ht.set(l,_);let m=l,w,E;return r.$$set=C=>{"editor"in C&&n(2,l=C.editor),"value"in C&&n(0,a=C.value),"selection"in C&&n(1,s=C.selection),"$$scope"in C&&n(6,o=C.$$scope)},r.$$.update=()=>{r.$$.dirty&12&&l!==m&&(n(3,m=l),i.set(l)),r.$$.dirty&17&&w!==a&&(i.update(C=>(C.children=a,C)),n(4,w=a)),r.$$.dirty&38&&(xt(E,s)||(i.set(l),d.set(s),n(5,E=s)))},[a,s,l,m,w,E,o,t]}class ko extends Z{constructor(e){super();j(this,e,fr,ar,ue,{editor:2,value:0,selection:1})}}const fn="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",cn="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",cr=new RegExp("^[^"+cn+"]*["+fn+"]"),ur=new RegExp("^[^"+fn+"]*["+cn+"]");function un(r){const e=String(r||"");return cr.test(e)?"rtl":ur.test(e)?"ltr":"neutral"}function dn(r){let e=`
`,n;return{c(){n=Xe(e)},l(t){n=Ge(t,e)},m(t,o){A(t,n,o)},d(t){t&&S(n)}}}function dr(r){let e,n,t=r[1]&&dn();return{c(){e=ee("span"),n=Xe(r[0]),t&&t.c(),this.h()},l(o){e=te(o,"SPAN",{"data-slate-string":!0});var l=ie(e);n=Ge(l,r[0]),t&&t.l(l),l.forEach(S),this.h()},h(){ae(e,"data-slate-string","true")},m(o,l){A(o,e,l),Tt(e,n),t&&t.m(e,null)},p(o,[l]){l&1&&It(n,o[0]),o[1]?t||(t=dn(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:be,o:be,d(o){o&&S(e),t&&t.d()}}}function hr(r,e,n){let{text:t}=e,{isTrailing:o=!1}=e;return r.$$set=l=>{"text"in l&&n(0,t=l.text),"isTrailing"in l&&n(1,o=l.isTrailing)},[t,o]}class gr extends Z{constructor(e){super();j(this,e,hr,dr,Ee,{text:0,isTrailing:1})}}function hn(r){let e;return{c(){e=ee("br")},l(n){e=te(n,"BR",{})},m(n,t){A(n,e,t)},d(n){n&&S(e)}}}function mr(r){let e,n="\uFEFF",t,o,l=r[1]&&hn();return{c(){e=ee("span"),t=Xe(n),l&&l.c(),this.h()},l(a){e=te(a,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ie(e);t=Ge(s,n),l&&l.l(s),s.forEach(S),this.h()},h(){ae(e,"data-slate-zero-width",o=r[1]?"n":"z"),ae(e,"data-slate-length",r[0])},m(a,s){A(a,e,s),Tt(e,t),l&&l.m(e,null)},p(a,[s]){a[1]?l||(l=hn(),l.c(),l.m(e,null)):l&&(l.d(1),l=null),s&2&&o!==(o=a[1]?"n":"z")&&ae(e,"data-slate-zero-width",o),s&1&&ae(e,"data-slate-length",a[0])},i:be,o:be,d(a){a&&S(e),l&&l.d()}}}function _r(r,e,n){let{length:t=0}=e,{isLineBreak:o=!1}=e;return r.$$set=l=>{"length"in l&&n(0,t=l.length),"isLineBreak"in l&&n(1,o=l.isLineBreak)},[t,o]}class kt extends Z{constructor(e){super();j(this,e,_r,mr,Ee,{length:0,isLineBreak:1})}}function wr(r){let e,n;return e=new gr({props:{isTrailing:r[5],text:r[0].text}}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.isTrailing=t[5]),o&1&&(l.text=t[0].text),e.$set(l)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function pr(r){let e,n;return e=new kt({}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p:be,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function kr(r){let e,n;return e=new kt({props:{isLineBreak:!0}}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p:be,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Er(r){let e,n;return e=new kt({props:{length:ne.string(r[1]).length}}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.length=ne.string(t[1]).length),e.$set(l)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function br(r){let e,n,t,o;const l=[Er,kr,pr,wr],a=[];function s(i,f){return i[4]?0:i[3]?1:i[2]?2:3}return e=s(r),n=a[e]=l[e](r),{c(){n.c(),t=I()},l(i){n.l(i),t=I()},m(i,f){a[e].m(i,f),A(i,t,f),o=!0},p(i,[f]){let u=e;e=s(i),e===u?a[e].p(i,f):(Y(),y(a[u],1,1,()=>{a[u]=null}),X(),n=a[e],n?n.p(i,f):(n=a[e]=l[e](i),n.c()),k(n,1),n.m(t.parentNode,t))},i(i){o||(k(n),o=!0)},o(i){y(n),o=!1},d(i){a[e].d(i),i&&S(t)}}}function yr(r,e,n){let t,o,l,a,s,i,{isLast:f}=e,{leaf:u}=e,{parent:g}=e,{text:d}=e;const _=we();return r.$$set=m=>{"isLast"in m&&n(6,f=m.isLast),"leaf"in m&&n(0,u=m.leaf),"parent"in m&&n(1,g=m.parent),"text"in m&&n(7,d=m.text)},r.$$.update=()=>{r.$$.dirty&65&&n(5,t=f&&u.text.slice(-1)===`
`),r.$$.dirty&128&&n(9,o=Pe(d)),r.$$.dirty&512&&n(8,l=ye.parent(o)),r.$$.dirty&2&&n(4,a=_.isVoid(g)),r.$$.dirty&1&&n(2,s=u.text===""),r.$$.dirty&390&&n(3,i=s&&g.children[g.children.length-1]===d&&!_.isInline(g)&&h.string(_,l)==="")},[u,g,s,i,a,t,f,d,l,o]}class Cr extends Z{constructor(e){super();j(this,e,yr,br,Ee,{isLast:6,leaf:0,parent:1,text:7})}}function gn(r){let e,n,t,o;function l(i){r[7](i)}var a=r[4];function s(i){let f={"data-slate-placeholder":!0,style:"position: absolute; pointer-events: none; width: 100%; max-width: 100%; display: block; opacity: 0.333; user-select: none; text-decoration: none;",contenteditable:"false",$$slots:{default:[Dr]},$$scope:{ctx:i}};return i[6]!==void 0&&(f.clientHeight=i[6]),{props:f}}return a&&(e=new a(s(r)),de.push(()=>Je(e,"clientHeight",l))),{c(){e&&W(e.$$.fragment),t=I()},l(i){e&&q(e.$$.fragment,i),t=I()},m(i,f){e&&z(e,i,f),A(i,t,f),o=!0},p(i,f){const u={};if(f&514&&(u.$$scope={dirty:f,ctx:i}),!n&&f&64&&(n=!0,u.clientHeight=i[6],At(()=>n=!1)),a!==(a=i[4])){if(e){Y();const g=e;y(g.$$.fragment,1,0,()=>{H(g,1)}),X()}a?(e=new a(s(i)),de.push(()=>Je(e,"clientHeight",l)),W(e.$$.fragment),k(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else a&&e.$set(u)},i(i){o||(e&&k(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&S(t),e&&H(e,i)}}}function Dr(r){let e=r[1].placeholder+"",n;return{c(){n=Xe(e)},l(t){n=Ge(t,e)},m(t,o){A(t,n,o)},p(t,o){o&2&&e!==(e=t[1].placeholder+"")&&It(n,e)},d(t){t&&S(n)}}}function Lr(r){let e,n,t,o=Ve in r[1]&&gn(r);return n=new Cr({props:{isLast:r[0],leaf:r[1],parent:r[2],text:r[3]}}),{c(){o&&o.c(),e=I(),W(n.$$.fragment)},l(l){o&&o.l(l),e=I(),q(n.$$.fragment,l)},m(l,a){o&&o.m(l,a),A(l,e,a),z(n,l,a),t=!0},p(l,a){Ve in l[1]?o?(o.p(l,a),a&2&&k(o,1)):(o=gn(l),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(Y(),y(o,1,1,()=>{o=null}),X());const s={};a&1&&(s.isLast=l[0]),a&2&&(s.leaf=l[1]),a&4&&(s.parent=l[2]),a&8&&(s.text=l[3]),n.$set(s)},i(l){t||(k(o),k(n.$$.fragment,l),t=!0)},o(l){y(o),y(n.$$.fragment,l),t=!1},d(l){o&&o.d(l),l&&S(e),H(n,l)}}}function Sr(r){let e,n,t;var o=r[5];function l(a){return{props:{leaf:a[1],"data-slate-leaf":"true",$$slots:{default:[Lr]},$$scope:{ctx:a}}}}return o&&(e=new o(l(r))),{c(){e&&W(e.$$.fragment),n=I()},l(a){e&&q(e.$$.fragment,a),n=I()},m(a,s){e&&z(e,a,s),A(a,n,s),t=!0},p(a,[s]){const i={};if(s&2&&(i.leaf=a[1]),s&607&&(i.$$scope={dirty:s,ctx:a}),o!==(o=a[5])){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}o?(e=new o(l(a)),W(e.$$.fragment),k(e.$$.fragment,1),z(e,n.parentNode,n)):e=null}else o&&e.$set(i)},i(a){t||(e&&k(e.$$.fragment,a),t=!0)},o(a){e&&y(e.$$.fragment,a),t=!1},d(a){a&&S(n),e&&H(e,a)}}}function Fr(r,e,n){let{isLast:t}=e,{leaf:o}=e,{parent:l}=e,{text:a}=e,{Placeholder:s}=e,{Leaf:i}=e,f,u;Mn(()=>{if(Xt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="")}});function g(d){f=d,n(6,f)}return r.$$set=d=>{"isLast"in d&&n(0,t=d.isLast),"leaf"in d&&n(1,o=d.leaf),"parent"in d&&n(2,l=d.parent),"text"in d&&n(3,a=d.text),"Placeholder"in d&&n(4,s=d.Placeholder),"Leaf"in d&&n(5,i=d.Leaf)},r.$$.update=()=>{if(r.$$.dirty&64&&f!==u&&Xt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${f}px`)}},[t,o,l,a,s,i,f,g]}class mn extends Z{constructor(e){super();j(this,e,Fr,Sr,Ee,{isLast:0,leaf:1,parent:2,text:3,Placeholder:4,Leaf:5})}}function _n(r,e,n){const t=r.slice();return t[11]=e[n],t[13]=n,t}function wn(r,e){let n,t,o,l;var a=mn;function s(i){return{props:{Placeholder:i[3],Leaf:i[4],isLast:i[0]&&i[13]===i[7].length-1,parent:i[1],leaf:i[11],text:i[2]}}}return a&&(t=new a(s(e))),{key:r,first:null,c(){n=I(),t&&W(t.$$.fragment),o=I(),this.h()},l(i){n=I(),t&&q(t.$$.fragment,i),o=I(),this.h()},h(){this.first=n},m(i,f){A(i,n,f),t&&z(t,i,f),A(i,o,f),l=!0},p(i,f){e=i;const u={};if(f&8&&(u.Placeholder=e[3]),f&16&&(u.Leaf=e[4]),f&129&&(u.isLast=e[0]&&e[13]===e[7].length-1),f&2&&(u.parent=e[1]),f&128&&(u.leaf=e[11]),f&4&&(u.text=e[2]),a!==(a=mn)){if(t){Y();const g=t;y(g.$$.fragment,1,0,()=>{H(g,1)}),X()}a?(t=new a(s(e)),W(t.$$.fragment),k(t.$$.fragment,1),z(t,o.parentNode,o)):t=null}else a&&t.$set(u)},i(i){l||(t&&k(t.$$.fragment,i),l=!0)},o(i){t&&y(t.$$.fragment,i),l=!1},d(i){i&&S(n),i&&S(o),t&&H(t,i)}}}function Pr(r){let e,n=[],t=new Map,o,l=r[7];const a=s=>`${s[6]}-${s[13]}`;for(let s=0;s<l.length;s+=1){let i=_n(r,l,s),f=a(i);t.set(f,n[s]=wn(f,i))}return{c(){e=ee("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=te(s,"SPAN",{"data-slate-node":!0});var i=ie(e);for(let f=0;f<n.length;f+=1)n[f].l(i);i.forEach(S),this.h()},h(){ae(e,"data-slate-node","text")},m(s,i){A(s,e,i);for(let f=0;f<n.length;f+=1)n[f].m(e,null);r[9](e),o=!0},p(s,[i]){i&223&&(l=s[7],Y(),n=Mt(n,i,a,1,s,l,t,e,Rt,wn,null,_n),X())},i(s){if(!o){for(let i=0;i<l.length;i+=1)k(n[i]);o=!0}},o(s){for(let i=0;i<n.length;i+=1)y(n[i]);o=!1},d(s){s&&S(e);for(let i=0;i<n.length;i+=1)n[i].d();r[9](null)}}}function Or(r,e,n){let t,o,{decorations:l}=e,{isLast:a}=e,{parent:s}=e,{text:i}=e,{Placeholder:f}=e,{Leaf:u}=e;const g=we();let d;ut(()=>{var m;(m=Se.get(g))==null||m.set(o,d),Le.set(i,d),De.set(d,i)});function _(m){de[m?"unshift":"push"](()=>{d=m,n(5,d)})}return r.$$set=m=>{"decorations"in m&&n(8,l=m.decorations),"isLast"in m&&n(0,a=m.isLast),"parent"in m&&n(1,s=m.parent),"text"in m&&n(2,i=m.text),"Placeholder"in m&&n(3,f=m.Placeholder),"Leaf"in m&&n(4,u=m.Leaf)},r.$$.update=()=>{var m;r.$$.dirty&260&&n(7,t=Rn.decorations(i,l)),r.$$.dirty&4&&n(6,o=me(i)),r.$$.dirty&100&&d&&((m=Se.get(g))==null||m.set(o,d),Le.set(i,d),De.set(d,i))},[a,s,i,f,u,d,o,t,l,_]}class Oe extends Z{constructor(e){super();j(this,e,Or,Pr,Ee,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Nr(r){let e,n;return e=new yn({props:{node:r[0],decorations:r[1],selection:r[2],Element:r[3],Placeholder:r[5],Leaf:r[4]}}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.node=t[0]),o&2&&(l.decorations=t[1]),o&4&&(l.selection=t[2]),o&8&&(l.Element=t[3]),o&32&&(l.Placeholder=t[5]),o&16&&(l.Leaf=t[4]),e.$set(l)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Br(r){let e,n,t,o;const l=[Ir,Tr],a=[];function s(i,f){return i[7]?0:1}return e=s(r),n=a[e]=l[e](r),{c(){n.c(),t=I()},l(i){n.l(i),t=I()},m(i,f){a[e].m(i,f),A(i,t,f),o=!0},p(i,f){let u=e;e=s(i),e===u?a[e].p(i,f):(Y(),y(a[u],1,1,()=>{a[u]=null}),X(),n=a[e],n?n.p(i,f):(n=a[e]=l[e](i),n.c()),k(n,1),n.m(t.parentNode,t))},i(i){o||(k(n),o=!0)},o(i){y(n),o=!1},d(i){a[e].d(i),i&&S(t)}}}function Tr(r){let e,n,t;var o=Oe;function l(a){return{props:{Placeholder:a[5],Leaf:a[4],decorations:a[1],isLast:!1,parent:a[0],text:a[10]}}}return o&&(n=new o(l(r))),{c(){e=ee("div"),n&&W(n.$$.fragment),this.h()},l(a){e=te(a,"DIV",{"data-slate-spacer":!0,class:!0});var s=ie(e);n&&q(n.$$.fragment,s),s.forEach(S),this.h()},h(){ae(e,"data-slate-spacer",""),ae(e,"class","svelte-yux06v")},m(a,s){A(a,e,s),n&&z(n,e,null),t=!0},p(a,s){const i={};if(s&32&&(i.Placeholder=a[5]),s&16&&(i.Leaf=a[4]),s&2&&(i.decorations=a[1]),s&1&&(i.parent=a[0]),s&1024&&(i.text=a[10]),o!==(o=Oe)){if(n){Y();const f=n;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}o?(n=new o(l(a)),W(n.$$.fragment),k(n.$$.fragment,1),z(n,e,null)):n=null}else o&&n.$set(i)},i(a){t||(n&&k(n.$$.fragment,a),t=!0)},o(a){n&&y(n.$$.fragment,a),t=!1},d(a){a&&S(e),n&&H(n)}}}function Ir(r){let e,n,t;var o=Oe;function l(a){return{props:{Placeholder:a[5],Leaf:a[4],decorations:a[1],isLast:!1,parent:a[0],text:a[10]}}}return o&&(n=new o(l(r))),{c(){e=ee("span"),n&&W(n.$$.fragment),this.h()},l(a){e=te(a,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ie(e);n&&q(n.$$.fragment,s),s.forEach(S),this.h()},h(){ae(e,"data-slate-spacer",""),ae(e,"class","svelte-yux06v")},m(a,s){A(a,e,s),n&&z(n,e,null),t=!0},p(a,s){const i={};if(s&32&&(i.Placeholder=a[5]),s&16&&(i.Leaf=a[4]),s&2&&(i.decorations=a[1]),s&1&&(i.parent=a[0]),s&1024&&(i.text=a[10]),o!==(o=Oe)){if(n){Y();const f=n;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}o?(n=new o(l(a)),W(n.$$.fragment),k(n.$$.fragment,1),z(n,e,null)):n=null}else o&&n.$set(i)},i(a){t||(n&&k(n.$$.fragment,a),t=!0)},o(a){n&&y(n.$$.fragment,a),t=!1},d(a){a&&S(e),n&&H(n)}}}function Ar(r){let e,n,t,o;const l=[Br,Nr],a=[];function s(i,f){return i[8]?0:1}return e=s(r),n=a[e]=l[e](r),{c(){n.c(),t=I()},l(i){n.l(i),t=I()},m(i,f){a[e].m(i,f),A(i,t,f),o=!0},p(i,f){let u=e;e=s(i),e===u?a[e].p(i,f):(Y(),y(a[u],1,1,()=>{a[u]=null}),X(),n=a[e],n?n.p(i,f):(n=a[e]=l[e](i),n.c()),k(n,1),n.m(t.parentNode,t))},i(i){o||(k(n),o=!0)},o(i){y(n),o=!1},d(i){a[e].d(i),i&&S(t)}}}function Mr(r){let e,n,t,o;function l(i){r[18](i)}var a=r[3];function s(i){let f={"data-slate-node":"element","data-slate-void":i[8],"data-slate-inline":i[7],contenteditable:i[11],element:i[0],dir:i[9],$$slots:{default:[Ar]},$$scope:{ctx:i}};return i[6]!==void 0&&(f.ref=i[6]),{props:f}}return a&&(e=new a(s(r)),de.push(()=>Je(e,"ref",l))),{c(){e&&W(e.$$.fragment),t=I()},l(i){e&&q(e.$$.fragment,i),t=I()},m(i,f){e&&z(e,i,f),A(i,t,f),o=!0},p(i,[f]){const u={};if(f&256&&(u["data-slate-void"]=i[8]),f&128&&(u["data-slate-inline"]=i[7]),f&2048&&(u.contenteditable=i[11]),f&1&&(u.element=i[0]),f&512&&(u.dir=i[9]),f&1050047&&(u.$$scope={dirty:f,ctx:i}),!n&&f&64&&(n=!0,u.ref=i[6],At(()=>n=!1)),a!==(a=i[3])){if(e){Y();const g=e;y(g.$$.fragment,1,0,()=>{H(g,1)}),X()}a?(e=new a(s(i)),de.push(()=>Je(e,"ref",l)),W(e.$$.fragment),k(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else a&&e.$set(u)},i(i){o||(e&&k(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&S(t),e&&H(e,i)}}}function Rr(r,e,n){let t,o,l,a,s,i,{element:f}=e,{decorations:u}=e,{selection:g=null}=e,{Element:d}=e,{Leaf:_}=e,{Placeholder:m}=e;const w=we(),E=an();Qe(r,E,B=>n(17,i=B));let C,P,V,U,D;ut(()=>{var B;(B=Se.get(w))==null||B.set(C,D),Le.set(f,D),De.set(D,f)});function se(B){D=B,n(6,D)}return r.$$set=B=>{"element"in B&&n(0,f=B.element),"decorations"in B&&n(1,u=B.decorations),"selection"in B&&n(2,g=B.selection),"Element"in B&&n(3,d=B.Element),"Leaf"in B&&n(4,_=B.Leaf),"Placeholder"in B&&n(5,m=B.Placeholder)},r.$$.update=()=>{var B;if(r.$$.dirty&131072&&n(15,t=i),r.$$.dirty&1&&n(7,o=w.isInline(f)),r.$$.dirty&1&&n(16,l=me(f)),r.$$.dirty&81920&&P!==l&&(n(13,C=l),n(14,P=l)),r.$$.dirty&129&&!o&&h.hasInlines(w,f)){const T=un(ne.string(f));T==="rtl"&&n(9,V=T)}if(r.$$.dirty&1&&n(8,a=h.isVoid(w,f)),r.$$.dirty&32768&&n(11,s=!t),r.$$.dirty&33153&&a){!t&&o&&n(11,s=!1);const[[T]]=ne.texts(f);n(10,U=T),xe.set(T,0),$e.set(T,f)}r.$$.dirty&8257&&D&&((B=Se.get(w))==null||B.set(C,D),Le.set(f,D),De.set(D,f))},[f,u,g,d,_,m,D,o,a,V,U,s,E,C,P,t,l,i,se]}class pn extends Z{constructor(e){super();j(this,e,Rr,Mr,Ee,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function Wr(r){let e,n,t;var o=pn;function l(a){return{props:{Element:a[1],Placeholder:a[3],Leaf:a[2],decorations:a[5],element:a[0],selection:a[4]}}}return o&&(e=new o(l(r))),{c(){e&&W(e.$$.fragment),n=I()},l(a){e&&q(e.$$.fragment,a),n=I()},m(a,s){e&&z(e,a,s),A(a,n,s),t=!0},p(a,[s]){const i={};if(s&2&&(i.Element=a[1]),s&8&&(i.Placeholder=a[3]),s&4&&(i.Leaf=a[2]),s&32&&(i.decorations=a[5]),s&1&&(i.element=a[0]),s&16&&(i.selection=a[4]),o!==(o=pn)){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}o?(e=new o(l(a)),W(e.$$.fragment),k(e.$$.fragment,1),z(e,n.parentNode,n)):e=null}else o&&e.$set(i)},i(a){t||(e&&k(e.$$.fragment,a),t=!0)},o(a){e&&y(e.$$.fragment,a),t=!1},d(a){a&&S(n),e&&H(e,a)}}}const zr={};function Hr(r,e,n){let t,o,l,a,{parent:s}=e,{element:i}=e,{path:f}=e,{index:u}=e,{decorate:g}=e,{decorations:d}=e,{selection:_=null}=e,{Element:m}=e,{Leaf:w}=e,{Placeholder:E}=e;const C=ke(!1);pe(zr,C);const P=we();let V=u,U=s,D=i,se=d,B=_;return r.$$set=T=>{"parent"in T&&n(6,s=T.parent),"element"in T&&n(0,i=T.element),"path"in T&&n(7,f=T.path),"index"in T&&n(8,u=T.index),"decorate"in T&&n(9,g=T.decorate),"decorations"in T&&n(10,d=T.decorations),"selection"in T&&n(11,_=T.selection),"Element"in T&&n(1,m=T.Element),"Leaf"in T&&n(2,w=T.Leaf),"Placeholder"in T&&n(3,E=T.Placeholder)},r.$$.update=()=>{r.$$.dirty&4352&&V!==u&&n(12,V=u),r.$$.dirty&8256&&U!==s&&n(13,U=s),r.$$.dirty&16385&&D!==i&&n(14,D=i),r.$$.dirty&33792&&(jt(se,d)||n(15,se=d)),r.$$.dirty&67584&&(xt(B,_)||n(16,B=_)),r.$$.dirty&20480&&xe.set(D,V),r.$$.dirty&24576&&$e.set(D,U),r.$$.dirty&4224&&n(18,t=f.concat(V)),r.$$.dirty&262144&&n(17,o=h.range(P,t)),r.$$.dirty&442880&&n(5,l=bn(g([D,t]),o,se)),r.$$.dirty&196608&&n(4,a=B&&O.intersection(o,B)),r.$$.dirty&16&&C.set(!!a)},[i,m,w,E,a,l,s,f,u,g,d,_,V,U,D,se,B,o,t]}class Vr extends Z{constructor(e){super();j(this,e,Hr,Wr,ue,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Kr(r){let e,n,t;var o=Oe;function l(a){return{props:{Placeholder:a[3],Leaf:a[2],decorations:a[4],isLast:a[5],parent:a[0],text:a[1]}}}return o&&(e=new o(l(r))),{c(){e&&W(e.$$.fragment),n=I()},l(a){e&&q(e.$$.fragment,a),n=I()},m(a,s){e&&z(e,a,s),A(a,n,s),t=!0},p(a,[s]){const i={};if(s&8&&(i.Placeholder=a[3]),s&4&&(i.Leaf=a[2]),s&16&&(i.decorations=a[4]),s&32&&(i.isLast=a[5]),s&1&&(i.parent=a[0]),s&2&&(i.text=a[1]),o!==(o=Oe)){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}o?(e=new o(l(a)),W(e.$$.fragment),k(e.$$.fragment,1),z(e,n.parentNode,n)):e=null}else o&&e.$set(i)},i(a){t||(e&&k(e.$$.fragment,a),t=!0)},o(a){e&&y(e.$$.fragment,a),t=!1},d(a){a&&S(n),e&&H(e,a)}}}function vr(r,e,n){let t,o,l,a,{parent:s}=e,{text:i}=e,{path:f}=e,{index:u}=e,{isLeafBlock:g}=e,{decorations:d}=e,{decorate:_}=e,{Leaf:m}=e,{Placeholder:w}=e;const E=we();let C=u,P=i,V=s,U=d;return r.$$set=D=>{"parent"in D&&n(0,s=D.parent),"text"in D&&n(1,i=D.text),"path"in D&&n(6,f=D.path),"index"in D&&n(7,u=D.index),"isLeafBlock"in D&&n(8,g=D.isLeafBlock),"decorations"in D&&n(9,d=D.decorations),"decorate"in D&&n(10,_=D.decorate),"Leaf"in D&&n(2,m=D.Leaf),"Placeholder"in D&&n(3,w=D.Placeholder)},r.$$.update=()=>{r.$$.dirty&2176&&C!==u&&n(11,C=u),r.$$.dirty&4098&&P!==i&&n(12,P=i),r.$$.dirty&8193&&V!==s&&n(13,V=s),r.$$.dirty&16896&&(jt(U,d)||n(14,U=d)),r.$$.dirty&6144&&xe.set(P,C),r.$$.dirty&12288&&$e.set(P,V),r.$$.dirty&2112&&n(16,t=f.concat(C)),r.$$.dirty&10496&&n(5,o=g&&C===V.children.length-1),r.$$.dirty&65536&&n(15,l=h.range(E,t)),r.$$.dirty&119808&&n(4,a=bn(_([P,t]),l,U))},[s,i,m,w,a,o,f,u,g,d,_,C,P,V,U,l,t]}class Ur extends Z{constructor(e){super();j(this,e,vr,Kr,ue,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function kn(r,e,n){const t=r.slice();return t[13]=e[n],t[15]=n,t}function qr(r){let e,n;return e=new Ur({props:{Placeholder:r[4],Leaf:r[3],decorations:r[0],parent:r[5],text:r[13],decorate:r[8],index:r[15],path:r[7],isLeafBlock:r[6]}}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p(t,o){const l={};o&16&&(l.Placeholder=t[4]),o&8&&(l.Leaf=t[3]),o&1&&(l.decorations=t[0]),o&32&&(l.parent=t[5]),o&32&&(l.text=t[13]),o&256&&(l.decorate=t[8]),o&32&&(l.index=t[15]),o&128&&(l.path=t[7]),o&64&&(l.isLeafBlock=t[6]),e.$set(l)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Yr(r){let e,n;return e=new Vr({props:{Element:r[2],Placeholder:r[4],Leaf:r[3],decorations:r[0],selection:r[1],element:r[13],parent:r[5],decorate:r[8],index:r[15],path:r[7]}}),{c(){W(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,o){z(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.Element=t[2]),o&16&&(l.Placeholder=t[4]),o&8&&(l.Leaf=t[3]),o&1&&(l.decorations=t[0]),o&2&&(l.selection=t[1]),o&32&&(l.element=t[13]),o&32&&(l.parent=t[5]),o&256&&(l.decorate=t[8]),o&32&&(l.index=t[15]),o&128&&(l.path=t[7]),e.$set(l)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function En(r,e){let n,t,o,l,a,s;const i=[Yr,qr],f=[];function u(g,d){return d&32&&(t=null),t==null&&(t=!!Ze.isElement(g[13])),t?0:1}return o=u(e,-1),l=f[o]=i[o](e),{key:r,first:null,c(){n=I(),l.c(),a=I(),this.h()},l(g){n=I(),l.l(g),a=I(),this.h()},h(){this.first=n},m(g,d){A(g,n,d),f[o].m(g,d),A(g,a,d),s=!0},p(g,d){e=g;let _=o;o=u(e,d),o===_?f[o].p(e,d):(Y(),y(f[_],1,1,()=>{f[_]=null}),X(),l=f[o],l?l.p(e,d):(l=f[o]=i[o](e),l.c()),k(l,1),l.m(a.parentNode,a))},i(g){s||(k(l),s=!0)},o(g){y(l),s=!1},d(g){g&&S(n),f[o].d(g),g&&S(a)}}}function Xr(r){let e=[],n=new Map,t,o,l=r[5].children;const a=s=>me(s[13]);for(let s=0;s<l.length;s+=1){let i=kn(r,l,s),f=a(i);n.set(f,e[s]=En(f,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=I()},l(s){for(let i=0;i<e.length;i+=1)e[i].l(s);t=I()},m(s,i){for(let f=0;f<e.length;f+=1)e[f].m(s,i);A(s,t,i),o=!0},p(s,[i]){i&511&&(l=s[5].children,Y(),e=Mt(e,i,a,1,s,l,n,t.parentNode,Rt,En,t,kn),X())},i(s){if(!o){for(let i=0;i<l.length;i+=1)k(e[i]);o=!0}},o(s){for(let i=0;i<e.length;i+=1)y(e[i]);o=!1},d(s){for(let i=0;i<e.length;i+=1)e[i].d(s);s&&S(t)}}}function bn(r,e,n=[]){for(const t of n){const o=O.intersection(t,e);o&&r.push(o)}return r}function Gr(r,e,n){let t,o,l,a,{node:s}=e,{decorations:i}=e,{selection:f=null}=e,{Element:u}=e,{Leaf:g}=e,{Placeholder:d}=e;const _=we(),m=ln();Qe(r,m,E=>n(11,a=E));let w=s;return r.$$set=E=>{"node"in E&&n(10,s=E.node),"decorations"in E&&n(0,i=E.decorations),"selection"in E&&n(1,f=E.selection),"Element"in E&&n(2,u=E.Element),"Leaf"in E&&n(3,g=E.Leaf),"Placeholder"in E&&n(4,d=E.Placeholder)},r.$$.update=()=>{r.$$.dirty&2048&&n(8,t=a),r.$$.dirty&1056&&(w!==s||s===_)&&n(5,w=s),r.$$.dirty&32&&n(7,o=Pe(w)),r.$$.dirty&32&&n(6,l=Ze.isElement(w)&&!_.isInline(w)&&h.hasInlines(_,w))},[i,f,u,g,d,w,l,o,t,m,s,a]}class yn extends Z{constructor(e){super();j(this,e,Gr,Xr,ue,{node:10,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function Jr(r){let e,n;const t=r[5].default,o=Ae(t,r,r[4],null);let l=[r[3]],a={};for(let s=0;s<l.length;s+=1)a=x(a,l[s]);return{c(){e=ee("div"),o&&o.c(),this.h()},l(s){e=te(s,"DIV",{});var i=ie(e);o&&o.l(i),i.forEach(S),this.h()},h(){le(e,a),Ce(e,"svelte-19k8gul",!0)},m(s,i){A(s,e,i),o&&o.m(e,null),r[7](e),n=!0},p(s,i){o&&o.p&&(!n||i&16)&&Me(o,t,s,s[4],n?We(t,s[4],i,null):Re(s[4]),null),le(e,a=He(l,[i&8&&s[3]])),Ce(e,"svelte-19k8gul",!0)},i(s){n||(k(o,s),n=!0)},o(s){y(o,s),n=!1},d(s){s&&S(e),o&&o.d(s),r[7](null)}}}function Qr(r){let e,n;const t=r[5].default,o=Ae(t,r,r[4],null);let l=[r[3]],a={};for(let s=0;s<l.length;s+=1)a=x(a,l[s]);return{c(){e=ee("span"),o&&o.c(),this.h()},l(s){e=te(s,"SPAN",{});var i=ie(e);o&&o.l(i),i.forEach(S),this.h()},h(){le(e,a),Ce(e,"svelte-19k8gul",!0)},m(s,i){A(s,e,i),o&&o.m(e,null),r[6](e),n=!0},p(s,i){o&&o.p&&(!n||i&16)&&Me(o,t,s,s[4],n?We(t,s[4],i,null):Re(s[4]),null),le(e,a=He(l,[i&8&&s[3]])),Ce(e,"svelte-19k8gul",!0)},i(s){n||(k(o,s),n=!0)},o(s){y(o,s),n=!1},d(s){s&&S(e),o&&o.d(s),r[6](null)}}}function Zr(r){let e,n,t,o,l;const a=[Qr,Jr],s=[];function i(f,u){return u&2&&(e=null),e==null&&(e=!!f[2].isInline(f[1])),e?0:1}return n=i(r,-1),t=s[n]=a[n](r),{c(){t.c(),o=I()},l(f){t.l(f),o=I()},m(f,u){s[n].m(f,u),A(f,o,u),l=!0},p(f,[u]){let g=n;n=i(f,u),n===g?s[n].p(f,u):(Y(),y(s[g],1,1,()=>{s[g]=null}),X(),t=s[n],t?t.p(f,u):(t=s[n]=a[n](f),t.c()),k(t,1),t.m(o.parentNode,o))},i(f){l||(k(t),l=!0)},o(f){y(t),l=!1},d(f){s[n].d(f),f&&S(o)}}}function jr(r,e,n){const t=["element","ref"];let o=he(e,t),{$$slots:l={},$$scope:a}=e,{element:s}=e,{ref:i}=e;const f=we();function u(d){de[d?"unshift":"push"](()=>{i=d,n(0,i)})}function g(d){de[d?"unshift":"push"](()=>{i=d,n(0,i)})}return r.$$set=d=>{e=x(x({},e),je(d)),n(3,o=he(e,t)),"element"in d&&n(1,s=d.element),"ref"in d&&n(0,i=d.ref),"$$scope"in d&&n(4,a=d.$$scope)},[i,s,f,o,a,l,u,g]}class xr extends Z{constructor(e){super();j(this,e,jr,Zr,ue,{element:1,ref:0})}}function $r(r){let e,n;const t=r[2].default,o=Ae(t,r,r[1],null);let l=[r[0]],a={};for(let s=0;s<l.length;s+=1)a=x(a,l[s]);return{c(){e=ee("span"),o&&o.c(),this.h()},l(s){e=te(s,"SPAN",{});var i=ie(e);o&&o.l(i),i.forEach(S),this.h()},h(){le(e,a)},m(s,i){A(s,e,i),o&&o.m(e,null),n=!0},p(s,[i]){o&&o.p&&(!n||i&2)&&Me(o,t,s,s[1],n?We(t,s[1],i,null):Re(s[1]),null),le(e,a=He(l,[i&1&&s[0]]))},i(s){n||(k(o,s),n=!0)},o(s){y(o,s),n=!1},d(s){s&&S(e),o&&o.d(s)}}}function eo(r,e,n){const t=[];let o=he(e,t),{$$slots:l={},$$scope:a}=e;return r.$$set=s=>{e=x(x({},e),je(s)),n(0,o=he(e,t)),"$$scope"in s&&n(1,a=s.$$scope)},[o,a,l]}class to extends Z{constructor(e){super();j(this,e,eo,$r,ue,{})}}function no(r){let e,n,t;const o=r[3].default,l=Ae(o,r,r[2],null);let a=[r[1]],s={};for(let i=0;i<a.length;i+=1)s=x(s,a[i]);return{c(){e=ee("span"),l&&l.c(),this.h()},l(i){e=te(i,"SPAN",{});var f=ie(e);l&&l.l(f),f.forEach(S),this.h()},h(){le(e,s),Wn(()=>r[4].call(e))},m(i,f){A(i,e,f),l&&l.m(e,null),n=zn(e,r[4].bind(e)),t=!0},p(i,[f]){l&&l.p&&(!t||f&4)&&Me(l,o,i,i[2],t?We(o,i[2],f,null):Re(i[2]),null),le(e,s=He(a,[f&2&&i[1]]))},i(i){t||(k(l,i),t=!0)},o(i){y(l,i),t=!1},d(i){i&&S(e),l&&l.d(i),n()}}}function ro(r,e,n){const t=["clientHeight"];let o=he(e,t),{$$slots:l={},$$scope:a}=e,{clientHeight:s}=e;function i(){s=this.clientHeight,n(0,s)}return r.$$set=f=>{e=x(x({},e),je(f)),n(1,o=he(e,t)),"clientHeight"in f&&n(0,s=f.clientHeight),"$$scope"in f&&n(2,a=f.$$scope)},[s,o,a,l,i]}class oo extends Z{constructor(e){super();j(this,e,ro,no,ue,{clientHeight:0})}}const io=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Et={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Cn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:io?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},bt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let r=1;r<20;r++)bt["f"+r]=111+r;function Dn(r,e={}){Array.isArray(r)||(r=[r]);const n=r.map(t=>ao(t,e));return function(o){return n.some(l=>lo(l,o))}}function Eo(r,e,n={}){return Dn(r,n)(e)}function yt(r){return Dn(r,{byKey:!0})}function ao(r,e={}){const n=e&&e.byKey,t={};r=r.replace("++","+add");const o=r.split("+"),{length:l}=o;for(const a in Et)t[Et[a]]=!1;for(let a of o){const s=a.endsWith("?")&&a.length>1;s&&(a=a.slice(0,-1));const i=Ln(a),f=Et[i];if(a.length>1&&!f&&!Cn[a]&&!bt[i])throw new TypeError(`Unknown modifier: "${a}"`);(l===1||!f)&&(n?t.key=i:t.which=so(a)),f&&(t[f]=s?null:!0)}return t}function lo(r,e){for(const n in r){const t=r[n];let o;if(t!=null&&(n==="key"&&e.key!=null?o=e.key.toLowerCase():n==="which"?o=t===91&&e.which===93?91:e.which:o=e[n],!(o==null&&t===!1)&&o!==t))return!1}return!0}function so(r){return r=Ln(r),bt[r]||r.toUpperCase().charCodeAt(0)}function Ln(r){return r=r.toLowerCase(),r=Cn[r]||r,r}const fo={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},co={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},uo={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function K(r){const e=fo[r],n=co[r],t=uo[r],o=e&&yt(e),l=n&&yt(n),a=t&&yt(t);return s=>!!(o&&o(s)||qt&&l&&l(s)||!qt&&a&&a(s))}var v={isBold:K("bold"),isCompose:K("compose"),isMoveBackward:K("moveBackward"),isMoveForward:K("moveForward"),isDeleteBackward:K("deleteBackward"),isDeleteForward:K("deleteForward"),isDeleteLineBackward:K("deleteLineBackward"),isDeleteLineForward:K("deleteLineForward"),isDeleteWordBackward:K("deleteWordBackward"),isDeleteWordForward:K("deleteWordForward"),isExtendBackward:K("extendBackward"),isExtendForward:K("extendForward"),isExtendLineBackward:K("extendLineBackward"),isExtendLineForward:K("extendLineForward"),isItalic:K("italic"),isMoveLineBackward:K("moveLineBackward"),isMoveLineForward:K("moveLineForward"),isMoveWordBackward:K("moveWordBackward"),isMoveWordForward:K("moveWordForward"),isRedo:K("redo"),isSplitBlock:K("splitBlock"),isTransposeCharacter:K("transposeCharacter"),isUndo:K("undo")};function ho(r){let e,n,t,o,l,a,s,i,f,u,g;n=new yn({props:{node:r[5],selection:r[6],decorations:r[23],Element:r[1],Leaf:r[2],Placeholder:r[3]}});let d=[r[26],{role:t=r[4]?void 0:"textbox"},{spellcheck:o=r[26].spellcheck||"true"},{autocorrect:l=r[26].autocorrect||"true"},{autocapitalize:a=r[26].autocapitalize||"true"},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:s=!r[4]},{"z-index":i=-1}],_={};for(let m=0;m<d.length;m+=1)_=x(_,d[m]);return{c(){e=ee("div"),W(n.$$.fragment),this.h()},l(m){e=te(m,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var w=ie(e);q(n.$$.fragment,w),w.forEach(S),this.h()},h(){le(e,_),Ce(e,"svelte-m59z04",!0)},m(m,w){A(m,e,w),z(n,e,null),r[37](e),f=!0,u||(g=[G(e,"beforeinput",function(){J(r[22])&&r[22].apply(this,arguments)}),G(e,"keydown",function(){J(r[20])&&r[20].apply(this,arguments)}),G(e,"input",function(){J(r[21])&&r[21].apply(this,arguments)}),G(e,"focus",function(){J(r[19])&&r[19].apply(this,arguments)}),G(e,"blur",function(){J(r[18])&&r[18].apply(this,arguments)}),G(e,"click",function(){J(r[17])&&r[17].apply(this,arguments)}),G(e,"compositionend",function(){J(r[16])&&r[16].apply(this,arguments)}),G(e,"compositionupdate",function(){J(r[15])&&r[15].apply(this,arguments)}),G(e,"compositionstart",function(){J(r[14])&&r[14].apply(this,arguments)}),G(e,"paste",function(){J(r[13])&&r[13].apply(this,arguments)}),G(e,"copy",function(){J(r[12])&&r[12].apply(this,arguments)}),G(e,"cut",function(){J(r[11])&&r[11].apply(this,arguments)}),G(e,"dragover",function(){J(r[10])&&r[10].apply(this,arguments)}),G(e,"dragstart",function(){J(r[9])&&r[9].apply(this,arguments)}),G(e,"drop",function(){J(r[8])&&r[8].apply(this,arguments)}),G(e,"dragend",function(){J(r[7])&&r[7].apply(this,arguments)})],u=!0)},p(m,w){r=m;const E={};w[0]&32&&(E.node=r[5]),w[0]&64&&(E.selection=r[6]),w[0]&8388608&&(E.decorations=r[23]),w[0]&2&&(E.Element=r[1]),w[0]&4&&(E.Leaf=r[2]),w[0]&8&&(E.Placeholder=r[3]),n.$set(E),le(e,_=He(d,[w[0]&67108864&&r[26],(!f||w[0]&16&&t!==(t=r[4]?void 0:"textbox"))&&{role:t},(!f||w[0]&67108864&&o!==(o=r[26].spellcheck||"true"))&&{spellcheck:o},(!f||w[0]&67108864&&l!==(l=r[26].autocorrect||"true"))&&{autocorrect:l},(!f||w[0]&67108864&&a!==(a=r[26].autocapitalize||"true"))&&{autocapitalize:a},{"data-svelte-editor":""},{"data-slate-node":"value"},(!f||w[0]&16&&s!==(s=!r[4]))&&{contenteditable:s},{"z-index":i}])),Ce(e,"svelte-m59z04",!0)},i(m){f||(k(n.$$.fragment,m),f=!0)},o(m){y(n.$$.fragment,m),f=!1},d(m){m&&S(e),H(n),r[37](null),u=!1,Hn(g)}}}function Ne(r,e){return ge(e)&&pt(r,e)}function $(r,e){return ge(e)&&pt(r,e,{editable:!0})}function Sn(r,e){if(zt.get(r))return!1;{const n=Ne(r,e)&&_e(e);return h.isVoid(r,n)}}function go(r,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),vn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function mo(r,e,n){let t,o,l,a,s,i,f,u,g,d,_,m,w,E,C,P,V,U,D,se;const B=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","onKeyDown"];let T=he(e,B),nt,rt,{Element:Ct=xr}=e,{Leaf:Dt=to}=e,{Placeholder:Lt=oo}=e,{placeholder:ot}=e,{readOnly:Q=!1}=e,{autoFocus:Be=!1}=e,{decorate:Te=sn}=e,{scrollSelectionIntoView:it=go}=e,{ref:oe=void 0}=e,{onKeyDown:at=()=>{}}=e;const St=on();Qe(r,St,c=>n(36,rt=c));const On=an(),Ue=lr(),Nn=ln(),lt=sr();Qe(r,lt,c=>n(35,nt=c));const L={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:!1,isDraggingInternally:!1,latestElement:null};let Ie=[],st;function Ft(){a()}ut(()=>{const c=gt(oe);return c&&(dt.set(t,c),c.document.addEventListener("selectionchange",Ft)),et.set(t,oe),Le.set(t,oe),De.set(oe,t),()=>{et.delete(t),Le.delete(t),c&&(dt.delete(t),c.document.removeEventListener("selectionchange",Ft))}}),Vn(async()=>{const c=Ke(t),p=c?c.getSelection():null;if(L.isComposing||!p||!Jt(t))return;const b=p.type!=="None";if(!b)return;const F=et.get(t);let N=!1;if(F.contains(p.anchorNode)&&F.contains(p.focusNode)&&(N=!0),b&&N&&o){const ce=ve(t,p,{exactMatch:!0,suppressThrow:!0});if(ce&&O.equals(ce,o))return}if(o&&!ir(t,o)){n(5,t.selection=ve(t,p,{exactMatch:!1,suppressThrow:!1}),t),n(6,o=t.selection),lt.set(o);return}n(32,L.isUpdatingSelection=!0,L),await Wt();const M=o&&tt(t,o);M?(O.isBackward(o)?p.setBaseAndExtent(M.endContainer,M.endOffset,M.startContainer,M.startOffset):p.setBaseAndExtent(M.startContainer,M.startOffset,M.endContainer,M.endOffset),it(t,M)):p.removeAllRanges(),M&&mt&&fe(t,t).focus(),n(32,L.isUpdatingSelection=!1,L)});function Bn(c){de[c?"unshift":"push"](()=>{oe=c,n(0,oe)})}return r.$$set=c=>{e=x(x({},e),je(c)),n(26,T=he(e,B)),"Element"in c&&n(1,Ct=c.Element),"Leaf"in c&&n(2,Dt=c.Leaf),"Placeholder"in c&&n(3,Lt=c.Placeholder),"placeholder"in c&&n(27,ot=c.placeholder),"readOnly"in c&&n(4,Q=c.readOnly),"autoFocus"in c&&n(28,Be=c.autoFocus),"decorate"in c&&n(29,Te=c.decorate),"scrollSelectionIntoView"in c&&n(30,it=c.scrollSelectionIntoView),"ref"in c&&n(0,oe=c.ref),"onKeyDown"in c&&n(31,at=c.onKeyDown)},r.$$.update=()=>{if(r.$$.dirty[1]&32&&n(5,t=rt),r.$$.dirty[1]&16&&n(6,o=nt),r.$$.dirty[0]&536870944&&n(23,l=Te([t,[]])),r.$$.dirty[0]&48&&zt.set(t,Q),r.$$.dirty[0]&16&&On.set(Q),r.$$.dirty[0]&536870912&&Nn.set(Te),r.$$.dirty[0]&32|r.$$.dirty[1]&2&&(a=Kn(100,()=>{if(!L.isComposing&&!L.isUpdatingSelection&&!L.isDraggingInternally){const c=Ke(t),{activeElement:p}=c,b=fe(t,t),F=c.getSelection();if(p===b?(n(32,L.latestElement=p,L),Fe.set(t,!0),Ue.set(!0)):(Fe.delete(t),Ue.set(!1)),!F){R.deselect(t);return}const N=F.anchorNode,M=F.focusNode,ce=$(t,N)||Sn(t,N),qe=$(t,M)||Sn(t,M);if(ce&&qe){const ft=ve(t,F,{exactMatch:!1,suppressThrow:!0});R.select(t,ft)}}})),r.$$.dirty[1]&4&&n(21,i=c=>{for(const p of Ie)p();n(33,Ie.length=0,Ie)}),r.$$.dirty[0]&112|r.$$.dirty[1]&6&&n(22,s=c=>{if(!Q&&$(t,c.target)){const p=c.inputType,b=c.dataTransfer||c.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let F=!1;if(p==="insertText"&&o&&O.isCollapsed(o)&&c.data&&c.data.length===1&&/[a-z ]/i.test(c.data)&&o.anchor.offset!==0){F=!0,t.marks&&(F=!1);const N=h.above(t,{at:o.anchor,match:M=>h.isInline(t,M),mode:"highest"});if(N){const[,M]=N;h.isEnd(t,o.anchor,M)&&(F=!1)}}if(F||c.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[N]=c.getTargetRanges();if(N){const M=ve(t,N,{exactMatch:!1,suppressThrow:!1});(!o||!O.equals(o,M))&&R.select(t,M)}}if(o&&O.isExpanded(o)&&p.startsWith("delete")){const N=p.endsWith("Backward")?"backward":"forward";h.deleteFragment(t,{direction:N});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{h.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{h.deleteForward(t);break}case"deleteContentBackward":{h.deleteBackward(t);break}case"deleteEntireSoftLine":{h.deleteBackward(t,{unit:"line"}),h.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{h.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{h.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{h.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{h.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{h.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{h.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{h.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&L.isComposing&&n(32,L.isComposing=!1,L),(b==null?void 0:b.constructor.name)==="DataTransfer"?t.insertData(b):typeof b=="string"&&(F?Ie.push(()=>h.insertText(t,b)):h.insertText(t,b));break}}}}),r.$$.dirty[0]&48|r.$$.dirty[1]&2&&n(19,u=c=>{if(!Q&&!L.isUpdatingSelection&&$(t,c.target)){const p=fe(t,t),b=Ke(t);if(n(32,L.latestElement=b.activeElement,L),mt&&c.target!==p){p.focus();return}Fe.set(t,!0),Ue.set(!0)}}),r.$$.dirty[0]&96|r.$$.dirty[1]&2&&n(16,_=c=>{if($(t,c.target)){n(32,L.isComposing=!1,L);const p=c.data;if(!_t&&!tr&&!xn&&!nr&&p&&h.insertText(t,p),o&&O.isCollapsed(o)){const b=o.anchor.path,F=ne.leaf(t,b);L.hasInsertPrefixInCompositon&&(n(32,L.hasInsertPrefixInCompositon=!1,L),h.withoutNormalizing(t,()=>{const N=F.text.replace(/^\uFEFF/,"");R.delete(t,{distance:F.text.length,reverse:!0}),R.insertText(t,N)}))}}}),r.$$.dirty[0]&32&&n(15,m=c=>{$(t,c.target)&&n(32,L.isComposing=!0,L)}),r.$$.dirty[0]&32&&n(14,w=c=>{if($(t,c.target)){const{selection:p,marks:b}=t;if(p){if(O.isExpanded(p)){h.deleteFragment(t);return}const F=h.above(t,{match:N=>h.isInline(t,N),mode:"highest"});if(F){const[,N]=F;if(h.isEnd(t,p.anchor,N)){const M=h.after(t,N);R.setSelection(t,{anchor:M,focus:M})}}b&&(n(32,L.hasInsertPrefixInCompositon=!0,L),R.insertNodes(t,Bt({text:"\uFEFF"},b),{select:!0}))}}}),r.$$.dirty[0]&48&&n(9,U=c=>{if(!Q&&Ne(t,c.target)){const p=_e(c.target),b=Pe(p);if(h.isVoid(t,p)||h.void(t,{at:b,voids:!0})){const N=h.range(t,b);R.select(t,N)}n(32,L.isDraggingInternally=!0,L),t.setFragmentData(c.dataTransfer)}}),r.$$.dirty[0]&112|r.$$.dirty[1]&2&&n(8,D=c=>{if(!Q&&Ne(t,c.target)){c.preventDefault();const p=o,b=or(t,c),F=c.dataTransfer;R.select(t,b),L.isDraggingInternally&&(p&&!O.equals(p,b)&&!h.void(t,{at:b,voids:!0})&&R.delete(t,{at:p}),n(32,L.isDraggingInternally=!1,L)),t.insertData(F),Jt(t)||rr(t)}}),r.$$.dirty[0]&48|r.$$.dirty[1]&2&&n(7,se=c=>{!Q&&L.isDraggingInternally&&Ne(t,c.target)&&n(32,L.isDraggingInternally=!1,L)}),r.$$.dirty[0]&671088672|r.$$.dirty[1]&2&&t.children.length===1&&Array.from(ne.texts(t)).length===1&&ne.string(t)===""&&!L.isComposing){const c=h.start(t,[]);n(23,l=[...Te([t,[]]),{[Ve]:!0,placeholder:ot,anchor:c,focus:c}])}r.$$.dirty[0]&268435457|r.$$.dirty[1]&8&&st!==Be&&oe&&(Be&&oe.focus(),n(34,st=Be)),r.$$.dirty[0]&112|r.$$.dirty[1]&3&&n(20,f=c=>{if(!Q&&!L.isComposing&&$(t,c.target)){const p=t.children[o!==null?o.focus.path[0]:0],b=un(ne.string(p))==="rtl";if(v.isRedo(c)){c.preventDefault();const F=t;typeof F.redo=="function"&&F.redo()}else if(v.isUndo(c)){c.preventDefault();const F=t;typeof F.undo=="function"&&F.undo()}else if(v.isMoveLineBackward(c))c.preventDefault(),R.move(t,{unit:"line",reverse:!0});else if(v.isMoveLineForward(c))c.preventDefault(),R.move(t,{unit:"line"});else if(v.isExtendLineBackward(c))c.preventDefault(),R.move(t,{unit:"line",edge:"focus",reverse:!0});else if(v.isExtendLineForward(c))c.preventDefault(),R.move(t,{unit:"line",edge:"focus"});else if(v.isMoveBackward(c))c.preventDefault(),o&&O.isCollapsed(o)?R.move(t,{reverse:!b}):R.collapse(t,{edge:"start"});else if(v.isMoveForward(c))c.preventDefault(),o&&O.isCollapsed(o)?R.move(t,{reverse:b}):R.collapse(t,{edge:"end"});else if(v.isMoveWordBackward(c))c.preventDefault(),o&&O.isExpanded(o)&&R.collapse(t,{edge:"focus"}),R.move(t,{unit:"word",reverse:!b});else if(v.isMoveWordForward(c))c.preventDefault(),o&&O.isExpanded(o)&&R.collapse(t,{edge:"focus"}),R.move(t,{unit:"word",reverse:b});else if(!Gt)v.isBold(c)||v.isItalic(c)||v.isTransposeCharacter(c)?c.preventDefault():v.isSplitBlock(c)?(c.preventDefault(),h.insertBreak(t)):v.isDeleteBackward(c)?(c.preventDefault(),o&&O.isExpanded(o)?h.deleteFragment(t,{direction:"backward"}):h.deleteBackward(t)):v.isDeleteForward(c)?(c.preventDefault(),o&&O.isExpanded(o)?h.deleteFragment(t,{direction:"forward"}):h.deleteForward(t)):v.isDeleteLineBackward(c)?(c.preventDefault(),o&&O.isExpanded(o)?h.deleteFragment(t,{direction:"backward"}):h.deleteBackward(t,{unit:"line"})):v.isDeleteLineForward(c)?(c.preventDefault(),o&&O.isExpanded(o)?h.deleteFragment(t,{direction:"forward"}):h.deleteForward(t,{unit:"line"})):v.isDeleteWordBackward(c)?(c.preventDefault(),o&&O.isExpanded(o)?h.deleteFragment(t,{direction:"backward"}):h.deleteBackward(t,{unit:"word"})):v.isDeleteWordForward(c)&&(c.preventDefault(),o&&O.isExpanded(o)?h.deleteFragment(t,{direction:"forward"}):h.deleteForward(t,{unit:"word"}));else{if((Yt||_t)&&o&&(v.isDeleteBackward(c)||v.isDeleteForward(c))&&O.isCollapsed(o)){const F=ne.parent(t,o.anchor.path);if(Ze.isElement(F)&&h.isVoid(t,F)&&h.isInline(t,F)){c.preventDefault(),h.deleteBackward(t,{unit:"block"});return}}return at(c)}}}),r.$$.dirty[0]&48|r.$$.dirty[1]&2&&n(18,g=c=>{if(Q||L.isUpdatingSelection||!$(t,c.target))return;const p=Ke(t);if(L.latestElement===p.activeElement)return;const b=c.relatedTarget,F=fe(t,t);if(b!==F&&!(re(b)&&b.hasAttribute("data-slate-spacer"))){if(b!=null&&ge(b)&&pt(t,b)){const N=_e(b);if(Ze.isElement(N)&&!t.isVoid(N))return}if(_t){const N=p.getSelection();N==null||N.removeAllRanges()}Fe.delete(t),Ue.set(!1)}}),r.$$.dirty[0]&48&&n(17,d=c=>{if(!Q&&Ne(t,c.target)&&ge(c.target)){const p=_e(c.target),b=Pe(p);if(h.hasPath(t,b)&&ne.get(t,b)===p){const N=h.start(t,b),M=h.end(t,b),ce=h.void(t,{at:N}),qe=h.void(t,{at:M});if(ce&&qe&&ye.equals(ce[1],qe[1])){const ft=h.range(t,N);R.select(t,ft)}}}}),r.$$.dirty[0]&48&&n(13,E=c=>{!Q&&$(t,c.target)&&(!Gt||Xn(c))&&(c.preventDefault(),t.insertData(c.clipboardData))}),r.$$.dirty[0]&32&&n(12,C=c=>{$(t,c.target)&&(c.preventDefault(),t.setFragmentData(c.clipboardData))}),r.$$.dirty[0]&112&&n(11,P=c=>{if(!Q&&$(t,c.target)&&(c.preventDefault(),t.setFragmentData(c.clipboardData),o))if(O.isExpanded(o))h.deleteFragment(t);else{const p=ne.parent(t,o.anchor.path);h.isVoid(t,p)&&R.delete(t)}}),r.$$.dirty[0]&32&&n(10,V=c=>{if(Ne(t,c.target)){const p=_e(c.target);h.isVoid(t,p)&&c.preventDefault()}})},[oe,Ct,Dt,Lt,Q,t,o,se,D,U,V,P,C,E,w,m,_,d,g,u,f,i,s,l,St,lt,T,ot,Be,Te,it,at,L,Ie,st,nt,rt,Bn]}class bo extends Z{constructor(e){super();j(this,e,mo,ho,ue,{Element:1,Leaf:2,Placeholder:3,placeholder:27,readOnly:4,autoFocus:28,decorate:29,scrollSelectionIntoView:30,ref:0,onKeyDown:31},null,[-1,-1])}}function Fn(r,e){const n=(e.top+e.bottom)/2;return r.top<=n&&r.bottom>=n}function Pn(r,e,n){const t=tt(r,e).getBoundingClientRect(),o=tt(r,n).getBoundingClientRect();return Fn(t,o)&&Fn(o,t)}function _o(r,e){const n=h.range(r,O.end(e)),t=Array.from(h.positions(r,{at:e}));let o=0,l=t.length,a=Math.floor(l/2);if(Pn(r,h.range(r,t[o]),n))return h.range(r,t[o],n);if(t.length<2)return h.range(r,t[t.length-1],n);for(;a!==t.length&&a!==o;)Pn(r,h.range(r,t[a]),n)?l=a:o=a,a=Math.floor((o+l)/2);return h.range(r,t[l],n)}function yo(r){const e=r,{apply:n,onChange:t,deleteBackward:o}=e;return Se.set(e,new WeakMap),e.deleteBackward=l=>{if(l!=="line")return o(l);if(r.selection&&O.isCollapsed(r.selection)){const a=h.above(r,{match:s=>h.isBlock(r,s),at:r.selection});if(a){const[,s]=a,i=h.range(r,s,r.selection.anchor),f=_o(e,i);O.isCollapsed(f)||R.delete(r,{at:f})}}},e.apply=l=>{const a=[];switch(l.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,i]of h.levels(e,{at:l.path})){const f=me(s);a.push([i,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,i]of h.levels(e,{at:ye.parent(l.path)})){const f=me(s);a.push([i,f])}break}case"move_node":{for(const[s,i]of h.levels(e,{at:ye.common(ye.parent(l.path),ye.parent(l.newPath))})){const f=me(s);a.push([i,f])}break}}n(l);for(const[s,i]of a){const[f]=h.node(e,s);ht.set(f,i)}},e.setFragmentData=l=>{const{selection:a}=e;if(!a)return;const[s,i]=O.edges(a),f=h.void(e,{at:s.path}),u=h.void(e,{at:i.path});if(O.isCollapsed(a)&&!f)return;const g=tt(e,a);let d=g.cloneContents(),_=d.childNodes[0];if(d.childNodes.forEach(P=>{P.textContent&&P.textContent.trim()!==""&&(_=P)}),u){const[P]=u,V=g.cloneRange(),U=fe(e,P);V.setEndAfter(U),d=V.cloneContents()}if(f&&(_=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(P=>{const V=P.getAttribute("data-slate-zero-width")==="n";P.textContent=V?`
`:""}),Kt(_)){const P=document.createElement("span");P.style.whiteSpace="pre",P.appendChild(_),d.appendChild(P),_=P}const m=e.getFragment(),w=JSON.stringify(m),E=window.btoa(encodeURIComponent(w));_.setAttribute("data-slate-fragment",E),l.setData("application/x-slate-fragment",E);const C=document.createElement("div");return C.appendChild(d),C.setAttribute("hidden","true"),document.body.appendChild(C),l.setData("text/html",C.innerHTML),l.setData("text/plain",Ut(C)),document.body.removeChild(C),l},e.insertData=l=>{e.insertFragmentData(l)||e.insertTextData(l)},e.insertFragmentData=l=>{const a=l.getData("application/x-slate-fragment")||jn(l);if(a){const s=decodeURIComponent(window.atob(a)),i=JSON.parse(s);return e.insertFragment(i),!0}return!1},e.insertTextData=l=>{const a=l.getData("text/plain");if(a){const s=a.split(/\r\n|\r|\n/);let i=!1;for(const f of s)i&&R.splitNodes(e,{always:!0}),e.insertText(f),i=!0;return!0}return!1},e.onChange=()=>{const l=Ht.get(e);l&&Wt().then(l),t()},e}export{bo as E,ko as S,on as g,Eo as i,yo as w};
