var Rn=Object.defineProperty;var Me=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var dt=(o,e,n)=>e in o?Rn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,ht=(o,e)=>{for(var n in e||(e={}))ft.call(e,n)&&dt(o,n,e[n]);if(Me)for(var n of Me(e))ut.call(e,n)&&dt(o,n,e[n]);return o};var Je=(o,e)=>{var n={};for(var t in o)ft.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&Me)for(var t of Me(o))e.indexOf(t)<0&&ut.call(o,t)&&(n[t]=o[t]);return n};import{a1 as g,a2 as B,a3 as Wn,S as Q,i as Z,s as De,F as ye,J as Le,K as Se,L as Fe,q as b,o as C,r as de,D as he,a4 as Oe,a5 as zn,a6 as ie,t as Re,h as We,g as R,d as S,e as x,c as $,a as ne,b as N,I as gt,j as mt,M as ge,l as A,n as X,p as G,a7 as me,w as v,x as Y,y as H,B as V,a8 as ee,a9 as vn,Q as _t,O as le,P as ze,aa as wt,ab as pt,v as Qe,ac as Hn,ad as ve,ae as He,C as Pe,af as Ze,ag as Vn,ah as Kn,ai as kt,aj as Et,ak as J,z as Un,al as qn,am as bt,u as Yn,E as Ct,an as W,ao as Xn}from"./vendor-1f71fe40.js";const Ve=new WeakMap,Ke=new WeakMap,je=new WeakMap,Ue=new WeakMap,_e=new WeakMap,we=new WeakMap,xe=new WeakMap,pe=new WeakMap,Dt=new WeakMap,ke=new WeakMap,yt=new WeakMap,Be=Symbol("placeholder");let Gn=0;class Jn{constructor(){this.id=`${Gn++}`}toString(){return this.id}}function $e(o){return o&&o.ownerDocument&&o.ownerDocument.defaultView||null}function Qn(o){return se(o)&&o.nodeType===8}function te(o){return se(o)&&o.nodeType===1}function se(o){const e=$e(o);return!!e&&o instanceof e.Node}function Lt(o){const e=o&&o.anchorNode&&$e(o.anchorNode);return!!e&&o instanceof e.Selection}function St(o){return se(o)&&o.nodeType===3}function Zn(o){return o.clipboardData&&o.clipboardData.getData("text/plain")!==""&&o.clipboardData.types.length===1}function jn(o){let[e,n]=o;if(te(e)&&e.childNodes.length){let t=n===e.childNodes.length,i=t?n-1:n;for([e,i]=Ft(e,i,t?"backward":"forward"),t=i<n;te(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=$n(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function xn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Ft(o,e,n){const{childNodes:t}=o;let i=t[e],a=e,r=!1,s=!1;for(;(Qn(i)||te(i)&&i.childNodes.length===0||te(i)&&i.getAttribute("contenteditable")==="false")&&!(r&&s);){if(a>=t.length){r=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}i=t[a],e=a,a+=n==="forward"?1:-1}return[i,e]}function $n(o,e,n){const[t]=Ft(o,e,n);return t}function Ot(o){let e="";if(St(o)&&o.nodeValue)return o.nodeValue;if(te(o)){for(const t of Array.from(o.childNodes))e+=Ot(t);const n=getComputedStyle(o).getPropertyValue("display");(n==="block"||n==="list"||o.tagName==="BR")&&(e+=`
`)}return e}const eo=/data-slate-fragment="(.+?)"/m;function to(o){const e=o.getData("text/html"),[,n]=e.match(eo)||[];return n}const no=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Pt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const et=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),oo=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Bt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),io=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),ro=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ao=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Nt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Tt=!io&&!oo&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function nt(o){const e=je.get(o);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(o){let e=xe.get(o);return e||(e=new Jn,xe.set(o,e)),e}function Ee(o){const e=[];let n=o;for(;;){const t=Ke.get(n);if(t==null){if(g.isEditor(n))return e;break}const i=Ve.get(n);if(i==null)break;e.unshift(i),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(o)}`)}function Ne(o){const e=re(o,o),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function It(o){return!!ke.get(o)}function lo(o){const e=re(o,o),n=Ne(o);ke.set(o,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function ot(o,e,n={}){const{editable:t=!1}=n,i=re(o,o);let a;try{a=te(e)?e:e.parentElement}catch(r){if(!r.message.includes('Permission denied to access property "nodeType"'))throw r}return a?a.closest("[data-svelte-editor]")===i&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===i||!!a.getAttribute("data-slate-zero-width")):!1}function re(o,e,n=!0){const t=pe.get(o),i=g.isEditor(e)?Ue.get(o):t==null?void 0:t.get(ce(e));if(!i&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return i}function At(o,e,n=!0){const[t]=g.node(o,e.path),i=re(o,t,n);let a;g.void(o,{at:e})&&(e={path:e.path,offset:0});const r="[data-slate-string], [data-slate-zero-width]",s=i?Array.from(i.querySelectorAll(r)):[];let l=0;for(const c of s){const d=c.childNodes[0];if(d==null||d.textContent==null)continue;const{length:h}=d.textContent,u=c.getAttribute("data-slate-length"),m=u==null?h:parseInt(u,10),_=l+m;if(e.offset<=_){const D=Math.min(h,Math.max(0,e.offset-l));a=[d,D];break}l=_}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function qe(o,e,n=!0){const{anchor:t,focus:i}=e,a=B.isBackward(e),r=At(o,t,n);if(!r)return;const s=B.isCollapsed(e)?r:At(o,i),c=nt(o).document.createRange(),[d,h]=a?s:r,[u,m]=a?r:s,D=!!(te(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),E=!!(te(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return c.setStart(d,D?1:h),c.setEnd(u,E?1:m),c}function fe(o){let e=te(o)?o:o.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?_e.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function so(o,e){const{clientX:n,clientY:t,target:i}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=fe(e.target),r=Ee(a);if(g.isVoid(o,a)){const d=i.getBoundingClientRect(),h=o.isInline(a)?n-d.left<d.left+d.width-n:t-d.top<d.top+d.height-t,u=g.point(o,r,{edge:h?"start":"end"}),m=h?g.before(o,u):g.after(o,u);if(m)return g.range(o,m)}let s;const{document:l}=nt(o);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const d=l.caretPositionFromPoint(n,t);d&&(s=l.createRange(),s.setStart(d.offsetNode,d.offset),s.setEnd(d.offsetNode,d.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Te(o,s,{exactMatch:!1,suppressThrow:!1})}function Mt(o,e,n){var u;const{exactMatch:t,suppressThrow:i}=n,[a,r]=t?e:jn(e),s=a.parentNode;let l=null,c=0;if(s){const m=s.closest('[data-slate-void="true"]');let _=s.closest("[data-slate-leaf]"),D=null;if(_){l=_.closest('[data-slate-node="text"]');const E=nt(o).document.createRange();E.setStart(l,0),E.setEnd(a,r);const F=E.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(M=>{M.parentNode.removeChild(M)}),c=F.textContent.length,D=l}else m&&(_=m.querySelector("[data-slate-leaf]"),_?(l=_.closest('[data-slate-node="text"]'),D=_,c=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(p=>{c-=p.textContent.length})):c=1);D&&c===D.textContent.length&&(s.hasAttribute("data-slate-zero-width")||et&&((u=D.textContent)==null?void 0:u.endsWith(`

`)))&&c--}if(!l){if(i)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const d=fe(l);return{path:Ee(d),offset:c}}function Te(o,e,n){const{exactMatch:t,suppressThrow:i}=n,a=Lt(e)?e.anchorNode:e.startContainer;let r,s,l,c,d;if(a&&(Lt(e)?(r=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Bt&&xn()?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed):(r=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,d=e.collapsed)),r==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=Mt(o,[r,s],{exactMatch:t,suppressThrow:i});if(!h)return null;const u=d?h:Mt(o,[l,c],{exactMatch:t,suppressThrow:i});if(!u)return null;let m={anchor:h,focus:u};return B.isExpanded(m)&&B.isForward(m)&&te(l)&&g.void(o,{at:m.focus,mode:"highest"})&&(m=g.unhangRange(o,m,{voids:!0})),m}function co(o,e){const{anchor:n,focus:t}=e;return g.hasPath(o,n.path)&&g.hasPath(o,t.path)}function Rt(o,e){if(o===e)return!0;if(o.length!==e.length)return!1;for(let i=0;i<o.length;i++){const a=o[i],r=e[i],n=a,{anchor:s,focus:l}=n,c=Je(n,["anchor","focus"]),t=r,{anchor:d,focus:h}=t,u=Je(t,["anchor","focus"]);if(!B.equals(a,r)||a[Be]!==r[Be]||!Wn(c,u))return!1}return!0}function Wt(o,e){return o===e||!!o&&!!e&&B.equals(o,e)}function fo(o){let e;const n=o[7].default,t=ye(n,o,o[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,a){t&&t.m(i,a),e=!0},p(i,[a]){t&&t.p&&(!e||a&64)&&Le(t,n,i,i[6],e?Fe(n,i[6],a,null):Se(i[6]),null)},i(i){e||(b(t,i),e=!0)},o(i){C(t,i),e=!1},d(i){t&&t.d(i)}}}const zt={},vt={},Ht={},Vt={},Kt={};function Ut(){const o=Oe(zt);if(!o)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return o}function ue(){return zn(Ut())}function qt(){const o=Oe(vt);if(!o)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return o}function uo(){const o=Oe(Ht);if(!o)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return o}function Yt(){const o=Oe(Vt);if(!o)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return o}function ho(){const o=Oe(Kt);if(!o)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return o}function Xt(o){return[]}function go(o,e,n){let{$$slots:t={},$$scope:i}=e,{editor:a}=e,{value:r=a.children}=e,{selection:s=a.selection}=e;const l=he(a);de(zt,l);const c=he(!0);de(vt,c);const d=he(!1);de(Ht,d);const h=he(Xt);de(Vt,h);const u=he(a.selection);de(Kt,u);function m(){n(1,s=a.selection),n(0,r=a.children)}yt.set(a,m);let _=a,D,p;return o.$$set=E=>{"editor"in E&&n(2,a=E.editor),"value"in E&&n(0,r=E.value),"selection"in E&&n(1,s=E.selection),"$$scope"in E&&n(6,i=E.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&a!==_&&(n(3,_=a),l.set(a)),o.$$.dirty&17&&D!==r&&(l.update(E=>(E.children=r,E)),n(4,D=r)),o.$$.dirty&38&&(Wt(p,s)||(u.set(s),l.set(a),n(5,p=s)))},[r,s,a,_,D,p,i,t]}class Di extends Q{constructor(e){super();Z(this,e,go,fo,De,{editor:2,value:0,selection:1})}}const Gt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Jt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",mo=new RegExp("^[^"+Jt+"]*["+Gt+"]"),_o=new RegExp("^[^"+Gt+"]*["+Jt+"]");function Qt(o){const e=String(o||"");return mo.test(e)?"rtl":_o.test(e)?"ltr":"neutral"}function Zt(o){let e=`
`,n;return{c(){n=Re(e)},l(t){n=We(t,e)},m(t,i){R(t,n,i)},d(t){t&&S(n)}}}function wo(o){let e,n,t=o[1]&&Zt();return{c(){e=x("span"),n=Re(o[0]),t&&t.c(),this.h()},l(i){e=$(i,"SPAN",{"data-slate-string":!0});var a=ne(e);n=We(a,o[0]),t&&t.l(a),a.forEach(S),this.h()},h(){N(e,"data-slate-string","true")},m(i,a){R(i,e,a),gt(e,n),t&&t.m(e,null)},p(i,[a]){a&1&&mt(n,i[0]),i[1]?t||(t=Zt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:ge,o:ge,d(i){i&&S(e),t&&t.d()}}}function po(o,e,n){let{text:t}=e,{isTrailing:i=!1}=e;return o.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,i=a.isTrailing)},[t,i]}class ko extends Q{constructor(e){super();Z(this,e,po,wo,ie,{text:0,isTrailing:1})}}function jt(o){let e;return{c(){e=x("br")},l(n){e=$(n,"BR",{})},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Eo(o){let e,n="\uFEFF",t,i,a=o[1]&&jt();return{c(){e=x("span"),t=Re(n),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ne(e);t=We(s,n),a&&a.l(s),s.forEach(S),this.h()},h(){N(e,"data-slate-zero-width",i=o[1]?"n":"z"),N(e,"data-slate-length",o[0])},m(r,s){R(r,e,s),gt(e,t),a&&a.m(e,null)},p(r,[s]){r[1]?a||(a=jt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&i!==(i=r[1]?"n":"z")&&N(e,"data-slate-zero-width",i),s&1&&N(e,"data-slate-length",r[0])},i:ge,o:ge,d(r){r&&S(e),a&&a.d()}}}function bo(o,e,n){let{length:t=0}=e,{isLineBreak:i=!1}=e;return o.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,i=a.isLineBreak)},[t,i]}class it extends Q{constructor(e){super();Z(this,e,bo,Eo,ie,{length:0,isLineBreak:1})}}function Co(o){let e,n;return e=new ko({props:{isTrailing:o[5],text:o[0].text}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&32&&(a.isTrailing=t[5]),i&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Do(o){let e,n;return e=new it({}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:ge,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function yo(o){let e,n;return e=new it({props:{isLineBreak:!0}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:ge,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Lo(o){let e,n;return e=new it({props:{length:ee.string(o[1]).length}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&2&&(a.length=ee.string(t[1]).length),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function So(o){let e,n,t,i;const a=[Lo,yo,Do,Co],r=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),R(l,t,c),i=!0},p(l,[c]){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&S(t)}}}function Fo(o,e,n){let t,i,a,r,s,l,{isLast:c}=e,{leaf:d}=e,{parent:h}=e,{text:u}=e;const m=ue();return o.$$set=_=>{"isLast"in _&&n(6,c=_.isLast),"leaf"in _&&n(0,d=_.leaf),"parent"in _&&n(1,h=_.parent),"text"in _&&n(7,u=_.text)},o.$$.update=()=>{o.$$.dirty&65&&n(5,t=c&&d.text.slice(-1)===`
`),o.$$.dirty&128&&n(9,i=Ee(u)),o.$$.dirty&512&&n(8,a=me.parent(i)),o.$$.dirty&2&&n(4,r=m.isVoid(h)),o.$$.dirty&1&&n(2,s=d.text===""),o.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===u&&!m.isInline(h)&&g.string(m,a)==="")},[d,h,s,l,r,t,c,u,a,i]}class Oo extends Q{constructor(e){super();Z(this,e,Fo,So,ie,{isLast:6,leaf:0,parent:1,text:7})}}function xt(o){let e,n,t,i;function a(l){o[7](l)}var r=o[4];function s(l){let c={style:"position: absolute; pointer-events: none; width: 100%; max-width: 100%; display: block; opacity: 0.333; user-select: none; text-decoration: none;",contenteditable:"false",$$slots:{default:[Po]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return r&&(e=new r(s(o)),le.push(()=>ze(e,"clientHeight",a))),{c(){e&&v(e.$$.fragment),t=A()},l(l){e&&Y(e.$$.fragment,l),t=A()},m(l,c){e&&H(e,l,c),R(l,t,c),i=!0},p(l,c){const d={};if(c&514&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.clientHeight=l[6],_t(()=>n=!1)),r!==(r=l[4])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(e=new r(s(l)),le.push(()=>ze(e,"clientHeight",a)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else r&&e.$set(d)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&S(t),e&&V(e,l)}}}function Po(o){let e=o[1].placeholder+"",n;return{c(){n=Re(e)},l(t){n=We(t,e)},m(t,i){R(t,n,i)},p(t,i){i&2&&e!==(e=t[1].placeholder+"")&&mt(n,e)},d(t){t&&S(n)}}}function Bo(o){let e,n,t,i=Be in o[1]&&xt(o);return n=new Oo({props:{isLast:o[0],leaf:o[1],parent:o[2],text:o[3]}}),{c(){i&&i.c(),e=A(),v(n.$$.fragment)},l(a){i&&i.l(a),e=A(),Y(n.$$.fragment,a)},m(a,r){i&&i.m(a,r),R(a,e,r),H(n,a,r),t=!0},p(a,r){Be in a[1]?i?(i.p(a,r),r&2&&b(i,1)):(i=xt(a),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(X(),C(i,1,1,()=>{i=null}),G());const s={};r&1&&(s.isLast=a[0]),r&2&&(s.leaf=a[1]),r&4&&(s.parent=a[2]),r&8&&(s.text=a[3]),n.$set(s)},i(a){t||(b(i),b(n.$$.fragment,a),t=!0)},o(a){C(i),C(n.$$.fragment,a),t=!1},d(a){i&&i.d(a),a&&S(e),V(n,a)}}}function No(o){let e,n,t;var i=o[5];function a(r){return{props:{leaf:r[1],"data-slate-leaf":"true",$$slots:{default:[Bo]},$$scope:{ctx:r}}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),R(r,n,s),t=!0},p(r,[s]){const l={};if(s&2&&(l.leaf=r[1]),s&607&&(l.$$scope={dirty:s,ctx:r}),i!==(i=r[5])){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&S(n),e&&V(e,r)}}}function To(o,e,n){let{isLast:t}=e,{leaf:i}=e,{parent:a}=e,{text:r}=e,{Placeholder:s}=e,{Leaf:l}=e,c,d;vn(()=>{if(Nt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight="")}});function h(u){c=u,n(6,c)}return o.$$set=u=>{"isLast"in u&&n(0,t=u.isLast),"leaf"in u&&n(1,i=u.leaf),"parent"in u&&n(2,a=u.parent),"text"in u&&n(3,r=u.text),"Placeholder"in u&&n(4,s=u.Placeholder),"Leaf"in u&&n(5,l=u.Leaf)},o.$$.update=()=>{if(o.$$.dirty&64&&c!==d&&Nt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight=`${c}px`)}},[t,i,a,r,s,l,c,h]}class $t extends Q{constructor(e){super();Z(this,e,To,No,ie,{isLast:0,leaf:1,parent:2,text:3,Placeholder:4,Leaf:5})}}function en(o,e,n){const t=o.slice();return t[11]=e[n],t[13]=n,t}function tn(o,e){let n,t,i,a;var r=$t;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return r&&(t=new r(s(e))),{key:o,first:null,c(){n=A(),t&&v(t.$$.fragment),i=A(),this.h()},l(l){n=A(),t&&Y(t.$$.fragment,l),i=A(),this.h()},h(){this.first=n},m(l,c){R(l,n,c),t&&H(t,l,c),R(l,i,c),a=!0},p(l,c){e=l;const d={};if(c&8&&(d.Placeholder=e[3]),c&16&&(d.Leaf=e[4]),c&129&&(d.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(d.parent=e[1]),c&128&&(d.leaf=e[11]),c&4&&(d.text=e[2]),r!==(r=$t)){if(t){X();const h=t;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(t=new r(s(e)),v(t.$$.fragment),b(t.$$.fragment,1),H(t,i.parentNode,i)):t=null}else r&&t.$set(d)},i(l){a||(t&&b(t.$$.fragment,l),a=!0)},o(l){t&&C(t.$$.fragment,l),a=!1},d(l){l&&S(n),l&&S(i),t&&V(t,l)}}}function Io(o){let e,n=[],t=new Map,i,a=o[7];const r=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=en(o,a,s),c=r(l);t.set(c,n[s]=tn(c,l))}return{c(){e=x("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=$(s,"SPAN",{"data-slate-node":!0});var l=ne(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(S),this.h()},h(){N(e,"data-slate-node","text")},m(s,l){R(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);o[9](e),i=!0},p(s,[l]){l&223&&(a=s[7],X(),n=wt(n,l,r,1,s,a,t,e,pt,tn,null,en),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)C(n[l]);i=!1},d(s){s&&S(e);for(let l=0;l<n.length;l+=1)n[l].d();o[9](null)}}}function Ao(o,e,n){let t,i,{decorations:a}=e,{isLast:r}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:d}=e;const h=ue();let u;Qe(()=>{var _;(_=pe.get(h))==null||_.set(i,u),we.set(l,u),_e.set(u,l)});function m(_){le[_?"unshift":"push"](()=>{u=_,n(5,u)})}return o.$$set=_=>{"decorations"in _&&n(8,a=_.decorations),"isLast"in _&&n(0,r=_.isLast),"parent"in _&&n(1,s=_.parent),"text"in _&&n(2,l=_.text),"Placeholder"in _&&n(3,c=_.Placeholder),"Leaf"in _&&n(4,d=_.Leaf)},o.$$.update=()=>{var _;o.$$.dirty&260&&n(7,t=Hn.decorations(l,a)),o.$$.dirty&4&&n(6,i=ce(l)),o.$$.dirty&100&&u&&((_=pe.get(h))==null||_.set(i,u),we.set(l,u),_e.set(u,l))},[r,s,l,c,d,u,i,t,a,m]}class be extends Q{constructor(e){super();Z(this,e,Ao,Io,ie,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Mo(o){let e,n;return e=new ln({props:{node:o[0],decorations:o[1],selection:o[2],Element:o[3],Placeholder:o[5],Leaf:o[4]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&1&&(a.node=t[0]),i&2&&(a.decorations=t[1]),i&4&&(a.selection=t[2]),i&8&&(a.Element=t[3]),i&32&&(a.Placeholder=t[5]),i&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ro(o){let e,n,t,i;const a=[zo,Wo],r=[];function s(l,c){return l[7]?0:1}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),R(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&S(t)}}}function Wo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[5],Leaf:r[4],decorations:r[1],isLast:!1,parent:r[0],text:r[10]}}}return i&&(n=new i(a(o))),{c(){e=x("div"),n&&v(n.$$.fragment),this.h()},l(r){e=$(r,"DIV",{"data-slate-spacer":!0,class:!0});var s=ne(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(r,s){R(r,e,s),n&&H(n,e,null),t=!0},p(r,s){const l={};if(s&32&&(l.Placeholder=r[5]),s&16&&(l.Leaf=r[4]),s&2&&(l.decorations=r[1]),s&1&&(l.parent=r[0]),s&1024&&(l.text=r[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(r)),v(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(r){t||(n&&b(n.$$.fragment,r),t=!0)},o(r){n&&C(n.$$.fragment,r),t=!1},d(r){r&&S(e),n&&V(n)}}}function zo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[5],Leaf:r[4],decorations:r[1],isLast:!1,parent:r[0],text:r[10]}}}return i&&(n=new i(a(o))),{c(){e=x("span"),n&&v(n.$$.fragment),this.h()},l(r){e=$(r,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ne(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(r,s){R(r,e,s),n&&H(n,e,null),t=!0},p(r,s){const l={};if(s&32&&(l.Placeholder=r[5]),s&16&&(l.Leaf=r[4]),s&2&&(l.decorations=r[1]),s&1&&(l.parent=r[0]),s&1024&&(l.text=r[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(r)),v(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(r){t||(n&&b(n.$$.fragment,r),t=!0)},o(r){n&&C(n.$$.fragment,r),t=!1},d(r){r&&S(e),n&&V(n)}}}function vo(o){let e,n,t,i;const a=[Ro,Mo],r=[];function s(l,c){return l[8]?0:1}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),R(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&S(t)}}}function Ho(o){let e,n,t,i;function a(l){o[18](l)}var r=o[3];function s(l){let c={"data-slate-void":l[8],"data-slate-inline":l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[vo]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return r&&(e=new r(s(o)),le.push(()=>ze(e,"ref",a))),{c(){e&&v(e.$$.fragment),t=A()},l(l){e&&Y(e.$$.fragment,l),t=A()},m(l,c){e&&H(e,l,c),R(l,t,c),i=!0},p(l,[c]){const d={};if(c&256&&(d["data-slate-void"]=l[8]),c&128&&(d["data-slate-inline"]=l[7]),c&2048&&(d.contenteditable=l[11]),c&1&&(d.element=l[0]),c&512&&(d.dir=l[9]),c&1050047&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.ref=l[6],_t(()=>n=!1)),r!==(r=l[3])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(e=new r(s(l)),le.push(()=>ze(e,"ref",a)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else r&&e.$set(d)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&S(t),e&&V(e,l)}}}function Vo(o,e,n){let t,i,a,r,s,l,{element:c}=e,{decorations:d}=e,{selection:h=null}=e,{Element:u}=e,{Leaf:m}=e,{Placeholder:_}=e;const D=ue(),p=qt();ve(o,p,T=>n(17,l=T));let E,F,K,M,L;Qe(()=>{var T;(T=pe.get(D))==null||T.set(E,L),we.set(c,L),_e.set(L,c)});function oe(T){L=T,n(6,L)}return o.$$set=T=>{"element"in T&&n(0,c=T.element),"decorations"in T&&n(1,d=T.decorations),"selection"in T&&n(2,h=T.selection),"Element"in T&&n(3,u=T.Element),"Leaf"in T&&n(4,m=T.Leaf),"Placeholder"in T&&n(5,_=T.Placeholder)},o.$$.update=()=>{var T;if(o.$$.dirty&131072&&n(15,t=l),o.$$.dirty&1&&n(7,i=D.isInline(c)),o.$$.dirty&1&&n(16,a=ce(c)),o.$$.dirty&81920&&F!==a&&(n(13,E=a),n(14,F=a)),o.$$.dirty&129&&!i&&g.hasInlines(D,c)){const I=Qt(ee.string(c));I==="rtl"&&n(9,K=I)}if(o.$$.dirty&1&&n(8,r=g.isVoid(D,c)),o.$$.dirty&32768&&n(11,s=!t),o.$$.dirty&33153&&r){!t&&i&&n(11,s=!1);const[[I]]=ee.texts(c);n(10,M=I),Ve.set(I,0),Ke.set(I,c)}o.$$.dirty&8257&&L&&((T=pe.get(D))==null||T.set(E,L),we.set(c,L),_e.set(L,c))},[c,d,h,u,m,_,L,i,r,K,M,s,p,E,F,t,a,l,oe]}class nn extends Q{constructor(e){super();Z(this,e,Vo,Ho,ie,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function Ko(o){let e,n,t;var i=nn;function a(r){return{props:{Element:r[1],Placeholder:r[3],Leaf:r[2],decorations:r[5],element:r[0],selection:r[4]}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),R(r,n,s),t=!0},p(r,[s]){const l={};if(s&2&&(l.Element=r[1]),s&8&&(l.Placeholder=r[3]),s&4&&(l.Leaf=r[2]),s&32&&(l.decorations=r[5]),s&1&&(l.element=r[0]),s&16&&(l.selection=r[4]),i!==(i=nn)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&S(n),e&&V(e,r)}}}const Uo={};function qo(o,e,n){let t,i,a,r,{parent:s}=e,{element:l}=e,{path:c}=e,{index:d}=e,{decorate:h}=e,{decorations:u}=e,{selection:m=null}=e,{Element:_}=e,{Leaf:D}=e,{Placeholder:p}=e;const E=he(!1);de(Uo,E);const F=ue();let K=d,M=s,L=l,oe=u,T=m;return o.$$set=I=>{"parent"in I&&n(6,s=I.parent),"element"in I&&n(0,l=I.element),"path"in I&&n(7,c=I.path),"index"in I&&n(8,d=I.index),"decorate"in I&&n(9,h=I.decorate),"decorations"in I&&n(10,u=I.decorations),"selection"in I&&n(11,m=I.selection),"Element"in I&&n(1,_=I.Element),"Leaf"in I&&n(2,D=I.Leaf),"Placeholder"in I&&n(3,p=I.Placeholder)},o.$$.update=()=>{o.$$.dirty&4352&&K!==d&&n(12,K=d),o.$$.dirty&8256&&M!==s&&n(13,M=s),o.$$.dirty&16385&&L!==l&&n(14,L=l),o.$$.dirty&33792&&(Rt(oe,u)||n(15,oe=u)),o.$$.dirty&67584&&(Wt(T,m)||n(16,T=m)),o.$$.dirty&20480&&Ve.set(L,K),o.$$.dirty&24576&&Ke.set(L,M),o.$$.dirty&4224&&n(18,t=c.concat(K)),o.$$.dirty&262144&&n(17,i=g.range(F,t)),o.$$.dirty&442880&&n(5,a=an(h([L,t]),i,oe)),o.$$.dirty&196608&&n(4,r=T&&B.intersection(i,T)),o.$$.dirty&16&&E.set(!!r)},[l,_,D,p,r,a,s,c,d,h,u,m,K,M,L,oe,T,i,t]}class Yo extends Q{constructor(e){super();Z(this,e,qo,Ko,De,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Xo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[3],Leaf:r[2],decorations:r[4],isLast:r[5],parent:r[0],text:r[1]}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),R(r,n,s),t=!0},p(r,[s]){const l={};if(s&8&&(l.Placeholder=r[3]),s&4&&(l.Leaf=r[2]),s&16&&(l.decorations=r[4]),s&32&&(l.isLast=r[5]),s&1&&(l.parent=r[0]),s&2&&(l.text=r[1]),i!==(i=be)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&S(n),e&&V(e,r)}}}function Go(o,e,n){let t,i,a,r,{parent:s}=e,{text:l}=e,{path:c}=e,{index:d}=e,{isLeafBlock:h}=e,{decorations:u}=e,{decorate:m}=e,{Leaf:_}=e,{Placeholder:D}=e;const p=ue();let E=d,F=l,K=s,M=u;return o.$$set=L=>{"parent"in L&&n(0,s=L.parent),"text"in L&&n(1,l=L.text),"path"in L&&n(6,c=L.path),"index"in L&&n(7,d=L.index),"isLeafBlock"in L&&n(8,h=L.isLeafBlock),"decorations"in L&&n(9,u=L.decorations),"decorate"in L&&n(10,m=L.decorate),"Leaf"in L&&n(2,_=L.Leaf),"Placeholder"in L&&n(3,D=L.Placeholder)},o.$$.update=()=>{o.$$.dirty&2176&&E!==d&&n(11,E=d),o.$$.dirty&4098&&F!==l&&n(12,F=l),o.$$.dirty&8193&&K!==s&&n(13,K=s),o.$$.dirty&16896&&(Rt(M,u)||n(14,M=u)),o.$$.dirty&6144&&Ve.set(F,E),o.$$.dirty&12288&&Ke.set(F,K),o.$$.dirty&2112&&n(16,t=c.concat(E)),o.$$.dirty&10496&&n(5,i=h&&E===K.children.length-1),o.$$.dirty&65536&&n(15,a=g.range(p,t)),o.$$.dirty&119808&&n(4,r=an(m([F,t]),a,M))},[s,l,_,D,r,i,c,d,h,u,m,E,F,K,M,a,t]}class Jo extends Q{constructor(e){super();Z(this,e,Go,Xo,De,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function on(o,e,n){const t=o.slice();return t[13]=e[n],t[15]=n,t}function Qo(o){let e,n;return e=new Jo({props:{Placeholder:o[4],Leaf:o[3],decorations:o[0],parent:o[5],text:o[13],decorate:o[8],index:o[15],path:o[7],isLeafBlock:o[6]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&32&&(a.parent=t[5]),i&32&&(a.text=t[13]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),i&64&&(a.isLeafBlock=t[6]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Zo(o){let e,n;return e=new Yo({props:{Element:o[2],Placeholder:o[4],Leaf:o[3],decorations:o[0],selection:o[1],element:o[13],parent:o[5],decorate:o[8],index:o[15],path:o[7]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&4&&(a.Element=t[2]),i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&2&&(a.selection=t[1]),i&32&&(a.element=t[13]),i&32&&(a.parent=t[5]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function rn(o,e){let n,t,i,a,r,s;const l=[Zo,Qo],c=[];function d(h,u){return u&32&&(t=null),t==null&&(t=!!He.isElement(h[13])),t?0:1}return i=d(e,-1),a=c[i]=l[i](e),{key:o,first:null,c(){n=A(),a.c(),r=A(),this.h()},l(h){n=A(),a.l(h),r=A(),this.h()},h(){this.first=n},m(h,u){R(h,n,u),c[i].m(h,u),R(h,r,u),s=!0},p(h,u){e=h;let m=i;i=d(e,u),i===m?c[i].p(e,u):(X(),C(c[m],1,1,()=>{c[m]=null}),G(),a=c[i],a?a.p(e,u):(a=c[i]=l[i](e),a.c()),b(a,1),a.m(r.parentNode,r))},i(h){s||(b(a),s=!0)},o(h){C(a),s=!1},d(h){h&&S(n),c[i].d(h),h&&S(r)}}}function jo(o){let e=[],n=new Map,t,i,a=o[5].children;const r=s=>ce(s[13]);for(let s=0;s<a.length;s+=1){let l=on(o,a,s),c=r(l);n.set(c,e[s]=rn(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=A()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=A()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);R(s,t,l),i=!0},p(s,[l]){l&511&&(a=s[5].children,X(),e=wt(e,l,r,1,s,a,n,t.parentNode,pt,rn,t,on),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(e[l]);i=!0}},o(s){for(let l=0;l<e.length;l+=1)C(e[l]);i=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&S(t)}}}function an(o,e,n=[]){for(const t of n){const i=B.intersection(t,e);i&&o.push(i)}return o}function xo(o,e,n){let t,i,a,r,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:d}=e,{Leaf:h}=e,{Placeholder:u}=e;const m=ue(),_=Yt();ve(o,_,p=>n(11,r=p));let D=s;return o.$$set=p=>{"node"in p&&n(10,s=p.node),"decorations"in p&&n(0,l=p.decorations),"selection"in p&&n(1,c=p.selection),"Element"in p&&n(2,d=p.Element),"Leaf"in p&&n(3,h=p.Leaf),"Placeholder"in p&&n(4,u=p.Placeholder)},o.$$.update=()=>{o.$$.dirty&2048&&n(8,t=r),o.$$.dirty&1056&&(D!==s||s===m)&&n(5,D=s),o.$$.dirty&32&&n(7,i=Ee(D)),o.$$.dirty&32&&n(6,a=He.isElement(D)&&!m.isInline(D)&&g.hasInlines(m,D))},[l,c,d,h,u,D,a,i,t,_,s,r]}class ln extends Q{constructor(e){super();Z(this,e,xo,jo,De,{node:10,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function $o(o){let e,n,t;const i=o[7].default,a=ye(i,o,o[6],null);return{c(){e=x("div"),a&&a.c(),this.h()},l(r){e=$(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=ne(e);a&&a.l(s),s.forEach(S),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-void",n=o[5]["data-slate-void"]),N(e,"dir",o[2]),N(e,"contenteditable",o[3]),N(e,"class","svelte-19k8gul")},m(r,s){R(r,e,s),a&&a.m(e,null),o[9](e),t=!0},p(r,s){a&&a.p&&(!t||s&64)&&Le(a,i,r,r[6],t?Fe(i,r[6],s,null):Se(r[6]),null),(!t||s&32&&n!==(n=r[5]["data-slate-void"]))&&N(e,"data-slate-void",n),(!t||s&4)&&N(e,"dir",r[2]),(!t||s&8)&&N(e,"contenteditable",r[3])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&S(e),a&&a.d(r),o[9](null)}}}function ei(o){let e,n,t;const i=o[7].default,a=ye(i,o,o[6],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=ne(e);a&&a.l(s),s.forEach(S),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-inline","true"),N(e,"data-slate-void",n=o[5]["data-slate-void"]),N(e,"dir",o[2]),N(e,"contenteditable",o[3]),N(e,"class","svelte-19k8gul")},m(r,s){R(r,e,s),a&&a.m(e,null),o[8](e),t=!0},p(r,s){a&&a.p&&(!t||s&64)&&Le(a,i,r,r[6],t?Fe(i,r[6],s,null):Se(r[6]),null),(!t||s&32&&n!==(n=r[5]["data-slate-void"]))&&N(e,"data-slate-void",n),(!t||s&4)&&N(e,"dir",r[2]),(!t||s&8)&&N(e,"contenteditable",r[3])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&S(e),a&&a.d(r),o[8](null)}}}function ti(o){let e,n,t,i,a;const r=[ei,$o],s=[];function l(c,d){return d&2&&(e=null),e==null&&(e=!!c[4].isInline(c[1])),e?0:1}return n=l(o,-1),t=s[n]=r[n](o),{c(){t.c(),i=A()},l(c){t.l(c),i=A()},m(c,d){s[n].m(c,d),R(c,i,d),a=!0},p(c,[d]){let h=n;n=l(c,d),n===h?s[n].p(c,d):(X(),C(s[h],1,1,()=>{s[h]=null}),G(),t=s[n],t?t.p(c,d):(t=s[n]=r[n](c),t.c()),b(t,1),t.m(i.parentNode,i))},i(c){a||(b(t),a=!0)},o(c){C(t),a=!1},d(c){s[n].d(c),c&&S(i)}}}function ni(o,e,n){let{$$slots:t={},$$scope:i}=e,{element:a}=e,{ref:r}=e,{dir:s}=e,{contenteditable:l}=e;const c=ue();function d(u){le[u?"unshift":"push"](()=>{r=u,n(0,r)})}function h(u){le[u?"unshift":"push"](()=>{r=u,n(0,r)})}return o.$$set=u=>{n(5,e=Pe(Pe({},e),Ze(u))),"element"in u&&n(1,a=u.element),"ref"in u&&n(0,r=u.ref),"dir"in u&&n(2,s=u.dir),"contenteditable"in u&&n(3,l=u.contenteditable),"$$scope"in u&&n(6,i=u.$$scope)},e=Ze(e),[r,a,s,l,c,e,i,t,d,h]}class oi extends Q{constructor(e){super();Z(this,e,ni,ti,ie,{element:1,ref:0,dir:2,contenteditable:3})}}function ii(o){let e,n;const t=o[1].default,i=ye(t,o,o[0],null);return{c(){e=x("span"),i&&i.c(),this.h()},l(a){e=$(a,"SPAN",{"data-slate-leaf":!0});var r=ne(e);i&&i.l(r),r.forEach(S),this.h()},h(){N(e,"data-slate-leaf","true")},m(a,r){R(a,e,r),i&&i.m(e,null),n=!0},p(a,[r]){i&&i.p&&(!n||r&1)&&Le(i,t,a,a[0],n?Fe(t,a[0],r,null):Se(a[0]),null)},i(a){n||(b(i,a),n=!0)},o(a){C(i,a),n=!1},d(a){a&&S(e),i&&i.d(a)}}}function ri(o,e,n){let{$$slots:t={},$$scope:i}=e;return o.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,t]}class ai extends Q{constructor(e){super();Z(this,e,ri,ii,ie,{})}}function li(o){let e,n,t;const i=o[4].default,a=ye(i,o,o[3],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-placeholder":!0,style:!0,contenteditable:!0});var s=ne(e);a&&a.l(s),s.forEach(S),this.h()},h(){N(e,"data-slate-placeholder",""),N(e,"style",o[1]),N(e,"contenteditable",o[2]),Vn(()=>o[5].call(e))},m(r,s){R(r,e,s),a&&a.m(e,null),n=Kn(e,o[5].bind(e)),t=!0},p(r,[s]){a&&a.p&&(!t||s&8)&&Le(a,i,r,r[3],t?Fe(i,r[3],s,null):Se(r[3]),null),(!t||s&2)&&N(e,"style",r[1]),(!t||s&4)&&N(e,"contenteditable",r[2])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&S(e),a&&a.d(r),n()}}}function si(o,e,n){let{$$slots:t={},$$scope:i}=e,{clientHeight:a}=e,{style:r}=e,{contenteditable:s}=e;function l(){a=this.clientHeight,n(0,a)}return o.$$set=c=>{"clientHeight"in c&&n(0,a=c.clientHeight),"style"in c&&n(1,r=c.style),"contenteditable"in c&&n(2,s=c.contenteditable),"$$scope"in c&&n(3,i=c.$$scope)},[a,r,s,i,t,l]}class ci extends Q{constructor(e){super();Z(this,e,si,li,ie,{clientHeight:0,style:1,contenteditable:2})}}const fi=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),rt={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},sn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:fi?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},at={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let o=1;o<20;o++)at["f"+o]=111+o;function cn(o,e={}){Array.isArray(o)||(o=[o]);const n=o.map(t=>ui(t,e));return function(i){return n.some(a=>di(a,i))}}function yi(o,e,n={}){return cn(o,n)(e)}function lt(o){return cn(o,{byKey:!0})}function ui(o,e={}){const n=e&&e.byKey,t={};o=o.replace("++","+add");const i=o.split("+"),{length:a}=i;for(const r in rt)t[rt[r]]=!1;for(let r of i){const s=r.endsWith("?")&&r.length>1;s&&(r=r.slice(0,-1));const l=fn(r),c=rt[l];if(r.length>1&&!c&&!sn[r]&&!at[l])throw new TypeError(`Unknown modifier: "${r}"`);(a===1||!c)&&(n?t.key=l:t.which=hi(r)),c&&(t[c]=s?null:!0)}return t}function di(o,e){for(const n in o){const t=o[n];let i;if(t!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=t===91&&e.which===93?91:e.which:i=e[n],!(i==null&&t===!1)&&i!==t))return!1}return!0}function hi(o){return o=fn(o),at[o]||o.toUpperCase().charCodeAt(0)}function fn(o){return o=o.toLowerCase(),o=sn[o]||o,o}const gi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},mi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},_i={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function U(o){const e=gi[o],n=mi[o],t=_i[o],i=e&&lt(e),a=n&&lt(n),r=t&&lt(t);return s=>!!(i&&i(s)||Pt&&a&&a(s)||!Pt&&r&&r(s))}var q={isBold:U("bold"),isCompose:U("compose"),isMoveBackward:U("moveBackward"),isMoveForward:U("moveForward"),isDeleteBackward:U("deleteBackward"),isDeleteForward:U("deleteForward"),isDeleteLineBackward:U("deleteLineBackward"),isDeleteLineForward:U("deleteLineForward"),isDeleteWordBackward:U("deleteWordBackward"),isDeleteWordForward:U("deleteWordForward"),isExtendBackward:U("extendBackward"),isExtendForward:U("extendForward"),isExtendLineBackward:U("extendLineBackward"),isExtendLineForward:U("extendLineForward"),isItalic:U("italic"),isMoveLineBackward:U("moveLineBackward"),isMoveLineForward:U("moveLineForward"),isMoveWordBackward:U("moveWordBackward"),isMoveWordForward:U("moveWordForward"),isRedo:U("redo"),isSplitBlock:U("splitBlock"),isTransposeCharacter:U("transposeCharacter"),isUndo:U("undo")};function wi(o){let e,n,t,i,a,r,s,l;n=new ln({props:{node:o[8],selection:o[9],decorations:o[10],Element:o[1],Leaf:o[2],Placeholder:o[3]}});let c=[o[29],{role:t=o[4]?void 0:"textbox"},{spellcheck:o[5]},{autocorrect:o[6]},{autocapitalize:o[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:i=!o[4]},{"z-index":a=-1}],d={};for(let h=0;h<c.length;h+=1)d=Pe(d,c[h]);return{c(){e=x("div"),v(n.$$.fragment),this.h()},l(h){e=$(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var u=ne(e);Y(n.$$.fragment,u),u.forEach(S),this.h()},h(){kt(e,d),Et(e,"svelte-m59z04",!0)},m(h,u){R(h,e,u),H(n,e,null),o[39](e),r=!0,s||(l=[J(e,"beforeinput",o[13]),J(e,"keydown",o[15]),J(e,"input",o[14]),J(e,"focus",o[16]),J(e,"blur",o[17]),J(e,"click",o[18]),J(e,"compositionend",o[19]),J(e,"compositionupdate",o[20]),J(e,"compositionstart",o[21]),J(e,"paste",o[22]),J(e,"copy",o[23]),J(e,"cut",o[24]),J(e,"dragover",o[25]),J(e,"dragstart",o[26]),J(e,"drop",o[27]),J(e,"dragend",o[28])],s=!0)},p(h,u){const m={};u[0]&256&&(m.node=h[8]),u[0]&512&&(m.selection=h[9]),u[0]&1024&&(m.decorations=h[10]),u[0]&2&&(m.Element=h[1]),u[0]&4&&(m.Leaf=h[2]),u[0]&8&&(m.Placeholder=h[3]),n.$set(m),kt(e,d=Un(c,[u[0]&536870912&&h[29],(!r||u[0]&16&&t!==(t=h[4]?void 0:"textbox"))&&{role:t},(!r||u[0]&32)&&{spellcheck:h[5]},(!r||u[0]&64)&&{autocorrect:h[6]},(!r||u[0]&128)&&{autocapitalize:h[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!r||u[0]&16&&i!==(i=!h[4]))&&{contenteditable:i},{"z-index":a}])),Et(e,"svelte-m59z04",!0)},i(h){r||(b(n.$$.fragment,h),r=!0)},o(h){C(n.$$.fragment,h),r=!1},d(h){h&&S(e),V(n),o[39](null),s=!1,qn(l)}}}function Ce(o,e){return se(e)&&ot(o,e)}function j(o,e){return se(e)&&ot(o,e,{editable:!0})}function un(o,e){if(Dt.get(o))return!1;{const n=Ce(o,e)&&fe(e);return g.isVoid(o,n)}}function pi(o,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),Xn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function ki(o,e,n){let t,i,a,r,s;const l=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let c=bt(e,l),d,h,{Element:u=oi}=e,{Leaf:m=ai}=e,{Placeholder:_=ci}=e,{placeholder:D}=e,{readOnly:p=!1}=e,{autoFocus:E=!1}=e,{decorate:F=Xt}=e,{scrollSelectionIntoView:K=pi}=e,{ref:M=void 0}=e,{spellcheck:L=!0}=e,{autocorrect:oe="true"}=e,{autocapitalize:T="true"}=e,{onKeyDown:I=()=>{}}=e;const st=Ut();ve(o,st,f=>n(38,h=f));const gn=qt(),Ie=uo(),mn=Yt(),Ye=ho();ve(o,Ye,f=>n(37,d=f));const y={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null};let Xe=[],Ge;function _n(){if(!y.isComposing&&!y.isUpdatingSelection&&!y.isDraggingInternally){const f=Ne(t),w=re(t,t),k=f.getSelection();if(f.activeElement===w?(n(35,y.latestElement=f.activeElement,y),ke.set(t,!0),Ie.set(!0)):(ke.delete(t),Ie.set(!1)),!k){W.deselect(t);return}const{anchorNode:O,focusNode:P}=k,z=j(t,O)||un(t,O),ae=j(t,P)||un(t,P);if(z&&ae){const Ae=Te(t,k,{exactMatch:!1,suppressThrow:!0});W.select(t,Ae)}}}function ct(){r()}Qe(()=>{const f=$e(M);return f&&(je.set(t,f),f.document.addEventListener("selectionchange",ct)),Ue.set(t,M),we.set(t,M),_e.set(M,t),()=>{Ue.delete(t),we.delete(t),f&&(je.delete(t),f.document.removeEventListener("selectionchange",ct))}});function wn(){const f=Ne(t),w=f==null?void 0:f.getSelection();if(y.isComposing||!w||!It(t))return;const k=w.type!=="None";if(!k)return;const O=Ue.get(t);let P=!1;if(O.contains(w.anchorNode)&&O.contains(w.focusNode)&&(P=!0),k&&P&&i){const ae=Te(t,w,{exactMatch:!0,suppressThrow:!0});if(ae&&B.equals(ae,i))return}if(i&&!co(t,i)){n(8,t.selection=Te(t,w,{exactMatch:!1,suppressThrow:!1}),t),n(9,i=t.selection),Ye.set(i);return}y.isUpdatingSelection&&clearTimeout(y.isUpdatingSelection),n(35,y.isUpdatingSelection=setTimeout(()=>{z&&et&&re(t,t).focus(),n(35,y.isUpdatingSelection=null,y)}),y);const z=i&&P&&qe(t,i);z?(B.isBackward(i)?w.setBaseAndExtent(z.endContainer,z.endOffset,z.startContainer,z.startOffset):w.setBaseAndExtent(z.startContainer,z.startOffset,z.endContainer,z.endOffset),K(t,z)):w.removeAllRanges()}Yn(()=>s());function pn(f){if(!p&&j(t,f.target)){const w=f.inputType,k=f.dataTransfer||f.data||void 0;if(w==="insertCompositionText"||w==="deleteCompositionText")return;let O=!1;if(w==="insertText"&&i&&B.isCollapsed(i)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&i.anchor.offset!==0){O=!0,t.marks&&(O=!1);const P=g.above(t,{at:i.anchor,match:z=>g.isInline(t,z),mode:"highest"});if(P){const[,z]=P;g.isEnd(t,i.anchor,z)&&(O=!1)}}if(O||f.preventDefault(),!w.startsWith("delete")||w.startsWith("deleteBy")){const[P]=f.getTargetRanges();if(P){const z=Te(t,P,{exactMatch:!1,suppressThrow:!1});(!i||!B.equals(i,z))&&W.select(t,z)}}if(i&&B.isExpanded(i)&&w.startsWith("delete")){const P=w.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:P});return}switch(w){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{w==="insertFromComposition"&&y.isComposing&&n(35,y.isComposing=!1,y),(k==null?void 0:k.constructor.name)==="DataTransfer"?t.insertData(k):typeof k=="string"&&(O?Xe.push(()=>g.insertText(t,k)):g.insertText(t,k));break}}}}function kn(f){for(const w of Xe)w();Xe.length=0}function En(f){if(!p&&!y.isComposing&&j(t,f.target)){const w=t.children[i!==null?i.focus.path[0]:0],k=Qt(ee.string(w))==="rtl";if(q.isRedo(f)){f.preventDefault();const O=t;typeof O.redo=="function"&&O.redo()}else if(q.isUndo(f)){f.preventDefault();const O=t;typeof O.undo=="function"&&O.undo()}else if(q.isMoveLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",reverse:!0});else if(q.isMoveLineForward(f))f.preventDefault(),W.move(t,{unit:"line"});else if(q.isExtendLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus",reverse:!0});else if(q.isExtendLineForward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus"});else if(q.isMoveBackward(f))f.preventDefault(),i&&B.isCollapsed(i)?W.move(t,{reverse:!k}):W.collapse(t,{edge:"start"});else if(q.isMoveForward(f))f.preventDefault(),i&&B.isCollapsed(i)?W.move(t,{reverse:k}):W.collapse(t,{edge:"end"});else if(q.isMoveWordBackward(f))f.preventDefault(),i&&B.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:!k});else if(q.isMoveWordForward(f))f.preventDefault(),i&&B.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:k});else if(!Tt)q.isBold(f)||q.isItalic(f)||q.isTransposeCharacter(f)?f.preventDefault():q.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):q.isDeleteBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):q.isDeleteForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):q.isDeleteLineBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):q.isDeleteLineForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):q.isDeleteWordBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):q.isDeleteWordForward(f)&&(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((Bt||tt)&&i&&(q.isDeleteBackward(f)||q.isDeleteForward(f))&&B.isCollapsed(i)){const O=ee.parent(t,i.anchor.path);if(He.isElement(O)&&g.isVoid(t,O)&&g.isInline(t,O)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return I(f)}}}function bn(f){if(!p&&!y.isUpdatingSelection&&j(t,f.target)){const w=re(t,t),k=Ne(t);if(n(35,y.latestElement=k.activeElement,y),et&&f.target!==w){w.focus();return}ke.set(t,!0),Ie.set(!0)}}function Cn(f){if(p||y.isUpdatingSelection||!j(t,f.target))return;const w=Ne(t);if(y.latestElement===w.activeElement)return;const k=f.relatedTarget,O=re(t,t);if(k!==O&&!(te(k)&&k.hasAttribute("data-slate-spacer"))){if(k!=null&&se(k)&&ot(t,k)){const P=fe(k);if(He.isElement(P)&&!t.isVoid(P))return}if(tt){const P=w.getSelection();P==null||P.removeAllRanges()}ke.delete(t),Ie.set(!1)}}function Dn(f){if(!p&&Ce(t,f.target)&&se(f.target)){const w=fe(f.target),k=Ee(w);if(g.hasPath(t,k)&&ee.get(t,k)===w){const P=g.start(t,k),z=g.end(t,k),ae=g.void(t,{at:P}),Ae=g.void(t,{at:z});if(ae&&Ae&&me.equals(ae[1],Ae[1])){const Mn=g.range(t,P);W.select(t,Mn)}}}}function yn(f){if(j(t,f.target)){n(35,y.isComposing=!1,y);const w=f.data;if(!tt&&!ro&&!no&&!ao&&w&&g.insertText(t,w),i&&B.isCollapsed(i)){const k=i.anchor.path,O=ee.leaf(t,k);y.hasInsertPrefixInCompositon&&(n(35,y.hasInsertPrefixInCompositon=!1,y),g.withoutNormalizing(t,()=>{const P=O.text.replace(/^\uFEFF/,"");W.delete(t,{distance:O.text.length,reverse:!0}),W.insertText(t,P)}))}}}function Ln(f){j(t,f.target)&&n(35,y.isComposing=!0,y)}function Sn(f){if(j(t,f.target)){const{selection:w,marks:k}=t;if(w){if(B.isExpanded(w)){g.deleteFragment(t);return}const O=g.above(t,{match:P=>g.isInline(t,P),mode:"highest"});if(O){const[,P]=O;if(g.isEnd(t,w.anchor,P)){const z=g.after(t,P);W.setSelection(t,{anchor:z,focus:z})}}k&&(n(35,y.hasInsertPrefixInCompositon=!0,y),W.insertNodes(t,ht({text:"\uFEFF"},k),{select:!0}))}}}function Fn(f){!p&&j(t,f.target)&&(!Tt||Zn(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}function On(f){j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}function Pn(f){if(!p&&j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),i))if(B.isExpanded(i))g.deleteFragment(t);else{const w=ee.parent(t,i.anchor.path);g.isVoid(t,w)&&W.delete(t)}}function Bn(f){if(Ce(t,f.target)){const w=fe(f.target);g.isVoid(t,w)&&f.preventDefault()}}function Nn(f){if(!p&&Ce(t,f.target)){const w=fe(f.target),k=Ee(w);if(g.isVoid(t,w)||g.void(t,{at:k,voids:!0})){const P=g.range(t,k);W.select(t,P)}n(35,y.isDraggingInternally=!0,y),t.setFragmentData(f.dataTransfer)}}function Tn(f){if(!p&&Ce(t,f.target)){f.preventDefault();const w=i,k=so(t,f),O=f.dataTransfer;W.select(t,k),y.isDraggingInternally&&(w&&!B.equals(w,k)&&!g.void(t,{at:k,voids:!0})&&W.delete(t,{at:w}),n(35,y.isDraggingInternally=!1,y)),t.insertData(O),It(t)||lo(t)}}function In(f){!p&&y.isDraggingInternally&&Ce(t,f.target)&&n(35,y.isDraggingInternally=!1,y)}function An(f){le[f?"unshift":"push"](()=>{M=f,n(0,M)})}return o.$$set=f=>{e=Pe(Pe({},e),Ze(f)),n(29,c=bt(e,l)),"Element"in f&&n(1,u=f.Element),"Leaf"in f&&n(2,m=f.Leaf),"Placeholder"in f&&n(3,_=f.Placeholder),"placeholder"in f&&n(30,D=f.placeholder),"readOnly"in f&&n(4,p=f.readOnly),"autoFocus"in f&&n(31,E=f.autoFocus),"decorate"in f&&n(32,F=f.decorate),"scrollSelectionIntoView"in f&&n(33,K=f.scrollSelectionIntoView),"ref"in f&&n(0,M=f.ref),"spellcheck"in f&&n(5,L=f.spellcheck),"autocorrect"in f&&n(6,oe=f.autocorrect),"autocapitalize"in f&&n(7,T=f.autocapitalize),"onKeyDown"in f&&n(34,I=f.onKeyDown)},o.$$.update=()=>{if(o.$$.dirty[1]&128&&n(8,t=h),o.$$.dirty[1]&64&&n(9,i=d),o.$$.dirty[0]&256|o.$$.dirty[1]&2&&n(10,a=F([t,[]])),o.$$.dirty[0]&272&&Dt.set(t,p),o.$$.dirty[0]&16&&gn.set(p),o.$$.dirty[1]&2&&mn.set(F),o.$$.dirty[0]&1073742080|o.$$.dirty[1]&18&&t.children.length===1&&Array.from(ee.texts(t)).length===1&&ee.string(t)===""&&!y.isComposing){const f=g.start(t,[]);n(10,a=[...F([t,[]]),{[Be]:!0,placeholder:D,anchor:f,focus:f}])}o.$$.dirty[0]&1|o.$$.dirty[1]&33&&Ge!==E&&M&&(E&&M.focus(),n(36,Ge=E))},r=()=>Ct().then(_n),s=()=>Ct().then(wn),[M,u,m,_,p,L,oe,T,t,i,a,st,Ye,pn,kn,En,bn,Cn,Dn,yn,Ln,Sn,Fn,On,Pn,Bn,Nn,Tn,In,c,D,E,F,K,I,y,Ge,d,h,An]}class Li extends Q{constructor(e){super();Z(this,e,ki,wi,De,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function dn(o,e){const n=(e.top+e.bottom)/2;return o.top<=n&&o.bottom>=n}function hn(o,e,n){const t=qe(o,e).getBoundingClientRect(),i=qe(o,n).getBoundingClientRect();return dn(t,i)&&dn(i,t)}function Ei(o,e){const n=g.range(o,B.end(e)),t=Array.from(g.positions(o,{at:e}));let i=0,a=t.length,r=Math.floor(a/2);if(hn(o,g.range(o,t[i]),n))return g.range(o,t[i],n);if(t.length<2)return g.range(o,t[t.length-1],n);for(;r!==t.length&&r!==i;)hn(o,g.range(o,t[r]),n)?a=r:i=r,r=Math.floor((i+a)/2);return g.range(o,t[a],n)}function Si(o){const e=o,{apply:n,onChange:t,deleteBackward:i}=e;return pe.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return i(a);if(o.selection&&B.isCollapsed(o.selection)){const r=g.above(o,{match:s=>g.isBlock(o,s),at:o.selection});if(r){const[,s]=r,l=g.range(o,s,o.selection.anchor),c=Ei(e,l);B.isCollapsed(c)||W.delete(o,{at:c})}}},e.apply=a=>{const r=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=ce(s);r.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:me.parent(a.path)})){const c=ce(s);r.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:me.common(me.parent(a.path),me.parent(a.newPath))})){const c=ce(s);r.push([l,c])}break}}n(a);for(const[s,l]of r){const[c]=g.node(e,s);xe.set(c,l)}},e.setFragmentData=a=>{const{selection:r}=e;if(!r)return;const[s,l]=B.edges(r),c=g.void(e,{at:s.path}),d=g.void(e,{at:l.path});if(B.isCollapsed(r)&&!c)return;const h=qe(e,r);let u=h.cloneContents(),m=u.childNodes[0];if(u.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(m=F)}),d){const[F]=d,K=h.cloneRange(),M=re(e,F);K.setEndAfter(M),u=K.cloneContents()}if(c&&(m=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const K=F.getAttribute("data-slate-zero-width")==="n";F.textContent=K?`
`:""}),St(m)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(m),u.appendChild(F),m=F}const _=e.getFragment(),D=JSON.stringify(_),p=window.btoa(encodeURIComponent(D));m.setAttribute("data-slate-fragment",p),a.setData("application/x-slate-fragment",p);const E=document.createElement("div");return E.appendChild(u),E.setAttribute("hidden","true"),document.body.appendChild(E),a.setData("text/html",E.innerHTML),a.setData("text/plain",Ot(E)),document.body.removeChild(E),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const r=a.getData("application/x-slate-fragment")||to(a);if(r){const s=decodeURIComponent(window.atob(r)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const r=a.getData("text/plain");if(r){const s=r.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&W.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=yt.get(e);a&&a(),t()},e}export{Li as E,Di as S,Ut as g,yi as i,Si as w};
