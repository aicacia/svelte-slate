var An=Object.defineProperty;var Ie=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var ct=(n,e,t)=>e in n?An(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ft=(n,e)=>{for(var t in e||(e={}))lt.call(e,t)&&ct(n,t,e[t]);if(Ie)for(var t of Ie(e))st.call(e,t)&&ct(n,t,e[t]);return n};var Xe=(n,e)=>{var t={};for(var i in n)lt.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Ie)for(var i of Ie(n))e.indexOf(i)<0&&st.call(n,i)&&(t[i]=n[i]);return t};import{a1 as m,a2 as O,a3 as Mn,S as Q,i as j,s as Se,F as Le,J as Fe,K as Oe,L as Pe,q as C,o as y,r as he,D as ge,a4 as Rn,a5 as me,a6 as re,t as Ae,h as Me,g as A,d as S,e as $,c as ee,a as ie,b as B,I as dt,j as ut,M as _e,l as I,n as Y,p as X,a7 as we,w as W,x as q,y as z,B as V,a8 as te,a9 as Wn,Q as ht,O as le,P as Re,aa as gt,ab as mt,v as Ge,ac as zn,ad as We,ae as ze,af as Vn,ag as vn,C as Je,ah as _t,ai as wt,aj as G,z as Hn,ak as Kn,al as pt,u as Un,E as kt,am as qn,an as Yn,ao as R,ap as Xn,aq as Gn}from"./vendor-ac33971f.js";const Ve=new WeakMap,ve=new WeakMap,Qe=new WeakMap,He=new WeakMap,pe=new WeakMap,ke=new WeakMap,je=new WeakMap,Ee=new WeakMap,Et=new WeakMap,be=new WeakMap,bt=new WeakMap,Ne=Symbol("placeholder");let Jn=0;class Qn{constructor(){this.id=`${Jn++}`}toString(){return this.id}}function Ze(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView||null}function jn(n){return se(n)&&n.nodeType===8}function ne(n){return se(n)&&n.nodeType===1}function se(n){const e=Ze(n);return!!e&&n instanceof e.Node}function Ct(n){const e=n&&n.anchorNode&&Ze(n.anchorNode);return!!e&&n instanceof e.Selection}function Dt(n){return se(n)&&n.nodeType===3}function Zn(n){return n.clipboardData&&n.clipboardData.getData("text/plain")!==""&&n.clipboardData.types.length===1}function xn(n){let[e,t]=n;if(ne(e)&&e.childNodes.length){let i=t===e.childNodes.length,r=i?t-1:t;for([e,r]=yt(e,r,i?"backward":"forward"),i=r<t;ne(e)&&e.childNodes.length;){const a=i?e.childNodes.length-1:0;e=ei(e,a,i?"backward":"forward")}t=i&&e.textContent!=null?e.textContent.length:0}return[e,t]}function $n(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function yt(n,e,t){const{childNodes:i}=n;let r=i[e],a=e,o=!1,s=!1;for(;(jn(r)||ne(r)&&r.childNodes.length===0||ne(r)&&r.getAttribute("contenteditable")==="false")&&!(o&&s);){if(a>=i.length){o=!0,a=e-1,t="backward";continue}if(a<0){s=!0,a=e+1,t="forward";continue}r=i[a],e=a,a+=t==="forward"?1:-1}return[r,e]}function ei(n,e,t){const[i]=yt(n,e,t);return i}function St(n){let e="";if(Dt(n)&&n.nodeValue)return n.nodeValue;if(ne(n)){for(const i of Array.from(n.childNodes))e+=St(i);const t=getComputedStyle(n).getPropertyValue("display");(t==="block"||t==="list"||n.tagName==="BR")&&(e+=`
`)}return e}const ti=/data-slate-fragment="(.+?)"/m;function ni(n){const e=n.getData("text/html"),[,t]=e.match(ti)||[];return t}const ii=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Lt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const xe=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),$e=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),oi=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Ft=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),ri=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),ai=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),li=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Ot=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Pt=!ri&&!oi&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function et(n){const e=Qe.get(n);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(n){let e=je.get(n);return e||(e=new Qn,je.set(n,e)),e}function Ce(n){const e=[];let t=n;for(;;){const i=ve.get(t);if(i==null){if(m.isEditor(t))return e;break}const r=Ve.get(t);if(r==null)break;e.unshift(r),t=i}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(n)}`)}function Be(n){const e=ae(n,n),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:e.ownerDocument}function Nt(n){return!!be.get(n)}function si(n){const e=ae(n,n),t=Be(n);be.set(n,!0),t.activeElement!==e&&e.focus({preventScroll:!0})}function tt(n,e,t={}){const{editable:i=!1}=t,r=ae(n,n);let a;try{a=ne(e)?e:e.parentElement}catch(o){if(!o.message.includes('Permission denied to access property "nodeType"'))throw o}return a?a.closest("[data-svelte-editor]")===r&&(!i||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===r||!!a.getAttribute("data-slate-zero-width")):!1}function ae(n,e,t=!0){const i=Ee.get(n),r=m.isEditor(e)?He.get(n):i==null?void 0:i.get(ce(e));if(!r&&t)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return r}function Bt(n,e,t=!0){const[i]=m.node(n,e.path),r=ae(n,i,t);let a;m.void(n,{at:e})&&(e={path:e.path,offset:0});const o="[data-slate-string], [data-slate-zero-width]",s=r?Array.from(r.querySelectorAll(o)):[];let l=0;for(const f of s){const h=f.childNodes[0];if(h==null||h.textContent==null)continue;const{length:g}=h.textContent,u=f.getAttribute("data-slate-length"),_=u==null?g:parseInt(u,10),w=l+_;if(e.offset<=w){const D=Math.min(g,Math.max(0,e.offset-l));a=[h,D];break}l=w}if(!a&&t)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function Ke(n,e,t=!0){const{anchor:i,focus:r}=e,a=O.isBackward(e),o=Bt(n,i,t);if(!o)return;const s=O.isCollapsed(e)?o:Bt(n,r),f=et(n).document.createRange(),[h,g]=a?s:o,[u,_]=a?o:s,D=!!(ne(h)?h:h.parentElement).getAttribute("data-slate-zero-width"),p=!!(ne(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return f.setStart(h,D?1:g),f.setEnd(u,p?1:_),f}function fe(n){let e=ne(n)?n:n.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const t=e?pe.get(e):null;if(!t)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return t}function ci(n,e){const{clientX:t,clientY:i,target:r}=e;if(t==null||i==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=fe(e.target),o=Ce(a);if(m.isVoid(n,a)){const h=r.getBoundingClientRect(),g=n.isInline(a)?t-h.left<h.left+h.width-t:i-h.top<h.top+h.height-i,u=m.point(n,o,{edge:g?"start":"end"}),_=g?m.before(n,u):m.after(n,u);if(_)return m.range(n,_)}let s;const{document:l}=et(n);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(t,i);else{const h=l.caretPositionFromPoint(t,i);h&&(s=l.createRange(),s.setStart(h.offsetNode,h.offset),s.setEnd(h.offsetNode,h.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Te(n,s,{exactMatch:!1,suppressThrow:!1})}function Tt(n,e,t){var u;const{exactMatch:i,suppressThrow:r}=t,[a,o]=i?e:xn(e),s=a.parentNode;let l=null,f=0;if(s){const _=s.closest('[data-slate-void="true"]');let w=s.closest("[data-slate-leaf]"),D=null;if(w){l=w.closest('[data-slate-node="text"]');const p=et(n).document.createRange();p.setStart(l,0),p.setEnd(a,o);const F=p.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(U=>{U.parentNode.removeChild(U)}),f=F.textContent.length,D=l}else _&&(w=_.querySelector("[data-slate-leaf]"),w?(l=w.closest('[data-slate-node="text"]'),D=w,f=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(L=>{f-=L.textContent.length})):f=1);D&&f===D.textContent.length&&(s.hasAttribute("data-slate-zero-width")||xe&&((u=D.textContent)==null?void 0:u.endsWith(`

`)))&&f--}if(!l){if(r)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const h=fe(l);return{path:Ce(h),offset:f}}function Te(n,e,t){const{exactMatch:i,suppressThrow:r}=t,a=Ct(e)?e.anchorNode:e.startContainer;let o,s,l,f,h;if(a&&(Ct(e)?(o=e.anchorNode,s=e.anchorOffset,l=e.focusNode,f=e.focusOffset,Ft&&$n()?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed):(o=e.startContainer,s=e.startOffset,l=e.endContainer,f=e.endOffset,h=e.collapsed)),o==null||l==null||s==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const g=Tt(n,[o,s],{exactMatch:i,suppressThrow:r});if(!g)return null;const u=h?g:Tt(n,[l,f],{exactMatch:i,suppressThrow:r});if(!u)return null;let _={anchor:g,focus:u};return O.isExpanded(_)&&O.isForward(_)&&ne(l)&&m.void(n,{at:_.focus,mode:"highest"})&&(_=m.unhangRange(n,_,{voids:!0})),_}function fi(n,e){const{anchor:t,focus:i}=e;return m.hasPath(n,t.path)&&m.hasPath(n,i.path)}function It(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){const a=n[r],o=e[r],t=a,{anchor:s,focus:l}=t,f=Xe(t,["anchor","focus"]),i=o,{anchor:h,focus:g}=i,u=Xe(i,["anchor","focus"]);if(!O.equals(a,o)||a[Ne]!==o[Ne]||!Mn(f,u))return!1}return!0}function At(n,e){return n===e||!!n&&!!e&&O.equals(n,e)}function di(n){let e;const t=n[7].default,i=Le(t,n,n[6],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,a){i&&i.m(r,a),e=!0},p(r,[a]){i&&i.p&&(!e||a&64)&&Fe(i,t,r,r[6],e?Pe(t,r[6],a,null):Oe(r[6]),null)},i(r){e||(C(i,r),e=!0)},o(r){y(i,r),e=!1},d(r){i&&i.d(r)}}}const Mt={},Rt={},Wt={},zt={},Vt={};function vt(){const n=me(Mt);if(!n)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return n}function de(){return Rn(vt())}function Ht(){const n=me(Rt);if(!n)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return n}function ui(){const n=me(Wt);if(!n)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return n}function Kt(){const n=me(zt);if(!n)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return n}function hi(){const n=me(Vt);if(!n)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return n}function Ut(n){return[]}function gi(n,e,t){let{$$slots:i={},$$scope:r}=e,{editor:a}=e,{value:o=a.children}=e,{selection:s=a.selection}=e;const l=ge(a);he(Mt,l);const f=ge(!0);he(Rt,f);const h=ge(!1);he(Wt,h);const g=ge(Ut);he(zt,g);const u=ge(a.selection);he(Vt,u);function _(){t(1,s=a.selection),t(0,o=a.children)}bt.set(a,_);let w=a,D,L;return n.$$set=p=>{"editor"in p&&t(2,a=p.editor),"value"in p&&t(0,o=p.value),"selection"in p&&t(1,s=p.selection),"$$scope"in p&&t(6,r=p.$$scope)},n.$$.update=()=>{n.$$.dirty&12&&a!==w&&(t(3,w=a),l.set(a)),n.$$.dirty&17&&D!==o&&(l.update(p=>(p.children=o,p)),t(4,D=o)),n.$$.dirty&38&&(At(L,s)||(u.set(s),l.set(a),t(5,L=s)))},[o,s,a,w,D,L,r,i]}class yo extends Q{constructor(e){super();j(this,e,gi,di,Se,{editor:2,value:0,selection:1})}}const qt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Yt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",mi=new RegExp("^[^"+Yt+"]*["+qt+"]"),_i=new RegExp("^[^"+qt+"]*["+Yt+"]");function Xt(n){const e=String(n||"");return mi.test(e)?"rtl":_i.test(e)?"ltr":"neutral"}function Gt(n){let e=`
`,t;return{c(){t=Ae(e)},l(i){t=Me(i,e)},m(i,r){A(i,t,r)},d(i){i&&S(t)}}}function wi(n){let e,t,i=n[1]&&Gt();return{c(){e=$("span"),t=Ae(n[0]),i&&i.c(),this.h()},l(r){e=ee(r,"SPAN",{"data-slate-string":!0});var a=ie(e);t=Me(a,n[0]),i&&i.l(a),a.forEach(S),this.h()},h(){B(e,"data-slate-string","true")},m(r,a){A(r,e,a),dt(e,t),i&&i.m(e,null)},p(r,[a]){a&1&&ut(t,r[0]),r[1]?i||(i=Gt(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:_e,o:_e,d(r){r&&S(e),i&&i.d()}}}function pi(n,e,t){let{text:i}=e,{isTrailing:r=!1}=e;return n.$$set=a=>{"text"in a&&t(0,i=a.text),"isTrailing"in a&&t(1,r=a.isTrailing)},[i,r]}class ki extends Q{constructor(e){super();j(this,e,pi,wi,re,{text:0,isTrailing:1})}}function Jt(n){let e;return{c(){e=$("br")},l(t){e=ee(t,"BR",{})},m(t,i){A(t,e,i)},d(t){t&&S(e)}}}function Ei(n){let e,t="\uFEFF",i,r,a=n[1]&&Jt();return{c(){e=$("span"),i=Ae(t),a&&a.c(),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ie(e);i=Me(s,t),a&&a.l(s),s.forEach(S),this.h()},h(){B(e,"data-slate-zero-width",r=n[1]?"n":"z"),B(e,"data-slate-length",n[0])},m(o,s){A(o,e,s),dt(e,i),a&&a.m(e,null)},p(o,[s]){o[1]?a||(a=Jt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&r!==(r=o[1]?"n":"z")&&B(e,"data-slate-zero-width",r),s&1&&B(e,"data-slate-length",o[0])},i:_e,o:_e,d(o){o&&S(e),a&&a.d()}}}function bi(n,e,t){let{length:i=0}=e,{isLineBreak:r=!1}=e;return n.$$set=a=>{"length"in a&&t(0,i=a.length),"isLineBreak"in a&&t(1,r=a.isLineBreak)},[i,r]}class nt extends Q{constructor(e){super();j(this,e,bi,Ei,re,{length:0,isLineBreak:1})}}function Ci(n){let e,t;return e=new ki({props:{isTrailing:n[5],text:n[0].text}}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p(i,r){const a={};r&32&&(a.isTrailing=i[5]),r&1&&(a.text=i[0].text),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Di(n){let e,t;return e=new nt({}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p:_e,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function yi(n){let e,t;return e=new nt({props:{isLineBreak:!0}}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p:_e,i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Si(n){let e,t;return e=new nt({props:{length:te.string(n[1]).length}}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p(i,r){const a={};r&2&&(a.length=te.string(i[1]).length),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Li(n){let e,t,i,r;const a=[Si,yi,Di,Ci],o=[];function s(l,f){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(n),t=o[e]=a[e](n),{c(){t.c(),i=I()},l(l){t.l(l),i=I()},m(l,f){o[e].m(l,f),A(l,i,f),r=!0},p(l,[f]){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=a[e](l),t.c()),C(t,1),t.m(i.parentNode,i))},i(l){r||(C(t),r=!0)},o(l){y(t),r=!1},d(l){o[e].d(l),l&&S(i)}}}function Fi(n,e,t){let i,r,a,o,s,l,{isLast:f}=e,{leaf:h}=e,{parent:g}=e,{text:u}=e;const _=de();return n.$$set=w=>{"isLast"in w&&t(6,f=w.isLast),"leaf"in w&&t(0,h=w.leaf),"parent"in w&&t(1,g=w.parent),"text"in w&&t(7,u=w.text)},n.$$.update=()=>{n.$$.dirty&65&&t(5,i=f&&h.text.slice(-1)===`
`),n.$$.dirty&128&&t(9,r=Ce(u)),n.$$.dirty&512&&t(8,a=we.parent(r)),n.$$.dirty&2&&t(4,o=_.isVoid(g)),n.$$.dirty&1&&t(2,s=h.text===""),n.$$.dirty&390&&t(3,l=s&&g.children[g.children.length-1]===u&&!_.isInline(g)&&m.string(_,a)==="")},[h,g,s,l,o,i,f,u,a,r]}class Oi extends Q{constructor(e){super();j(this,e,Fi,Li,re,{isLast:6,leaf:0,parent:1,text:7})}}function Qt(n){let e,t,i,r;function a(l){n[7](l)}var o=n[5];function s(l){let f={$$slots:{default:[Pi]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.clientHeight=l[6]),{props:f}}return o&&(e=new o(s(n)),le.push(()=>Re(e,"clientHeight",a))),{c(){e&&W(e.$$.fragment),i=I()},l(l){e&&q(e.$$.fragment,l),i=I()},m(l,f){e&&z(e,l,f),A(l,i,f),r=!0},p(l,f){const h={};if(f&514&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.clientHeight=l[6],ht(()=>t=!1)),o!==(o=l[5])){if(e){Y();const g=e;y(g.$$.fragment,1,0,()=>{V(g,1)}),X()}o?(e=new o(s(l)),le.push(()=>Re(e,"clientHeight",a)),W(e.$$.fragment),C(e.$$.fragment,1),z(e,i.parentNode,i)):e=null}else o&&e.$set(h)},i(l){r||(e&&C(e.$$.fragment,l),r=!0)},o(l){e&&y(e.$$.fragment,l),r=!1},d(l){l&&S(i),e&&V(e,l)}}}function Pi(n){let e=n[1].placeholder+"",t;return{c(){t=Ae(e)},l(i){t=Me(i,e)},m(i,r){A(i,t,r)},p(i,r){r&2&&e!==(e=i[1].placeholder+"")&&ut(t,e)},d(i){i&&S(t)}}}function Ni(n){let e,t,i,r=Ne in n[1]&&Qt(n);return t=new Oi({props:{isLast:n[0],leaf:n[1],parent:n[2],text:n[3]}}),{c(){r&&r.c(),e=I(),W(t.$$.fragment)},l(a){r&&r.l(a),e=I(),q(t.$$.fragment,a)},m(a,o){r&&r.m(a,o),A(a,e,o),z(t,a,o),i=!0},p(a,o){Ne in a[1]?r?(r.p(a,o),o&2&&C(r,1)):(r=Qt(a),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(Y(),y(r,1,1,()=>{r=null}),X());const s={};o&1&&(s.isLast=a[0]),o&2&&(s.leaf=a[1]),o&4&&(s.parent=a[2]),o&8&&(s.text=a[3]),t.$set(s)},i(a){i||(C(r),C(t.$$.fragment,a),i=!0)},o(a){y(r),y(t.$$.fragment,a),i=!1},d(a){r&&r.d(a),a&&S(e),V(t,a)}}}function Bi(n){let e,t,i;var r=n[4];function a(o){return{props:{leaf:o[1],$$slots:{default:[Ni]},$$scope:{ctx:o}}}}return r&&(e=new r(a(n))),{c(){e&&W(e.$$.fragment),t=I()},l(o){e&&q(e.$$.fragment,o),t=I()},m(o,s){e&&z(e,o,s),A(o,t,s),i=!0},p(o,[s]){const l={};if(s&2&&(l.leaf=o[1]),s&623&&(l.$$scope={dirty:s,ctx:o}),r!==(r=o[4])){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{V(f,1)}),X()}r?(e=new r(a(o)),W(e.$$.fragment),C(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else r&&e.$set(l)},i(o){i||(e&&C(e.$$.fragment,o),i=!0)},o(o){e&&y(e.$$.fragment,o),i=!1},d(o){o&&S(t),e&&V(e,o)}}}function Ti(n,e,t){let{isLast:i}=e,{leaf:r}=e,{parent:a}=e,{text:o}=e,{Leaf:s}=e,{Placeholder:l}=e,f,h;Wn(()=>{if(Ot){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight="")}});function g(u){f=u,t(6,f)}return n.$$set=u=>{"isLast"in u&&t(0,i=u.isLast),"leaf"in u&&t(1,r=u.leaf),"parent"in u&&t(2,a=u.parent),"text"in u&&t(3,o=u.text),"Leaf"in u&&t(4,s=u.Leaf),"Placeholder"in u&&t(5,l=u.Placeholder)},n.$$.update=()=>{if(n.$$.dirty&64&&f!==h&&Ot){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight=`${f}px`)}},[i,r,a,o,s,l,f,g]}class jt extends Q{constructor(e){super();j(this,e,Ti,Bi,re,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function Zt(n,e,t){const i=n.slice();return i[11]=e[t],i[13]=t,i}function xt(n,e){let t,i,r,a;var o=jt;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return o&&(i=new o(s(e))),{key:n,first:null,c(){t=I(),i&&W(i.$$.fragment),r=I(),this.h()},l(l){t=I(),i&&q(i.$$.fragment,l),r=I(),this.h()},h(){this.first=t},m(l,f){A(l,t,f),i&&z(i,l,f),A(l,r,f),a=!0},p(l,f){e=l;const h={};if(f&8&&(h.Placeholder=e[3]),f&16&&(h.Leaf=e[4]),f&129&&(h.isLast=e[0]&&e[13]===e[7].length-1),f&2&&(h.parent=e[1]),f&128&&(h.leaf=e[11]),f&4&&(h.text=e[2]),o!==(o=jt)){if(i){Y();const g=i;y(g.$$.fragment,1,0,()=>{V(g,1)}),X()}o?(i=new o(s(e)),W(i.$$.fragment),C(i.$$.fragment,1),z(i,r.parentNode,r)):i=null}else o&&i.$set(h)},i(l){a||(i&&C(i.$$.fragment,l),a=!0)},o(l){i&&y(i.$$.fragment,l),a=!1},d(l){l&&S(t),l&&S(r),i&&V(i,l)}}}function Ii(n){let e,t=[],i=new Map,r,a=n[7];const o=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=Zt(n,a,s),f=o(l);i.set(f,t[s]=xt(f,l))}return{c(){e=$("span");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=ee(s,"SPAN",{"data-slate-node":!0});var l=ie(e);for(let f=0;f<t.length;f+=1)t[f].l(l);l.forEach(S),this.h()},h(){B(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let f=0;f<t.length;f+=1)t[f].m(e,null);n[9](e),r=!0},p(s,[l]){l&223&&(a=s[7],Y(),t=gt(t,l,o,1,s,a,i,e,mt,xt,null,Zt),X())},i(s){if(!r){for(let l=0;l<a.length;l+=1)C(t[l]);r=!0}},o(s){for(let l=0;l<t.length;l+=1)y(t[l]);r=!1},d(s){s&&S(e);for(let l=0;l<t.length;l+=1)t[l].d();n[9](null)}}}function Ai(n,e,t){let i,r,{decorations:a}=e,{isLast:o}=e,{parent:s}=e,{text:l}=e,{Placeholder:f}=e,{Leaf:h}=e;const g=de();let u;Ge(()=>{var w;(w=Ee.get(g))==null||w.set(r,u),ke.set(l,u),pe.set(u,l)});function _(w){le[w?"unshift":"push"](()=>{u=w,t(5,u)})}return n.$$set=w=>{"decorations"in w&&t(8,a=w.decorations),"isLast"in w&&t(0,o=w.isLast),"parent"in w&&t(1,s=w.parent),"text"in w&&t(2,l=w.text),"Placeholder"in w&&t(3,f=w.Placeholder),"Leaf"in w&&t(4,h=w.Leaf)},n.$$.update=()=>{var w;n.$$.dirty&260&&t(7,i=zn.decorations(l,a)),n.$$.dirty&4&&t(6,r=ce(l)),n.$$.dirty&100&&u&&((w=Ee.get(g))==null||w.set(r,u),ke.set(l,u),pe.set(u,l))},[o,s,l,f,h,u,r,i,a,_]}class De extends Q{constructor(e){super();j(this,e,Ai,Ii,re,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Mi(n){let e,t;return e=new rn({props:{node:n[0],decorations:n[1],selection:n[2],Element:n[3],Placeholder:n[5],Leaf:n[4]}}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p(i,r){const a={};r&1&&(a.node=i[0]),r&2&&(a.decorations=i[1]),r&4&&(a.selection=i[2]),r&8&&(a.Element=i[3]),r&32&&(a.Placeholder=i[5]),r&16&&(a.Leaf=i[4]),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Ri(n){let e,t,i,r;const a=[zi,Wi],o=[];function s(l,f){return l[7]?0:1}return e=s(n),t=o[e]=a[e](n),{c(){t.c(),i=I()},l(l){t.l(l),i=I()},m(l,f){o[e].m(l,f),A(l,i,f),r=!0},p(l,f){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=a[e](l),t.c()),C(t,1),t.m(i.parentNode,i))},i(l){r||(C(t),r=!0)},o(l){y(t),r=!1},d(l){o[e].d(l),l&&S(i)}}}function Wi(n){let e,t,i;var r=De;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return r&&(t=new r(a(n))),{c(){e=$("div"),t&&W(t.$$.fragment),this.h()},l(o){e=ee(o,"DIV",{"data-slate-spacer":!0,class:!0});var s=ie(e);t&&q(t.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),t&&z(t,e,null),i=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),r!==(r=De)){if(t){Y();const f=t;y(f.$$.fragment,1,0,()=>{V(f,1)}),X()}r?(t=new r(a(o)),W(t.$$.fragment),C(t.$$.fragment,1),z(t,e,null)):t=null}else r&&t.$set(l)},i(o){i||(t&&C(t.$$.fragment,o),i=!0)},o(o){t&&y(t.$$.fragment,o),i=!1},d(o){o&&S(e),t&&V(t)}}}function zi(n){let e,t,i;var r=De;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return r&&(t=new r(a(n))),{c(){e=$("span"),t&&W(t.$$.fragment),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ie(e);t&&q(t.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),t&&z(t,e,null),i=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),r!==(r=De)){if(t){Y();const f=t;y(f.$$.fragment,1,0,()=>{V(f,1)}),X()}r?(t=new r(a(o)),W(t.$$.fragment),C(t.$$.fragment,1),z(t,e,null)):t=null}else r&&t.$set(l)},i(o){i||(t&&C(t.$$.fragment,o),i=!0)},o(o){t&&y(t.$$.fragment,o),i=!1},d(o){o&&S(e),t&&V(t)}}}function Vi(n){let e,t,i,r;const a=[Ri,Mi],o=[];function s(l,f){return l[8]?0:1}return e=s(n),t=o[e]=a[e](n),{c(){t.c(),i=I()},l(l){t.l(l),i=I()},m(l,f){o[e].m(l,f),A(l,i,f),r=!0},p(l,f){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=a[e](l),t.c()),C(t,1),t.m(i.parentNode,i))},i(l){r||(C(t),r=!0)},o(l){y(t),r=!1},d(l){o[e].d(l),l&&S(i)}}}function vi(n){let e,t,i,r;function a(l){n[18](l)}var o=n[3];function s(l){let f={isVoid:l[8],isInline:l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Vi]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.ref=l[6]),{props:f}}return o&&(e=new o(s(n)),le.push(()=>Re(e,"ref",a))),{c(){e&&W(e.$$.fragment),i=I()},l(l){e&&q(e.$$.fragment,l),i=I()},m(l,f){e&&z(e,l,f),A(l,i,f),r=!0},p(l,[f]){const h={};if(f&256&&(h.isVoid=l[8]),f&128&&(h.isInline=l[7]),f&2048&&(h.contenteditable=l[11]),f&1&&(h.element=l[0]),f&512&&(h.dir=l[9]),f&1050047&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.ref=l[6],ht(()=>t=!1)),o!==(o=l[3])){if(e){Y();const g=e;y(g.$$.fragment,1,0,()=>{V(g,1)}),X()}o?(e=new o(s(l)),le.push(()=>Re(e,"ref",a)),W(e.$$.fragment),C(e.$$.fragment,1),z(e,i.parentNode,i)):e=null}else o&&e.$set(h)},i(l){r||(e&&C(e.$$.fragment,l),r=!0)},o(l){e&&y(e.$$.fragment,l),r=!1},d(l){l&&S(i),e&&V(e,l)}}}function Hi(n,e,t){let i,r,a,o,s,l,{element:f}=e,{decorations:h}=e,{selection:g=null}=e,{Element:u}=e,{Leaf:_}=e,{Placeholder:w}=e;const D=de(),L=Ht();We(n,L,T=>t(17,l=T));let p,F,v,U,c;Ge(()=>{var T;(T=Ee.get(D))==null||T.set(p,c),ke.set(f,c),pe.set(c,f)});function oe(T){c=T,t(6,c)}return n.$$set=T=>{"element"in T&&t(0,f=T.element),"decorations"in T&&t(1,h=T.decorations),"selection"in T&&t(2,g=T.selection),"Element"in T&&t(3,u=T.Element),"Leaf"in T&&t(4,_=T.Leaf),"Placeholder"in T&&t(5,w=T.Placeholder)},n.$$.update=()=>{var T;if(n.$$.dirty&131072&&t(15,i=l),n.$$.dirty&1&&t(7,r=D.isInline(f)),n.$$.dirty&1&&t(16,a=ce(f)),n.$$.dirty&81920&&F!==a&&(t(13,p=a),t(14,F=a)),n.$$.dirty&129&&!r&&m.hasInlines(D,f)){const P=Xt(te.string(f));P==="rtl"&&t(9,v=P)}if(n.$$.dirty&1&&t(8,o=m.isVoid(D,f)),n.$$.dirty&32768&&t(11,s=!i),n.$$.dirty&33153&&o){!i&&r&&t(11,s=!1);const[[P]]=te.texts(f);t(10,U=P),Ve.set(P,0),ve.set(P,f)}n.$$.dirty&8257&&c&&((T=Ee.get(D))==null||T.set(p,c),ke.set(f,c),pe.set(c,f))},[f,h,g,u,_,w,c,r,o,v,U,s,L,p,F,i,a,l,oe]}class $t extends Q{constructor(e){super();j(this,e,Hi,vi,re,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function Ki(n){let e,t,i;var r=$t;function a(o){return{props:{Element:o[1],Placeholder:o[3],Leaf:o[2],decorations:o[5],element:o[0],selection:o[4]}}}return r&&(e=new r(a(n))),{c(){e&&W(e.$$.fragment),t=I()},l(o){e&&q(e.$$.fragment,o),t=I()},m(o,s){e&&z(e,o,s),A(o,t,s),i=!0},p(o,[s]){const l={};if(s&2&&(l.Element=o[1]),s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&32&&(l.decorations=o[5]),s&1&&(l.element=o[0]),s&16&&(l.selection=o[4]),r!==(r=$t)){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{V(f,1)}),X()}r?(e=new r(a(o)),W(e.$$.fragment),C(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else r&&e.$set(l)},i(o){i||(e&&C(e.$$.fragment,o),i=!0)},o(o){e&&y(e.$$.fragment,o),i=!1},d(o){o&&S(t),e&&V(e,o)}}}const en={};function So(){const n=me(en);if(!n)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return n}function Ui(n,e,t){let i,r,a,o,{parent:s}=e,{element:l}=e,{path:f}=e,{index:h}=e,{decorate:g}=e,{decorations:u}=e,{selection:_=null}=e,{Element:w}=e,{Leaf:D}=e,{Placeholder:L}=e;const p=ge(!1);he(en,p);const F=de();let v=h,U=s,c=l,oe=u,T=_;return n.$$set=P=>{"parent"in P&&t(6,s=P.parent),"element"in P&&t(0,l=P.element),"path"in P&&t(7,f=P.path),"index"in P&&t(8,h=P.index),"decorate"in P&&t(9,g=P.decorate),"decorations"in P&&t(10,u=P.decorations),"selection"in P&&t(11,_=P.selection),"Element"in P&&t(1,w=P.Element),"Leaf"in P&&t(2,D=P.Leaf),"Placeholder"in P&&t(3,L=P.Placeholder)},n.$$.update=()=>{n.$$.dirty&4352&&v!==h&&t(12,v=h),n.$$.dirty&8256&&U!==s&&t(13,U=s),n.$$.dirty&16385&&c!==l&&t(14,c=l),n.$$.dirty&33792&&(It(oe,u)||t(15,oe=u)),n.$$.dirty&67584&&(At(T,_)||t(16,T=_)),n.$$.dirty&20480&&Ve.set(c,v),n.$$.dirty&24576&&ve.set(c,U),n.$$.dirty&4224&&t(18,i=f.concat(v)),n.$$.dirty&262144&&t(17,r=m.range(F,i)),n.$$.dirty&442880&&t(5,a=on(g([c,i]),r,oe)),n.$$.dirty&196608&&t(4,o=T&&O.intersection(r,T)),n.$$.dirty&16&&p.set(!!o)},[l,w,D,L,o,a,s,f,h,g,u,_,v,U,c,oe,T,r,i]}class qi extends Q{constructor(e){super();j(this,e,Ui,Ki,Se,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Yi(n){let e,t,i;var r=De;function a(o){return{props:{Placeholder:o[3],Leaf:o[2],decorations:o[4],isLast:o[5],parent:o[0],text:o[1]}}}return r&&(e=new r(a(n))),{c(){e&&W(e.$$.fragment),t=I()},l(o){e&&q(e.$$.fragment,o),t=I()},m(o,s){e&&z(e,o,s),A(o,t,s),i=!0},p(o,[s]){const l={};if(s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&16&&(l.decorations=o[4]),s&32&&(l.isLast=o[5]),s&1&&(l.parent=o[0]),s&2&&(l.text=o[1]),r!==(r=De)){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{V(f,1)}),X()}r?(e=new r(a(o)),W(e.$$.fragment),C(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else r&&e.$set(l)},i(o){i||(e&&C(e.$$.fragment,o),i=!0)},o(o){e&&y(e.$$.fragment,o),i=!1},d(o){o&&S(t),e&&V(e,o)}}}function Xi(n,e,t){let i,r,a,o,{parent:s}=e,{text:l}=e,{path:f}=e,{index:h}=e,{isLeafBlock:g}=e,{decorations:u}=e,{decorate:_}=e,{Leaf:w}=e,{Placeholder:D}=e;const L=de();let p=h,F=l,v=s,U=u;return n.$$set=c=>{"parent"in c&&t(0,s=c.parent),"text"in c&&t(1,l=c.text),"path"in c&&t(6,f=c.path),"index"in c&&t(7,h=c.index),"isLeafBlock"in c&&t(8,g=c.isLeafBlock),"decorations"in c&&t(9,u=c.decorations),"decorate"in c&&t(10,_=c.decorate),"Leaf"in c&&t(2,w=c.Leaf),"Placeholder"in c&&t(3,D=c.Placeholder)},n.$$.update=()=>{n.$$.dirty&2176&&p!==h&&t(11,p=h),n.$$.dirty&4098&&F!==l&&t(12,F=l),n.$$.dirty&8193&&v!==s&&t(13,v=s),n.$$.dirty&16896&&(It(U,u)||t(14,U=u)),n.$$.dirty&6144&&Ve.set(F,p),n.$$.dirty&12288&&ve.set(F,v),n.$$.dirty&2112&&t(16,i=f.concat(p)),n.$$.dirty&10496&&t(5,r=g&&p===v.children.length-1),n.$$.dirty&65536&&t(15,a=m.range(L,i)),n.$$.dirty&119808&&t(4,o=on(_([F,i]),a,U))},[s,l,w,D,o,r,f,h,g,u,_,p,F,v,U,a,i]}class Gi extends Q{constructor(e){super();j(this,e,Xi,Yi,Se,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function tn(n,e,t){const i=n.slice();return i[14]=e[t],i[16]=t,i}function Ji(n){let e,t;return e=new Gi({props:{Placeholder:n[4],Leaf:n[3],decorations:n[0],parent:n[5],text:n[14],decorate:n[9],index:n[16],path:n[8],isLeafBlock:n[7]}}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p(i,r){const a={};r&16&&(a.Placeholder=i[4]),r&8&&(a.Leaf=i[3]),r&1&&(a.decorations=i[0]),r&32&&(a.parent=i[5]),r&64&&(a.text=i[14]),r&512&&(a.decorate=i[9]),r&64&&(a.index=i[16]),r&256&&(a.path=i[8]),r&128&&(a.isLeafBlock=i[7]),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Qi(n){let e,t;return e=new qi({props:{Element:n[2],Placeholder:n[4],Leaf:n[3],decorations:n[0],selection:n[1],element:n[14],parent:n[5],decorate:n[9],index:n[16],path:n[8]}}),{c(){W(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,r){z(e,i,r),t=!0},p(i,r){const a={};r&4&&(a.Element=i[2]),r&16&&(a.Placeholder=i[4]),r&8&&(a.Leaf=i[3]),r&1&&(a.decorations=i[0]),r&2&&(a.selection=i[1]),r&64&&(a.element=i[14]),r&32&&(a.parent=i[5]),r&512&&(a.decorate=i[9]),r&64&&(a.index=i[16]),r&256&&(a.path=i[8]),e.$set(a)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function nn(n,e){let t,i,r,a,o,s;const l=[Qi,Ji],f=[];function h(g,u){return u&64&&(i=null),i==null&&(i=!!ze.isElement(g[14])),i?0:1}return r=h(e,-1),a=f[r]=l[r](e),{key:n,first:null,c(){t=I(),a.c(),o=I(),this.h()},l(g){t=I(),a.l(g),o=I(),this.h()},h(){this.first=t},m(g,u){A(g,t,u),f[r].m(g,u),A(g,o,u),s=!0},p(g,u){e=g;let _=r;r=h(e,u),r===_?f[r].p(e,u):(Y(),y(f[_],1,1,()=>{f[_]=null}),X(),a=f[r],a?a.p(e,u):(a=f[r]=l[r](e),a.c()),C(a,1),a.m(o.parentNode,o))},i(g){s||(C(a),s=!0)},o(g){y(a),s=!1},d(g){g&&S(t),f[r].d(g),g&&S(o)}}}function ji(n){let e=[],t=new Map,i,r,a=n[6];const o=s=>ce(s[14]);for(let s=0;s<a.length;s+=1){let l=tn(n,a,s),f=o(l);t.set(f,e[s]=nn(f,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=I()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);i=I()},m(s,l){for(let f=0;f<e.length;f+=1)e[f].m(s,l);A(s,i,l),r=!0},p(s,[l]){l&1023&&(a=s[6],Y(),e=gt(e,l,o,1,s,a,t,i.parentNode,mt,nn,i,tn),X())},i(s){if(!r){for(let l=0;l<a.length;l+=1)C(e[l]);r=!0}},o(s){for(let l=0;l<e.length;l+=1)y(e[l]);r=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&S(i)}}}function on(n,e,t=[]){for(const i of t){const r=O.intersection(i,e);r&&n.push(r)}return n}function Zi(n,e,t){let i,r,a,o,{node:s}=e,{decorations:l}=e,{selection:f=null}=e,{Element:h}=e,{Leaf:g}=e,{Placeholder:u}=e;const _=de(),w=Kt();We(n,w,p=>t(12,o=p));let D=s,L=D.children;return n.$$set=p=>{"node"in p&&t(11,s=p.node),"decorations"in p&&t(0,l=p.decorations),"selection"in p&&t(1,f=p.selection),"Element"in p&&t(2,h=p.Element),"Leaf"in p&&t(3,g=p.Leaf),"Placeholder"in p&&t(4,u=p.Placeholder)},n.$$.update=()=>{n.$$.dirty&4096&&t(9,i=o),n.$$.dirty&2080&&(D!==s||s===_)&&t(5,D=s),n.$$.dirty&96&&L!==D.children&&t(6,L=D.children),n.$$.dirty&32&&t(8,r=Ce(D)),n.$$.dirty&32&&t(7,a=ze.isElement(D)&&!_.isInline(D)&&m.hasInlines(_,D))},[l,f,h,g,u,D,L,a,r,i,w,s,o]}class rn extends Q{constructor(e){super();j(this,e,Zi,ji,Se,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function xi(n){let e,t;const i=n[7].default,r=Le(i,n,n[6],null);return{c(){e=$("div"),r&&r.c(),this.h()},l(a){e=ee(a,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=ie(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-void",n[2]),B(e,"dir",n[4]),B(e,"contenteditable",n[3]),B(e,"class","svelte-19k8gul")},m(a,o){A(a,e,o),r&&r.m(e,null),n[9](e),t=!0},p(a,o){r&&r.p&&(!t||o&64)&&Fe(r,i,a,a[6],t?Pe(i,a[6],o,null):Oe(a[6]),null),(!t||o&4)&&B(e,"data-slate-void",a[2]),(!t||o&16)&&B(e,"dir",a[4]),(!t||o&8)&&B(e,"contenteditable",a[3])},i(a){t||(C(r,a),t=!0)},o(a){y(r,a),t=!1},d(a){a&&S(e),r&&r.d(a),n[9](null)}}}function $i(n){let e,t;const i=n[7].default,r=Le(i,n,n[6],null);return{c(){e=$("span"),r&&r.c(),this.h()},l(a){e=ee(a,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=ie(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-inline",n[1]),B(e,"data-slate-void",n[2]),B(e,"dir",n[4]),B(e,"contenteditable",n[3]),B(e,"class","svelte-19k8gul")},m(a,o){A(a,e,o),r&&r.m(e,null),n[8](e),t=!0},p(a,o){r&&r.p&&(!t||o&64)&&Fe(r,i,a,a[6],t?Pe(i,a[6],o,null):Oe(a[6]),null),(!t||o&2)&&B(e,"data-slate-inline",a[1]),(!t||o&4)&&B(e,"data-slate-void",a[2]),(!t||o&16)&&B(e,"dir",a[4]),(!t||o&8)&&B(e,"contenteditable",a[3])},i(a){t||(C(r,a),t=!0)},o(a){y(r,a),t=!1},d(a){a&&S(e),r&&r.d(a),n[8](null)}}}function eo(n){let e,t,i,r;const a=[$i,xi],o=[];function s(l,f){return l[1]?0:1}return e=s(n),t=o[e]=a[e](n),{c(){t.c(),i=I()},l(l){t.l(l),i=I()},m(l,f){o[e].m(l,f),A(l,i,f),r=!0},p(l,[f]){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=a[e](l),t.c()),C(t,1),t.m(i.parentNode,i))},i(l){r||(C(t),r=!0)},o(l){y(t),r=!1},d(l){o[e].d(l),l&&S(i)}}}function to(n,e,t){let{$$slots:i={},$$scope:r}=e,{element:a}=e,{ref:o}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:f}=e,{dir:h=void 0}=e;function g(_){le[_?"unshift":"push"](()=>{o=_,t(0,o)})}function u(_){le[_?"unshift":"push"](()=>{o=_,t(0,o)})}return n.$$set=_=>{"element"in _&&t(5,a=_.element),"ref"in _&&t(0,o=_.ref),"isInline"in _&&t(1,s=_.isInline),"isVoid"in _&&t(2,l=_.isVoid),"contenteditable"in _&&t(3,f=_.contenteditable),"dir"in _&&t(4,h=_.dir),"$$scope"in _&&t(6,r=_.$$scope)},[o,s,l,f,h,a,r,i,g,u]}class no extends Q{constructor(e){super();j(this,e,to,eo,re,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function io(n){let e,t;const i=n[2].default,r=Le(i,n,n[1],null);return{c(){e=$("span"),r&&r.c(),this.h()},l(a){e=ee(a,"SPAN",{"data-slate-leaf":!0});var o=ie(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-leaf","true")},m(a,o){A(a,e,o),r&&r.m(e,null),t=!0},p(a,[o]){r&&r.p&&(!t||o&2)&&Fe(r,i,a,a[1],t?Pe(i,a[1],o,null):Oe(a[1]),null)},i(a){t||(C(r,a),t=!0)},o(a){y(r,a),t=!1},d(a){a&&S(e),r&&r.d(a)}}}function oo(n,e,t){let{$$slots:i={},$$scope:r}=e,{leaf:a}=e;return n.$$set=o=>{"leaf"in o&&t(0,a=o.leaf),"$$scope"in o&&t(1,r=o.$$scope)},[a,r,i]}class ro extends Q{constructor(e){super();j(this,e,oo,io,re,{leaf:0})}}function ao(n){let e,t,i;const r=n[2].default,a=Le(r,n,n[1],null);return{c(){e=$("span"),a&&a.c(),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=ie(e);a&&a.l(s),s.forEach(S),this.h()},h(){B(e,"data-slate-placeholder",""),B(e,"contenteditable","false"),B(e,"class","svelte-lqbb94"),Vn(()=>n[3].call(e))},m(o,s){A(o,e,s),a&&a.m(e,null),t=vn(e,n[3].bind(e)),i=!0},p(o,[s]){a&&a.p&&(!i||s&2)&&Fe(a,r,o,o[1],i?Pe(r,o[1],s,null):Oe(o[1]),null)},i(o){i||(C(a,o),i=!0)},o(o){y(a,o),i=!1},d(o){o&&S(e),a&&a.d(o),t()}}}function lo(n,e,t){let{$$slots:i={},$$scope:r}=e,{clientHeight:a}=e;function o(){a=this.clientHeight,t(0,a)}return n.$$set=s=>{"clientHeight"in s&&t(0,a=s.clientHeight),"$$scope"in s&&t(1,r=s.$$scope)},[a,r,i,o]}class so extends Q{constructor(e){super();j(this,e,lo,ao,re,{clientHeight:0})}}const co=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),it={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},an={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:co?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},ot={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let n=1;n<20;n++)ot["f"+n]=111+n;function ln(n,e={}){Array.isArray(n)||(n=[n]);const t=n.map(i=>fo(i,e));return function(r){return t.some(a=>uo(a,r))}}function Lo(n,e,t={}){return ln(n,t)(e)}function rt(n){return ln(n,{byKey:!0})}function fo(n,e={}){const t=e&&e.byKey,i={};n=n.replace("++","+add");const r=n.split("+"),{length:a}=r;for(const o in it)i[it[o]]=!1;for(let o of r){const s=o.endsWith("?")&&o.length>1;s&&(o=o.slice(0,-1));const l=sn(o),f=it[l];if(o.length>1&&!f&&!an[o]&&!ot[l])throw new TypeError(`Unknown modifier: "${o}"`);(a===1||!f)&&(t?i.key=l:i.which=ho(o)),f&&(i[f]=s?null:!0)}return i}function uo(n,e){for(const t in n){const i=n[t];let r;if(i!=null&&(t==="key"&&e.key!=null?r=e.key.toLowerCase():t==="which"?r=i===91&&e.which===93?91:e.which:r=e[t],!(r==null&&i===!1)&&r!==i))return!1}return!0}function ho(n){return n=sn(n),ot[n]||n.toUpperCase().charCodeAt(0)}function sn(n){return n=n.toLowerCase(),n=an[n]||n,n}const go={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},mo={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},_o={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function H(n){const e=go[n],t=mo[n],i=_o[n],r=e&&rt(e),a=t&&rt(t),o=i&&rt(i);return s=>!!(r&&r(s)||Lt&&a&&a(s)||!Lt&&o&&o(s))}var K={isBold:H("bold"),isCompose:H("compose"),isMoveBackward:H("moveBackward"),isMoveForward:H("moveForward"),isDeleteBackward:H("deleteBackward"),isDeleteForward:H("deleteForward"),isDeleteLineBackward:H("deleteLineBackward"),isDeleteLineForward:H("deleteLineForward"),isDeleteWordBackward:H("deleteWordBackward"),isDeleteWordForward:H("deleteWordForward"),isExtendBackward:H("extendBackward"),isExtendForward:H("extendForward"),isExtendLineBackward:H("extendLineBackward"),isExtendLineForward:H("extendLineForward"),isItalic:H("italic"),isMoveLineBackward:H("moveLineBackward"),isMoveLineForward:H("moveLineForward"),isMoveWordBackward:H("moveWordBackward"),isMoveWordForward:H("moveWordForward"),isRedo:H("redo"),isSplitBlock:H("splitBlock"),isTransposeCharacter:H("transposeCharacter"),isUndo:H("undo")};function wo(n){let e,t,i,r,a,o,s,l;t=new rn({props:{node:n[8],selection:n[10],decorations:n[9],Element:n[1],Leaf:n[2],Placeholder:n[3]}});let f=[n[29],{role:i=n[7].readOnly?void 0:"textbox"},{spellcheck:n[4]},{autocorrect:n[5]},{autocapitalize:n[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:r=!n[7].readOnly},{"z-index":a=-1}],h={};for(let g=0;g<f.length;g+=1)h=Je(h,f[g]);return{c(){e=$("div"),W(t.$$.fragment),this.h()},l(g){e=ee(g,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var u=ie(e);q(t.$$.fragment,u),u.forEach(S),this.h()},h(){_t(e,h),wt(e,"svelte-m59z04",!0)},m(g,u){A(g,e,u),z(t,e,null),n[38](e),o=!0,s||(l=[G(e,"beforeinput",n[13]),G(e,"keydown",n[15]),G(e,"input",n[14]),G(e,"focus",n[16]),G(e,"blur",n[17]),G(e,"click",n[18]),G(e,"compositionend",n[19]),G(e,"compositionupdate",n[20]),G(e,"compositionstart",n[21]),G(e,"paste",n[22]),G(e,"copy",n[23]),G(e,"cut",n[24]),G(e,"dragover",n[25]),G(e,"dragstart",n[26]),G(e,"drop",n[27]),G(e,"dragend",n[28])],s=!0)},p(g,u){const _={};u[0]&256&&(_.node=g[8]),u[0]&1024&&(_.selection=g[10]),u[0]&512&&(_.decorations=g[9]),u[0]&2&&(_.Element=g[1]),u[0]&4&&(_.Leaf=g[2]),u[0]&8&&(_.Placeholder=g[3]),t.$set(_),_t(e,h=Hn(f,[u[0]&536870912&&g[29],(!o||u[0]&128&&i!==(i=g[7].readOnly?void 0:"textbox"))&&{role:i},(!o||u[0]&16)&&{spellcheck:g[4]},(!o||u[0]&32)&&{autocorrect:g[5]},(!o||u[0]&64)&&{autocapitalize:g[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!o||u[0]&128&&r!==(r=!g[7].readOnly))&&{contenteditable:r},{"z-index":a}])),wt(e,"svelte-m59z04",!0)},i(g){o||(C(t.$$.fragment,g),o=!0)},o(g){y(t.$$.fragment,g),o=!1},d(g){g&&S(e),V(t),n[38](null),s=!1,Kn(l)}}}function ye(n,e){return se(e)&&tt(n,e)}function x(n,e){return se(e)&&tt(n,e,{editable:!0})}function cn(n,e){if(Et.get(n))return!1;{const t=ye(n,e)&&fe(e);return m.isVoid(n,t)}}function po(n,e){const t=e.startContainer.parentElement,i=t.getBoundingClientRect;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),Xn(t,{scrollMode:"if-needed"}),t.getBoundingClientRect=i}function ko(n,e,t){let i;const r=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let a=pt(e,r),o,s,{Element:l=no}=e,{Leaf:f=ro}=e,{Placeholder:h=so}=e,{placeholder:g=void 0}=e,{readOnly:u=!1}=e,{autoFocus:_=!1}=e,{decorate:w=Ut}=e,{scrollSelectionIntoView:D=po}=e,{ref:L=void 0}=e,{spellcheck:p=!0}=e,{autocorrect:F="true"}=e,{autocapitalize:v="true"}=e,{onKeyDown:U=()=>{}}=e;const c=de(),oe=vt();We(n,oe,d=>t(8,o=d));const T=Ht(),P=ui(),un=Kt(),Ue=hi();We(n,Ue,d=>t(10,s=d));const qe=[],b={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null,readOnly:u};let Ye;function hn(){if(!b.isComposing&&!b.isUpdatingSelection&&!b.isDraggingInternally){const d=Be(c),k=ae(c,c),E=d.getSelection();if(d.activeElement===k?(t(7,b.latestElement=d.activeElement,b),be.set(c,!0),P.set(!0)):(be.delete(c),P.set(!1)),!E){R.deselect(c);return}const N=x(c,E.anchorNode)||cn(c,E.anchorNode),M=x(c,E.focusNode)||cn(c,E.focusNode);if(N&&M){const Z=Te(c,E,{exactMatch:!1,suppressThrow:!0});Z&&R.select(c,Z)}else R.deselect(c)}}const gn=Gn(100,!1,()=>kt().then(hn),!1),at=Yn(0,gn);Ge(()=>{const d=Ze(L);return d&&(Qe.set(c,d),d.document.addEventListener("selectionchange",at)),He.set(c,L),ke.set(c,L),pe.set(L,c),()=>{He.delete(c),ke.delete(c),d&&(Qe.delete(c),d.document.removeEventListener("selectionchange",at))}});function mn(){const d=Be(c),k=d==null?void 0:d.getSelection();if(b.isComposing||!k||!Nt(c))return;const E=k.type!=="None";if(!E)return;const N=He.get(c);let M=!1;if(N.contains(k.anchorNode)&&N.contains(k.focusNode)&&(M=!0),E&&M&&c.selection){const ue=Te(c,k,{exactMatch:!0,suppressThrow:!0});if(ue&&O.equals(ue,c.selection))return}if(c.selection&&!fi(c,c.selection)){t(36,c.selection=Te(c,k,{exactMatch:!1,suppressThrow:!1}),c),Ue.set(c.selection);return}b.isUpdatingSelection&&clearTimeout(b.isUpdatingSelection);let Z=setTimeout(()=>{J&&xe&&ae(c,c).focus(),Object.assign(b,{isUpdatingSelection:null})});Object.assign(b,{isUpdatingSelection:Z});const J=c.selection&&M&&Ke(c,c.selection);J?(O.isBackward(c.selection)?k.setBaseAndExtent(J.endContainer,J.endOffset,J.startContainer,J.startOffset):k.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),D(c,J)):k.removeAllRanges()}Un(()=>kt().then(mn));function _n(d){if(!b.readOnly&&x(c,d.target)){const k=d.inputType,E=d.dataTransfer||d.data||void 0;if(k==="insertCompositionText"||k==="deleteCompositionText")return;let N=!1;if(k==="insertText"&&c.selection&&O.isCollapsed(c.selection)&&d.data&&d.data.length===1&&/[a-z ]/i.test(d.data)&&c.selection.anchor.offset!==0){N=!0,c.marks&&(N=!1);const M=m.above(c,{at:c.selection.anchor,match:Z=>m.isInline(c,Z),mode:"highest"});if(M){const[,Z]=M;m.isEnd(c,c.selection.anchor,Z)&&(N=!1)}}if(N||d.preventDefault(),!k.startsWith("delete")||k.startsWith("deleteBy")){const[M]=d.getTargetRanges();if(M){const Z=Te(c,M,{exactMatch:!1,suppressThrow:!1});(!c.selection||!O.equals(c.selection,Z))&&R.select(c,Z)}}if(c.selection&&O.isExpanded(c.selection)&&k.startsWith("delete")){const M=k.endsWith("Backward")?"backward":"forward";m.deleteFragment(c,{direction:M});return}switch(k){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{m.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{m.deleteForward(c);break}case"deleteContentBackward":{m.deleteBackward(c);break}case"deleteEntireSoftLine":{m.deleteBackward(c,{unit:"line"}),m.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{m.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{m.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{m.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{m.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{m.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{m.deleteForward(c,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{m.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{k==="insertFromComposition"&&b.isComposing&&t(7,b.isComposing=!1,b),(E==null?void 0:E.constructor.name)==="DataTransfer"?c.insertData(E):typeof E=="string"&&(N?qe.push(()=>m.insertText(c,E)):m.insertText(c,E));break}}}}function wn(d){for(const k of qe)k();qe.length=0}function pn(d){if(!b.readOnly&&!b.isComposing&&x(c,d.target)){const k=c.children[c.selection!==null?c.selection.focus.path[0]:0],E=Xt(te.string(k))==="rtl";if(K.isRedo(d)){d.preventDefault();const N=c;typeof N.redo=="function"&&N.redo()}else if(K.isUndo(d)){d.preventDefault();const N=c;typeof N.undo=="function"&&N.undo()}else if(K.isMoveLineBackward(d))d.preventDefault(),R.move(c,{unit:"line",reverse:!0});else if(K.isMoveLineForward(d))d.preventDefault(),R.move(c,{unit:"line"});else if(K.isExtendLineBackward(d))d.preventDefault(),R.move(c,{unit:"line",edge:"focus",reverse:!0});else if(K.isExtendLineForward(d))d.preventDefault(),R.move(c,{unit:"line",edge:"focus"});else if(K.isMoveBackward(d))d.preventDefault(),c.selection&&O.isCollapsed(c.selection)?R.move(c,{reverse:!E}):R.collapse(c,{edge:"start"});else if(K.isMoveForward(d))d.preventDefault(),c.selection&&O.isCollapsed(c.selection)?R.move(c,{reverse:E}):R.collapse(c,{edge:"end"});else if(K.isMoveWordBackward(d))d.preventDefault(),c.selection&&O.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:!E});else if(K.isMoveWordForward(d))d.preventDefault(),c.selection&&O.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:E});else if(!Pt)K.isBold(d)||K.isItalic(d)||K.isTransposeCharacter(d)?d.preventDefault():K.isSplitBlock(d)?(d.preventDefault(),m.insertBreak(c)):K.isDeleteBackward(d)?(d.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c)):K.isDeleteForward(d)?(d.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c)):K.isDeleteLineBackward(d)?(d.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"line"})):K.isDeleteLineForward(d)?(d.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"line"})):K.isDeleteWordBackward(d)?(d.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"word"})):K.isDeleteWordForward(d)&&(d.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"word"}));else{if((Ft||$e)&&c.selection&&(K.isDeleteBackward(d)||K.isDeleteForward(d))&&O.isCollapsed(c.selection)){const N=te.parent(c,c.selection.anchor.path);if(ze.isElement(N)&&m.isVoid(c,N)&&m.isInline(c,N)){d.preventDefault(),m.deleteBackward(c,{unit:"block"});return}}return U(d)}}}function kn(d){if(!b.readOnly&&!b.isUpdatingSelection&&x(c,d.target)){const k=ae(c,c),E=Be(c);if(t(7,b.latestElement=E.activeElement,b),xe&&d.target!==k){k.focus();return}be.set(c,!0),P.set(!0)}}function En(d){if(b.readOnly||b.isUpdatingSelection||!x(c,d.target))return;const k=Be(c);if(b.latestElement===k.activeElement)return;const E=d.relatedTarget,N=ae(c,c);if(E!==N&&!(ne(E)&&E.hasAttribute("data-slate-spacer"))){if(E!=null&&se(E)&&tt(c,E)){const M=fe(E);if(ze.isElement(M)&&!c.isVoid(M))return}if($e){const M=k.getSelection();M==null||M.removeAllRanges()}be.delete(c),P.set(!1)}}function bn(d){if(!b.readOnly&&ye(c,d.target)&&se(d.target)){const k=fe(d.target),E=Ce(k);if(m.hasPath(c,E)&&te.get(c,E)===k){const M=m.start(c,E),Z=m.end(c,E),J=m.void(c,{at:M}),ue=m.void(c,{at:Z});if(J&&ue&&we.equals(J[1],ue[1])){const In=m.range(c,M);R.select(c,In)}}}}function Cn(d){if(x(c,d.target)){t(7,b.isComposing=!1,b);const k=d.data;if(!$e&&!ai&&!ii&&!li&&k&&m.insertText(c,k),c.selection&&O.isCollapsed(c.selection)){const E=c.selection.anchor.path,N=te.leaf(c,E);b.hasInsertPrefixInCompositon&&(t(7,b.hasInsertPrefixInCompositon=!1,b),m.withoutNormalizing(c,()=>{const M=N.text.replace(/^\uFEFF/,"");R.delete(c,{distance:N.text.length,reverse:!0}),R.insertText(c,M)}))}}}function Dn(d){x(c,d.target)&&t(7,b.isComposing=!0,b)}function yn(d){if(x(c,d.target)&&c.selection){if(O.isExpanded(c.selection)){m.deleteFragment(c);return}const k=m.above(c,{match:E=>m.isInline(c,E),mode:"highest"});if(k){const[,E]=k;if(m.isEnd(c,c.selection.anchor,E)){const N=m.after(c,E);R.setSelection(c,{anchor:N,focus:N})}}c.marks&&(t(7,b.hasInsertPrefixInCompositon=!0,b),R.insertNodes(c,ft({text:"\uFEFF"},c.marks),{select:!0}))}}function Sn(d){!b.readOnly&&x(c,d.target)&&(!Pt||Zn(d))&&(d.preventDefault(),c.insertData(d.clipboardData))}function Ln(d){x(c,d.target)&&(d.preventDefault(),c.setFragmentData(d.clipboardData))}function Fn(d){if(!b.readOnly&&x(c,d.target)&&(d.preventDefault(),c.setFragmentData(d.clipboardData),c.selection))if(O.isExpanded(c.selection))m.deleteFragment(c);else{const k=te.parent(c,c.selection.anchor.path);m.isVoid(c,k)&&R.delete(c)}}function On(d){if(ye(c,d.target)){const k=fe(d.target);m.isVoid(c,k)&&d.preventDefault()}}function Pn(d){if(!b.readOnly&&ye(c,d.target)){const k=fe(d.target),E=Ce(k);if(m.isVoid(c,k)||m.void(c,{at:E,voids:!0})){const M=m.range(c,E);R.select(c,M)}t(7,b.isDraggingInternally=!0,b),c.setFragmentData(d.dataTransfer)}}function Nn(d){if(!b.readOnly&&ye(c,d.target)){d.preventDefault();const k=c.selection,E=ci(c,d),N=d.dataTransfer;R.select(c,E),b.isDraggingInternally&&(k&&!O.equals(k,E)&&!m.void(c,{at:E,voids:!0})&&R.delete(c,{at:k}),t(7,b.isDraggingInternally=!1,b)),c.insertData(N),Nt(c)||si(c)}}function Bn(d){!b.readOnly&&b.isDraggingInternally&&ye(c,d.target)&&t(7,b.isDraggingInternally=!1,b)}function Tn(d){le[d?"unshift":"push"](()=>{L=d,t(0,L)})}return n.$$set=d=>{e=Je(Je({},e),qn(d)),t(29,a=pt(e,r)),"Element"in d&&t(1,l=d.Element),"Leaf"in d&&t(2,f=d.Leaf),"Placeholder"in d&&t(3,h=d.Placeholder),"placeholder"in d&&t(30,g=d.placeholder),"readOnly"in d&&t(31,u=d.readOnly),"autoFocus"in d&&t(32,_=d.autoFocus),"decorate"in d&&t(33,w=d.decorate),"scrollSelectionIntoView"in d&&t(34,D=d.scrollSelectionIntoView),"ref"in d&&t(0,L=d.ref),"spellcheck"in d&&t(4,p=d.spellcheck),"autocorrect"in d&&t(5,F=d.autocorrect),"autocapitalize"in d&&t(6,v=d.autocapitalize),"onKeyDown"in d&&t(35,U=d.onKeyDown)},n.$$.update=()=>{if(n.$$.dirty[1]&36&&t(9,i=w([c,[]])),n.$$.dirty[1]&33&&Et.set(c,u),n.$$.dirty[1]&1&&T.set(u),n.$$.dirty[1]&1&&t(7,b.readOnly=u,b),n.$$.dirty[1]&4&&un.set(w),n.$$.dirty[0]&1073742208|n.$$.dirty[1]&36&&o.children.length===1&&Array.from(te.texts(o)).length===1&&te.string(o)===""&&!b.isComposing){const d=m.start(c,[]);t(9,i=[...w([c,[]]),{[Ne]:!0,placeholder:g,anchor:d,focus:d}])}n.$$.dirty[0]&1|n.$$.dirty[1]&66&&Ye!==_&&L&&(_&&L.focus(),t(37,Ye=_))},[L,l,f,h,p,F,v,b,o,i,s,oe,Ue,_n,wn,pn,kn,En,bn,Cn,Dn,yn,Sn,Ln,Fn,On,Pn,Nn,Bn,a,g,u,_,w,D,U,c,Ye,Tn]}class Fo extends Q{constructor(e){super();j(this,e,ko,wo,Se,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:31,autoFocus:32,decorate:33,scrollSelectionIntoView:34,ref:0,spellcheck:4,autocorrect:5,autocapitalize:6,onKeyDown:35},null,[-1,-1])}}function fn(n,e){const t=(e.top+e.bottom)/2;return n.top<=t&&n.bottom>=t}function dn(n,e,t){const i=Ke(n,e).getBoundingClientRect(),r=Ke(n,t).getBoundingClientRect();return fn(i,r)&&fn(r,i)}function Eo(n,e){const t=m.range(n,O.end(e)),i=Array.from(m.positions(n,{at:e}));let r=0,a=i.length,o=Math.floor(a/2);if(dn(n,m.range(n,i[r]),t))return m.range(n,i[r],t);if(i.length<2)return m.range(n,i[i.length-1],t);for(;o!==i.length&&o!==r;)dn(n,m.range(n,i[o]),t)?a=o:r=o,o=Math.floor((r+a)/2);return m.range(n,i[a],t)}function Oo(n){const e=n,{apply:t,onChange:i,deleteBackward:r}=e;return Ee.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return r(a);if(n.selection&&O.isCollapsed(n.selection)){const o=m.above(n,{match:s=>m.isBlock(n,s),at:n.selection});if(o){const[,s]=o,l=m.range(n,s,n.selection.anchor),f=Eo(e,l);O.isCollapsed(f)||R.delete(n,{at:f})}}},e.apply=a=>{const o=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of m.levels(e,{at:a.path})){const f=ce(s);o.push([l,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of m.levels(e,{at:we.parent(a.path)})){const f=ce(s);o.push([l,f])}break}case"move_node":{for(const[s,l]of m.levels(e,{at:we.common(we.parent(a.path),we.parent(a.newPath))})){const f=ce(s);o.push([l,f])}break}}t(a);for(const[s,l]of o){const[f]=m.node(e,s);je.set(f,l)}},e.setFragmentData=a=>{const{selection:o}=e;if(!o)return;const[s,l]=O.edges(o),f=m.void(e,{at:s.path}),h=m.void(e,{at:l.path});if(O.isCollapsed(o)&&!f)return;const g=Ke(e,o);let u=g.cloneContents(),_=u.childNodes[0];if(u.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(_=F)}),h){const[F]=h,v=g.cloneRange(),U=ae(e,F);v.setEndAfter(U),u=v.cloneContents()}if(f&&(_=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const v=F.getAttribute("data-slate-zero-width")==="n";F.textContent=v?`
`:""}),Dt(_)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(_),u.appendChild(F),_=F}const w=e.getFragment(),D=JSON.stringify(w),L=window.btoa(encodeURIComponent(D));_.setAttribute("data-slate-fragment",L),a.setData("application/x-slate-fragment",L);const p=document.createElement("div");return p.appendChild(u),p.setAttribute("hidden","true"),document.body.appendChild(p),a.setData("text/html",p.innerHTML),a.setData("text/plain",St(p)),document.body.removeChild(p),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const o=a.getData("application/x-slate-fragment")||ni(a);if(o){const s=decodeURIComponent(window.atob(o)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const o=a.getData("text/plain");if(o){const s=o.split(/\r\n|\r|\n/);let l=!1;for(const f of s)l&&R.splitNodes(e,{always:!0}),e.insertText(f),l=!0;return!0}return!1},e.onChange=()=>{const a=bt.get(e);a&&a(),i()},e}export{Fo as E,yo as S,So as a,ui as b,Ht as c,vt as d,Ce as f,de as g,Lo as i,Oo as w};
