var An=Object.defineProperty;var Me=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var ut=(o,e,n)=>e in o?An(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,dt=(o,e)=>{for(var n in e||(e={}))ct.call(e,n)&&ut(o,n,e[n]);if(Me)for(var n of Me(e))ft.call(e,n)&&ut(o,n,e[n]);return o};var Je=(o,e)=>{var n={};for(var t in o)ct.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&Me)for(var t of Me(o))e.indexOf(t)<0&&ft.call(o,t)&&(n[t]=o[t]);return n};import{a1 as g,a2 as B,a3 as Mn,S as Q,i as Z,s as De,F as ye,J as Le,K as Se,L as Fe,q as b,o as C,r as de,D as he,a4 as Oe,a5 as Rn,a6 as ie,t as Re,h as We,g as M,d as S,e as x,c as $,a as ne,b as R,I as ht,j as gt,M as ge,l as A,n as X,p as G,a7 as me,w as v,x as Y,y as H,B as V,a8 as ee,a9 as Wn,Q as mt,O as le,P as ze,aa as _t,ab as wt,v as Qe,ac as zn,ad as ve,ae as He,C as Pe,af as Ze,ag as vn,ah as Hn,ai as pt,aj as kt,ak as J,z as Vn,al as Kn,am as Et,u as Un,an as qn,E as Yn,ao as W,ap as Xn}from"./vendor-6bac273f.js";const Ve=new WeakMap,Ke=new WeakMap,je=new WeakMap,Ue=new WeakMap,_e=new WeakMap,we=new WeakMap,xe=new WeakMap,pe=new WeakMap,bt=new WeakMap,ke=new WeakMap,Ct=new WeakMap,Be=Symbol("placeholder");let Gn=0;class Jn{constructor(){this.id=`${Gn++}`}toString(){return this.id}}function $e(o){return o&&o.ownerDocument&&o.ownerDocument.defaultView||null}function Qn(o){return se(o)&&o.nodeType===8}function te(o){return se(o)&&o.nodeType===1}function se(o){const e=$e(o);return!!e&&o instanceof e.Node}function Dt(o){const e=o&&o.anchorNode&&$e(o.anchorNode);return!!e&&o instanceof e.Selection}function yt(o){return se(o)&&o.nodeType===3}function Zn(o){return o.clipboardData&&o.clipboardData.getData("text/plain")!==""&&o.clipboardData.types.length===1}function jn(o){let[e,n]=o;if(te(e)&&e.childNodes.length){let t=n===e.childNodes.length,i=t?n-1:n;for([e,i]=Lt(e,i,t?"backward":"forward"),t=i<n;te(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=$n(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function xn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Lt(o,e,n){const{childNodes:t}=o;let i=t[e],a=e,r=!1,s=!1;for(;(Qn(i)||te(i)&&i.childNodes.length===0||te(i)&&i.getAttribute("contenteditable")==="false")&&!(r&&s);){if(a>=t.length){r=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}i=t[a],e=a,a+=n==="forward"?1:-1}return[i,e]}function $n(o,e,n){const[t]=Lt(o,e,n);return t}function St(o){let e="";if(yt(o)&&o.nodeValue)return o.nodeValue;if(te(o)){for(const t of Array.from(o.childNodes))e+=St(t);const n=getComputedStyle(o).getPropertyValue("display");(n==="block"||n==="list"||o.tagName==="BR")&&(e+=`
`)}return e}const eo=/data-slate-fragment="(.+?)"/m;function to(o){const e=o.getData("text/html"),[,n]=e.match(eo)||[];return n}const no=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ft=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const et=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),oo=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Ot=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),io=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),ro=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ao=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Pt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Bt=!io&&!oo&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function nt(o){const e=je.get(o);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(o){let e=xe.get(o);return e||(e=new Jn,xe.set(o,e)),e}function Ee(o){const e=[];let n=o;for(;;){const t=Ke.get(n);if(t==null){if(g.isEditor(n))return e;break}const i=Ve.get(n);if(i==null)break;e.unshift(i),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(o)}`)}function Ne(o){const e=re(o,o),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function Nt(o){return!!ke.get(o)}function lo(o){const e=re(o,o),n=Ne(o);ke.set(o,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function ot(o,e,n={}){const{editable:t=!1}=n,i=re(o,o);let a;try{a=te(e)?e:e.parentElement}catch(r){if(!r.message.includes('Permission denied to access property "nodeType"'))throw r}return a?a.closest("[data-svelte-editor]")===i&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===i||!!a.getAttribute("data-slate-zero-width")):!1}function re(o,e,n=!0){const t=pe.get(o),i=g.isEditor(e)?Ue.get(o):t==null?void 0:t.get(ce(e));if(!i&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return i}function Tt(o,e,n=!0){const[t]=g.node(o,e.path),i=re(o,t,n);let a;g.void(o,{at:e})&&(e={path:e.path,offset:0});const r="[data-slate-string], [data-slate-zero-width]",s=i?Array.from(i.querySelectorAll(r)):[];let l=0;for(const c of s){const d=c.childNodes[0];if(d==null||d.textContent==null)continue;const{length:h}=d.textContent,u=c.getAttribute("data-slate-length"),_=u==null?h:parseInt(u,10),m=l+_;if(e.offset<=m){const w=Math.min(h,Math.max(0,e.offset-l));a=[d,w];break}l=m}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function qe(o,e,n=!0){const{anchor:t,focus:i}=e,a=B.isBackward(e),r=Tt(o,t,n);if(!r)return;const s=B.isCollapsed(e)?r:Tt(o,i),c=nt(o).document.createRange(),[d,h]=a?s:r,[u,_]=a?r:s,w=!!(te(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),E=!!(te(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return c.setStart(d,w?1:h),c.setEnd(u,E?1:_),c}function fe(o){let e=te(o)?o:o.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?_e.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function so(o,e){const{clientX:n,clientY:t,target:i}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=fe(e.target),r=Ee(a);if(g.isVoid(o,a)){const d=i.getBoundingClientRect(),h=o.isInline(a)?n-d.left<d.left+d.width-n:t-d.top<d.top+d.height-t,u=g.point(o,r,{edge:h?"start":"end"}),_=h?g.before(o,u):g.after(o,u);if(_)return g.range(o,_)}let s;const{document:l}=nt(o);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const d=l.caretPositionFromPoint(n,t);d&&(s=l.createRange(),s.setStart(d.offsetNode,d.offset),s.setEnd(d.offsetNode,d.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Te(o,s,{exactMatch:!1,suppressThrow:!1})}function It(o,e,n){var u;const{exactMatch:t,suppressThrow:i}=n,[a,r]=t?e:jn(e),s=a.parentNode;let l=null,c=0;if(s){const _=s.closest('[data-slate-void="true"]');let m=s.closest("[data-slate-leaf]"),w=null;if(m){l=m.closest('[data-slate-node="text"]');const E=nt(o).document.createRange();E.setStart(l,0),E.setEnd(a,r);const F=E.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(q=>{q.parentNode.removeChild(q)}),c=F.textContent.length,w=l}else _&&(m=_.querySelector("[data-slate-leaf]"),m?(l=m.closest('[data-slate-node="text"]'),w=m,c=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(y=>{c-=y.textContent.length})):c=1);w&&c===w.textContent.length&&(s.hasAttribute("data-slate-zero-width")||et&&((u=w.textContent)==null?void 0:u.endsWith(`

`)))&&c--}if(!l){if(i)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const d=fe(l);return{path:Ee(d),offset:c}}function Te(o,e,n){const{exactMatch:t,suppressThrow:i}=n,a=Dt(e)?e.anchorNode:e.startContainer;let r,s,l,c,d;if(a&&(Dt(e)?(r=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Ot&&xn()?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed):(r=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,d=e.collapsed)),r==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=It(o,[r,s],{exactMatch:t,suppressThrow:i});if(!h)return null;const u=d?h:It(o,[l,c],{exactMatch:t,suppressThrow:i});if(!u)return null;let _={anchor:h,focus:u};return B.isExpanded(_)&&B.isForward(_)&&te(l)&&g.void(o,{at:_.focus,mode:"highest"})&&(_=g.unhangRange(o,_,{voids:!0})),_}function co(o,e){const{anchor:n,focus:t}=e;return g.hasPath(o,n.path)&&g.hasPath(o,t.path)}function At(o,e){if(o===e)return!0;if(o.length!==e.length)return!1;for(let i=0;i<o.length;i++){const a=o[i],r=e[i],n=a,{anchor:s,focus:l}=n,c=Je(n,["anchor","focus"]),t=r,{anchor:d,focus:h}=t,u=Je(t,["anchor","focus"]);if(!B.equals(a,r)||a[Be]!==r[Be]||!Mn(c,u))return!1}return!0}function Mt(o,e){return o===e||!!o&&!!e&&B.equals(o,e)}function fo(o){let e;const n=o[7].default,t=ye(n,o,o[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,a){t&&t.m(i,a),e=!0},p(i,[a]){t&&t.p&&(!e||a&64)&&Le(t,n,i,i[6],e?Fe(n,i[6],a,null):Se(i[6]),null)},i(i){e||(b(t,i),e=!0)},o(i){C(t,i),e=!1},d(i){t&&t.d(i)}}}const Rt={},Wt={},zt={},vt={},Ht={};function Vt(){const o=Oe(Rt);if(!o)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return o}function ue(){return Rn(Vt())}function Kt(){const o=Oe(Wt);if(!o)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return o}function uo(){const o=Oe(zt);if(!o)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return o}function Ut(){const o=Oe(vt);if(!o)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return o}function ho(){const o=Oe(Ht);if(!o)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return o}function qt(o){return[]}function go(o,e,n){let{$$slots:t={},$$scope:i}=e,{editor:a}=e,{value:r=a.children}=e,{selection:s=a.selection}=e;const l=he(a);de(Rt,l);const c=he(!0);de(Wt,c);const d=he(!1);de(zt,d);const h=he(qt);de(vt,h);const u=he(a.selection);de(Ht,u);function _(){n(1,s=a.selection),n(0,r=a.children)}Ct.set(a,_);let m=a,w,y;return o.$$set=E=>{"editor"in E&&n(2,a=E.editor),"value"in E&&n(0,r=E.value),"selection"in E&&n(1,s=E.selection),"$$scope"in E&&n(6,i=E.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&a!==m&&(n(3,m=a),l.set(a)),o.$$.dirty&17&&w!==r&&(l.update(E=>(E.children=r,E)),n(4,w=r)),o.$$.dirty&38&&(Mt(y,s)||(u.set(s),l.set(a),n(5,y=s)))},[r,s,a,m,w,y,i,t]}class Di extends Q{constructor(e){super();Z(this,e,go,fo,De,{editor:2,value:0,selection:1})}}const Yt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Xt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",mo=new RegExp("^[^"+Xt+"]*["+Yt+"]"),_o=new RegExp("^[^"+Yt+"]*["+Xt+"]");function Gt(o){const e=String(o||"");return mo.test(e)?"rtl":_o.test(e)?"ltr":"neutral"}function Jt(o){let e=`
`,n;return{c(){n=Re(e)},l(t){n=We(t,e)},m(t,i){M(t,n,i)},d(t){t&&S(n)}}}function wo(o){let e,n,t=o[1]&&Jt();return{c(){e=x("span"),n=Re(o[0]),t&&t.c(),this.h()},l(i){e=$(i,"SPAN",{"data-slate-string":!0});var a=ne(e);n=We(a,o[0]),t&&t.l(a),a.forEach(S),this.h()},h(){R(e,"data-slate-string","true")},m(i,a){M(i,e,a),ht(e,n),t&&t.m(e,null)},p(i,[a]){a&1&&gt(n,i[0]),i[1]?t||(t=Jt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:ge,o:ge,d(i){i&&S(e),t&&t.d()}}}function po(o,e,n){let{text:t}=e,{isTrailing:i=!1}=e;return o.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,i=a.isTrailing)},[t,i]}class ko extends Q{constructor(e){super();Z(this,e,po,wo,ie,{text:0,isTrailing:1})}}function Qt(o){let e;return{c(){e=x("br")},l(n){e=$(n,"BR",{})},m(n,t){M(n,e,t)},d(n){n&&S(e)}}}function Eo(o){let e,n="\uFEFF",t,i,a=o[1]&&Qt();return{c(){e=x("span"),t=Re(n),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ne(e);t=We(s,n),a&&a.l(s),s.forEach(S),this.h()},h(){R(e,"data-slate-zero-width",i=o[1]?"n":"z"),R(e,"data-slate-length",o[0])},m(r,s){M(r,e,s),ht(e,t),a&&a.m(e,null)},p(r,[s]){r[1]?a||(a=Qt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&i!==(i=r[1]?"n":"z")&&R(e,"data-slate-zero-width",i),s&1&&R(e,"data-slate-length",r[0])},i:ge,o:ge,d(r){r&&S(e),a&&a.d()}}}function bo(o,e,n){let{length:t=0}=e,{isLineBreak:i=!1}=e;return o.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,i=a.isLineBreak)},[t,i]}class it extends Q{constructor(e){super();Z(this,e,bo,Eo,ie,{length:0,isLineBreak:1})}}function Co(o){let e,n;return e=new ko({props:{isTrailing:o[5],text:o[0].text}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&32&&(a.isTrailing=t[5]),i&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Do(o){let e,n;return e=new it({}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:ge,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function yo(o){let e,n;return e=new it({props:{isLineBreak:!0}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:ge,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Lo(o){let e,n;return e=new it({props:{length:ee.string(o[1]).length}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&2&&(a.length=ee.string(t[1]).length),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function So(o){let e,n,t,i;const a=[Lo,yo,Do,Co],r=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),M(l,t,c),i=!0},p(l,[c]){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&S(t)}}}function Fo(o,e,n){let t,i,a,r,s,l,{isLast:c}=e,{leaf:d}=e,{parent:h}=e,{text:u}=e;const _=ue();return o.$$set=m=>{"isLast"in m&&n(6,c=m.isLast),"leaf"in m&&n(0,d=m.leaf),"parent"in m&&n(1,h=m.parent),"text"in m&&n(7,u=m.text)},o.$$.update=()=>{o.$$.dirty&65&&n(5,t=c&&d.text.slice(-1)===`
`),o.$$.dirty&128&&n(9,i=Ee(u)),o.$$.dirty&512&&n(8,a=me.parent(i)),o.$$.dirty&2&&n(4,r=_.isVoid(h)),o.$$.dirty&1&&n(2,s=d.text===""),o.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===u&&!_.isInline(h)&&g.string(_,a)==="")},[d,h,s,l,r,t,c,u,a,i]}class Oo extends Q{constructor(e){super();Z(this,e,Fo,So,ie,{isLast:6,leaf:0,parent:1,text:7})}}function Zt(o){let e,n,t,i;function a(l){o[7](l)}var r=o[4];function s(l){let c={"data-slate-placeholder":!0,style:"position: absolute; pointer-events: none; width: 100%; max-width: 100%; display: block; opacity: 0.333; user-select: none; text-decoration: none;",contenteditable:"false",$$slots:{default:[Po]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return r&&(e=new r(s(o)),le.push(()=>ze(e,"clientHeight",a))),{c(){e&&v(e.$$.fragment),t=A()},l(l){e&&Y(e.$$.fragment,l),t=A()},m(l,c){e&&H(e,l,c),M(l,t,c),i=!0},p(l,c){const d={};if(c&514&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.clientHeight=l[6],mt(()=>n=!1)),r!==(r=l[4])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(e=new r(s(l)),le.push(()=>ze(e,"clientHeight",a)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else r&&e.$set(d)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&S(t),e&&V(e,l)}}}function Po(o){let e=o[1].placeholder+"",n;return{c(){n=Re(e)},l(t){n=We(t,e)},m(t,i){M(t,n,i)},p(t,i){i&2&&e!==(e=t[1].placeholder+"")&&gt(n,e)},d(t){t&&S(n)}}}function Bo(o){let e,n,t,i=Be in o[1]&&Zt(o);return n=new Oo({props:{isLast:o[0],leaf:o[1],parent:o[2],text:o[3]}}),{c(){i&&i.c(),e=A(),v(n.$$.fragment)},l(a){i&&i.l(a),e=A(),Y(n.$$.fragment,a)},m(a,r){i&&i.m(a,r),M(a,e,r),H(n,a,r),t=!0},p(a,r){Be in a[1]?i?(i.p(a,r),r&2&&b(i,1)):(i=Zt(a),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(X(),C(i,1,1,()=>{i=null}),G());const s={};r&1&&(s.isLast=a[0]),r&2&&(s.leaf=a[1]),r&4&&(s.parent=a[2]),r&8&&(s.text=a[3]),n.$set(s)},i(a){t||(b(i),b(n.$$.fragment,a),t=!0)},o(a){C(i),C(n.$$.fragment,a),t=!1},d(a){i&&i.d(a),a&&S(e),V(n,a)}}}function No(o){let e,n,t;var i=o[5];function a(r){return{props:{leaf:r[1],"data-slate-leaf":"true",$$slots:{default:[Bo]},$$scope:{ctx:r}}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),M(r,n,s),t=!0},p(r,[s]){const l={};if(s&2&&(l.leaf=r[1]),s&607&&(l.$$scope={dirty:s,ctx:r}),i!==(i=r[5])){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&S(n),e&&V(e,r)}}}function To(o,e,n){let{isLast:t}=e,{leaf:i}=e,{parent:a}=e,{text:r}=e,{Placeholder:s}=e,{Leaf:l}=e,c,d;Wn(()=>{if(Pt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight="")}});function h(u){c=u,n(6,c)}return o.$$set=u=>{"isLast"in u&&n(0,t=u.isLast),"leaf"in u&&n(1,i=u.leaf),"parent"in u&&n(2,a=u.parent),"text"in u&&n(3,r=u.text),"Placeholder"in u&&n(4,s=u.Placeholder),"Leaf"in u&&n(5,l=u.Leaf)},o.$$.update=()=>{if(o.$$.dirty&64&&c!==d&&Pt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight=`${c}px`)}},[t,i,a,r,s,l,c,h]}class jt extends Q{constructor(e){super();Z(this,e,To,No,ie,{isLast:0,leaf:1,parent:2,text:3,Placeholder:4,Leaf:5})}}function xt(o,e,n){const t=o.slice();return t[11]=e[n],t[13]=n,t}function $t(o,e){let n,t,i,a;var r=jt;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return r&&(t=new r(s(e))),{key:o,first:null,c(){n=A(),t&&v(t.$$.fragment),i=A(),this.h()},l(l){n=A(),t&&Y(t.$$.fragment,l),i=A(),this.h()},h(){this.first=n},m(l,c){M(l,n,c),t&&H(t,l,c),M(l,i,c),a=!0},p(l,c){e=l;const d={};if(c&8&&(d.Placeholder=e[3]),c&16&&(d.Leaf=e[4]),c&129&&(d.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(d.parent=e[1]),c&128&&(d.leaf=e[11]),c&4&&(d.text=e[2]),r!==(r=jt)){if(t){X();const h=t;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(t=new r(s(e)),v(t.$$.fragment),b(t.$$.fragment,1),H(t,i.parentNode,i)):t=null}else r&&t.$set(d)},i(l){a||(t&&b(t.$$.fragment,l),a=!0)},o(l){t&&C(t.$$.fragment,l),a=!1},d(l){l&&S(n),l&&S(i),t&&V(t,l)}}}function Io(o){let e,n=[],t=new Map,i,a=o[7];const r=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=xt(o,a,s),c=r(l);t.set(c,n[s]=$t(c,l))}return{c(){e=x("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=$(s,"SPAN",{"data-slate-node":!0});var l=ne(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(S),this.h()},h(){R(e,"data-slate-node","text")},m(s,l){M(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);o[9](e),i=!0},p(s,[l]){l&223&&(a=s[7],X(),n=_t(n,l,r,1,s,a,t,e,wt,$t,null,xt),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)C(n[l]);i=!1},d(s){s&&S(e);for(let l=0;l<n.length;l+=1)n[l].d();o[9](null)}}}function Ao(o,e,n){let t,i,{decorations:a}=e,{isLast:r}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:d}=e;const h=ue();let u;Qe(()=>{var m;(m=pe.get(h))==null||m.set(i,u),we.set(l,u),_e.set(u,l)});function _(m){le[m?"unshift":"push"](()=>{u=m,n(5,u)})}return o.$$set=m=>{"decorations"in m&&n(8,a=m.decorations),"isLast"in m&&n(0,r=m.isLast),"parent"in m&&n(1,s=m.parent),"text"in m&&n(2,l=m.text),"Placeholder"in m&&n(3,c=m.Placeholder),"Leaf"in m&&n(4,d=m.Leaf)},o.$$.update=()=>{var m;o.$$.dirty&260&&n(7,t=zn.decorations(l,a)),o.$$.dirty&4&&n(6,i=ce(l)),o.$$.dirty&100&&u&&((m=pe.get(h))==null||m.set(i,u),we.set(l,u),_e.set(u,l))},[r,s,l,c,d,u,i,t,a,_]}class be extends Q{constructor(e){super();Z(this,e,Ao,Io,ie,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Mo(o){let e,n;return e=new rn({props:{node:o[0],decorations:o[1],selection:o[2],Element:o[3],Placeholder:o[5],Leaf:o[4]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&1&&(a.node=t[0]),i&2&&(a.decorations=t[1]),i&4&&(a.selection=t[2]),i&8&&(a.Element=t[3]),i&32&&(a.Placeholder=t[5]),i&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ro(o){let e,n,t,i;const a=[zo,Wo],r=[];function s(l,c){return l[7]?0:1}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),M(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&S(t)}}}function Wo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[5],Leaf:r[4],decorations:r[1],isLast:!1,parent:r[0],text:r[10]}}}return i&&(n=new i(a(o))),{c(){e=x("div"),n&&v(n.$$.fragment),this.h()},l(r){e=$(r,"DIV",{"data-slate-spacer":!0,class:!0});var s=ne(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){R(e,"data-slate-spacer",""),R(e,"class","svelte-yux06v")},m(r,s){M(r,e,s),n&&H(n,e,null),t=!0},p(r,s){const l={};if(s&32&&(l.Placeholder=r[5]),s&16&&(l.Leaf=r[4]),s&2&&(l.decorations=r[1]),s&1&&(l.parent=r[0]),s&1024&&(l.text=r[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(r)),v(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(r){t||(n&&b(n.$$.fragment,r),t=!0)},o(r){n&&C(n.$$.fragment,r),t=!1},d(r){r&&S(e),n&&V(n)}}}function zo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[5],Leaf:r[4],decorations:r[1],isLast:!1,parent:r[0],text:r[10]}}}return i&&(n=new i(a(o))),{c(){e=x("span"),n&&v(n.$$.fragment),this.h()},l(r){e=$(r,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ne(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){R(e,"data-slate-spacer",""),R(e,"class","svelte-yux06v")},m(r,s){M(r,e,s),n&&H(n,e,null),t=!0},p(r,s){const l={};if(s&32&&(l.Placeholder=r[5]),s&16&&(l.Leaf=r[4]),s&2&&(l.decorations=r[1]),s&1&&(l.parent=r[0]),s&1024&&(l.text=r[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(r)),v(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(r){t||(n&&b(n.$$.fragment,r),t=!0)},o(r){n&&C(n.$$.fragment,r),t=!1},d(r){r&&S(e),n&&V(n)}}}function vo(o){let e,n,t,i;const a=[Ro,Mo],r=[];function s(l,c){return l[8]?0:1}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),M(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&S(t)}}}function Ho(o){let e,n,t,i;function a(l){o[18](l)}var r=o[3];function s(l){let c={"data-slate-void":l[8],"data-slate-inline":l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[vo]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return r&&(e=new r(s(o)),le.push(()=>ze(e,"ref",a))),{c(){e&&v(e.$$.fragment),t=A()},l(l){e&&Y(e.$$.fragment,l),t=A()},m(l,c){e&&H(e,l,c),M(l,t,c),i=!0},p(l,[c]){const d={};if(c&256&&(d["data-slate-void"]=l[8]),c&128&&(d["data-slate-inline"]=l[7]),c&2048&&(d.contenteditable=l[11]),c&1&&(d.element=l[0]),c&512&&(d.dir=l[9]),c&1050047&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.ref=l[6],mt(()=>n=!1)),r!==(r=l[3])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(e=new r(s(l)),le.push(()=>ze(e,"ref",a)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else r&&e.$set(d)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&S(t),e&&V(e,l)}}}function Vo(o,e,n){let t,i,a,r,s,l,{element:c}=e,{decorations:d}=e,{selection:h=null}=e,{Element:u}=e,{Leaf:_}=e,{Placeholder:m}=e;const w=ue(),y=Kt();ve(o,y,N=>n(17,l=N));let E,F,T,q,L;Qe(()=>{var N;(N=pe.get(w))==null||N.set(E,L),we.set(c,L),_e.set(L,c)});function oe(N){L=N,n(6,L)}return o.$$set=N=>{"element"in N&&n(0,c=N.element),"decorations"in N&&n(1,d=N.decorations),"selection"in N&&n(2,h=N.selection),"Element"in N&&n(3,u=N.Element),"Leaf"in N&&n(4,_=N.Leaf),"Placeholder"in N&&n(5,m=N.Placeholder)},o.$$.update=()=>{var N;if(o.$$.dirty&131072&&n(15,t=l),o.$$.dirty&1&&n(7,i=w.isInline(c)),o.$$.dirty&1&&n(16,a=ce(c)),o.$$.dirty&81920&&F!==a&&(n(13,E=a),n(14,F=a)),o.$$.dirty&129&&!i&&g.hasInlines(w,c)){const I=Gt(ee.string(c));I==="rtl"&&n(9,T=I)}if(o.$$.dirty&1&&n(8,r=g.isVoid(w,c)),o.$$.dirty&32768&&n(11,s=!t),o.$$.dirty&33153&&r){!t&&i&&n(11,s=!1);const[[I]]=ee.texts(c);n(10,q=I),Ve.set(I,0),Ke.set(I,c)}o.$$.dirty&8257&&L&&((N=pe.get(w))==null||N.set(E,L),we.set(c,L),_e.set(L,c))},[c,d,h,u,_,m,L,i,r,T,q,s,y,E,F,t,a,l,oe]}class en extends Q{constructor(e){super();Z(this,e,Vo,Ho,ie,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function Ko(o){let e,n,t;var i=en;function a(r){return{props:{Element:r[1],Placeholder:r[3],Leaf:r[2],decorations:r[5],element:r[0],selection:r[4]}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),M(r,n,s),t=!0},p(r,[s]){const l={};if(s&2&&(l.Element=r[1]),s&8&&(l.Placeholder=r[3]),s&4&&(l.Leaf=r[2]),s&32&&(l.decorations=r[5]),s&1&&(l.element=r[0]),s&16&&(l.selection=r[4]),i!==(i=en)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&S(n),e&&V(e,r)}}}const Uo={};function qo(o,e,n){let t,i,a,r,{parent:s}=e,{element:l}=e,{path:c}=e,{index:d}=e,{decorate:h}=e,{decorations:u}=e,{selection:_=null}=e,{Element:m}=e,{Leaf:w}=e,{Placeholder:y}=e;const E=he(!1);de(Uo,E);const F=ue();let T=d,q=s,L=l,oe=u,N=_;return o.$$set=I=>{"parent"in I&&n(6,s=I.parent),"element"in I&&n(0,l=I.element),"path"in I&&n(7,c=I.path),"index"in I&&n(8,d=I.index),"decorate"in I&&n(9,h=I.decorate),"decorations"in I&&n(10,u=I.decorations),"selection"in I&&n(11,_=I.selection),"Element"in I&&n(1,m=I.Element),"Leaf"in I&&n(2,w=I.Leaf),"Placeholder"in I&&n(3,y=I.Placeholder)},o.$$.update=()=>{o.$$.dirty&4352&&T!==d&&n(12,T=d),o.$$.dirty&8256&&q!==s&&n(13,q=s),o.$$.dirty&16385&&L!==l&&n(14,L=l),o.$$.dirty&33792&&(At(oe,u)||n(15,oe=u)),o.$$.dirty&67584&&(Mt(N,_)||n(16,N=_)),o.$$.dirty&20480&&Ve.set(L,T),o.$$.dirty&24576&&Ke.set(L,q),o.$$.dirty&4224&&n(18,t=c.concat(T)),o.$$.dirty&262144&&n(17,i=g.range(F,t)),o.$$.dirty&442880&&n(5,a=on(h([L,t]),i,oe)),o.$$.dirty&196608&&n(4,r=N&&B.intersection(i,N)),o.$$.dirty&16&&E.set(!!r)},[l,m,w,y,r,a,s,c,d,h,u,_,T,q,L,oe,N,i,t]}class Yo extends Q{constructor(e){super();Z(this,e,qo,Ko,De,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Xo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[3],Leaf:r[2],decorations:r[4],isLast:r[5],parent:r[0],text:r[1]}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),M(r,n,s),t=!0},p(r,[s]){const l={};if(s&8&&(l.Placeholder=r[3]),s&4&&(l.Leaf=r[2]),s&16&&(l.decorations=r[4]),s&32&&(l.isLast=r[5]),s&1&&(l.parent=r[0]),s&2&&(l.text=r[1]),i!==(i=be)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&S(n),e&&V(e,r)}}}function Go(o,e,n){let t,i,a,r,{parent:s}=e,{text:l}=e,{path:c}=e,{index:d}=e,{isLeafBlock:h}=e,{decorations:u}=e,{decorate:_}=e,{Leaf:m}=e,{Placeholder:w}=e;const y=ue();let E=d,F=l,T=s,q=u;return o.$$set=L=>{"parent"in L&&n(0,s=L.parent),"text"in L&&n(1,l=L.text),"path"in L&&n(6,c=L.path),"index"in L&&n(7,d=L.index),"isLeafBlock"in L&&n(8,h=L.isLeafBlock),"decorations"in L&&n(9,u=L.decorations),"decorate"in L&&n(10,_=L.decorate),"Leaf"in L&&n(2,m=L.Leaf),"Placeholder"in L&&n(3,w=L.Placeholder)},o.$$.update=()=>{o.$$.dirty&2176&&E!==d&&n(11,E=d),o.$$.dirty&4098&&F!==l&&n(12,F=l),o.$$.dirty&8193&&T!==s&&n(13,T=s),o.$$.dirty&16896&&(At(q,u)||n(14,q=u)),o.$$.dirty&6144&&Ve.set(F,E),o.$$.dirty&12288&&Ke.set(F,T),o.$$.dirty&2112&&n(16,t=c.concat(E)),o.$$.dirty&10496&&n(5,i=h&&E===T.children.length-1),o.$$.dirty&65536&&n(15,a=g.range(y,t)),o.$$.dirty&119808&&n(4,r=on(_([F,t]),a,q))},[s,l,m,w,r,i,c,d,h,u,_,E,F,T,q,a,t]}class Jo extends Q{constructor(e){super();Z(this,e,Go,Xo,De,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function tn(o,e,n){const t=o.slice();return t[13]=e[n],t[15]=n,t}function Qo(o){let e,n;return e=new Jo({props:{Placeholder:o[4],Leaf:o[3],decorations:o[0],parent:o[5],text:o[13],decorate:o[8],index:o[15],path:o[7],isLeafBlock:o[6]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&32&&(a.parent=t[5]),i&32&&(a.text=t[13]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),i&64&&(a.isLeafBlock=t[6]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Zo(o){let e,n;return e=new Yo({props:{Element:o[2],Placeholder:o[4],Leaf:o[3],decorations:o[0],selection:o[1],element:o[13],parent:o[5],decorate:o[8],index:o[15],path:o[7]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&4&&(a.Element=t[2]),i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&2&&(a.selection=t[1]),i&32&&(a.element=t[13]),i&32&&(a.parent=t[5]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function nn(o,e){let n,t,i,a,r,s;const l=[Zo,Qo],c=[];function d(h,u){return u&32&&(t=null),t==null&&(t=!!He.isElement(h[13])),t?0:1}return i=d(e,-1),a=c[i]=l[i](e),{key:o,first:null,c(){n=A(),a.c(),r=A(),this.h()},l(h){n=A(),a.l(h),r=A(),this.h()},h(){this.first=n},m(h,u){M(h,n,u),c[i].m(h,u),M(h,r,u),s=!0},p(h,u){e=h;let _=i;i=d(e,u),i===_?c[i].p(e,u):(X(),C(c[_],1,1,()=>{c[_]=null}),G(),a=c[i],a?a.p(e,u):(a=c[i]=l[i](e),a.c()),b(a,1),a.m(r.parentNode,r))},i(h){s||(b(a),s=!0)},o(h){C(a),s=!1},d(h){h&&S(n),c[i].d(h),h&&S(r)}}}function jo(o){let e=[],n=new Map,t,i,a=o[5].children;const r=s=>ce(s[13]);for(let s=0;s<a.length;s+=1){let l=tn(o,a,s),c=r(l);n.set(c,e[s]=nn(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=A()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=A()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);M(s,t,l),i=!0},p(s,[l]){l&511&&(a=s[5].children,X(),e=_t(e,l,r,1,s,a,n,t.parentNode,wt,nn,t,tn),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(e[l]);i=!0}},o(s){for(let l=0;l<e.length;l+=1)C(e[l]);i=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&S(t)}}}function on(o,e,n=[]){for(const t of n){const i=B.intersection(t,e);i&&o.push(i)}return o}function xo(o,e,n){let t,i,a,r,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:d}=e,{Leaf:h}=e,{Placeholder:u}=e;const _=ue(),m=Ut();ve(o,m,y=>n(11,r=y));let w=s;return o.$$set=y=>{"node"in y&&n(10,s=y.node),"decorations"in y&&n(0,l=y.decorations),"selection"in y&&n(1,c=y.selection),"Element"in y&&n(2,d=y.Element),"Leaf"in y&&n(3,h=y.Leaf),"Placeholder"in y&&n(4,u=y.Placeholder)},o.$$.update=()=>{o.$$.dirty&2048&&n(8,t=r),o.$$.dirty&1056&&(w!==s||s===_)&&n(5,w=s),o.$$.dirty&32&&n(7,i=Ee(w)),o.$$.dirty&32&&n(6,a=He.isElement(w)&&!_.isInline(w)&&g.hasInlines(_,w))},[l,c,d,h,u,w,a,i,t,m,s,r]}class rn extends Q{constructor(e){super();Z(this,e,xo,jo,De,{node:10,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function $o(o){let e,n,t;const i=o[7].default,a=ye(i,o,o[6],null);return{c(){e=x("div"),a&&a.c(),this.h()},l(r){e=$(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=ne(e);a&&a.l(s),s.forEach(S),this.h()},h(){R(e,"data-slate-node","element"),R(e,"data-slate-void",n=o[5]["data-slate-void"]),R(e,"dir",o[2]),R(e,"contenteditable",o[3]),R(e,"class","svelte-19k8gul")},m(r,s){M(r,e,s),a&&a.m(e,null),o[9](e),t=!0},p(r,s){a&&a.p&&(!t||s&64)&&Le(a,i,r,r[6],t?Fe(i,r[6],s,null):Se(r[6]),null),(!t||s&32&&n!==(n=r[5]["data-slate-void"]))&&R(e,"data-slate-void",n),(!t||s&4)&&R(e,"dir",r[2]),(!t||s&8)&&R(e,"contenteditable",r[3])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&S(e),a&&a.d(r),o[9](null)}}}function ei(o){let e,n,t;const i=o[7].default,a=ye(i,o,o[6],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=ne(e);a&&a.l(s),s.forEach(S),this.h()},h(){R(e,"data-slate-node","element"),R(e,"data-slate-inline","true"),R(e,"data-slate-void",n=o[5]["data-slate-void"]),R(e,"dir",o[2]),R(e,"contenteditable",o[3]),R(e,"class","svelte-19k8gul")},m(r,s){M(r,e,s),a&&a.m(e,null),o[8](e),t=!0},p(r,s){a&&a.p&&(!t||s&64)&&Le(a,i,r,r[6],t?Fe(i,r[6],s,null):Se(r[6]),null),(!t||s&32&&n!==(n=r[5]["data-slate-void"]))&&R(e,"data-slate-void",n),(!t||s&4)&&R(e,"dir",r[2]),(!t||s&8)&&R(e,"contenteditable",r[3])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&S(e),a&&a.d(r),o[8](null)}}}function ti(o){let e,n,t,i,a;const r=[ei,$o],s=[];function l(c,d){return d&2&&(e=null),e==null&&(e=!!c[4].isInline(c[1])),e?0:1}return n=l(o,-1),t=s[n]=r[n](o),{c(){t.c(),i=A()},l(c){t.l(c),i=A()},m(c,d){s[n].m(c,d),M(c,i,d),a=!0},p(c,[d]){let h=n;n=l(c,d),n===h?s[n].p(c,d):(X(),C(s[h],1,1,()=>{s[h]=null}),G(),t=s[n],t?t.p(c,d):(t=s[n]=r[n](c),t.c()),b(t,1),t.m(i.parentNode,i))},i(c){a||(b(t),a=!0)},o(c){C(t),a=!1},d(c){s[n].d(c),c&&S(i)}}}function ni(o,e,n){let{$$slots:t={},$$scope:i}=e,{element:a}=e,{ref:r}=e,{dir:s}=e,{contenteditable:l}=e;const c=ue();function d(u){le[u?"unshift":"push"](()=>{r=u,n(0,r)})}function h(u){le[u?"unshift":"push"](()=>{r=u,n(0,r)})}return o.$$set=u=>{n(5,e=Pe(Pe({},e),Ze(u))),"element"in u&&n(1,a=u.element),"ref"in u&&n(0,r=u.ref),"dir"in u&&n(2,s=u.dir),"contenteditable"in u&&n(3,l=u.contenteditable),"$$scope"in u&&n(6,i=u.$$scope)},e=Ze(e),[r,a,s,l,c,e,i,t,d,h]}class oi extends Q{constructor(e){super();Z(this,e,ni,ti,ie,{element:1,ref:0,dir:2,contenteditable:3})}}function ii(o){let e,n;const t=o[1].default,i=ye(t,o,o[0],null);return{c(){e=x("span"),i&&i.c(),this.h()},l(a){e=$(a,"SPAN",{"data-slate-leaf":!0});var r=ne(e);i&&i.l(r),r.forEach(S),this.h()},h(){R(e,"data-slate-leaf","true")},m(a,r){M(a,e,r),i&&i.m(e,null),n=!0},p(a,[r]){i&&i.p&&(!n||r&1)&&Le(i,t,a,a[0],n?Fe(t,a[0],r,null):Se(a[0]),null)},i(a){n||(b(i,a),n=!0)},o(a){C(i,a),n=!1},d(a){a&&S(e),i&&i.d(a)}}}function ri(o,e,n){let{$$slots:t={},$$scope:i}=e;return o.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,t]}class ai extends Q{constructor(e){super();Z(this,e,ri,ii,ie,{})}}function li(o){let e,n,t;const i=o[2].default,a=ye(i,o,o[1],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{});var s=ne(e);a&&a.l(s),s.forEach(S),this.h()},h(){vn(()=>o[3].call(e))},m(r,s){M(r,e,s),a&&a.m(e,null),n=Hn(e,o[3].bind(e)),t=!0},p(r,[s]){a&&a.p&&(!t||s&2)&&Le(a,i,r,r[1],t?Fe(i,r[1],s,null):Se(r[1]),null)},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&S(e),a&&a.d(r),n()}}}function si(o,e,n){let{$$slots:t={},$$scope:i}=e,{clientHeight:a}=e;function r(){a=this.clientHeight,n(0,a)}return o.$$set=s=>{"clientHeight"in s&&n(0,a=s.clientHeight),"$$scope"in s&&n(1,i=s.$$scope)},[a,i,t,r]}class ci extends Q{constructor(e){super();Z(this,e,si,li,ie,{clientHeight:0})}}const fi=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),rt={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},an={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:fi?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},at={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let o=1;o<20;o++)at["f"+o]=111+o;function ln(o,e={}){Array.isArray(o)||(o=[o]);const n=o.map(t=>ui(t,e));return function(i){return n.some(a=>di(a,i))}}function yi(o,e,n={}){return ln(o,n)(e)}function lt(o){return ln(o,{byKey:!0})}function ui(o,e={}){const n=e&&e.byKey,t={};o=o.replace("++","+add");const i=o.split("+"),{length:a}=i;for(const r in rt)t[rt[r]]=!1;for(let r of i){const s=r.endsWith("?")&&r.length>1;s&&(r=r.slice(0,-1));const l=sn(r),c=rt[l];if(r.length>1&&!c&&!an[r]&&!at[l])throw new TypeError(`Unknown modifier: "${r}"`);(a===1||!c)&&(n?t.key=l:t.which=hi(r)),c&&(t[c]=s?null:!0)}return t}function di(o,e){for(const n in o){const t=o[n];let i;if(t!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=t===91&&e.which===93?91:e.which:i=e[n],!(i==null&&t===!1)&&i!==t))return!1}return!0}function hi(o){return o=sn(o),at[o]||o.toUpperCase().charCodeAt(0)}function sn(o){return o=o.toLowerCase(),o=an[o]||o,o}const gi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},mi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},_i={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function K(o){const e=gi[o],n=mi[o],t=_i[o],i=e&&lt(e),a=n&&lt(n),r=t&&lt(t);return s=>!!(i&&i(s)||Ft&&a&&a(s)||!Ft&&r&&r(s))}var U={isBold:K("bold"),isCompose:K("compose"),isMoveBackward:K("moveBackward"),isMoveForward:K("moveForward"),isDeleteBackward:K("deleteBackward"),isDeleteForward:K("deleteForward"),isDeleteLineBackward:K("deleteLineBackward"),isDeleteLineForward:K("deleteLineForward"),isDeleteWordBackward:K("deleteWordBackward"),isDeleteWordForward:K("deleteWordForward"),isExtendBackward:K("extendBackward"),isExtendForward:K("extendForward"),isExtendLineBackward:K("extendLineBackward"),isExtendLineForward:K("extendLineForward"),isItalic:K("italic"),isMoveLineBackward:K("moveLineBackward"),isMoveLineForward:K("moveLineForward"),isMoveWordBackward:K("moveWordBackward"),isMoveWordForward:K("moveWordForward"),isRedo:K("redo"),isSplitBlock:K("splitBlock"),isTransposeCharacter:K("transposeCharacter"),isUndo:K("undo")};function wi(o){let e,n,t,i,a,r,s,l;n=new rn({props:{node:o[8],selection:o[9],decorations:o[10],Element:o[1],Leaf:o[2],Placeholder:o[3]}});let c=[o[29],{role:t=o[4]?void 0:"textbox"},{spellcheck:o[5]},{autocorrect:o[6]},{autocapitalize:o[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:i=!o[4]},{"z-index":a=-1}],d={};for(let h=0;h<c.length;h+=1)d=Pe(d,c[h]);return{c(){e=x("div"),v(n.$$.fragment),this.h()},l(h){e=$(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var u=ne(e);Y(n.$$.fragment,u),u.forEach(S),this.h()},h(){pt(e,d),kt(e,"svelte-m59z04",!0)},m(h,u){M(h,e,u),H(n,e,null),o[39](e),r=!0,s||(l=[J(e,"beforeinput",o[13]),J(e,"keydown",o[15]),J(e,"input",o[14]),J(e,"focus",o[16]),J(e,"blur",o[17]),J(e,"click",o[18]),J(e,"compositionend",o[19]),J(e,"compositionupdate",o[20]),J(e,"compositionstart",o[21]),J(e,"paste",o[22]),J(e,"copy",o[23]),J(e,"cut",o[24]),J(e,"dragover",o[25]),J(e,"dragstart",o[26]),J(e,"drop",o[27]),J(e,"dragend",o[28])],s=!0)},p(h,u){const _={};u[0]&256&&(_.node=h[8]),u[0]&512&&(_.selection=h[9]),u[0]&1024&&(_.decorations=h[10]),u[0]&2&&(_.Element=h[1]),u[0]&4&&(_.Leaf=h[2]),u[0]&8&&(_.Placeholder=h[3]),n.$set(_),pt(e,d=Vn(c,[u[0]&536870912&&h[29],(!r||u[0]&16&&t!==(t=h[4]?void 0:"textbox"))&&{role:t},(!r||u[0]&32)&&{spellcheck:h[5]},(!r||u[0]&64)&&{autocorrect:h[6]},(!r||u[0]&128)&&{autocapitalize:h[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!r||u[0]&16&&i!==(i=!h[4]))&&{contenteditable:i},{"z-index":a}])),kt(e,"svelte-m59z04",!0)},i(h){r||(b(n.$$.fragment,h),r=!0)},o(h){C(n.$$.fragment,h),r=!1},d(h){h&&S(e),V(n),o[39](null),s=!1,Kn(l)}}}function Ce(o,e){return se(e)&&ot(o,e)}function j(o,e){return se(e)&&ot(o,e,{editable:!0})}function cn(o,e){if(bt.get(o))return!1;{const n=Ce(o,e)&&fe(e);return g.isVoid(o,n)}}function pi(o,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),Xn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function ki(o,e,n){let t,i,a,r;const s=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let l=Et(e,s),c,d,{Element:h=oi}=e,{Leaf:u=ai}=e,{Placeholder:_=ci}=e,{placeholder:m}=e,{readOnly:w=!1}=e,{autoFocus:y=!1}=e,{decorate:E=qt}=e,{scrollSelectionIntoView:F=pi}=e,{ref:T=void 0}=e,{spellcheck:q=!0}=e,{autocorrect:L="true"}=e,{autocapitalize:oe="true"}=e,{onKeyDown:N=()=>{}}=e;const I=Vt();ve(o,I,f=>n(38,d=f));const dn=Kt(),Ie=uo(),hn=Ut(),Ye=ho();ve(o,Ye,f=>n(37,c=f));const D={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null};let Xe=[],Ge;function gn(){if(!D.isComposing&&!D.isUpdatingSelection&&!D.isDraggingInternally){const f=Ne(t),p=re(t,t),k=f.getSelection();if(f.activeElement===p?(n(35,D.latestElement=f.activeElement,D),ke.set(t,!0),Ie.set(!0)):(ke.delete(t),Ie.set(!1)),!k){W.deselect(t);return}const{anchorNode:O,focusNode:P}=k,z=j(t,O)||cn(t,O),ae=j(t,P)||cn(t,P);if(z&&ae){const Ae=Te(t,k,{exactMatch:!1,suppressThrow:!0});W.select(t,Ae)}}}function st(){Yn().then(gn)}Qe(()=>{const f=$e(T);return f&&(je.set(t,f),f.document.addEventListener("selectionchange",st)),Ue.set(t,T),we.set(t,T),_e.set(T,t),()=>{Ue.delete(t),we.delete(t),f&&(je.delete(t),f.document.removeEventListener("selectionchange",st))}});function mn(){const f=Ne(t),p=f==null?void 0:f.getSelection();if(D.isComposing||!p||!Nt(t))return;const k=p.type!=="None";if(!k)return;const O=Ue.get(t);let P=!1;if(O.contains(p.anchorNode)&&O.contains(p.focusNode)&&(P=!0),k&&P&&i){const ae=Te(t,p,{exactMatch:!0,suppressThrow:!0});if(ae&&B.equals(ae,i))return}if(i&&!co(t,i)){n(8,t.selection=Te(t,p,{exactMatch:!1,suppressThrow:!1}),t),n(9,i=t.selection),Ye.set(i);return}D.isUpdatingSelection&&clearTimeout(D.isUpdatingSelection),n(35,D.isUpdatingSelection=setTimeout(()=>{z&&et&&re(t,t).focus(),n(35,D.isUpdatingSelection=null,D)}),D);const z=i&&P&&qe(t,i);z?(B.isBackward(i)?p.setBaseAndExtent(z.endContainer,z.endOffset,z.startContainer,z.startOffset):p.setBaseAndExtent(z.startContainer,z.startOffset,z.endContainer,z.endOffset),F(t,z)):p.removeAllRanges()}Un(()=>r());function _n(f){if(!w&&j(t,f.target)){const p=f.inputType,k=f.dataTransfer||f.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let O=!1;if(p==="insertText"&&i&&B.isCollapsed(i)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&i.anchor.offset!==0){O=!0,t.marks&&(O=!1);const P=g.above(t,{at:i.anchor,match:z=>g.isInline(t,z),mode:"highest"});if(P){const[,z]=P;g.isEnd(t,i.anchor,z)&&(O=!1)}}if(O||f.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[P]=f.getTargetRanges();if(P){const z=Te(t,P,{exactMatch:!1,suppressThrow:!1});(!i||!B.equals(i,z))&&W.select(t,z)}}if(i&&B.isExpanded(i)&&p.startsWith("delete")){const P=p.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:P});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&D.isComposing&&n(35,D.isComposing=!1,D),(k==null?void 0:k.constructor.name)==="DataTransfer"?t.insertData(k):typeof k=="string"&&(O?Xe.push(()=>g.insertText(t,k)):g.insertText(t,k));break}}}}function wn(f){for(const p of Xe)p();Xe.length=0}function pn(f){if(!w&&!D.isComposing&&j(t,f.target)){const p=t.children[i!==null?i.focus.path[0]:0],k=Gt(ee.string(p))==="rtl";if(U.isRedo(f)){f.preventDefault();const O=t;typeof O.redo=="function"&&O.redo()}else if(U.isUndo(f)){f.preventDefault();const O=t;typeof O.undo=="function"&&O.undo()}else if(U.isMoveLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",reverse:!0});else if(U.isMoveLineForward(f))f.preventDefault(),W.move(t,{unit:"line"});else if(U.isExtendLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus",reverse:!0});else if(U.isExtendLineForward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus"});else if(U.isMoveBackward(f))f.preventDefault(),i&&B.isCollapsed(i)?W.move(t,{reverse:!k}):W.collapse(t,{edge:"start"});else if(U.isMoveForward(f))f.preventDefault(),i&&B.isCollapsed(i)?W.move(t,{reverse:k}):W.collapse(t,{edge:"end"});else if(U.isMoveWordBackward(f))f.preventDefault(),i&&B.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:!k});else if(U.isMoveWordForward(f))f.preventDefault(),i&&B.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:k});else if(!Bt)U.isBold(f)||U.isItalic(f)||U.isTransposeCharacter(f)?f.preventDefault():U.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):U.isDeleteBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):U.isDeleteForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):U.isDeleteLineBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):U.isDeleteLineForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):U.isDeleteWordBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):U.isDeleteWordForward(f)&&(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((Ot||tt)&&i&&(U.isDeleteBackward(f)||U.isDeleteForward(f))&&B.isCollapsed(i)){const O=ee.parent(t,i.anchor.path);if(He.isElement(O)&&g.isVoid(t,O)&&g.isInline(t,O)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return N(f)}}}function kn(f){if(!w&&!D.isUpdatingSelection&&j(t,f.target)){const p=re(t,t),k=Ne(t);if(n(35,D.latestElement=k.activeElement,D),et&&f.target!==p){p.focus();return}ke.set(t,!0),Ie.set(!0)}}function En(f){if(w||D.isUpdatingSelection||!j(t,f.target))return;const p=Ne(t);if(D.latestElement===p.activeElement)return;const k=f.relatedTarget,O=re(t,t);if(k!==O&&!(te(k)&&k.hasAttribute("data-slate-spacer"))){if(k!=null&&se(k)&&ot(t,k)){const P=fe(k);if(He.isElement(P)&&!t.isVoid(P))return}if(tt){const P=p.getSelection();P==null||P.removeAllRanges()}ke.delete(t),Ie.set(!1)}}function bn(f){if(!w&&Ce(t,f.target)&&se(f.target)){const p=fe(f.target),k=Ee(p);if(g.hasPath(t,k)&&ee.get(t,k)===p){const P=g.start(t,k),z=g.end(t,k),ae=g.void(t,{at:P}),Ae=g.void(t,{at:z});if(ae&&Ae&&me.equals(ae[1],Ae[1])){const In=g.range(t,P);W.select(t,In)}}}}function Cn(f){if(j(t,f.target)){n(35,D.isComposing=!1,D);const p=f.data;if(!tt&&!ro&&!no&&!ao&&p&&g.insertText(t,p),i&&B.isCollapsed(i)){const k=i.anchor.path,O=ee.leaf(t,k);D.hasInsertPrefixInCompositon&&(n(35,D.hasInsertPrefixInCompositon=!1,D),g.withoutNormalizing(t,()=>{const P=O.text.replace(/^\uFEFF/,"");W.delete(t,{distance:O.text.length,reverse:!0}),W.insertText(t,P)}))}}}function Dn(f){j(t,f.target)&&n(35,D.isComposing=!0,D)}function yn(f){if(j(t,f.target)){const{selection:p,marks:k}=t;if(p){if(B.isExpanded(p)){g.deleteFragment(t);return}const O=g.above(t,{match:P=>g.isInline(t,P),mode:"highest"});if(O){const[,P]=O;if(g.isEnd(t,p.anchor,P)){const z=g.after(t,P);W.setSelection(t,{anchor:z,focus:z})}}k&&(n(35,D.hasInsertPrefixInCompositon=!0,D),W.insertNodes(t,dt({text:"\uFEFF"},k),{select:!0}))}}}function Ln(f){!w&&j(t,f.target)&&(!Bt||Zn(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}function Sn(f){j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}function Fn(f){if(!w&&j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),i))if(B.isExpanded(i))g.deleteFragment(t);else{const p=ee.parent(t,i.anchor.path);g.isVoid(t,p)&&W.delete(t)}}function On(f){if(Ce(t,f.target)){const p=fe(f.target);g.isVoid(t,p)&&f.preventDefault()}}function Pn(f){if(!w&&Ce(t,f.target)){const p=fe(f.target),k=Ee(p);if(g.isVoid(t,p)||g.void(t,{at:k,voids:!0})){const P=g.range(t,k);W.select(t,P)}n(35,D.isDraggingInternally=!0,D),t.setFragmentData(f.dataTransfer)}}function Bn(f){if(!w&&Ce(t,f.target)){f.preventDefault();const p=i,k=so(t,f),O=f.dataTransfer;W.select(t,k),D.isDraggingInternally&&(p&&!B.equals(p,k)&&!g.void(t,{at:k,voids:!0})&&W.delete(t,{at:p}),n(35,D.isDraggingInternally=!1,D)),t.insertData(O),Nt(t)||lo(t)}}function Nn(f){!w&&D.isDraggingInternally&&Ce(t,f.target)&&n(35,D.isDraggingInternally=!1,D)}function Tn(f){le[f?"unshift":"push"](()=>{T=f,n(0,T)})}return o.$$set=f=>{e=Pe(Pe({},e),Ze(f)),n(29,l=Et(e,s)),"Element"in f&&n(1,h=f.Element),"Leaf"in f&&n(2,u=f.Leaf),"Placeholder"in f&&n(3,_=f.Placeholder),"placeholder"in f&&n(30,m=f.placeholder),"readOnly"in f&&n(4,w=f.readOnly),"autoFocus"in f&&n(31,y=f.autoFocus),"decorate"in f&&n(32,E=f.decorate),"scrollSelectionIntoView"in f&&n(33,F=f.scrollSelectionIntoView),"ref"in f&&n(0,T=f.ref),"spellcheck"in f&&n(5,q=f.spellcheck),"autocorrect"in f&&n(6,L=f.autocorrect),"autocapitalize"in f&&n(7,oe=f.autocapitalize),"onKeyDown"in f&&n(34,N=f.onKeyDown)},o.$$.update=()=>{if(o.$$.dirty[1]&128&&n(8,t=d),o.$$.dirty[1]&64&&n(9,i=c),o.$$.dirty[0]&256|o.$$.dirty[1]&2&&n(10,a=E([t,[]])),o.$$.dirty[0]&272&&bt.set(t,w),o.$$.dirty[0]&16&&dn.set(w),o.$$.dirty[1]&2&&hn.set(E),o.$$.dirty[0]&1073742080|o.$$.dirty[1]&18&&t.children.length===1&&Array.from(ee.texts(t)).length===1&&ee.string(t)===""&&!D.isComposing){const f=g.start(t,[]);n(10,a=[...E([t,[]]),{[Be]:!0,placeholder:m,anchor:f,focus:f}])}o.$$.dirty[0]&1|o.$$.dirty[1]&33&&Ge!==y&&T&&(y&&T.focus(),n(36,Ge=y))},r=qn(0,mn,!1),[T,h,u,_,w,q,L,oe,t,i,a,I,Ye,_n,wn,pn,kn,En,bn,Cn,Dn,yn,Ln,Sn,Fn,On,Pn,Bn,Nn,l,m,y,E,F,N,D,Ge,c,d,Tn]}class Li extends Q{constructor(e){super();Z(this,e,ki,wi,De,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function fn(o,e){const n=(e.top+e.bottom)/2;return o.top<=n&&o.bottom>=n}function un(o,e,n){const t=qe(o,e).getBoundingClientRect(),i=qe(o,n).getBoundingClientRect();return fn(t,i)&&fn(i,t)}function Ei(o,e){const n=g.range(o,B.end(e)),t=Array.from(g.positions(o,{at:e}));let i=0,a=t.length,r=Math.floor(a/2);if(un(o,g.range(o,t[i]),n))return g.range(o,t[i],n);if(t.length<2)return g.range(o,t[t.length-1],n);for(;r!==t.length&&r!==i;)un(o,g.range(o,t[r]),n)?a=r:i=r,r=Math.floor((i+a)/2);return g.range(o,t[a],n)}function Si(o){const e=o,{apply:n,onChange:t,deleteBackward:i}=e;return pe.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return i(a);if(o.selection&&B.isCollapsed(o.selection)){const r=g.above(o,{match:s=>g.isBlock(o,s),at:o.selection});if(r){const[,s]=r,l=g.range(o,s,o.selection.anchor),c=Ei(e,l);B.isCollapsed(c)||W.delete(o,{at:c})}}},e.apply=a=>{const r=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=ce(s);r.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:me.parent(a.path)})){const c=ce(s);r.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:me.common(me.parent(a.path),me.parent(a.newPath))})){const c=ce(s);r.push([l,c])}break}}n(a);for(const[s,l]of r){const[c]=g.node(e,s);xe.set(c,l)}},e.setFragmentData=a=>{const{selection:r}=e;if(!r)return;const[s,l]=B.edges(r),c=g.void(e,{at:s.path}),d=g.void(e,{at:l.path});if(B.isCollapsed(r)&&!c)return;const h=qe(e,r);let u=h.cloneContents(),_=u.childNodes[0];if(u.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(_=F)}),d){const[F]=d,T=h.cloneRange(),q=re(e,F);T.setEndAfter(q),u=T.cloneContents()}if(c&&(_=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const T=F.getAttribute("data-slate-zero-width")==="n";F.textContent=T?`
`:""}),yt(_)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(_),u.appendChild(F),_=F}const m=e.getFragment(),w=JSON.stringify(m),y=window.btoa(encodeURIComponent(w));_.setAttribute("data-slate-fragment",y),a.setData("application/x-slate-fragment",y);const E=document.createElement("div");return E.appendChild(u),E.setAttribute("hidden","true"),document.body.appendChild(E),a.setData("text/html",E.innerHTML),a.setData("text/plain",St(E)),document.body.removeChild(E),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const r=a.getData("application/x-slate-fragment")||to(a);if(r){const s=decodeURIComponent(window.atob(r)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const r=a.getData("text/plain");if(r){const s=r.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&W.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=Ct.get(e);a&&a(),t()},e}export{Li as E,Di as S,Vt as g,yi as i,Si as w};
