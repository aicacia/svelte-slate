var In=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var st=(n,e,t)=>e in n?In(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ut=(n,e)=>{for(var t in e||(e={}))ct.call(e,t)&&st(n,t,e[t]);if(Ae)for(var t of Ae(e))ft.call(e,t)&&st(n,t,e[t]);return n};var Je=(n,e)=>{var t={};for(var o in n)ct.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&Ae)for(var o of Ae(n))e.indexOf(o)<0&&ft.call(n,o)&&(t[o]=n[o]);return t};import{a1 as m,a2 as T,a3 as An,S as Q,i as Z,s as ye,F as Oe,J as Te,K as Pe,L as Ne,q as y,o as D,r as de,D as he,a4 as Mn,a5 as De,a6 as ae,t as He,h as ve,g as A,d as L,e as ee,c as te,a as ne,b as N,I as Mt,j as Rt,M as we,l as B,n as G,p as J,a7 as me,w as z,x as U,y as V,B as H,a8 as x,a9 as Rn,Q as Wt,O as re,P as Re,aa as zt,ab as Vt,v as nt,ac as Wn,ad as We,ae as ze,af as zn,ag as Vn,C as xe,ah as dt,ai as ht,aj as X,z as Hn,ak as vn,al as gt,u as Kn,E as mt,am as qn,an as Yn,ao as R,ap as Un}from"./vendor-404ccb43.js";const Ke=new WeakMap,qe=new WeakMap,$e=new WeakMap,Me=new WeakMap,pe=new WeakMap,ke=new WeakMap,et=new WeakMap,Ee=new WeakMap,Ht=new WeakMap,_e=new WeakMap,vt=new WeakMap,Fe=Symbol("placeholder");let Xn=0;class Gn{constructor(){this.id=`${Xn++}`}toString(){return this.id}}function ot(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView||null}function Jn(n){return ce(n)&&n.nodeType===8}function $(n){return ce(n)&&n.nodeType===1}function ce(n){const e=ot(n);return!!e&&n instanceof e.Node}function _t(n){const e=n&&n.anchorNode&&ot(n.anchorNode);return!!e&&n instanceof e.Selection}function Kt(n){return ce(n)&&n.nodeType===3}function Qn(n){return n.clipboardData&&n.clipboardData.getData("text/plain")!==""&&n.clipboardData.types.length===1}function Zn(n){let[e,t]=n;if($(e)&&e.childNodes.length){let o=t===e.childNodes.length,a=o?t-1:t;for([e,a]=qt(e,a,o?"backward":"forward"),o=a<t;$(e)&&e.childNodes.length;){const r=o?e.childNodes.length-1:0;e=xn(e,r,o?"backward":"forward")}t=o&&e.textContent!=null?e.textContent.length:0}return[e,t]}function jn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function qt(n,e,t){const{childNodes:o}=n;let a=o[e],r=e,i=!1,s=!1;for(;(Jn(a)||$(a)&&a.childNodes.length===0||$(a)&&a.getAttribute("contenteditable")==="false")&&!(i&&s);){if(r>=o.length){i=!0,r=e-1,t="backward";continue}if(r<0){s=!0,r=e+1,t="forward";continue}a=o[r],e=r,r+=t==="forward"?1:-1}return[a,e]}function xn(n,e,t){const[o]=qt(n,e,t);return o}function Yt(n){let e="";if(Kt(n)&&n.nodeValue)return n.nodeValue;if($(n)){for(const o of Array.from(n.childNodes))e+=Yt(o);const t=getComputedStyle(n).getPropertyValue("display");(t==="block"||t==="list"||n.tagName==="BR")&&(e+=`
`)}return e}const $n=/data-slate-fragment="(.+?)"/m;function eo(n){const e=n.getData("text/html"),[,t]=e.match($n)||[];return t}const to=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,wt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const tt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Qe=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),no=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Ut=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),oo=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),io=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ro=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),pt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",kt=!oo&&!no&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function it(n){const e=$e.get(n);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function se(n){let e=et.get(n);return e||(e=new Gn,et.set(n,e)),e}function be(n){const e=[];let t=n;for(;;){const o=qe.get(t);if(o==null){if(m.isEditor(t))return e;break}const a=Ke.get(t);if(a==null)break;e.unshift(a),t=o}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(n)}`)}function Se(n){const e=oe(n,n),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:e.ownerDocument}function Et(n){return!!_e.get(n)}function ao(n){const e=oe(n,n),t=Se(n);_e.set(n,!0),t.activeElement!==e&&e.focus({preventScroll:!0})}function rt(n,e,t={}){const{editable:o=!1}=t,a=oe(n,n);let r;try{r=$(e)?e:e.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return r?r.closest("[data-svelte-editor]")===a&&(!o||r.isContentEditable?!0:typeof r.isContentEditable=="boolean"&&r.closest('[contenteditable="false"]')===a||!!r.getAttribute("data-slate-zero-width")):!1}function oe(n,e,t=!0){const o=Ee.get(n),a=m.isEditor(e)?Me.get(n):o==null?void 0:o.get(se(e));if(!a&&t)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return a}function bt(n,e,t=!0){const[o]=m.node(n,e.path),a=oe(n,o,t);let r;m.void(n,{at:e})&&(e={path:e.path,offset:0});const i="[data-slate-string], [data-slate-zero-width]",s=a?Array.from(a.querySelectorAll(i)):[];let l=0;for(const f of s){const h=f.childNodes[0];if(h==null||h.textContent==null)continue;const{length:g}=h.textContent,d=f.getAttribute("data-slate-length"),_=d==null?g:parseInt(d,10),w=l+_;if(e.offset<=w){const k=Math.min(g,Math.max(0,e.offset-l));r=[h,k];break}l=w}if(!r&&t)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return r}function Ve(n,e,t=!0){const{anchor:o,focus:a}=e,r=T.isBackward(e),i=bt(n,o,t);if(!i)return;const s=T.isCollapsed(e)?i:bt(n,a),f=it(n).document.createRange(),[h,g]=r?s:i,[d,_]=r?i:s,k=!!($(h)?h:h.parentElement).getAttribute("data-slate-zero-width"),p=!!($(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return f.setStart(h,k?1:g),f.setEnd(d,p?1:_),f}function le(n){let e=$(n)?n:n.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const t=e?pe.get(e):null;if(!t)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return t}function lo(n,e){const{clientX:t,clientY:o,target:a}=e;if(t==null||o==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const r=le(e.target),i=be(r);if(m.isVoid(n,r)){const h=a.getBoundingClientRect(),g=n.isInline(r)?t-h.left<h.left+h.width-t:o-h.top<h.top+h.height-o,d=m.point(n,i,{edge:g?"start":"end"}),_=g?m.before(n,d):m.after(n,d);if(_)return m.range(n,_)}let s;const{document:l}=it(n);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(t,o);else{const h=l.caretPositionFromPoint(t,o);h&&(s=l.createRange(),s.setStart(h.offsetNode,h.offset),s.setEnd(h.offsetNode,h.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Le(n,s,{exactMatch:!1,suppressThrow:!1})}function Ct(n,e,t){var d;const{exactMatch:o,suppressThrow:a}=t,[r,i]=o?e:Zn(e),s=r.parentNode;let l=null,f=0;if(s){const _=s.closest('[data-slate-void="true"]');let w=s.closest("[data-slate-leaf]"),k=null;if(w){if(l=w.closest('[data-slate-node="text"]'),l){const p=it(n).document.createRange();p.setStart(l,0),p.setEnd(r,i);const F=p.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(c=>{c.parentNode.removeChild(c)}),f=F.textContent.length,k=l}}else _&&(w=_.querySelector("[data-slate-leaf]"),w?(l=w.closest('[data-slate-node="text"]'),k=w,f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(W=>{f-=W.textContent.length})):f=1);k&&f===k.textContent.length&&(s.hasAttribute("data-slate-zero-width")||tt&&((d=k.textContent)==null?void 0:d.endsWith(`

`)))&&f--}if(!l){if(a)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const h=le(l);return{path:be(h),offset:f}}function Le(n,e,t){const{exactMatch:o,suppressThrow:a}=t,r=_t(e)?e.anchorNode:e.startContainer;let i,s,l,f,h;if(r&&(_t(e)?(i=e.anchorNode,s=e.anchorOffset,l=e.focusNode,f=e.focusOffset,Ut&&jn()?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed):(i=e.startContainer,s=e.startOffset,l=e.endContainer,f=e.endOffset,h=e.collapsed)),i==null||l==null||s==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const g=Ct(n,[i,s],{exactMatch:o,suppressThrow:a});if(!g)return null;const d=h?g:Ct(n,[l,f],{exactMatch:o,suppressThrow:a});if(!d)return null;let _={anchor:g,focus:d};return T.isExpanded(_)&&T.isForward(_)&&$(l)&&m.void(n,{at:_.focus,mode:"highest"})&&(_=m.unhangRange(n,_,{voids:!0})),_}function so(n,e){const{anchor:t,focus:o}=e;return m.hasPath(n,t.path)&&m.hasPath(n,o.path)}function Xt(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let a=0;a<n.length;a++){const r=n[a],i=e[a],t=r,{anchor:s,focus:l}=t,f=Je(t,["anchor","focus"]),o=i,{anchor:h,focus:g}=o,d=Je(o,["anchor","focus"]);if(!T.equals(r,i)||r[Fe]!==i[Fe]||!An(f,d))return!1}return!0}function Gt(n,e){return n===e||!!n&&!!e&&T.equals(n,e)}function co(n){let e;const t=n[7].default,o=Oe(t,n,n[6],null);return{c(){o&&o.c()},l(a){o&&o.l(a)},m(a,r){o&&o.m(a,r),e=!0},p(a,[r]){o&&o.p&&(!e||r&64)&&Te(o,t,a,a[6],e?Ne(t,a[6],r,null):Pe(a[6]),null)},i(a){e||(y(o,a),e=!0)},o(a){D(o,a),e=!1},d(a){o&&o.d(a)}}}const Jt={},Qt={},Zt={},jt={},xt={};function $t(){const n=De(Jt);if(!n)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return n}function fe(){return Mn($t())}function en(){const n=De(Qt);if(!n)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return n}function fo(){const n=De(Zt);if(!n)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return n}function tn(){const n=De(jt);if(!n)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return n}function uo(){const n=De(xt);if(!n)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return n}function nn(n){return[]}function ho(n,e,t){let{$$slots:o={},$$scope:a}=e,{editor:r}=e,{value:i=r.children}=e,{selection:s=r.selection}=e;const l=he(r);de(Jt,l);const f=he(!0);de(Qt,f);const h=he(!1);de(Zt,h);const g=he(nn);de(jt,g);const d=he(r.selection);de(xt,d);function _(){t(1,s=r.selection),t(0,i=r.children)}vt.set(r,_);let w=r,k,W;return n.$$set=p=>{"editor"in p&&t(2,r=p.editor),"value"in p&&t(0,i=p.value),"selection"in p&&t(1,s=p.selection),"$$scope"in p&&t(6,a=p.$$scope)},n.$$.update=()=>{n.$$.dirty&12&&r!==w&&(t(3,w=r),l.set(r)),n.$$.dirty&17&&k!==i&&(l.update(p=>(p.children=i,p)),t(4,k=i)),n.$$.dirty&38&&(Gt(W,s)||(d.set(s),l.set(r),t(5,W=s)))},[i,s,r,w,k,W,a,o]}class Ci extends Q{constructor(e){super();Z(this,e,ho,co,ye,{editor:2,value:0,selection:1})}}const on="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",rn="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",go=new RegExp("^[^"+rn+"]*["+on+"]"),mo=new RegExp("^[^"+on+"]*["+rn+"]");function an(n){const e=String(n||"");return go.test(e)?"rtl":mo.test(e)?"ltr":"neutral"}function yt(n){let e=`
`,t;return{c(){t=He(e)},l(o){t=ve(o,e)},m(o,a){A(o,t,a)},d(o){o&&L(t)}}}function _o(n){let e,t,o=n[1]&&yt();return{c(){e=ee("span"),t=He(n[0]),o&&o.c(),this.h()},l(a){e=te(a,"SPAN",{"data-slate-string":!0});var r=ne(e);t=ve(r,n[0]),o&&o.l(r),r.forEach(L),this.h()},h(){N(e,"data-slate-string","true")},m(a,r){A(a,e,r),Mt(e,t),o&&o.m(e,null)},p(a,[r]){r&1&&Rt(t,a[0]),a[1]?o||(o=yt(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:we,o:we,d(a){a&&L(e),o&&o.d()}}}function wo(n,e,t){let{text:o}=e,{isTrailing:a=!1}=e;return n.$$set=r=>{"text"in r&&t(0,o=r.text),"isTrailing"in r&&t(1,a=r.isTrailing)},[o,a]}class po extends Q{constructor(e){super();Z(this,e,wo,_o,ae,{text:0,isTrailing:1})}}function Dt(n){let e;return{c(){e=ee("br")},l(t){e=te(t,"BR",{})},m(t,o){A(t,e,o)},d(t){t&&L(e)}}}function ko(n){let e,t="\uFEFF",o,a,r=n[1]&&Dt();return{c(){e=ee("span"),o=He(t),r&&r.c(),this.h()},l(i){e=te(i,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ne(e);o=ve(s,t),r&&r.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-zero-width",a=n[1]?"n":"z"),N(e,"data-slate-length",n[0])},m(i,s){A(i,e,s),Mt(e,o),r&&r.m(e,null)},p(i,[s]){i[1]?r||(r=Dt(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),s&2&&a!==(a=i[1]?"n":"z")&&N(e,"data-slate-zero-width",a),s&1&&N(e,"data-slate-length",i[0])},i:we,o:we,d(i){i&&L(e),r&&r.d()}}}function Eo(n,e,t){let{length:o=0}=e,{isLineBreak:a=!1}=e;return n.$$set=r=>{"length"in r&&t(0,o=r.length),"isLineBreak"in r&&t(1,a=r.isLineBreak)},[o,a]}class at extends Q{constructor(e){super();Z(this,e,Eo,ko,ae,{length:0,isLineBreak:1})}}function bo(n){let e,t;return e=new po({props:{isTrailing:n[5],text:n[0].text}}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&32&&(r.isTrailing=o[5]),a&1&&(r.text=o[0].text),e.$set(r)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Co(n){let e,t;return e=new at({}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p:we,i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function yo(n){let e,t;return e=new at({props:{isLineBreak:!0}}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p:we,i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Do(n){let e,t;return e=new at({props:{length:x.string(n[1]).length}}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&2&&(r.length=x.string(o[1]).length),e.$set(r)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function So(n){let e,t,o,a;const r=[Do,yo,Co,bo],i=[];function s(l,f){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,[f]){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),D(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){a||(y(t),a=!0)},o(l){D(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function Lo(n,e,t){let o,a,r,i,s,l,{isLast:f}=e,{leaf:h}=e,{parent:g}=e,{text:d}=e;const _=fe();return n.$$set=w=>{"isLast"in w&&t(6,f=w.isLast),"leaf"in w&&t(0,h=w.leaf),"parent"in w&&t(1,g=w.parent),"text"in w&&t(7,d=w.text)},n.$$.update=()=>{n.$$.dirty&65&&t(5,o=f&&h.text.slice(-1)===`
`),n.$$.dirty&128&&t(9,a=be(d)),n.$$.dirty&512&&t(8,r=me.parent(a)),n.$$.dirty&2&&t(4,i=_.isVoid(g)),n.$$.dirty&1&&t(2,s=h.text===""),n.$$.dirty&390&&t(3,l=s&&g.children[g.children.length-1]===d&&!_.isInline(g)&&m.string(_,r)==="")},[h,g,s,l,i,o,f,d,r,a]}class Fo extends Q{constructor(e){super();Z(this,e,Lo,So,ae,{isLast:6,leaf:0,parent:1,text:7})}}function St(n){let e,t,o,a;function r(l){n[8](l)}var i=n[5];function s(l){let f={$$slots:{default:[Oo]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.clientHeight=l[6]),{props:f}}return i&&(e=new i(s(n)),re.push(()=>Re(e,"clientHeight",r))),{c(){e&&z(e.$$.fragment),o=B()},l(l){e&&U(e.$$.fragment,l),o=B()},m(l,f){e&&V(e,l,f),A(l,o,f),a=!0},p(l,f){const h={};if(f&514&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.clientHeight=l[6],Wt(()=>t=!1)),i!==(i=l[5])){if(e){G();const g=e;D(g.$$.fragment,1,0,()=>{H(g,1)}),J()}i?(e=new i(s(l)),re.push(()=>Re(e,"clientHeight",r)),z(e.$$.fragment),y(e.$$.fragment,1),V(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(l){a||(e&&y(e.$$.fragment,l),a=!0)},o(l){e&&D(e.$$.fragment,l),a=!1},d(l){l&&L(o),e&&H(e,l)}}}function Oo(n){let e=n[1].placeholder+"",t;return{c(){t=He(e)},l(o){t=ve(o,e)},m(o,a){A(o,t,a)},p(o,a){a&2&&e!==(e=o[1].placeholder+"")&&Rt(t,e)},d(o){o&&L(t)}}}function To(n){let e,t,o,a=Fe in n[1]&&St(n);return t=new Fo({props:{isLast:n[0],leaf:n[1],parent:n[2],text:n[3]}}),{c(){a&&a.c(),e=B(),z(t.$$.fragment)},l(r){a&&a.l(r),e=B(),U(t.$$.fragment,r)},m(r,i){a&&a.m(r,i),A(r,e,i),V(t,r,i),o=!0},p(r,i){Fe in r[1]?a?(a.p(r,i),i&2&&y(a,1)):(a=St(r),a.c(),y(a,1),a.m(e.parentNode,e)):a&&(G(),D(a,1,1,()=>{a=null}),J());const s={};i&1&&(s.isLast=r[0]),i&2&&(s.leaf=r[1]),i&4&&(s.parent=r[2]),i&8&&(s.text=r[3]),t.$set(s)},i(r){o||(y(a),y(t.$$.fragment,r),o=!0)},o(r){D(a),D(t.$$.fragment,r),o=!1},d(r){a&&a.d(r),r&&L(e),H(t,r)}}}function Po(n){let e,t,o;var a=n[4];function r(i){return{props:{leaf:i[1],$$slots:{default:[To]},$$scope:{ctx:i}}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=B()},l(i){e&&U(e.$$.fragment,i),t=B()},m(i,s){e&&V(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&2&&(l.leaf=i[1]),s&623&&(l.$$scope={dirty:s,ctx:i}),a!==(a=i[4])){if(e){G();const f=e;D(f.$$.fragment,1,0,()=>{H(f,1)}),J()}a?(e=new a(r(i)),z(e.$$.fragment),y(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(i){o||(e&&y(e.$$.fragment,i),o=!0)},o(i){e&&D(e.$$.fragment,i),o=!1},d(i){i&&L(t),e&&H(e,i)}}}function No(n,e,t){let{isLast:o}=e,{leaf:a}=e,{parent:r}=e,{text:i}=e,{Leaf:s}=e,{Placeholder:l}=e,f,h;Rn(()=>{if(pt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="auto")}});function g(d){f=d,t(6,f)}return n.$$set=d=>{"isLast"in d&&t(0,o=d.isLast),"leaf"in d&&t(1,a=d.leaf),"parent"in d&&t(2,r=d.parent),"text"in d&&t(3,i=d.text),"Leaf"in d&&t(4,s=d.Leaf),"Placeholder"in d&&t(5,l=d.Placeholder)},n.$$.update=()=>{if(n.$$.dirty&192&&h!==f&&pt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${f}px`),t(7,h=f)}},[o,a,r,i,s,l,f,h,g]}class Lt extends Q{constructor(e){super();Z(this,e,No,Po,ae,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function Ft(n,e,t){const o=n.slice();return o[11]=e[t],o[13]=t,o}function Ot(n,e){let t,o,a,r;var i=Lt;function s(l){return{props:{Placeholder:l[4],Leaf:l[3],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return i&&(o=new i(s(e))),{key:n,first:null,c(){t=B(),o&&z(o.$$.fragment),a=B(),this.h()},l(l){t=B(),o&&U(o.$$.fragment,l),a=B(),this.h()},h(){this.first=t},m(l,f){A(l,t,f),o&&V(o,l,f),A(l,a,f),r=!0},p(l,f){e=l;const h={};if(f&16&&(h.Placeholder=e[4]),f&8&&(h.Leaf=e[3]),f&129&&(h.isLast=e[0]&&e[13]===e[7].length-1),f&2&&(h.parent=e[1]),f&128&&(h.leaf=e[11]),f&4&&(h.text=e[2]),i!==(i=Lt)){if(o){G();const g=o;D(g.$$.fragment,1,0,()=>{H(g,1)}),J()}i?(o=new i(s(e)),z(o.$$.fragment),y(o.$$.fragment,1),V(o,a.parentNode,a)):o=null}else i&&o.$set(h)},i(l){r||(o&&y(o.$$.fragment,l),r=!0)},o(l){o&&D(o.$$.fragment,l),r=!1},d(l){l&&L(t),l&&L(a),o&&H(o,l)}}}function Bo(n){let e,t=[],o=new Map,a,r=n[7];const i=s=>`${s[6]}-${s[13]}`;for(let s=0;s<r.length;s+=1){let l=Ft(n,r,s),f=i(l);o.set(f,t[s]=Ot(f,l))}return{c(){e=ee("span");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=te(s,"SPAN",{"data-slate-node":!0});var l=ne(e);for(let f=0;f<t.length;f+=1)t[f].l(l);l.forEach(L),this.h()},h(){N(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let f=0;f<t.length;f+=1)t[f].m(e,null);n[9](e),a=!0},p(s,[l]){l&223&&(r=s[7],G(),t=zt(t,l,i,1,s,r,o,e,Vt,Ot,null,Ft),J())},i(s){if(!a){for(let l=0;l<r.length;l+=1)y(t[l]);a=!0}},o(s){for(let l=0;l<t.length;l+=1)D(t[l]);a=!1},d(s){s&&L(e);for(let l=0;l<t.length;l+=1)t[l].d();n[9](null)}}}function Io(n,e,t){let o,a,{decorations:r}=e,{isLast:i}=e,{parent:s}=e,{text:l}=e,{Leaf:f}=e,{Placeholder:h}=e;const g=fe();let d;nt(()=>{var w;(w=Ee.get(g))==null||w.set(a,d),ke.set(l,d),pe.set(d,l)});function _(w){re[w?"unshift":"push"](()=>{d=w,t(5,d)})}return n.$$set=w=>{"decorations"in w&&t(8,r=w.decorations),"isLast"in w&&t(0,i=w.isLast),"parent"in w&&t(1,s=w.parent),"text"in w&&t(2,l=w.text),"Leaf"in w&&t(3,f=w.Leaf),"Placeholder"in w&&t(4,h=w.Placeholder)},n.$$.update=()=>{var w;n.$$.dirty&260&&t(7,o=Wn.decorations(l,r)),n.$$.dirty&4&&t(6,a=se(l)),n.$$.dirty&100&&d&&((w=Ee.get(g))==null||w.set(a,d),ke.set(l,d),pe.set(d,l))},[i,s,l,f,h,d,a,o,r,_]}class Ce extends Q{constructor(e){super();Z(this,e,Io,Bo,ae,{decorations:8,isLast:0,parent:1,text:2,Leaf:3,Placeholder:4})}}function Ao(n){let e,t;return e=new cn({props:{node:n[0],decorations:n[1],selection:n[2],Element:n[3],Placeholder:n[5],Leaf:n[4]}}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&1&&(r.node=o[0]),a&2&&(r.decorations=o[1]),a&4&&(r.selection=o[2]),a&8&&(r.Element=o[3]),a&32&&(r.Placeholder=o[5]),a&16&&(r.Leaf=o[4]),e.$set(r)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Mo(n){let e,t,o,a;const r=[Wo,Ro],i=[];function s(l,f){return l[7]?0:1}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,f){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),D(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){a||(y(t),a=!0)},o(l){D(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function Ro(n){let e,t,o;var a=Ce;function r(i){return{props:{Placeholder:i[5],Leaf:i[4],decorations:[],isLast:!1,parent:i[0],text:i[11]}}}return a&&(t=new a(r(n))),{c(){e=ee("div"),t&&z(t.$$.fragment),this.h()},l(i){e=te(i,"DIV",{"data-slate-spacer":!0,class:!0});var s=ne(e);t&&U(t.$$.fragment,s),s.forEach(L),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(i,s){A(i,e,s),t&&V(t,e,null),o=!0},p(i,s){const l={};if(s&32&&(l.Placeholder=i[5]),s&16&&(l.Leaf=i[4]),s&1&&(l.parent=i[0]),s&2048&&(l.text=i[11]),a!==(a=Ce)){if(t){G();const f=t;D(f.$$.fragment,1,0,()=>{H(f,1)}),J()}a?(t=new a(r(i)),z(t.$$.fragment),y(t.$$.fragment,1),V(t,e,null)):t=null}else a&&t.$set(l)},i(i){o||(t&&y(t.$$.fragment,i),o=!0)},o(i){t&&D(t.$$.fragment,i),o=!1},d(i){i&&L(e),t&&H(t)}}}function Wo(n){let e,t,o;var a=Ce;function r(i){return{props:{Placeholder:i[5],Leaf:i[4],decorations:[],isLast:!1,parent:i[0],text:i[11]}}}return a&&(t=new a(r(n))),{c(){e=ee("span"),t&&z(t.$$.fragment),this.h()},l(i){e=te(i,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ne(e);t&&U(t.$$.fragment,s),s.forEach(L),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(i,s){A(i,e,s),t&&V(t,e,null),o=!0},p(i,s){const l={};if(s&32&&(l.Placeholder=i[5]),s&16&&(l.Leaf=i[4]),s&1&&(l.parent=i[0]),s&2048&&(l.text=i[11]),a!==(a=Ce)){if(t){G();const f=t;D(f.$$.fragment,1,0,()=>{H(f,1)}),J()}a?(t=new a(r(i)),z(t.$$.fragment),y(t.$$.fragment,1),V(t,e,null)):t=null}else a&&t.$set(l)},i(i){o||(t&&y(t.$$.fragment,i),o=!0)},o(i){t&&D(t.$$.fragment,i),o=!1},d(i){i&&L(e),t&&H(t)}}}function zo(n){let e,t,o,a;const r=[Mo,Ao],i=[];function s(l,f){return l[9]&&!l[8]?0:1}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,f){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),D(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){a||(y(t),a=!0)},o(l){D(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function Vo(n){let e,t,o,a;function r(l){n[18](l)}var i=n[3];function s(l){let f={isVoid:l[9],isInline:l[7],contenteditable:l[12],element:l[0],dir:l[10],$$slots:{default:[zo]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.ref=l[6]),{props:f}}return i&&(e=new i(s(n)),re.push(()=>Re(e,"ref",r))),{c(){e&&z(e.$$.fragment),o=B()},l(l){e&&U(e.$$.fragment,l),o=B()},m(l,f){e&&V(e,l,f),A(l,o,f),a=!0},p(l,[f]){const h={};if(f&512&&(h.isVoid=l[9]),f&128&&(h.isInline=l[7]),f&4096&&(h.contenteditable=l[12]),f&1&&(h.element=l[0]),f&1024&&(h.dir=l[10]),f&1051583&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.ref=l[6],Wt(()=>t=!1)),i!==(i=l[3])){if(e){G();const g=e;D(g.$$.fragment,1,0,()=>{H(g,1)}),J()}i?(e=new i(s(l)),re.push(()=>Re(e,"ref",r)),z(e.$$.fragment),y(e.$$.fragment,1),V(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(l){a||(e&&y(e.$$.fragment,l),a=!0)},o(l){e&&D(e.$$.fragment,l),a=!1},d(l){l&&L(o),e&&H(e,l)}}}function Ho(n,e,t){let o,a,r,i,s,l,{element:f}=e,{decorations:h}=e,{selection:g=null}=e,{Element:d}=e,{Leaf:_}=e,{Placeholder:w}=e;const k=fe(),W=en();We(n,W,O=>t(17,l=O));let p,F,v,c,S;nt(()=>{var O;(O=Ee.get(k))==null||O.set(p,S),ke.set(f,S),pe.set(S,f)});function ie(O){S=O,t(6,S)}return n.$$set=O=>{"element"in O&&t(0,f=O.element),"decorations"in O&&t(1,h=O.decorations),"selection"in O&&t(2,g=O.selection),"Element"in O&&t(3,d=O.Element),"Leaf"in O&&t(4,_=O.Leaf),"Placeholder"in O&&t(5,w=O.Placeholder)},n.$$.update=()=>{var O;if(n.$$.dirty&131072&&t(8,o=l),n.$$.dirty&1&&t(7,a=k.isInline(f)),n.$$.dirty&1&&t(16,r=se(f)),n.$$.dirty&98304&&F!==r&&(t(14,p=r),t(15,F=r)),n.$$.dirty&129&&!a&&m.hasInlines(k,f)){const I=an(x.string(f));I==="rtl"&&t(10,v=I)}if(n.$$.dirty&1&&t(9,i=m.isVoid(k,f)),n.$$.dirty&256&&t(12,s=!o),n.$$.dirty&897&&i){!o&&a&&t(12,s=!1);const[[I]]=x.texts(f);t(11,c=I),Ke.set(I,0),qe.set(I,f)}n.$$.dirty&16449&&S&&((O=Ee.get(k))==null||O.set(p,S),ke.set(f,S),pe.set(S,f))},[f,h,g,d,_,w,S,a,o,i,v,c,s,W,p,F,r,l,ie]}class Tt extends Q{constructor(e){super();Z(this,e,Ho,Vo,ye,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function vo(n){let e,t,o;var a=Tt;function r(i){return{props:{Element:i[1],Placeholder:i[3],Leaf:i[2],decorations:i[5],element:i[0],selection:i[4]}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=B()},l(i){e&&U(e.$$.fragment,i),t=B()},m(i,s){e&&V(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&2&&(l.Element=i[1]),s&8&&(l.Placeholder=i[3]),s&4&&(l.Leaf=i[2]),s&32&&(l.decorations=i[5]),s&1&&(l.element=i[0]),s&16&&(l.selection=i[4]),a!==(a=Tt)){if(e){G();const f=e;D(f.$$.fragment,1,0,()=>{H(f,1)}),J()}a?(e=new a(r(i)),z(e.$$.fragment),y(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(i){o||(e&&y(e.$$.fragment,i),o=!0)},o(i){e&&D(e.$$.fragment,i),o=!1},d(i){i&&L(t),e&&H(e,i)}}}const ln={};function yi(){const n=De(ln);if(!n)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return n}function Ko(n,e,t){let o,a,r,i,{parent:s}=e,{element:l}=e,{path:f}=e,{index:h}=e,{decorate:g}=e,{decorations:d}=e,{selection:_=null}=e,{Element:w}=e,{Leaf:k}=e,{Placeholder:W}=e;const p=he(!1);de(ln,p);const F=fe();let v=h,c=s,S=l,ie=d,O=_;return n.$$set=I=>{"parent"in I&&t(6,s=I.parent),"element"in I&&t(0,l=I.element),"path"in I&&t(7,f=I.path),"index"in I&&t(8,h=I.index),"decorate"in I&&t(9,g=I.decorate),"decorations"in I&&t(10,d=I.decorations),"selection"in I&&t(11,_=I.selection),"Element"in I&&t(1,w=I.Element),"Leaf"in I&&t(2,k=I.Leaf),"Placeholder"in I&&t(3,W=I.Placeholder)},n.$$.update=()=>{n.$$.dirty&4352&&v!==h&&t(12,v=h),n.$$.dirty&8256&&c!==s&&t(13,c=s),n.$$.dirty&16385&&S!==l&&t(14,S=l),n.$$.dirty&33792&&(Xt(ie,d)||t(15,ie=d)),n.$$.dirty&67584&&(Gt(O,_)||t(16,O=_)),n.$$.dirty&20480&&Ke.set(S,v),n.$$.dirty&24576&&qe.set(S,c),n.$$.dirty&4224&&t(18,o=f.concat(v)),n.$$.dirty&262144&&t(17,a=m.range(F,o)),n.$$.dirty&442880&&t(5,r=sn(g([S,o]),a,ie)),n.$$.dirty&196608&&t(4,i=O&&T.intersection(a,O)),n.$$.dirty&16&&p.set(!!i)},[l,w,k,W,i,r,s,f,h,g,d,_,v,c,S,ie,O,a,o]}class qo extends Q{constructor(e){super();Z(this,e,Ko,vo,ye,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Yo(n){let e,t,o;var a=Ce;function r(i){return{props:{Placeholder:i[3],Leaf:i[2],decorations:i[4],isLast:i[5],parent:i[0],text:i[1]}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=B()},l(i){e&&U(e.$$.fragment,i),t=B()},m(i,s){e&&V(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&8&&(l.Placeholder=i[3]),s&4&&(l.Leaf=i[2]),s&16&&(l.decorations=i[4]),s&32&&(l.isLast=i[5]),s&1&&(l.parent=i[0]),s&2&&(l.text=i[1]),a!==(a=Ce)){if(e){G();const f=e;D(f.$$.fragment,1,0,()=>{H(f,1)}),J()}a?(e=new a(r(i)),z(e.$$.fragment),y(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(i){o||(e&&y(e.$$.fragment,i),o=!0)},o(i){e&&D(e.$$.fragment,i),o=!1},d(i){i&&L(t),e&&H(e,i)}}}function Uo(n,e,t){let o,a,r,i,{parent:s}=e,{text:l}=e,{path:f}=e,{index:h}=e,{isLeafBlock:g}=e,{decorations:d}=e,{decorate:_}=e,{Leaf:w}=e,{Placeholder:k}=e;const W=fe();let p=h,F=l,v=s,c=d;return n.$$set=S=>{"parent"in S&&t(0,s=S.parent),"text"in S&&t(1,l=S.text),"path"in S&&t(6,f=S.path),"index"in S&&t(7,h=S.index),"isLeafBlock"in S&&t(8,g=S.isLeafBlock),"decorations"in S&&t(9,d=S.decorations),"decorate"in S&&t(10,_=S.decorate),"Leaf"in S&&t(2,w=S.Leaf),"Placeholder"in S&&t(3,k=S.Placeholder)},n.$$.update=()=>{n.$$.dirty&2176&&p!==h&&t(11,p=h),n.$$.dirty&4098&&F!==l&&t(12,F=l),n.$$.dirty&8193&&v!==s&&t(13,v=s),n.$$.dirty&16896&&(Xt(c,d)||t(14,c=d)),n.$$.dirty&6144&&Ke.set(F,p),n.$$.dirty&12288&&qe.set(F,v),n.$$.dirty&2112&&t(16,o=f.concat(p)),n.$$.dirty&10496&&t(5,a=g&&p===v.children.length-1),n.$$.dirty&65536&&t(15,r=m.range(W,o)),n.$$.dirty&119808&&t(4,i=sn(_([F,o]),r,c))},[s,l,w,k,i,a,f,h,g,d,_,p,F,v,c,r,o]}class Xo extends Q{constructor(e){super();Z(this,e,Uo,Yo,ye,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function Pt(n,e,t){const o=n.slice();return o[14]=e[t],o[16]=t,o}function Go(n){let e,t;return e=new Xo({props:{Placeholder:n[4],Leaf:n[3],decorations:n[0],parent:n[5],text:n[14],decorate:n[9],index:n[16],path:n[8],isLeafBlock:n[7]}}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&16&&(r.Placeholder=o[4]),a&8&&(r.Leaf=o[3]),a&1&&(r.decorations=o[0]),a&32&&(r.parent=o[5]),a&64&&(r.text=o[14]),a&512&&(r.decorate=o[9]),a&64&&(r.index=o[16]),a&256&&(r.path=o[8]),a&128&&(r.isLeafBlock=o[7]),e.$set(r)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Jo(n){let e,t;return e=new qo({props:{Element:n[2],Placeholder:n[4],Leaf:n[3],decorations:n[0],selection:n[1],element:n[14],parent:n[5],decorate:n[9],index:n[16],path:n[8]}}),{c(){z(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&4&&(r.Element=o[2]),a&16&&(r.Placeholder=o[4]),a&8&&(r.Leaf=o[3]),a&1&&(r.decorations=o[0]),a&2&&(r.selection=o[1]),a&64&&(r.element=o[14]),a&32&&(r.parent=o[5]),a&512&&(r.decorate=o[9]),a&64&&(r.index=o[16]),a&256&&(r.path=o[8]),e.$set(r)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Nt(n,e){let t,o,a,r,i,s;const l=[Jo,Go],f=[];function h(g,d){return d&64&&(o=null),o==null&&(o=!!ze.isElement(g[14])),o?0:1}return a=h(e,-1),r=f[a]=l[a](e),{key:n,first:null,c(){t=B(),r.c(),i=B(),this.h()},l(g){t=B(),r.l(g),i=B(),this.h()},h(){this.first=t},m(g,d){A(g,t,d),f[a].m(g,d),A(g,i,d),s=!0},p(g,d){e=g;let _=a;a=h(e,d),a===_?f[a].p(e,d):(G(),D(f[_],1,1,()=>{f[_]=null}),J(),r=f[a],r?r.p(e,d):(r=f[a]=l[a](e),r.c()),y(r,1),r.m(i.parentNode,i))},i(g){s||(y(r),s=!0)},o(g){D(r),s=!1},d(g){g&&L(t),f[a].d(g),g&&L(i)}}}function Qo(n){let e=[],t=new Map,o,a,r=n[6];const i=s=>se(s[14]);for(let s=0;s<r.length;s+=1){let l=Pt(n,r,s),f=i(l);t.set(f,e[s]=Nt(f,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();o=B()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);o=B()},m(s,l){for(let f=0;f<e.length;f+=1)e[f].m(s,l);A(s,o,l),a=!0},p(s,[l]){l&1023&&(r=s[6],G(),e=zt(e,l,i,1,s,r,t,o.parentNode,Vt,Nt,o,Pt),J())},i(s){if(!a){for(let l=0;l<r.length;l+=1)y(e[l]);a=!0}},o(s){for(let l=0;l<e.length;l+=1)D(e[l]);a=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&L(o)}}}function sn(n,e,t=[]){for(const o of t){const a=T.intersection(o,e);a&&n.push(a)}return n}function Zo(n,e,t){let o,a,r,i,{node:s}=e,{decorations:l}=e,{selection:f=null}=e,{Element:h}=e,{Leaf:g}=e,{Placeholder:d}=e;const _=fe(),w=tn();We(n,w,p=>t(12,i=p));let k=s,W=k.children;return n.$$set=p=>{"node"in p&&t(11,s=p.node),"decorations"in p&&t(0,l=p.decorations),"selection"in p&&t(1,f=p.selection),"Element"in p&&t(2,h=p.Element),"Leaf"in p&&t(3,g=p.Leaf),"Placeholder"in p&&t(4,d=p.Placeholder)},n.$$.update=()=>{n.$$.dirty&4096&&t(9,o=i),n.$$.dirty&2080&&(k!==s||s===_)&&t(5,k=s),n.$$.dirty&96&&W!==k.children&&t(6,W=k.children),n.$$.dirty&32&&t(8,a=be(k)),n.$$.dirty&32&&t(7,r=ze.isElement(k)&&!_.isInline(k)&&m.hasInlines(_,k))},[l,f,h,g,d,k,W,r,a,o,w,s,i]}class cn extends Q{constructor(e){super();Z(this,e,Zo,Qo,ye,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function jo(n){let e,t;const o=n[7].default,a=Oe(o,n,n[6],null);return{c(){e=ee("div"),a&&a.c(),this.h()},l(r){e=te(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=ne(e);a&&a.l(i),i.forEach(L),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-void",n[2]),N(e,"dir",n[4]),N(e,"contenteditable",n[3]),N(e,"class","svelte-19k8gul")},m(r,i){A(r,e,i),a&&a.m(e,null),n[9](e),t=!0},p(r,i){a&&a.p&&(!t||i&64)&&Te(a,o,r,r[6],t?Ne(o,r[6],i,null):Pe(r[6]),null),(!t||i&4)&&N(e,"data-slate-void",r[2]),(!t||i&16)&&N(e,"dir",r[4]),(!t||i&8)&&N(e,"contenteditable",r[3])},i(r){t||(y(a,r),t=!0)},o(r){D(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n[9](null)}}}function xo(n){let e,t;const o=n[7].default,a=Oe(o,n,n[6],null);return{c(){e=ee("span"),a&&a.c(),this.h()},l(r){e=te(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=ne(e);a&&a.l(i),i.forEach(L),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-inline",n[1]),N(e,"data-slate-void",n[2]),N(e,"dir",n[4]),N(e,"contenteditable",n[3]),N(e,"class","svelte-19k8gul")},m(r,i){A(r,e,i),a&&a.m(e,null),n[8](e),t=!0},p(r,i){a&&a.p&&(!t||i&64)&&Te(a,o,r,r[6],t?Ne(o,r[6],i,null):Pe(r[6]),null),(!t||i&2)&&N(e,"data-slate-inline",r[1]),(!t||i&4)&&N(e,"data-slate-void",r[2]),(!t||i&16)&&N(e,"dir",r[4]),(!t||i&8)&&N(e,"contenteditable",r[3])},i(r){t||(y(a,r),t=!0)},o(r){D(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n[8](null)}}}function $o(n){let e,t,o,a;const r=[xo,jo],i=[];function s(l,f){return l[1]?0:1}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,[f]){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),D(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){a||(y(t),a=!0)},o(l){D(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function ei(n,e,t){let{$$slots:o={},$$scope:a}=e,{element:r}=e,{ref:i}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:f}=e,{dir:h=void 0}=e;function g(_){re[_?"unshift":"push"](()=>{i=_,t(0,i)})}function d(_){re[_?"unshift":"push"](()=>{i=_,t(0,i)})}return n.$$set=_=>{"element"in _&&t(5,r=_.element),"ref"in _&&t(0,i=_.ref),"isInline"in _&&t(1,s=_.isInline),"isVoid"in _&&t(2,l=_.isVoid),"contenteditable"in _&&t(3,f=_.contenteditable),"dir"in _&&t(4,h=_.dir),"$$scope"in _&&t(6,a=_.$$scope)},[i,s,l,f,h,r,a,o,g,d]}class ti extends Q{constructor(e){super();Z(this,e,ei,$o,ae,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function ni(n){let e,t;const o=n[2].default,a=Oe(o,n,n[1],null);return{c(){e=ee("span"),a&&a.c(),this.h()},l(r){e=te(r,"SPAN",{"data-slate-leaf":!0});var i=ne(e);a&&a.l(i),i.forEach(L),this.h()},h(){N(e,"data-slate-leaf","true")},m(r,i){A(r,e,i),a&&a.m(e,null),t=!0},p(r,[i]){a&&a.p&&(!t||i&2)&&Te(a,o,r,r[1],t?Ne(o,r[1],i,null):Pe(r[1]),null)},i(r){t||(y(a,r),t=!0)},o(r){D(a,r),t=!1},d(r){r&&L(e),a&&a.d(r)}}}function oi(n,e,t){let{$$slots:o={},$$scope:a}=e,{leaf:r}=e;return n.$$set=i=>{"leaf"in i&&t(0,r=i.leaf),"$$scope"in i&&t(1,a=i.$$scope)},[r,a,o]}class ii extends Q{constructor(e){super();Z(this,e,oi,ni,ae,{leaf:0})}}function ri(n){let e,t,o;const a=n[2].default,r=Oe(a,n,n[1],null);return{c(){e=ee("span"),r&&r.c(),this.h()},l(i){e=te(i,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=ne(e);r&&r.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-placeholder","true"),N(e,"contenteditable","false"),N(e,"class","svelte-lqbb94"),zn(()=>n[3].call(e))},m(i,s){A(i,e,s),r&&r.m(e,null),t=Vn(e,n[3].bind(e)),o=!0},p(i,[s]){r&&r.p&&(!o||s&2)&&Te(r,a,i,i[1],o?Ne(a,i[1],s,null):Pe(i[1]),null)},i(i){o||(y(r,i),o=!0)},o(i){D(r,i),o=!1},d(i){i&&L(e),r&&r.d(i),t()}}}function ai(n,e,t){let{$$slots:o={},$$scope:a}=e,{clientHeight:r=void 0}=e;function i(){r=this.clientHeight,t(0,r)}return n.$$set=s=>{"clientHeight"in s&&t(0,r=s.clientHeight),"$$scope"in s&&t(1,a=s.$$scope)},[r,a,o,i]}class li extends Q{constructor(e){super();Z(this,e,ai,ri,ae,{clientHeight:0})}}const si=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Ze={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},fn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:si?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},lt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let n=1;n<20;n++)lt["f"+n]=111+n;function un(n,e={}){Array.isArray(n)||(n=[n]);const t=n.map(o=>ci(o,e));return function(a){return t.some(r=>fi(r,a))}}function Di(n,e,t={}){return un(n,t)(e)}function je(n){return un(n,{byKey:!0})}function ci(n,e={}){const t=e&&e.byKey,o={};n=n.replace("++","+add");const a=n.split("+"),{length:r}=a;for(const i in Ze)o[Ze[i]]=!1;for(let i of a){const s=i.endsWith("?")&&i.length>1;s&&(i=i.slice(0,-1));const l=dn(i),f=Ze[l];if(i.length>1&&!f&&!fn[i]&&!lt[l])throw new TypeError(`Unknown modifier: "${i}"`);(r===1||!f)&&(t?o.key=l:o.which=ui(i)),f&&(o[f]=s?null:!0)}return o}function fi(n,e){for(const t in n){const o=n[t];let a;if(o!=null&&(t==="key"&&e.key!=null?a=e.key.toLowerCase():t==="which"?a=o===91&&e.which===93?91:e.which:a=e[t],!(a==null&&o===!1)&&a!==o))return!1}return!0}function ui(n){return n=dn(n),lt[n]||n.toUpperCase().charCodeAt(0)}function dn(n){return n=n.toLowerCase(),n=fn[n]||n,n}const di={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},hi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},gi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function q(n){const e=di[n],t=hi[n],o=gi[n],a=e&&je(e),r=t&&je(t),i=o&&je(o);return s=>!!(a&&a(s)||wt&&r&&r(s)||!wt&&i&&i(s))}var Y={isBold:q("bold"),isCompose:q("compose"),isMoveBackward:q("moveBackward"),isMoveForward:q("moveForward"),isDeleteBackward:q("deleteBackward"),isDeleteForward:q("deleteForward"),isDeleteLineBackward:q("deleteLineBackward"),isDeleteLineForward:q("deleteLineForward"),isDeleteWordBackward:q("deleteWordBackward"),isDeleteWordForward:q("deleteWordForward"),isExtendBackward:q("extendBackward"),isExtendForward:q("extendForward"),isExtendLineBackward:q("extendLineBackward"),isExtendLineForward:q("extendLineForward"),isItalic:q("italic"),isMoveLineBackward:q("moveLineBackward"),isMoveLineForward:q("moveLineForward"),isMoveWordBackward:q("moveWordBackward"),isMoveWordForward:q("moveWordForward"),isRedo:q("redo"),isSplitBlock:q("splitBlock"),isTransposeCharacter:q("transposeCharacter"),isUndo:q("undo")};function mi(n){let e,t,o,a,r,i,s,l;t=new cn({props:{node:n[9],selection:n[10],decorations:n[8],Element:n[1],Leaf:n[2],Placeholder:n[3]}});let f=[n[29],{role:o=n[7].readOnly?void 0:"textbox"},{spellcheck:n[4]},{autocorrect:n[5]},{autocapitalize:n[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:a=!n[7].readOnly},{"z-index":r=-1}],h={};for(let g=0;g<f.length;g+=1)h=xe(h,f[g]);return{c(){e=ee("div"),z(t.$$.fragment),this.h()},l(g){e=te(g,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var d=ne(e);U(t.$$.fragment,d),d.forEach(L),this.h()},h(){dt(e,h),ht(e,"svelte-m59z04",!0)},m(g,d){A(g,e,d),V(t,e,null),n[38](e),i=!0,s||(l=[X(e,"beforeinput",n[13]),X(e,"keydown",n[15]),X(e,"input",n[14]),X(e,"focus",n[16]),X(e,"blur",n[17]),X(e,"click",n[18]),X(e,"compositionend",n[19]),X(e,"compositionupdate",n[20]),X(e,"compositionstart",n[21]),X(e,"paste",n[22]),X(e,"copy",n[23]),X(e,"cut",n[24]),X(e,"dragover",n[25]),X(e,"dragstart",n[26]),X(e,"drop",n[27]),X(e,"dragend",n[28])],s=!0)},p(g,d){const _={};d[0]&512&&(_.node=g[9]),d[0]&1024&&(_.selection=g[10]),d[0]&256&&(_.decorations=g[8]),d[0]&2&&(_.Element=g[1]),d[0]&4&&(_.Leaf=g[2]),d[0]&8&&(_.Placeholder=g[3]),t.$set(_),dt(e,h=Hn(f,[d[0]&536870912&&g[29],(!i||d[0]&128&&o!==(o=g[7].readOnly?void 0:"textbox"))&&{role:o},(!i||d[0]&16)&&{spellcheck:g[4]},(!i||d[0]&32)&&{autocorrect:g[5]},(!i||d[0]&64)&&{autocapitalize:g[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!i||d[0]&128&&a!==(a=!g[7].readOnly))&&{contenteditable:a},{"z-index":r}])),ht(e,"svelte-m59z04",!0)},i(g){i||(y(t.$$.fragment,g),i=!0)},o(g){D(t.$$.fragment,g),i=!1},d(g){g&&L(e),H(t),n[38](null),s=!1,vn(l)}}}function ge(n,e){return ce(e)&&rt(n,e)}function j(n,e){return ce(e)&&rt(n,e,{editable:!0})}function Bt(n,e){if(Ht.get(n))return!1;{const t=ge(n,e)&&le(e);return m.isVoid(n,t)}}function _i(n,e){const t=e.startContainer.parentElement,o=t.getBoundingClientRect;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),Un(t,{scrollMode:"if-needed"}),t.getBoundingClientRect=o}function wi(n,e,t){const o=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let a=gt(e,o),r,i,{Element:s=ti}=e,{Leaf:l=ii}=e,{Placeholder:f=li}=e,{placeholder:h=void 0}=e,{readOnly:g=!1}=e,{autoFocus:d=!1}=e,{decorate:_=nn}=e,{scrollSelectionIntoView:w=_i}=e,{ref:k=void 0}=e,{spellcheck:W=!0}=e,{autocorrect:p="true"}=e,{autocapitalize:F="true"}=e,{onKeyDown:v=()=>{}}=e;const c=fe(),S=$t();We(n,S,u=>t(9,r=u));const ie=en(),O=fo(),I=tn(),Ye=uo();We(n,Ye,u=>t(10,i=u));const Ue=[],C={isComposing:!1,hasInsertPrefixInCompositon:!0,updateSelectionTimeoutId:null,isDraggingInternally:!1,latestElement:null,readOnly:g};let Be=[],Xe;function hn(){if(C.isComposing||C.isDraggingInternally||C.updateSelectionTimeoutId)Ge();else{const u=Se(c),E=oe(c,c),b=u.getSelection();if(u.activeElement===E?(t(7,C.latestElement=u.activeElement,C),_e.set(c,!0),O.set(!0)):(_e.delete(c),O.set(!1)),!b){R.deselect(c);return}const P=j(c,b.anchorNode)||Bt(c,b.anchorNode),M=j(c,b.focusNode)||Bt(c,b.focusNode);if(P&&M){const K=Le(c,b,{exactMatch:!1,suppressThrow:!0});if(K){R.select(c,K);return}}R.deselect(c)}}const Ge=Yn(0,()=>mt().then(hn));nt(()=>{const u=ot(k);return u&&($e.set(c,u),u.document.addEventListener("selectionchange",Ge)),Me.set(c,k),ke.set(c,k),pe.set(k,c),()=>{Me.delete(c),ke.delete(c),u&&($e.delete(c),u.document.removeEventListener("selectionchange",Ge))}});function gn(){const u=Se(c),E=u==null?void 0:u.getSelection();if(C.isComposing||!E||!Et(c))return;const b=E.type!=="None";if(!c.selection&&!b)return;const P=Me.get(c);let M=!1;if(P.contains(E.anchorNode)&&P.contains(E.focusNode)&&(M=!0),b&&M&&c.selection){const ue=Le(c,E,{exactMatch:!0,suppressThrow:!0});if(ue&&T.equals(ue,c.selection))return}if(c.selection&&!so(c,c.selection)){t(36,c.selection=Le(c,E,{exactMatch:!1,suppressThrow:!1}),c),Ye.set(c.selection);return}const K=c.selection&&M&&Ve(c,c.selection);K?(T.isBackward(c.selection)?E.setBaseAndExtent(K.endContainer,K.endOffset,K.startContainer,K.startOffset):E.setBaseAndExtent(K.startContainer,K.startOffset,K.endContainer,K.endOffset),w(c,K)):E.removeAllRanges(),C.updateSelectionTimeoutId&&clearTimeout(C.updateSelectionTimeoutId);let Ie=setTimeout(()=>{K&&tt&&oe(c,c).focus(),Object.assign(C,{updateSelectionTimeoutId:null})});Object.assign(C,{updateSelectionTimeoutId:Ie})}Kn(()=>mt().then(gn));function mn(u){if(!C.readOnly&&j(c,u.target)){const E=u.inputType,b=u.dataTransfer||u.data||void 0;if(E==="insertCompositionText"||E==="deleteCompositionText")return;let P=!1;if(E==="insertText"&&c.selection&&T.isCollapsed(c.selection)&&u.data&&u.data.length===1&&/[a-z ]/i.test(u.data)&&c.selection.anchor.offset!==0){P=!0,c.marks&&(P=!1);const M=m.above(c,{at:c.selection.anchor,match:K=>m.isInline(c,K),mode:"highest"});if(M){const[,K]=M;m.isEnd(c,c.selection.anchor,K)&&(P=!1)}}if(P||u.preventDefault(),!E.startsWith("delete")||E.startsWith("deleteBy")){const[M]=u.getTargetRanges();if(M){const K=Le(c,M,{exactMatch:!1,suppressThrow:!1});(!c.selection||!T.equals(c.selection,K))&&R.select(c,K)}}if(c.selection&&T.isExpanded(c.selection)&&E.startsWith("delete")){const M=E.endsWith("Backward")?"backward":"forward";m.deleteFragment(c,{direction:M});return}switch(E){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{m.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{m.deleteForward(c);break}case"deleteContentBackward":{m.deleteBackward(c);break}case"deleteEntireSoftLine":{m.deleteBackward(c,{unit:"line"}),m.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{m.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{m.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{m.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{m.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{m.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{m.deleteForward(c,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{m.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{E==="insertFromComposition"&&C.isComposing&&t(7,C.isComposing=!1,C),(b==null?void 0:b.constructor.name)==="DataTransfer"?c.insertData(b):typeof b=="string"&&(P?Ue.push(()=>m.insertText(c,b)):m.insertText(c,b));break}}}}function _n(u){for(const E of Ue)E();Ue.length=0}function wn(u){if(!C.readOnly&&!C.isComposing&&j(c,u.target)){const E=c.children[c.selection!==null?c.selection.focus.path[0]:0],b=an(x.string(E))==="rtl";if(Y.isRedo(u)){u.preventDefault();const P=c;typeof P.redo=="function"&&P.redo()}else if(Y.isUndo(u)){u.preventDefault();const P=c;typeof P.undo=="function"&&P.undo()}else if(Y.isMoveLineBackward(u))u.preventDefault(),R.move(c,{unit:"line",reverse:!0});else if(Y.isMoveLineForward(u))u.preventDefault(),R.move(c,{unit:"line"});else if(Y.isExtendLineBackward(u))u.preventDefault(),R.move(c,{unit:"line",edge:"focus",reverse:!0});else if(Y.isExtendLineForward(u))u.preventDefault(),R.move(c,{unit:"line",edge:"focus"});else if(Y.isMoveBackward(u))u.preventDefault(),c.selection&&T.isCollapsed(c.selection)?R.move(c,{reverse:!b}):R.collapse(c,{edge:"start"});else if(Y.isMoveForward(u))u.preventDefault(),c.selection&&T.isCollapsed(c.selection)?R.move(c,{reverse:b}):R.collapse(c,{edge:"end"});else if(Y.isMoveWordBackward(u))u.preventDefault(),c.selection&&T.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:!b});else if(Y.isMoveWordForward(u))u.preventDefault(),c.selection&&T.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:b});else if(!kt)Y.isBold(u)||Y.isItalic(u)||Y.isTransposeCharacter(u)?u.preventDefault():Y.isSplitBlock(u)?(u.preventDefault(),m.insertBreak(c)):Y.isDeleteBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c)):Y.isDeleteForward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c)):Y.isDeleteLineBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"line"})):Y.isDeleteLineForward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"line"})):Y.isDeleteWordBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"word"})):Y.isDeleteWordForward(u)&&(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"word"}));else{if((Ut||Qe)&&c.selection&&(Y.isDeleteBackward(u)||Y.isDeleteForward(u))&&T.isCollapsed(c.selection)){const P=x.parent(c,c.selection.anchor.path);if(ze.isElement(P)&&m.isVoid(c,P)&&m.isInline(c,P)){u.preventDefault(),m.deleteBackward(c,{unit:"block"});return}}return v(u)}}}function pn(u){if(!C.readOnly&&!C.updateSelectionTimeoutId&&j(c,u.target)){const E=oe(c,c),b=Se(c);if(t(7,C.latestElement=b.activeElement,C),tt&&u.target!==E){E.focus();return}_e.set(c,!0),O.set(!0)}}function kn(u){if(C.readOnly||C.updateSelectionTimeoutId||!j(c,u.target))return;const E=Se(c);if(C.latestElement===E.activeElement)return;const b=u.relatedTarget,P=oe(c,c);if(b!==P&&!($(b)&&b.hasAttribute("data-slate-spacer"))){if(b!=null&&ce(b)&&rt(c,b)){const M=le(b);if(ze.isElement(M)&&!c.isVoid(M))return}if(Qe){const M=E.getSelection();M==null||M.removeAllRanges()}_e.delete(c),O.set(!1)}}function En(u){if(!C.readOnly&&ge(c,u.target)&&ce(u.target)){const E=le(u.target),b=be(E);if(m.hasPath(c,b)&&x.get(c,b)===E){const M=m.start(c,b),K=m.end(c,b),Ie=m.void(c,{at:M}),ue=m.void(c,{at:K});if(Ie&&ue&&me.equals(Ie[1],ue[1])){const Bn=m.range(c,M);R.select(c,Bn)}}}}function bn(u){if(j(c,u.target)){t(7,C.isComposing=!1,C);const E=u.data;if(!Qe&&!io&&!to&&!ro&&E&&m.insertText(c,E),c.selection&&T.isCollapsed(c.selection)){const b=c.selection.anchor.path,P=x.leaf(c,b);C.hasInsertPrefixInCompositon&&(t(7,C.hasInsertPrefixInCompositon=!1,C),m.withoutNormalizing(c,()=>{const M=P.text.replace(/^\uFEFF/,"");R.delete(c,{distance:P.text.length,reverse:!0}),R.insertText(c,M)}))}}}function Cn(u){j(c,u.target)&&t(7,C.isComposing=!0,C)}function yn(u){if(j(c,u.target)&&c.selection){if(T.isExpanded(c.selection)){m.deleteFragment(c);return}const E=m.above(c,{match:b=>m.isInline(c,b),mode:"highest"});if(E){const[,b]=E;if(m.isEnd(c,c.selection.anchor,b)){const P=m.after(c,b);R.setSelection(c,{anchor:P,focus:P})}}c.marks&&(t(7,C.hasInsertPrefixInCompositon=!0,C),R.insertNodes(c,ut({text:"\uFEFF"},c.marks),{select:!0}))}}function Dn(u){!C.readOnly&&j(c,u.target)&&(!kt||Qn(u))&&(u.preventDefault(),c.insertData(u.clipboardData))}function Sn(u){j(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData))}function Ln(u){if(!C.readOnly&&j(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData),c.selection))if(T.isExpanded(c.selection))m.deleteFragment(c);else{const E=x.parent(c,c.selection.anchor.path);m.isVoid(c,E)&&R.delete(c)}}function Fn(u){if(ge(c,u.target)){const E=le(u.target);m.isVoid(c,E)&&u.preventDefault()}}function On(u){if(!C.readOnly&&ge(c,u.target)){const E=le(u.target),b=be(E);if(m.isVoid(c,E)||m.void(c,{at:b,voids:!0})){const M=m.range(c,b);R.select(c,M)}t(7,C.isDraggingInternally=!0,C),c.setFragmentData(u.dataTransfer)}}function Tn(u){if(!C.readOnly&&ge(c,u.target)){u.preventDefault();const E=c.selection,b=lo(c,u),P=u.dataTransfer;R.select(c,b),C.isDraggingInternally&&(E&&!T.equals(E,b)&&!m.void(c,{at:b,voids:!0})&&R.delete(c,{at:E}),t(7,C.isDraggingInternally=!1,C)),c.insertData(P),Et(c)||ao(c)}}function Pn(u){!C.readOnly&&C.isDraggingInternally&&ge(c,u.target)&&t(7,C.isDraggingInternally=!1,C)}function Nn(u){re[u?"unshift":"push"](()=>{k=u,t(0,k)})}return n.$$set=u=>{e=xe(xe({},e),qn(u)),t(29,a=gt(e,o)),"Element"in u&&t(1,s=u.Element),"Leaf"in u&&t(2,l=u.Leaf),"Placeholder"in u&&t(3,f=u.Placeholder),"placeholder"in u&&t(30,h=u.placeholder),"readOnly"in u&&t(31,g=u.readOnly),"autoFocus"in u&&t(32,d=u.autoFocus),"decorate"in u&&t(33,_=u.decorate),"scrollSelectionIntoView"in u&&t(34,w=u.scrollSelectionIntoView),"ref"in u&&t(0,k=u.ref),"spellcheck"in u&&t(4,W=u.spellcheck),"autocorrect"in u&&t(5,p=u.autocorrect),"autocapitalize"in u&&t(6,F=u.autocapitalize),"onKeyDown"in u&&t(35,v=u.onKeyDown)},n.$$.update=()=>{if(n.$$.dirty[1]&33&&Ht.set(c,g),n.$$.dirty[1]&1&&ie.set(g),n.$$.dirty[1]&1&&t(7,C.readOnly=g,C),n.$$.dirty[1]&4&&I.set(_),n.$$.dirty[0]&1073742720|n.$$.dirty[1]&36)if(r.children.length===1&&Array.from(x.texts(r)).length===1&&x.string(r)===""&&!C.isComposing){const u=m.start(c,[]);t(8,Be=[..._([c,[]]),{[Fe]:!0,placeholder:h,anchor:u,focus:u}])}else Be.length&&t(8,Be=_([c,[]]));n.$$.dirty[0]&1|n.$$.dirty[1]&66&&Xe!==d&&k&&(d&&k.focus(),t(37,Xe=d))},[k,s,l,f,W,p,F,C,Be,r,i,S,Ye,mn,_n,wn,pn,kn,En,bn,Cn,yn,Dn,Sn,Ln,Fn,On,Tn,Pn,a,h,g,d,_,w,v,c,Xe,Nn]}class Si extends Q{constructor(e){super();Z(this,e,wi,mi,ye,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:31,autoFocus:32,decorate:33,scrollSelectionIntoView:34,ref:0,spellcheck:4,autocorrect:5,autocapitalize:6,onKeyDown:35},null,[-1,-1])}}function It(n,e){const t=(e.top+e.bottom)/2;return n.top<=t&&n.bottom>=t}function At(n,e,t){const o=Ve(n,e).getBoundingClientRect(),a=Ve(n,t).getBoundingClientRect();return It(o,a)&&It(a,o)}function pi(n,e){const t=m.range(n,T.end(e)),o=Array.from(m.positions(n,{at:e}));let a=0,r=o.length,i=Math.floor(r/2);if(At(n,m.range(n,o[a]),t))return m.range(n,o[a],t);if(o.length<2)return m.range(n,o[o.length-1],t);for(;i!==o.length&&i!==a;)At(n,m.range(n,o[i]),t)?r=i:a=i,i=Math.floor((a+r)/2);return m.range(n,o[r],t)}function Li(n){const e=n,{apply:t,onChange:o,deleteBackward:a}=e;return Ee.set(e,new WeakMap),e.deleteBackward=r=>{if(r!=="line")return a(r);if(n.selection&&T.isCollapsed(n.selection)){const i=m.above(n,{match:s=>m.isBlock(n,s),at:n.selection});if(i){const[,s]=i,l=m.range(n,s,n.selection.anchor),f=pi(e,l);T.isCollapsed(f)||R.delete(n,{at:f})}}},e.apply=r=>{const i=[];switch(r.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of m.levels(e,{at:r.path})){const f=se(s);i.push([l,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of m.levels(e,{at:me.parent(r.path)})){const f=se(s);i.push([l,f])}break}case"move_node":{for(const[s,l]of m.levels(e,{at:me.common(me.parent(r.path),me.parent(r.newPath))})){const f=se(s);i.push([l,f])}break}}t(r);for(const[s,l]of i){const[f]=m.node(e,s);et.set(f,l)}},e.setFragmentData=r=>{const{selection:i}=e;if(!i)return;const[s,l]=T.edges(i),f=m.void(e,{at:s.path}),h=m.void(e,{at:l.path});if(T.isCollapsed(i)&&!f)return;const g=Ve(e,i);let d=g.cloneContents(),_=d.childNodes[0];if(d.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(_=F)}),h){const[F]=h,v=g.cloneRange(),c=oe(e,F);v.setEndAfter(c),d=v.cloneContents()}if(f&&(_=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const v=F.getAttribute("data-slate-zero-width")==="n";F.textContent=v?`
`:""}),Kt(_)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(_),d.appendChild(F),_=F}const w=e.getFragment(),k=JSON.stringify(w),W=window.btoa(encodeURIComponent(k));_.setAttribute("data-slate-fragment",W),r.setData("application/x-slate-fragment",W);const p=document.createElement("div");return p.appendChild(d),p.setAttribute("hidden","true"),document.body.appendChild(p),r.setData("text/html",p.innerHTML),r.setData("text/plain",Yt(p)),document.body.removeChild(p),r},e.insertData=r=>{e.insertFragmentData(r)||e.insertTextData(r)},e.insertFragmentData=r=>{const i=r.getData("application/x-slate-fragment")||eo(r);if(i){const s=decodeURIComponent(window.atob(i)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=r=>{const i=r.getData("text/plain");if(i){const s=i.split(/\r\n|\r|\n/);let l=!1;for(const f of s)l&&R.splitNodes(e,{always:!0}),e.insertText(f),l=!0;return!0}return!1},e.onChange=()=>{const r=vt.get(e);r&&r(),o()},e}export{Si as E,Ci as S,yi as a,fo as b,en as c,$t as d,be as f,fe as g,Di as i,Li as w};
