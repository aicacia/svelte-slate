var In=Object.defineProperty;var Ie=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var ft=(n,e,t)=>e in n?In(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dt=(n,e)=>{for(var t in e||(e={}))st.call(e,t)&&ft(n,t,e[t]);if(Ie)for(var t of Ie(e))ct.call(e,t)&&ft(n,t,e[t]);return n};var Ge=(n,e)=>{var t={};for(var i in n)st.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Ie)for(var i of Ie(n))e.indexOf(i)<0&&ct.call(n,i)&&(t[i]=n[i]);return t};import{a1 as m,a2 as P,a3 as An,S as Q,i as j,s as Se,F as Le,J as Fe,K as Oe,L as Pe,q as D,o as y,r as he,D as ge,a4 as Mn,a5 as me,a6 as oe,t as Ae,h as Me,g as A,d as L,e as $,c as ee,a as ie,b as B,I as ut,j as ht,M as _e,l as T,n as Y,p as X,a7 as we,w as z,x as q,y as V,B as v,a8 as te,a9 as Rn,Q as gt,O as le,P as Re,aa as mt,ab as _t,v as Je,ac as Wn,ad as We,ae as ze,af as zn,ag as Vn,C as Qe,ah as wt,ai as pt,aj as G,z as vn,ak as Hn,al as kt,u as Kn,E as Et,am as Un,an as qn,ao as R,ap as Yn}from"./vendor-a3f987f5.js";const Ve=new WeakMap,ve=new WeakMap,je=new WeakMap,He=new WeakMap,pe=new WeakMap,ke=new WeakMap,Ze=new WeakMap,Ee=new WeakMap,bt=new WeakMap,be=new WeakMap,Ct=new WeakMap,Ne=Symbol("placeholder");let Xn=0;class Gn{constructor(){this.id=`${Xn++}`}toString(){return this.id}}function xe(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView||null}function Jn(n){return se(n)&&n.nodeType===8}function ne(n){return se(n)&&n.nodeType===1}function se(n){const e=xe(n);return!!e&&n instanceof e.Node}function Dt(n){const e=n&&n.anchorNode&&xe(n.anchorNode);return!!e&&n instanceof e.Selection}function yt(n){return se(n)&&n.nodeType===3}function Qn(n){return n.clipboardData&&n.clipboardData.getData("text/plain")!==""&&n.clipboardData.types.length===1}function jn(n){let[e,t]=n;if(ne(e)&&e.childNodes.length){let i=t===e.childNodes.length,a=i?t-1:t;for([e,a]=St(e,a,i?"backward":"forward"),i=a<t;ne(e)&&e.childNodes.length;){const r=i?e.childNodes.length-1:0;e=xn(e,r,i?"backward":"forward")}t=i&&e.textContent!=null?e.textContent.length:0}return[e,t]}function Zn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function St(n,e,t){const{childNodes:i}=n;let a=i[e],r=e,o=!1,s=!1;for(;(Jn(a)||ne(a)&&a.childNodes.length===0||ne(a)&&a.getAttribute("contenteditable")==="false")&&!(o&&s);){if(r>=i.length){o=!0,r=e-1,t="backward";continue}if(r<0){s=!0,r=e+1,t="forward";continue}a=i[r],e=r,r+=t==="forward"?1:-1}return[a,e]}function xn(n,e,t){const[i]=St(n,e,t);return i}function Lt(n){let e="";if(yt(n)&&n.nodeValue)return n.nodeValue;if(ne(n)){for(const i of Array.from(n.childNodes))e+=Lt(i);const t=getComputedStyle(n).getPropertyValue("display");(t==="block"||t==="list"||n.tagName==="BR")&&(e+=`
`)}return e}const $n=/data-slate-fragment="(.+?)"/m;function ei(n){const e=n.getData("text/html"),[,t]=e.match($n)||[];return t}const ti=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ft=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const $e=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),et=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),ni=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Ot=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),ii=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),oi=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ri=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Pt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Nt=!ii&&!ni&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function tt(n){const e=je.get(n);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(n){let e=Ze.get(n);return e||(e=new Gn,Ze.set(n,e)),e}function Ce(n){const e=[];let t=n;for(;;){const i=ve.get(t);if(i==null){if(m.isEditor(t))return e;break}const a=Ve.get(t);if(a==null)break;e.unshift(a),t=i}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(n)}`)}function Be(n){const e=re(n,n),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:e.ownerDocument}function Bt(n){return!!be.get(n)}function ai(n){const e=re(n,n),t=Be(n);be.set(n,!0),t.activeElement!==e&&e.focus({preventScroll:!0})}function nt(n,e,t={}){const{editable:i=!1}=t,a=re(n,n);let r;try{r=ne(e)?e:e.parentElement}catch(o){if(!o.message.includes('Permission denied to access property "nodeType"'))throw o}return r?r.closest("[data-svelte-editor]")===a&&(!i||r.isContentEditable?!0:typeof r.isContentEditable=="boolean"&&r.closest('[contenteditable="false"]')===a||!!r.getAttribute("data-slate-zero-width")):!1}function re(n,e,t=!0){const i=Ee.get(n),a=m.isEditor(e)?He.get(n):i==null?void 0:i.get(ce(e));if(!a&&t)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return a}function Tt(n,e,t=!0){const[i]=m.node(n,e.path),a=re(n,i,t);let r;m.void(n,{at:e})&&(e={path:e.path,offset:0});const o="[data-slate-string], [data-slate-zero-width]",s=a?Array.from(a.querySelectorAll(o)):[];let l=0;for(const f of s){const h=f.childNodes[0];if(h==null||h.textContent==null)continue;const{length:g}=h.textContent,u=f.getAttribute("data-slate-length"),_=u==null?g:parseInt(u,10),w=l+_;if(e.offset<=w){const k=Math.min(g,Math.max(0,e.offset-l));r=[h,k];break}l=w}if(!r&&t)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return r}function Ke(n,e,t=!0){const{anchor:i,focus:a}=e,r=P.isBackward(e),o=Tt(n,i,t);if(!o)return;const s=P.isCollapsed(e)?o:Tt(n,a),f=tt(n).document.createRange(),[h,g]=r?s:o,[u,_]=r?o:s,k=!!(ne(h)?h:h.parentElement).getAttribute("data-slate-zero-width"),p=!!(ne(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return f.setStart(h,k?1:g),f.setEnd(u,p?1:_),f}function fe(n){let e=ne(n)?n:n.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const t=e?pe.get(e):null;if(!t)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return t}function li(n,e){const{clientX:t,clientY:i,target:a}=e;if(t==null||i==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const r=fe(e.target),o=Ce(r);if(m.isVoid(n,r)){const h=a.getBoundingClientRect(),g=n.isInline(r)?t-h.left<h.left+h.width-t:i-h.top<h.top+h.height-i,u=m.point(n,o,{edge:g?"start":"end"}),_=g?m.before(n,u):m.after(n,u);if(_)return m.range(n,_)}let s;const{document:l}=tt(n);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(t,i);else{const h=l.caretPositionFromPoint(t,i);h&&(s=l.createRange(),s.setStart(h.offsetNode,h.offset),s.setEnd(h.offsetNode,h.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Te(n,s,{exactMatch:!1,suppressThrow:!1})}function It(n,e,t){var u;const{exactMatch:i,suppressThrow:a}=t,[r,o]=i?e:jn(e),s=r.parentNode;let l=null,f=0;if(s){const _=s.closest('[data-slate-void="true"]');let w=s.closest("[data-slate-leaf]"),k=null;if(w){l=w.closest('[data-slate-node="text"]');const p=tt(n).document.createRange();p.setStart(l,0),p.setEnd(r,o);const F=p.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(c=>{c.parentNode.removeChild(c)}),f=F.textContent.length,k=l}else _&&(w=_.querySelector("[data-slate-leaf]"),w?(l=w.closest('[data-slate-node="text"]'),k=w,f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(W=>{f-=W.textContent.length})):f=1);k&&f===k.textContent.length&&(s.hasAttribute("data-slate-zero-width")||$e&&((u=k.textContent)==null?void 0:u.endsWith(`

`)))&&f--}if(!l){if(a)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const h=fe(l);return{path:Ce(h),offset:f}}function Te(n,e,t){const{exactMatch:i,suppressThrow:a}=t,r=Dt(e)?e.anchorNode:e.startContainer;let o,s,l,f,h;if(r&&(Dt(e)?(o=e.anchorNode,s=e.anchorOffset,l=e.focusNode,f=e.focusOffset,Ot&&Zn()?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed):(o=e.startContainer,s=e.startOffset,l=e.endContainer,f=e.endOffset,h=e.collapsed)),o==null||l==null||s==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const g=It(n,[o,s],{exactMatch:i,suppressThrow:a});if(!g)return null;const u=h?g:It(n,[l,f],{exactMatch:i,suppressThrow:a});if(!u)return null;let _={anchor:g,focus:u};return P.isExpanded(_)&&P.isForward(_)&&ne(l)&&m.void(n,{at:_.focus,mode:"highest"})&&(_=m.unhangRange(n,_,{voids:!0})),_}function si(n,e){const{anchor:t,focus:i}=e;return m.hasPath(n,t.path)&&m.hasPath(n,i.path)}function At(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let a=0;a<n.length;a++){const r=n[a],o=e[a],t=r,{anchor:s,focus:l}=t,f=Ge(t,["anchor","focus"]),i=o,{anchor:h,focus:g}=i,u=Ge(i,["anchor","focus"]);if(!P.equals(r,o)||r[Ne]!==o[Ne]||!An(f,u))return!1}return!0}function Mt(n,e){return n===e||!!n&&!!e&&P.equals(n,e)}function ci(n){let e;const t=n[7].default,i=Le(t,n,n[6],null);return{c(){i&&i.c()},l(a){i&&i.l(a)},m(a,r){i&&i.m(a,r),e=!0},p(a,[r]){i&&i.p&&(!e||r&64)&&Fe(i,t,a,a[6],e?Pe(t,a[6],r,null):Oe(a[6]),null)},i(a){e||(D(i,a),e=!0)},o(a){y(i,a),e=!1},d(a){i&&i.d(a)}}}const Rt={},Wt={},zt={},Vt={},vt={};function Ht(){const n=me(Rt);if(!n)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return n}function de(){return Mn(Ht())}function Kt(){const n=me(Wt);if(!n)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return n}function fi(){const n=me(zt);if(!n)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return n}function Ut(){const n=me(Vt);if(!n)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return n}function di(){const n=me(vt);if(!n)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return n}function qt(n){return[]}function ui(n,e,t){let{$$slots:i={},$$scope:a}=e,{editor:r}=e,{value:o=r.children}=e,{selection:s=r.selection}=e;const l=ge(r);he(Rt,l);const f=ge(!0);he(Wt,f);const h=ge(!1);he(zt,h);const g=ge(qt);he(Vt,g);const u=ge(r.selection);he(vt,u);function _(){t(1,s=r.selection),t(0,o=r.children)}Ct.set(r,_);let w=r,k,W;return n.$$set=p=>{"editor"in p&&t(2,r=p.editor),"value"in p&&t(0,o=p.value),"selection"in p&&t(1,s=p.selection),"$$scope"in p&&t(6,a=p.$$scope)},n.$$.update=()=>{n.$$.dirty&12&&r!==w&&(t(3,w=r),l.set(r)),n.$$.dirty&17&&k!==o&&(l.update(p=>(p.children=o,p)),t(4,k=o)),n.$$.dirty&38&&(Mt(W,s)||(u.set(s),l.set(r),t(5,W=s)))},[o,s,r,w,k,W,a,i]}class Co extends Q{constructor(e){super();j(this,e,ui,ci,Se,{editor:2,value:0,selection:1})}}const Yt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Xt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",hi=new RegExp("^[^"+Xt+"]*["+Yt+"]"),gi=new RegExp("^[^"+Yt+"]*["+Xt+"]");function Gt(n){const e=String(n||"");return hi.test(e)?"rtl":gi.test(e)?"ltr":"neutral"}function Jt(n){let e=`
`,t;return{c(){t=Ae(e)},l(i){t=Me(i,e)},m(i,a){A(i,t,a)},d(i){i&&L(t)}}}function mi(n){let e,t,i=n[1]&&Jt();return{c(){e=$("span"),t=Ae(n[0]),i&&i.c(),this.h()},l(a){e=ee(a,"SPAN",{"data-slate-string":!0});var r=ie(e);t=Me(r,n[0]),i&&i.l(r),r.forEach(L),this.h()},h(){B(e,"data-slate-string","true")},m(a,r){A(a,e,r),ut(e,t),i&&i.m(e,null)},p(a,[r]){r&1&&ht(t,a[0]),a[1]?i||(i=Jt(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:_e,o:_e,d(a){a&&L(e),i&&i.d()}}}function _i(n,e,t){let{text:i}=e,{isTrailing:a=!1}=e;return n.$$set=r=>{"text"in r&&t(0,i=r.text),"isTrailing"in r&&t(1,a=r.isTrailing)},[i,a]}class wi extends Q{constructor(e){super();j(this,e,_i,mi,oe,{text:0,isTrailing:1})}}function Qt(n){let e;return{c(){e=$("br")},l(t){e=ee(t,"BR",{})},m(t,i){A(t,e,i)},d(t){t&&L(e)}}}function pi(n){let e,t="\uFEFF",i,a,r=n[1]&&Qt();return{c(){e=$("span"),i=Ae(t),r&&r.c(),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ie(e);i=Me(s,t),r&&r.l(s),s.forEach(L),this.h()},h(){B(e,"data-slate-zero-width",a=n[1]?"n":"z"),B(e,"data-slate-length",n[0])},m(o,s){A(o,e,s),ut(e,i),r&&r.m(e,null)},p(o,[s]){o[1]?r||(r=Qt(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),s&2&&a!==(a=o[1]?"n":"z")&&B(e,"data-slate-zero-width",a),s&1&&B(e,"data-slate-length",o[0])},i:_e,o:_e,d(o){o&&L(e),r&&r.d()}}}function ki(n,e,t){let{length:i=0}=e,{isLineBreak:a=!1}=e;return n.$$set=r=>{"length"in r&&t(0,i=r.length),"isLineBreak"in r&&t(1,a=r.isLineBreak)},[i,a]}class it extends Q{constructor(e){super();j(this,e,ki,pi,oe,{length:0,isLineBreak:1})}}function Ei(n){let e,t;return e=new wi({props:{isTrailing:n[5],text:n[0].text}}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.isTrailing=i[5]),a&1&&(r.text=i[0].text),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function bi(n){let e,t;return e=new it({}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p:_e,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ci(n){let e,t;return e=new it({props:{isLineBreak:!0}}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p:_e,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Di(n){let e,t;return e=new it({props:{length:te.string(n[1]).length}}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p(i,a){const r={};a&2&&(r.length=te.string(i[1]).length),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function yi(n){let e,t,i,a;const r=[Di,Ci,bi,Ei],o=[];function s(l,f){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(n),t=o[e]=r[e](n),{c(){t.c(),i=T()},l(l){t.l(l),i=T()},m(l,f){o[e].m(l,f),A(l,i,f),a=!0},p(l,[f]){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=r[e](l),t.c()),D(t,1),t.m(i.parentNode,i))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){o[e].d(l),l&&L(i)}}}function Si(n,e,t){let i,a,r,o,s,l,{isLast:f}=e,{leaf:h}=e,{parent:g}=e,{text:u}=e;const _=de();return n.$$set=w=>{"isLast"in w&&t(6,f=w.isLast),"leaf"in w&&t(0,h=w.leaf),"parent"in w&&t(1,g=w.parent),"text"in w&&t(7,u=w.text)},n.$$.update=()=>{n.$$.dirty&65&&t(5,i=f&&h.text.slice(-1)===`
`),n.$$.dirty&128&&t(9,a=Ce(u)),n.$$.dirty&512&&t(8,r=we.parent(a)),n.$$.dirty&2&&t(4,o=_.isVoid(g)),n.$$.dirty&1&&t(2,s=h.text===""),n.$$.dirty&390&&t(3,l=s&&g.children[g.children.length-1]===u&&!_.isInline(g)&&m.string(_,r)==="")},[h,g,s,l,o,i,f,u,r,a]}class Li extends Q{constructor(e){super();j(this,e,Si,yi,oe,{isLast:6,leaf:0,parent:1,text:7})}}function jt(n){let e,t,i,a;function r(l){n[7](l)}var o=n[5];function s(l){let f={$$slots:{default:[Fi]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.clientHeight=l[6]),{props:f}}return o&&(e=new o(s(n)),le.push(()=>Re(e,"clientHeight",r))),{c(){e&&z(e.$$.fragment),i=T()},l(l){e&&q(e.$$.fragment,l),i=T()},m(l,f){e&&V(e,l,f),A(l,i,f),a=!0},p(l,f){const h={};if(f&514&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.clientHeight=l[6],gt(()=>t=!1)),o!==(o=l[5])){if(e){Y();const g=e;y(g.$$.fragment,1,0,()=>{v(g,1)}),X()}o?(e=new o(s(l)),le.push(()=>Re(e,"clientHeight",r)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,i.parentNode,i)):e=null}else o&&e.$set(h)},i(l){a||(e&&D(e.$$.fragment,l),a=!0)},o(l){e&&y(e.$$.fragment,l),a=!1},d(l){l&&L(i),e&&v(e,l)}}}function Fi(n){let e=n[1].placeholder+"",t;return{c(){t=Ae(e)},l(i){t=Me(i,e)},m(i,a){A(i,t,a)},p(i,a){a&2&&e!==(e=i[1].placeholder+"")&&ht(t,e)},d(i){i&&L(t)}}}function Oi(n){let e,t,i,a=Ne in n[1]&&jt(n);return t=new Li({props:{isLast:n[0],leaf:n[1],parent:n[2],text:n[3]}}),{c(){a&&a.c(),e=T(),z(t.$$.fragment)},l(r){a&&a.l(r),e=T(),q(t.$$.fragment,r)},m(r,o){a&&a.m(r,o),A(r,e,o),V(t,r,o),i=!0},p(r,o){Ne in r[1]?a?(a.p(r,o),o&2&&D(a,1)):(a=jt(r),a.c(),D(a,1),a.m(e.parentNode,e)):a&&(Y(),y(a,1,1,()=>{a=null}),X());const s={};o&1&&(s.isLast=r[0]),o&2&&(s.leaf=r[1]),o&4&&(s.parent=r[2]),o&8&&(s.text=r[3]),t.$set(s)},i(r){i||(D(a),D(t.$$.fragment,r),i=!0)},o(r){y(a),y(t.$$.fragment,r),i=!1},d(r){a&&a.d(r),r&&L(e),v(t,r)}}}function Pi(n){let e,t,i;var a=n[4];function r(o){return{props:{leaf:o[1],$$slots:{default:[Oi]},$$scope:{ctx:o}}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=T()},l(o){e&&q(e.$$.fragment,o),t=T()},m(o,s){e&&V(e,o,s),A(o,t,s),i=!0},p(o,[s]){const l={};if(s&2&&(l.leaf=o[1]),s&623&&(l.$$scope={dirty:s,ctx:o}),a!==(a=o[4])){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{v(f,1)}),X()}a?(e=new a(r(o)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&y(e.$$.fragment,o),i=!1},d(o){o&&L(t),e&&v(e,o)}}}function Ni(n,e,t){let{isLast:i}=e,{leaf:a}=e,{parent:r}=e,{text:o}=e,{Leaf:s}=e,{Placeholder:l}=e,f,h;Rn(()=>{if(Pt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight="")}});function g(u){f=u,t(6,f)}return n.$$set=u=>{"isLast"in u&&t(0,i=u.isLast),"leaf"in u&&t(1,a=u.leaf),"parent"in u&&t(2,r=u.parent),"text"in u&&t(3,o=u.text),"Leaf"in u&&t(4,s=u.Leaf),"Placeholder"in u&&t(5,l=u.Placeholder)},n.$$.update=()=>{if(n.$$.dirty&64&&f!==h&&Pt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight=`${f}px`)}},[i,a,r,o,s,l,f,g]}class Zt extends Q{constructor(e){super();j(this,e,Ni,Pi,oe,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function xt(n,e,t){const i=n.slice();return i[11]=e[t],i[13]=t,i}function $t(n,e){let t,i,a,r;var o=Zt;function s(l){return{props:{Placeholder:l[4],Leaf:l[3],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return o&&(i=new o(s(e))),{key:n,first:null,c(){t=T(),i&&z(i.$$.fragment),a=T(),this.h()},l(l){t=T(),i&&q(i.$$.fragment,l),a=T(),this.h()},h(){this.first=t},m(l,f){A(l,t,f),i&&V(i,l,f),A(l,a,f),r=!0},p(l,f){e=l;const h={};if(f&16&&(h.Placeholder=e[4]),f&8&&(h.Leaf=e[3]),f&129&&(h.isLast=e[0]&&e[13]===e[7].length-1),f&2&&(h.parent=e[1]),f&128&&(h.leaf=e[11]),f&4&&(h.text=e[2]),o!==(o=Zt)){if(i){Y();const g=i;y(g.$$.fragment,1,0,()=>{v(g,1)}),X()}o?(i=new o(s(e)),z(i.$$.fragment),D(i.$$.fragment,1),V(i,a.parentNode,a)):i=null}else o&&i.$set(h)},i(l){r||(i&&D(i.$$.fragment,l),r=!0)},o(l){i&&y(i.$$.fragment,l),r=!1},d(l){l&&L(t),l&&L(a),i&&v(i,l)}}}function Bi(n){let e,t=[],i=new Map,a,r=n[7];const o=s=>`${s[6]}-${s[13]}`;for(let s=0;s<r.length;s+=1){let l=xt(n,r,s),f=o(l);i.set(f,t[s]=$t(f,l))}return{c(){e=$("span");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=ee(s,"SPAN",{"data-slate-node":!0});var l=ie(e);for(let f=0;f<t.length;f+=1)t[f].l(l);l.forEach(L),this.h()},h(){B(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let f=0;f<t.length;f+=1)t[f].m(e,null);n[9](e),a=!0},p(s,[l]){l&223&&(r=s[7],Y(),t=mt(t,l,o,1,s,r,i,e,_t,$t,null,xt),X())},i(s){if(!a){for(let l=0;l<r.length;l+=1)D(t[l]);a=!0}},o(s){for(let l=0;l<t.length;l+=1)y(t[l]);a=!1},d(s){s&&L(e);for(let l=0;l<t.length;l+=1)t[l].d();n[9](null)}}}function Ti(n,e,t){let i,a,{decorations:r}=e,{isLast:o}=e,{parent:s}=e,{text:l}=e,{Leaf:f}=e,{Placeholder:h}=e;const g=de();let u;Je(()=>{var w;(w=Ee.get(g))==null||w.set(a,u),ke.set(l,u),pe.set(u,l)});function _(w){le[w?"unshift":"push"](()=>{u=w,t(5,u)})}return n.$$set=w=>{"decorations"in w&&t(8,r=w.decorations),"isLast"in w&&t(0,o=w.isLast),"parent"in w&&t(1,s=w.parent),"text"in w&&t(2,l=w.text),"Leaf"in w&&t(3,f=w.Leaf),"Placeholder"in w&&t(4,h=w.Placeholder)},n.$$.update=()=>{var w;n.$$.dirty&260&&t(7,i=Wn.decorations(l,r)),n.$$.dirty&4&&t(6,a=ce(l)),n.$$.dirty&100&&u&&((w=Ee.get(g))==null||w.set(a,u),ke.set(l,u),pe.set(u,l))},[o,s,l,f,h,u,a,i,r,_]}class De extends Q{constructor(e){super();j(this,e,Ti,Bi,oe,{decorations:8,isLast:0,parent:1,text:2,Leaf:3,Placeholder:4})}}function Ii(n){let e,t;return e=new an({props:{node:n[0],decorations:n[1],selection:n[2],Element:n[3],Placeholder:n[5],Leaf:n[4]}}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p(i,a){const r={};a&1&&(r.node=i[0]),a&2&&(r.decorations=i[1]),a&4&&(r.selection=i[2]),a&8&&(r.Element=i[3]),a&32&&(r.Placeholder=i[5]),a&16&&(r.Leaf=i[4]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ai(n){let e,t,i,a;const r=[Ri,Mi],o=[];function s(l,f){return l[7]?0:1}return e=s(n),t=o[e]=r[e](n),{c(){t.c(),i=T()},l(l){t.l(l),i=T()},m(l,f){o[e].m(l,f),A(l,i,f),a=!0},p(l,f){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=r[e](l),t.c()),D(t,1),t.m(i.parentNode,i))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){o[e].d(l),l&&L(i)}}}function Mi(n){let e,t,i;var a=De;function r(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return a&&(t=new a(r(n))),{c(){e=$("div"),t&&z(t.$$.fragment),this.h()},l(o){e=ee(o,"DIV",{"data-slate-spacer":!0,class:!0});var s=ie(e);t&&q(t.$$.fragment,s),s.forEach(L),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),t&&V(t,e,null),i=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),a!==(a=De)){if(t){Y();const f=t;y(f.$$.fragment,1,0,()=>{v(f,1)}),X()}a?(t=new a(r(o)),z(t.$$.fragment),D(t.$$.fragment,1),V(t,e,null)):t=null}else a&&t.$set(l)},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&y(t.$$.fragment,o),i=!1},d(o){o&&L(e),t&&v(t)}}}function Ri(n){let e,t,i;var a=De;function r(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return a&&(t=new a(r(n))),{c(){e=$("span"),t&&z(t.$$.fragment),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ie(e);t&&q(t.$$.fragment,s),s.forEach(L),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),t&&V(t,e,null),i=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),a!==(a=De)){if(t){Y();const f=t;y(f.$$.fragment,1,0,()=>{v(f,1)}),X()}a?(t=new a(r(o)),z(t.$$.fragment),D(t.$$.fragment,1),V(t,e,null)):t=null}else a&&t.$set(l)},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&y(t.$$.fragment,o),i=!1},d(o){o&&L(e),t&&v(t)}}}function Wi(n){let e,t,i,a;const r=[Ai,Ii],o=[];function s(l,f){return l[8]?0:1}return e=s(n),t=o[e]=r[e](n),{c(){t.c(),i=T()},l(l){t.l(l),i=T()},m(l,f){o[e].m(l,f),A(l,i,f),a=!0},p(l,f){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=r[e](l),t.c()),D(t,1),t.m(i.parentNode,i))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){o[e].d(l),l&&L(i)}}}function zi(n){let e,t,i,a;function r(l){n[18](l)}var o=n[3];function s(l){let f={isVoid:l[8],isInline:l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Wi]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.ref=l[6]),{props:f}}return o&&(e=new o(s(n)),le.push(()=>Re(e,"ref",r))),{c(){e&&z(e.$$.fragment),i=T()},l(l){e&&q(e.$$.fragment,l),i=T()},m(l,f){e&&V(e,l,f),A(l,i,f),a=!0},p(l,[f]){const h={};if(f&256&&(h.isVoid=l[8]),f&128&&(h.isInline=l[7]),f&2048&&(h.contenteditable=l[11]),f&1&&(h.element=l[0]),f&512&&(h.dir=l[9]),f&1050047&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.ref=l[6],gt(()=>t=!1)),o!==(o=l[3])){if(e){Y();const g=e;y(g.$$.fragment,1,0,()=>{v(g,1)}),X()}o?(e=new o(s(l)),le.push(()=>Re(e,"ref",r)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,i.parentNode,i)):e=null}else o&&e.$set(h)},i(l){a||(e&&D(e.$$.fragment,l),a=!0)},o(l){e&&y(e.$$.fragment,l),a=!1},d(l){l&&L(i),e&&v(e,l)}}}function Vi(n,e,t){let i,a,r,o,s,l,{element:f}=e,{decorations:h}=e,{selection:g=null}=e,{Element:u}=e,{Leaf:_}=e,{Placeholder:w}=e;const k=de(),W=Kt();We(n,W,O=>t(17,l=O));let p,F,H,c,S;Je(()=>{var O;(O=Ee.get(k))==null||O.set(p,S),ke.set(f,S),pe.set(S,f)});function ae(O){S=O,t(6,S)}return n.$$set=O=>{"element"in O&&t(0,f=O.element),"decorations"in O&&t(1,h=O.decorations),"selection"in O&&t(2,g=O.selection),"Element"in O&&t(3,u=O.Element),"Leaf"in O&&t(4,_=O.Leaf),"Placeholder"in O&&t(5,w=O.Placeholder)},n.$$.update=()=>{var O;if(n.$$.dirty&131072&&t(15,i=l),n.$$.dirty&1&&t(7,a=k.isInline(f)),n.$$.dirty&1&&t(16,r=ce(f)),n.$$.dirty&81920&&F!==r&&(t(13,p=r),t(14,F=r)),n.$$.dirty&129&&!a&&m.hasInlines(k,f)){const I=Gt(te.string(f));I==="rtl"&&t(9,H=I)}if(n.$$.dirty&1&&t(8,o=m.isVoid(k,f)),n.$$.dirty&32768&&t(11,s=!i),n.$$.dirty&33153&&o){!i&&a&&t(11,s=!1);const[[I]]=te.texts(f);t(10,c=I),Ve.set(I,0),ve.set(I,f)}n.$$.dirty&8257&&S&&((O=Ee.get(k))==null||O.set(p,S),ke.set(f,S),pe.set(S,f))},[f,h,g,u,_,w,S,a,o,H,c,s,W,p,F,i,r,l,ae]}class en extends Q{constructor(e){super();j(this,e,Vi,zi,oe,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function vi(n){let e,t,i;var a=en;function r(o){return{props:{Element:o[1],Placeholder:o[3],Leaf:o[2],decorations:o[5],element:o[0],selection:o[4]}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=T()},l(o){e&&q(e.$$.fragment,o),t=T()},m(o,s){e&&V(e,o,s),A(o,t,s),i=!0},p(o,[s]){const l={};if(s&2&&(l.Element=o[1]),s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&32&&(l.decorations=o[5]),s&1&&(l.element=o[0]),s&16&&(l.selection=o[4]),a!==(a=en)){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{v(f,1)}),X()}a?(e=new a(r(o)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&y(e.$$.fragment,o),i=!1},d(o){o&&L(t),e&&v(e,o)}}}const tn={};function Do(){const n=me(tn);if(!n)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return n}function Hi(n,e,t){let i,a,r,o,{parent:s}=e,{element:l}=e,{path:f}=e,{index:h}=e,{decorate:g}=e,{decorations:u}=e,{selection:_=null}=e,{Element:w}=e,{Leaf:k}=e,{Placeholder:W}=e;const p=ge(!1);he(tn,p);const F=de();let H=h,c=s,S=l,ae=u,O=_;return n.$$set=I=>{"parent"in I&&t(6,s=I.parent),"element"in I&&t(0,l=I.element),"path"in I&&t(7,f=I.path),"index"in I&&t(8,h=I.index),"decorate"in I&&t(9,g=I.decorate),"decorations"in I&&t(10,u=I.decorations),"selection"in I&&t(11,_=I.selection),"Element"in I&&t(1,w=I.Element),"Leaf"in I&&t(2,k=I.Leaf),"Placeholder"in I&&t(3,W=I.Placeholder)},n.$$.update=()=>{n.$$.dirty&4352&&H!==h&&t(12,H=h),n.$$.dirty&8256&&c!==s&&t(13,c=s),n.$$.dirty&16385&&S!==l&&t(14,S=l),n.$$.dirty&33792&&(At(ae,u)||t(15,ae=u)),n.$$.dirty&67584&&(Mt(O,_)||t(16,O=_)),n.$$.dirty&20480&&Ve.set(S,H),n.$$.dirty&24576&&ve.set(S,c),n.$$.dirty&4224&&t(18,i=f.concat(H)),n.$$.dirty&262144&&t(17,a=m.range(F,i)),n.$$.dirty&442880&&t(5,r=rn(g([S,i]),a,ae)),n.$$.dirty&196608&&t(4,o=O&&P.intersection(a,O)),n.$$.dirty&16&&p.set(!!o)},[l,w,k,W,o,r,s,f,h,g,u,_,H,c,S,ae,O,a,i]}class Ki extends Q{constructor(e){super();j(this,e,Hi,vi,Se,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Ui(n){let e,t,i;var a=De;function r(o){return{props:{Placeholder:o[3],Leaf:o[2],decorations:o[4],isLast:o[5],parent:o[0],text:o[1]}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=T()},l(o){e&&q(e.$$.fragment,o),t=T()},m(o,s){e&&V(e,o,s),A(o,t,s),i=!0},p(o,[s]){const l={};if(s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&16&&(l.decorations=o[4]),s&32&&(l.isLast=o[5]),s&1&&(l.parent=o[0]),s&2&&(l.text=o[1]),a!==(a=De)){if(e){Y();const f=e;y(f.$$.fragment,1,0,()=>{v(f,1)}),X()}a?(e=new a(r(o)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&y(e.$$.fragment,o),i=!1},d(o){o&&L(t),e&&v(e,o)}}}function qi(n,e,t){let i,a,r,o,{parent:s}=e,{text:l}=e,{path:f}=e,{index:h}=e,{isLeafBlock:g}=e,{decorations:u}=e,{decorate:_}=e,{Leaf:w}=e,{Placeholder:k}=e;const W=de();let p=h,F=l,H=s,c=u;return n.$$set=S=>{"parent"in S&&t(0,s=S.parent),"text"in S&&t(1,l=S.text),"path"in S&&t(6,f=S.path),"index"in S&&t(7,h=S.index),"isLeafBlock"in S&&t(8,g=S.isLeafBlock),"decorations"in S&&t(9,u=S.decorations),"decorate"in S&&t(10,_=S.decorate),"Leaf"in S&&t(2,w=S.Leaf),"Placeholder"in S&&t(3,k=S.Placeholder)},n.$$.update=()=>{n.$$.dirty&2176&&p!==h&&t(11,p=h),n.$$.dirty&4098&&F!==l&&t(12,F=l),n.$$.dirty&8193&&H!==s&&t(13,H=s),n.$$.dirty&16896&&(At(c,u)||t(14,c=u)),n.$$.dirty&6144&&Ve.set(F,p),n.$$.dirty&12288&&ve.set(F,H),n.$$.dirty&2112&&t(16,i=f.concat(p)),n.$$.dirty&10496&&t(5,a=g&&p===H.children.length-1),n.$$.dirty&65536&&t(15,r=m.range(W,i)),n.$$.dirty&119808&&t(4,o=rn(_([F,i]),r,c))},[s,l,w,k,o,a,f,h,g,u,_,p,F,H,c,r,i]}class Yi extends Q{constructor(e){super();j(this,e,qi,Ui,Se,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function nn(n,e,t){const i=n.slice();return i[14]=e[t],i[16]=t,i}function Xi(n){let e,t;return e=new Yi({props:{Placeholder:n[4],Leaf:n[3],decorations:n[0],parent:n[5],text:n[14],decorate:n[9],index:n[16],path:n[8],isLeafBlock:n[7]}}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p(i,a){const r={};a&16&&(r.Placeholder=i[4]),a&8&&(r.Leaf=i[3]),a&1&&(r.decorations=i[0]),a&32&&(r.parent=i[5]),a&64&&(r.text=i[14]),a&512&&(r.decorate=i[9]),a&64&&(r.index=i[16]),a&256&&(r.path=i[8]),a&128&&(r.isLeafBlock=i[7]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Gi(n){let e,t;return e=new Ki({props:{Element:n[2],Placeholder:n[4],Leaf:n[3],decorations:n[0],selection:n[1],element:n[14],parent:n[5],decorate:n[9],index:n[16],path:n[8]}}),{c(){z(e.$$.fragment)},l(i){q(e.$$.fragment,i)},m(i,a){V(e,i,a),t=!0},p(i,a){const r={};a&4&&(r.Element=i[2]),a&16&&(r.Placeholder=i[4]),a&8&&(r.Leaf=i[3]),a&1&&(r.decorations=i[0]),a&2&&(r.selection=i[1]),a&64&&(r.element=i[14]),a&32&&(r.parent=i[5]),a&512&&(r.decorate=i[9]),a&64&&(r.index=i[16]),a&256&&(r.path=i[8]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function on(n,e){let t,i,a,r,o,s;const l=[Gi,Xi],f=[];function h(g,u){return u&64&&(i=null),i==null&&(i=!!ze.isElement(g[14])),i?0:1}return a=h(e,-1),r=f[a]=l[a](e),{key:n,first:null,c(){t=T(),r.c(),o=T(),this.h()},l(g){t=T(),r.l(g),o=T(),this.h()},h(){this.first=t},m(g,u){A(g,t,u),f[a].m(g,u),A(g,o,u),s=!0},p(g,u){e=g;let _=a;a=h(e,u),a===_?f[a].p(e,u):(Y(),y(f[_],1,1,()=>{f[_]=null}),X(),r=f[a],r?r.p(e,u):(r=f[a]=l[a](e),r.c()),D(r,1),r.m(o.parentNode,o))},i(g){s||(D(r),s=!0)},o(g){y(r),s=!1},d(g){g&&L(t),f[a].d(g),g&&L(o)}}}function Ji(n){let e=[],t=new Map,i,a,r=n[6];const o=s=>ce(s[14]);for(let s=0;s<r.length;s+=1){let l=nn(n,r,s),f=o(l);t.set(f,e[s]=on(f,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=T()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);i=T()},m(s,l){for(let f=0;f<e.length;f+=1)e[f].m(s,l);A(s,i,l),a=!0},p(s,[l]){l&1023&&(r=s[6],Y(),e=mt(e,l,o,1,s,r,t,i.parentNode,_t,on,i,nn),X())},i(s){if(!a){for(let l=0;l<r.length;l+=1)D(e[l]);a=!0}},o(s){for(let l=0;l<e.length;l+=1)y(e[l]);a=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&L(i)}}}function rn(n,e,t=[]){for(const i of t){const a=P.intersection(i,e);a&&n.push(a)}return n}function Qi(n,e,t){let i,a,r,o,{node:s}=e,{decorations:l}=e,{selection:f=null}=e,{Element:h}=e,{Leaf:g}=e,{Placeholder:u}=e;const _=de(),w=Ut();We(n,w,p=>t(12,o=p));let k=s,W=k.children;return n.$$set=p=>{"node"in p&&t(11,s=p.node),"decorations"in p&&t(0,l=p.decorations),"selection"in p&&t(1,f=p.selection),"Element"in p&&t(2,h=p.Element),"Leaf"in p&&t(3,g=p.Leaf),"Placeholder"in p&&t(4,u=p.Placeholder)},n.$$.update=()=>{n.$$.dirty&4096&&t(9,i=o),n.$$.dirty&2080&&(k!==s||s===_)&&t(5,k=s),n.$$.dirty&96&&W!==k.children&&t(6,W=k.children),n.$$.dirty&32&&t(8,a=Ce(k)),n.$$.dirty&32&&t(7,r=ze.isElement(k)&&!_.isInline(k)&&m.hasInlines(_,k))},[l,f,h,g,u,k,W,r,a,i,w,s,o]}class an extends Q{constructor(e){super();j(this,e,Qi,Ji,Se,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function ji(n){let e,t;const i=n[7].default,a=Le(i,n,n[6],null);return{c(){e=$("div"),a&&a.c(),this.h()},l(r){e=ee(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=ie(e);a&&a.l(o),o.forEach(L),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-void",n[2]),B(e,"dir",n[4]),B(e,"contenteditable",n[3]),B(e,"class","svelte-19k8gul")},m(r,o){A(r,e,o),a&&a.m(e,null),n[9](e),t=!0},p(r,o){a&&a.p&&(!t||o&64)&&Fe(a,i,r,r[6],t?Pe(i,r[6],o,null):Oe(r[6]),null),(!t||o&4)&&B(e,"data-slate-void",r[2]),(!t||o&16)&&B(e,"dir",r[4]),(!t||o&8)&&B(e,"contenteditable",r[3])},i(r){t||(D(a,r),t=!0)},o(r){y(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n[9](null)}}}function Zi(n){let e,t;const i=n[7].default,a=Le(i,n,n[6],null);return{c(){e=$("span"),a&&a.c(),this.h()},l(r){e=ee(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=ie(e);a&&a.l(o),o.forEach(L),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-inline",n[1]),B(e,"data-slate-void",n[2]),B(e,"dir",n[4]),B(e,"contenteditable",n[3]),B(e,"class","svelte-19k8gul")},m(r,o){A(r,e,o),a&&a.m(e,null),n[8](e),t=!0},p(r,o){a&&a.p&&(!t||o&64)&&Fe(a,i,r,r[6],t?Pe(i,r[6],o,null):Oe(r[6]),null),(!t||o&2)&&B(e,"data-slate-inline",r[1]),(!t||o&4)&&B(e,"data-slate-void",r[2]),(!t||o&16)&&B(e,"dir",r[4]),(!t||o&8)&&B(e,"contenteditable",r[3])},i(r){t||(D(a,r),t=!0)},o(r){y(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n[8](null)}}}function xi(n){let e,t,i,a;const r=[Zi,ji],o=[];function s(l,f){return l[1]?0:1}return e=s(n),t=o[e]=r[e](n),{c(){t.c(),i=T()},l(l){t.l(l),i=T()},m(l,f){o[e].m(l,f),A(l,i,f),a=!0},p(l,[f]){let h=e;e=s(l),e===h?o[e].p(l,f):(Y(),y(o[h],1,1,()=>{o[h]=null}),X(),t=o[e],t?t.p(l,f):(t=o[e]=r[e](l),t.c()),D(t,1),t.m(i.parentNode,i))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){o[e].d(l),l&&L(i)}}}function $i(n,e,t){let{$$slots:i={},$$scope:a}=e,{element:r}=e,{ref:o}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:f}=e,{dir:h=void 0}=e;function g(_){le[_?"unshift":"push"](()=>{o=_,t(0,o)})}function u(_){le[_?"unshift":"push"](()=>{o=_,t(0,o)})}return n.$$set=_=>{"element"in _&&t(5,r=_.element),"ref"in _&&t(0,o=_.ref),"isInline"in _&&t(1,s=_.isInline),"isVoid"in _&&t(2,l=_.isVoid),"contenteditable"in _&&t(3,f=_.contenteditable),"dir"in _&&t(4,h=_.dir),"$$scope"in _&&t(6,a=_.$$scope)},[o,s,l,f,h,r,a,i,g,u]}class eo extends Q{constructor(e){super();j(this,e,$i,xi,oe,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function to(n){let e,t;const i=n[2].default,a=Le(i,n,n[1],null);return{c(){e=$("span"),a&&a.c(),this.h()},l(r){e=ee(r,"SPAN",{"data-slate-leaf":!0});var o=ie(e);a&&a.l(o),o.forEach(L),this.h()},h(){B(e,"data-slate-leaf","true")},m(r,o){A(r,e,o),a&&a.m(e,null),t=!0},p(r,[o]){a&&a.p&&(!t||o&2)&&Fe(a,i,r,r[1],t?Pe(i,r[1],o,null):Oe(r[1]),null)},i(r){t||(D(a,r),t=!0)},o(r){y(a,r),t=!1},d(r){r&&L(e),a&&a.d(r)}}}function no(n,e,t){let{$$slots:i={},$$scope:a}=e,{leaf:r}=e;return n.$$set=o=>{"leaf"in o&&t(0,r=o.leaf),"$$scope"in o&&t(1,a=o.$$scope)},[r,a,i]}class io extends Q{constructor(e){super();j(this,e,no,to,oe,{leaf:0})}}function oo(n){let e,t,i;const a=n[2].default,r=Le(a,n,n[1],null);return{c(){e=$("span"),r&&r.c(),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=ie(e);r&&r.l(s),s.forEach(L),this.h()},h(){B(e,"data-slate-placeholder",""),B(e,"contenteditable","false"),B(e,"class","svelte-lqbb94"),zn(()=>n[3].call(e))},m(o,s){A(o,e,s),r&&r.m(e,null),t=Vn(e,n[3].bind(e)),i=!0},p(o,[s]){r&&r.p&&(!i||s&2)&&Fe(r,a,o,o[1],i?Pe(a,o[1],s,null):Oe(o[1]),null)},i(o){i||(D(r,o),i=!0)},o(o){y(r,o),i=!1},d(o){o&&L(e),r&&r.d(o),t()}}}function ro(n,e,t){let{$$slots:i={},$$scope:a}=e,{clientHeight:r}=e;function o(){r=this.clientHeight,t(0,r)}return n.$$set=s=>{"clientHeight"in s&&t(0,r=s.clientHeight),"$$scope"in s&&t(1,a=s.$$scope)},[r,a,i,o]}class ao extends Q{constructor(e){super();j(this,e,ro,oo,oe,{clientHeight:0})}}const lo=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ot={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ln={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:lo?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},rt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let n=1;n<20;n++)rt["f"+n]=111+n;function sn(n,e={}){Array.isArray(n)||(n=[n]);const t=n.map(i=>so(i,e));return function(a){return t.some(r=>co(r,a))}}function yo(n,e,t={}){return sn(n,t)(e)}function at(n){return sn(n,{byKey:!0})}function so(n,e={}){const t=e&&e.byKey,i={};n=n.replace("++","+add");const a=n.split("+"),{length:r}=a;for(const o in ot)i[ot[o]]=!1;for(let o of a){const s=o.endsWith("?")&&o.length>1;s&&(o=o.slice(0,-1));const l=cn(o),f=ot[l];if(o.length>1&&!f&&!ln[o]&&!rt[l])throw new TypeError(`Unknown modifier: "${o}"`);(r===1||!f)&&(t?i.key=l:i.which=fo(o)),f&&(i[f]=s?null:!0)}return i}function co(n,e){for(const t in n){const i=n[t];let a;if(i!=null&&(t==="key"&&e.key!=null?a=e.key.toLowerCase():t==="which"?a=i===91&&e.which===93?91:e.which:a=e[t],!(a==null&&i===!1)&&a!==i))return!1}return!0}function fo(n){return n=cn(n),rt[n]||n.toUpperCase().charCodeAt(0)}function cn(n){return n=n.toLowerCase(),n=ln[n]||n,n}const uo={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ho={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},go={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function K(n){const e=uo[n],t=ho[n],i=go[n],a=e&&at(e),r=t&&at(t),o=i&&at(i);return s=>!!(a&&a(s)||Ft&&r&&r(s)||!Ft&&o&&o(s))}var U={isBold:K("bold"),isCompose:K("compose"),isMoveBackward:K("moveBackward"),isMoveForward:K("moveForward"),isDeleteBackward:K("deleteBackward"),isDeleteForward:K("deleteForward"),isDeleteLineBackward:K("deleteLineBackward"),isDeleteLineForward:K("deleteLineForward"),isDeleteWordBackward:K("deleteWordBackward"),isDeleteWordForward:K("deleteWordForward"),isExtendBackward:K("extendBackward"),isExtendForward:K("extendForward"),isExtendLineBackward:K("extendLineBackward"),isExtendLineForward:K("extendLineForward"),isItalic:K("italic"),isMoveLineBackward:K("moveLineBackward"),isMoveLineForward:K("moveLineForward"),isMoveWordBackward:K("moveWordBackward"),isMoveWordForward:K("moveWordForward"),isRedo:K("redo"),isSplitBlock:K("splitBlock"),isTransposeCharacter:K("transposeCharacter"),isUndo:K("undo")};function mo(n){let e,t,i,a,r,o,s,l;t=new an({props:{node:n[8],selection:n[10],decorations:n[9],Element:n[1],Leaf:n[2],Placeholder:n[3]}});let f=[n[29],{role:i=n[7].readOnly?void 0:"textbox"},{spellcheck:n[4]},{autocorrect:n[5]},{autocapitalize:n[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:a=!n[7].readOnly},{"z-index":r=-1}],h={};for(let g=0;g<f.length;g+=1)h=Qe(h,f[g]);return{c(){e=$("div"),z(t.$$.fragment),this.h()},l(g){e=ee(g,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var u=ie(e);q(t.$$.fragment,u),u.forEach(L),this.h()},h(){wt(e,h),pt(e,"svelte-m59z04",!0)},m(g,u){A(g,e,u),V(t,e,null),n[38](e),o=!0,s||(l=[G(e,"beforeinput",n[13]),G(e,"keydown",n[15]),G(e,"input",n[14]),G(e,"focus",n[16]),G(e,"blur",n[17]),G(e,"click",n[18]),G(e,"compositionend",n[19]),G(e,"compositionupdate",n[20]),G(e,"compositionstart",n[21]),G(e,"paste",n[22]),G(e,"copy",n[23]),G(e,"cut",n[24]),G(e,"dragover",n[25]),G(e,"dragstart",n[26]),G(e,"drop",n[27]),G(e,"dragend",n[28])],s=!0)},p(g,u){const _={};u[0]&256&&(_.node=g[8]),u[0]&1024&&(_.selection=g[10]),u[0]&512&&(_.decorations=g[9]),u[0]&2&&(_.Element=g[1]),u[0]&4&&(_.Leaf=g[2]),u[0]&8&&(_.Placeholder=g[3]),t.$set(_),wt(e,h=vn(f,[u[0]&536870912&&g[29],(!o||u[0]&128&&i!==(i=g[7].readOnly?void 0:"textbox"))&&{role:i},(!o||u[0]&16)&&{spellcheck:g[4]},(!o||u[0]&32)&&{autocorrect:g[5]},(!o||u[0]&64)&&{autocapitalize:g[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!o||u[0]&128&&a!==(a=!g[7].readOnly))&&{contenteditable:a},{"z-index":r}])),pt(e,"svelte-m59z04",!0)},i(g){o||(D(t.$$.fragment,g),o=!0)},o(g){y(t.$$.fragment,g),o=!1},d(g){g&&L(e),v(t),n[38](null),s=!1,Hn(l)}}}function ye(n,e){return se(e)&&nt(n,e)}function x(n,e){return se(e)&&nt(n,e,{editable:!0})}function fn(n,e){if(bt.get(n))return!1;{const t=ye(n,e)&&fe(e);return m.isVoid(n,t)}}function _o(n,e){const t=e.startContainer.parentElement,i=t.getBoundingClientRect;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),Yn(t,{scrollMode:"if-needed"}),t.getBoundingClientRect=i}function wo(n,e,t){const i=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let a=kt(e,i),r,o,{Element:s=eo}=e,{Leaf:l=io}=e,{Placeholder:f=ao}=e,{placeholder:h=void 0}=e,{readOnly:g=!1}=e,{autoFocus:u=!1}=e,{decorate:_=qt}=e,{scrollSelectionIntoView:w=_o}=e,{ref:k=void 0}=e,{spellcheck:W=!0}=e,{autocorrect:p="true"}=e,{autocapitalize:F="true"}=e,{onKeyDown:H=()=>{}}=e;const c=de(),S=Ht();We(n,S,d=>t(8,r=d));const ae=Kt(),O=fi(),I=Ut(),Ue=di();We(n,Ue,d=>t(10,o=d));const qe=[],C={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null,readOnly:g};let Ye=[],Xe;function hn(){if(!C.isComposing&&!C.isUpdatingSelection&&!C.isDraggingInternally){const d=Be(c),E=re(c,c),b=d.getSelection();if(d.activeElement===E?(t(7,C.latestElement=d.activeElement,C),be.set(c,!0),O.set(!0)):(be.delete(c),O.set(!1)),!b){R.deselect(c);return}const N=x(c,b.anchorNode)||fn(c,b.anchorNode),M=x(c,b.focusNode)||fn(c,b.focusNode);if(N&&M){const Z=Te(c,b,{exactMatch:!1,suppressThrow:!0});Z&&R.select(c,Z)}else R.deselect(c)}}const lt=qn(10,!1,()=>Et().then(hn),!1);Je(()=>{const d=xe(k);return d&&(je.set(c,d),d.document.addEventListener("selectionchange",lt)),He.set(c,k),ke.set(c,k),pe.set(k,c),()=>{He.delete(c),ke.delete(c),d&&(je.delete(c),d.document.removeEventListener("selectionchange",lt))}});function gn(){const d=Be(c),E=d==null?void 0:d.getSelection();if(C.isComposing||!E||!Bt(c))return;const b=E.type!=="None";if(!b)return;const N=He.get(c);let M=!1;if(N.contains(E.anchorNode)&&N.contains(E.focusNode)&&(M=!0),b&&M&&c.selection){const ue=Te(c,E,{exactMatch:!0,suppressThrow:!0});if(ue&&P.equals(ue,c.selection))return}if(c.selection&&!si(c,c.selection)){t(36,c.selection=Te(c,E,{exactMatch:!1,suppressThrow:!1}),c),Ue.set(c.selection);return}C.isUpdatingSelection&&clearTimeout(C.isUpdatingSelection);let Z=setTimeout(()=>{J&&$e&&re(c,c).focus(),Object.assign(C,{isUpdatingSelection:null})});Object.assign(C,{isUpdatingSelection:Z});const J=c.selection&&M&&Ke(c,c.selection);J?(P.isBackward(c.selection)?E.setBaseAndExtent(J.endContainer,J.endOffset,J.startContainer,J.startOffset):E.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),w(c,J)):E.removeAllRanges()}Kn(()=>Et().then(gn));function mn(d){if(!C.readOnly&&x(c,d.target)){const E=d.inputType,b=d.dataTransfer||d.data||void 0;if(E==="insertCompositionText"||E==="deleteCompositionText")return;let N=!1;if(E==="insertText"&&c.selection&&P.isCollapsed(c.selection)&&d.data&&d.data.length===1&&/[a-z ]/i.test(d.data)&&c.selection.anchor.offset!==0){N=!0,c.marks&&(N=!1);const M=m.above(c,{at:c.selection.anchor,match:Z=>m.isInline(c,Z),mode:"highest"});if(M){const[,Z]=M;m.isEnd(c,c.selection.anchor,Z)&&(N=!1)}}if(N||d.preventDefault(),!E.startsWith("delete")||E.startsWith("deleteBy")){const[M]=d.getTargetRanges();if(M){const Z=Te(c,M,{exactMatch:!1,suppressThrow:!1});(!c.selection||!P.equals(c.selection,Z))&&R.select(c,Z)}}if(c.selection&&P.isExpanded(c.selection)&&E.startsWith("delete")){const M=E.endsWith("Backward")?"backward":"forward";m.deleteFragment(c,{direction:M});return}switch(E){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{m.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{m.deleteForward(c);break}case"deleteContentBackward":{m.deleteBackward(c);break}case"deleteEntireSoftLine":{m.deleteBackward(c,{unit:"line"}),m.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{m.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{m.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{m.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{m.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{m.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{m.deleteForward(c,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{m.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{E==="insertFromComposition"&&C.isComposing&&t(7,C.isComposing=!1,C),(b==null?void 0:b.constructor.name)==="DataTransfer"?c.insertData(b):typeof b=="string"&&(N?qe.push(()=>m.insertText(c,b)):m.insertText(c,b));break}}}}function _n(d){for(const E of qe)E();qe.length=0}function wn(d){if(!C.readOnly&&!C.isComposing&&x(c,d.target)){const E=c.children[c.selection!==null?c.selection.focus.path[0]:0],b=Gt(te.string(E))==="rtl";if(U.isRedo(d)){d.preventDefault();const N=c;typeof N.redo=="function"&&N.redo()}else if(U.isUndo(d)){d.preventDefault();const N=c;typeof N.undo=="function"&&N.undo()}else if(U.isMoveLineBackward(d))d.preventDefault(),R.move(c,{unit:"line",reverse:!0});else if(U.isMoveLineForward(d))d.preventDefault(),R.move(c,{unit:"line"});else if(U.isExtendLineBackward(d))d.preventDefault(),R.move(c,{unit:"line",edge:"focus",reverse:!0});else if(U.isExtendLineForward(d))d.preventDefault(),R.move(c,{unit:"line",edge:"focus"});else if(U.isMoveBackward(d))d.preventDefault(),c.selection&&P.isCollapsed(c.selection)?R.move(c,{reverse:!b}):R.collapse(c,{edge:"start"});else if(U.isMoveForward(d))d.preventDefault(),c.selection&&P.isCollapsed(c.selection)?R.move(c,{reverse:b}):R.collapse(c,{edge:"end"});else if(U.isMoveWordBackward(d))d.preventDefault(),c.selection&&P.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:!b});else if(U.isMoveWordForward(d))d.preventDefault(),c.selection&&P.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:b});else if(!Nt)U.isBold(d)||U.isItalic(d)||U.isTransposeCharacter(d)?d.preventDefault():U.isSplitBlock(d)?(d.preventDefault(),m.insertBreak(c)):U.isDeleteBackward(d)?(d.preventDefault(),c.selection&&P.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c)):U.isDeleteForward(d)?(d.preventDefault(),c.selection&&P.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c)):U.isDeleteLineBackward(d)?(d.preventDefault(),c.selection&&P.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"line"})):U.isDeleteLineForward(d)?(d.preventDefault(),c.selection&&P.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"line"})):U.isDeleteWordBackward(d)?(d.preventDefault(),c.selection&&P.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"word"})):U.isDeleteWordForward(d)&&(d.preventDefault(),c.selection&&P.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"word"}));else{if((Ot||et)&&c.selection&&(U.isDeleteBackward(d)||U.isDeleteForward(d))&&P.isCollapsed(c.selection)){const N=te.parent(c,c.selection.anchor.path);if(ze.isElement(N)&&m.isVoid(c,N)&&m.isInline(c,N)){d.preventDefault(),m.deleteBackward(c,{unit:"block"});return}}return H(d)}}}function pn(d){if(!C.readOnly&&!C.isUpdatingSelection&&x(c,d.target)){const E=re(c,c),b=Be(c);if(t(7,C.latestElement=b.activeElement,C),$e&&d.target!==E){E.focus();return}be.set(c,!0),O.set(!0)}}function kn(d){if(C.readOnly||C.isUpdatingSelection||!x(c,d.target))return;const E=Be(c);if(C.latestElement===E.activeElement)return;const b=d.relatedTarget,N=re(c,c);if(b!==N&&!(ne(b)&&b.hasAttribute("data-slate-spacer"))){if(b!=null&&se(b)&&nt(c,b)){const M=fe(b);if(ze.isElement(M)&&!c.isVoid(M))return}if(et){const M=E.getSelection();M==null||M.removeAllRanges()}be.delete(c),O.set(!1)}}function En(d){if(!C.readOnly&&ye(c,d.target)&&se(d.target)){const E=fe(d.target),b=Ce(E);if(m.hasPath(c,b)&&te.get(c,b)===E){const M=m.start(c,b),Z=m.end(c,b),J=m.void(c,{at:M}),ue=m.void(c,{at:Z});if(J&&ue&&we.equals(J[1],ue[1])){const Tn=m.range(c,M);R.select(c,Tn)}}}}function bn(d){if(x(c,d.target)){t(7,C.isComposing=!1,C);const E=d.data;if(!et&&!oi&&!ti&&!ri&&E&&m.insertText(c,E),c.selection&&P.isCollapsed(c.selection)){const b=c.selection.anchor.path,N=te.leaf(c,b);C.hasInsertPrefixInCompositon&&(t(7,C.hasInsertPrefixInCompositon=!1,C),m.withoutNormalizing(c,()=>{const M=N.text.replace(/^\uFEFF/,"");R.delete(c,{distance:N.text.length,reverse:!0}),R.insertText(c,M)}))}}}function Cn(d){x(c,d.target)&&t(7,C.isComposing=!0,C)}function Dn(d){if(x(c,d.target)&&c.selection){if(P.isExpanded(c.selection)){m.deleteFragment(c);return}const E=m.above(c,{match:b=>m.isInline(c,b),mode:"highest"});if(E){const[,b]=E;if(m.isEnd(c,c.selection.anchor,b)){const N=m.after(c,b);R.setSelection(c,{anchor:N,focus:N})}}c.marks&&(t(7,C.hasInsertPrefixInCompositon=!0,C),R.insertNodes(c,dt({text:"\uFEFF"},c.marks),{select:!0}))}}function yn(d){!C.readOnly&&x(c,d.target)&&(!Nt||Qn(d))&&(d.preventDefault(),c.insertData(d.clipboardData))}function Sn(d){x(c,d.target)&&(d.preventDefault(),c.setFragmentData(d.clipboardData))}function Ln(d){if(!C.readOnly&&x(c,d.target)&&(d.preventDefault(),c.setFragmentData(d.clipboardData),c.selection))if(P.isExpanded(c.selection))m.deleteFragment(c);else{const E=te.parent(c,c.selection.anchor.path);m.isVoid(c,E)&&R.delete(c)}}function Fn(d){if(ye(c,d.target)){const E=fe(d.target);m.isVoid(c,E)&&d.preventDefault()}}function On(d){if(!C.readOnly&&ye(c,d.target)){const E=fe(d.target),b=Ce(E);if(m.isVoid(c,E)||m.void(c,{at:b,voids:!0})){const M=m.range(c,b);R.select(c,M)}t(7,C.isDraggingInternally=!0,C),c.setFragmentData(d.dataTransfer)}}function Pn(d){if(!C.readOnly&&ye(c,d.target)){d.preventDefault();const E=c.selection,b=li(c,d),N=d.dataTransfer;R.select(c,b),C.isDraggingInternally&&(E&&!P.equals(E,b)&&!m.void(c,{at:b,voids:!0})&&R.delete(c,{at:E}),t(7,C.isDraggingInternally=!1,C)),c.insertData(N),Bt(c)||ai(c)}}function Nn(d){!C.readOnly&&C.isDraggingInternally&&ye(c,d.target)&&t(7,C.isDraggingInternally=!1,C)}function Bn(d){le[d?"unshift":"push"](()=>{k=d,t(0,k)})}return n.$$set=d=>{e=Qe(Qe({},e),Un(d)),t(29,a=kt(e,i)),"Element"in d&&t(1,s=d.Element),"Leaf"in d&&t(2,l=d.Leaf),"Placeholder"in d&&t(3,f=d.Placeholder),"placeholder"in d&&t(30,h=d.placeholder),"readOnly"in d&&t(31,g=d.readOnly),"autoFocus"in d&&t(32,u=d.autoFocus),"decorate"in d&&t(33,_=d.decorate),"scrollSelectionIntoView"in d&&t(34,w=d.scrollSelectionIntoView),"ref"in d&&t(0,k=d.ref),"spellcheck"in d&&t(4,W=d.spellcheck),"autocorrect"in d&&t(5,p=d.autocorrect),"autocapitalize"in d&&t(6,F=d.autocapitalize),"onKeyDown"in d&&t(35,H=d.onKeyDown)},n.$$.update=()=>{if(n.$$.dirty[1]&33&&bt.set(c,g),n.$$.dirty[1]&1&&ae.set(g),n.$$.dirty[1]&1&&t(7,C.readOnly=g,C),n.$$.dirty[1]&4&&I.set(_),n.$$.dirty[0]&1073742208|n.$$.dirty[1]&36)if(r.children.length===1&&Array.from(te.texts(r)).length===1&&te.string(r)===""&&!C.isComposing){const d=m.start(c,[]);t(9,Ye=[..._([c,[]]),{[Ne]:!0,placeholder:h,anchor:d,focus:d}])}else t(9,Ye=_([c,[]]));n.$$.dirty[0]&1|n.$$.dirty[1]&66&&Xe!==u&&k&&(u&&k.focus(),t(37,Xe=u))},[k,s,l,f,W,p,F,C,r,Ye,o,S,Ue,mn,_n,wn,pn,kn,En,bn,Cn,Dn,yn,Sn,Ln,Fn,On,Pn,Nn,a,h,g,u,_,w,H,c,Xe,Bn]}class So extends Q{constructor(e){super();j(this,e,wo,mo,Se,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:31,autoFocus:32,decorate:33,scrollSelectionIntoView:34,ref:0,spellcheck:4,autocorrect:5,autocapitalize:6,onKeyDown:35},null,[-1,-1])}}function dn(n,e){const t=(e.top+e.bottom)/2;return n.top<=t&&n.bottom>=t}function un(n,e,t){const i=Ke(n,e).getBoundingClientRect(),a=Ke(n,t).getBoundingClientRect();return dn(i,a)&&dn(a,i)}function po(n,e){const t=m.range(n,P.end(e)),i=Array.from(m.positions(n,{at:e}));let a=0,r=i.length,o=Math.floor(r/2);if(un(n,m.range(n,i[a]),t))return m.range(n,i[a],t);if(i.length<2)return m.range(n,i[i.length-1],t);for(;o!==i.length&&o!==a;)un(n,m.range(n,i[o]),t)?r=o:a=o,o=Math.floor((a+r)/2);return m.range(n,i[r],t)}function Lo(n){const e=n,{apply:t,onChange:i,deleteBackward:a}=e;return Ee.set(e,new WeakMap),e.deleteBackward=r=>{if(r!=="line")return a(r);if(n.selection&&P.isCollapsed(n.selection)){const o=m.above(n,{match:s=>m.isBlock(n,s),at:n.selection});if(o){const[,s]=o,l=m.range(n,s,n.selection.anchor),f=po(e,l);P.isCollapsed(f)||R.delete(n,{at:f})}}},e.apply=r=>{const o=[];switch(r.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of m.levels(e,{at:r.path})){const f=ce(s);o.push([l,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of m.levels(e,{at:we.parent(r.path)})){const f=ce(s);o.push([l,f])}break}case"move_node":{for(const[s,l]of m.levels(e,{at:we.common(we.parent(r.path),we.parent(r.newPath))})){const f=ce(s);o.push([l,f])}break}}t(r);for(const[s,l]of o){const[f]=m.node(e,s);Ze.set(f,l)}},e.setFragmentData=r=>{const{selection:o}=e;if(!o)return;const[s,l]=P.edges(o),f=m.void(e,{at:s.path}),h=m.void(e,{at:l.path});if(P.isCollapsed(o)&&!f)return;const g=Ke(e,o);let u=g.cloneContents(),_=u.childNodes[0];if(u.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(_=F)}),h){const[F]=h,H=g.cloneRange(),c=re(e,F);H.setEndAfter(c),u=H.cloneContents()}if(f&&(_=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const H=F.getAttribute("data-slate-zero-width")==="n";F.textContent=H?`
`:""}),yt(_)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(_),u.appendChild(F),_=F}const w=e.getFragment(),k=JSON.stringify(w),W=window.btoa(encodeURIComponent(k));_.setAttribute("data-slate-fragment",W),r.setData("application/x-slate-fragment",W);const p=document.createElement("div");return p.appendChild(u),p.setAttribute("hidden","true"),document.body.appendChild(p),r.setData("text/html",p.innerHTML),r.setData("text/plain",Lt(p)),document.body.removeChild(p),r},e.insertData=r=>{e.insertFragmentData(r)||e.insertTextData(r)},e.insertFragmentData=r=>{const o=r.getData("application/x-slate-fragment")||ei(r);if(o){const s=decodeURIComponent(window.atob(o)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=r=>{const o=r.getData("text/plain");if(o){const s=o.split(/\r\n|\r|\n/);let l=!1;for(const f of s)l&&R.splitNodes(e,{always:!0}),e.insertText(f),l=!0;return!0}return!1},e.onChange=()=>{const r=Ct.get(e);r&&r(),i()},e}export{So as E,Co as S,Do as a,fi as b,Kt as c,Ht as d,Ce as f,de as g,yo as i,Lo as w};
