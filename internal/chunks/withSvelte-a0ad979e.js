var Wn=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var ut=(i,e,n)=>e in i?Wn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,ht=(i,e)=>{for(var n in e||(e={}))ft.call(e,n)&&ut(i,n,e[n]);if(Ae)for(var n of Ae(e))dt.call(e,n)&&ut(i,n,e[n]);return i};var Je=(i,e)=>{var n={};for(var t in i)ft.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&Ae)for(var t of Ae(i))e.indexOf(t)<0&&dt.call(i,t)&&(n[t]=i[t]);return n};import{a1 as g,a2 as P,a3 as zn,S as j,i as Z,s as Se,F as Le,J as Fe,K as Oe,L as Pe,q as C,o as y,r as ue,D as he,a4 as Vn,a5 as ge,a6 as ae,t as Me,h as Re,g as A,d as S,e as $,c as ee,a as ie,b as B,I as gt,j as mt,M as me,l as I,n as X,p as G,a7 as _e,w as z,x as q,y as V,B as H,a8 as te,a9 as Hn,Q as _t,O as se,P as We,aa as wt,ab as pt,v as Qe,ac as Kn,ad as ze,ae as Ve,af as vn,ag as Un,C as je,ah as Et,ai as kt,aj as J,z as qn,ak as Yn,al as bt,u as Xn,am as Gn,E as Ct,an as W,ao as Jn,ap as Qn}from"./vendor-bb2831a9.js";const He=new WeakMap,Ke=new WeakMap,Ze=new WeakMap,ve=new WeakMap,we=new WeakMap,pe=new WeakMap,xe=new WeakMap,Ee=new WeakMap,yt=new WeakMap,ke=new WeakMap,Dt=new WeakMap,Be=Symbol("placeholder");let jn=0;class Zn{constructor(){this.id=`${jn++}`}toString(){return this.id}}function $e(i){return i&&i.ownerDocument&&i.ownerDocument.defaultView||null}function xn(i){return ce(i)&&i.nodeType===8}function ne(i){return ce(i)&&i.nodeType===1}function ce(i){const e=$e(i);return!!e&&i instanceof e.Node}function St(i){const e=i&&i.anchorNode&&$e(i.anchorNode);return!!e&&i instanceof e.Selection}function Lt(i){return ce(i)&&i.nodeType===3}function $n(i){return i.clipboardData&&i.clipboardData.getData("text/plain")!==""&&i.clipboardData.types.length===1}function ei(i){let[e,n]=i;if(ne(e)&&e.childNodes.length){let t=n===e.childNodes.length,r=t?n-1:n;for([e,r]=Ft(e,r,t?"backward":"forward"),t=r<n;ne(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=ni(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function ti(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Ft(i,e,n){const{childNodes:t}=i;let r=t[e],a=e,o=!1,s=!1;for(;(xn(r)||ne(r)&&r.childNodes.length===0||ne(r)&&r.getAttribute("contenteditable")==="false")&&!(o&&s);){if(a>=t.length){o=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}r=t[a],e=a,a+=n==="forward"?1:-1}return[r,e]}function ni(i,e,n){const[t]=Ft(i,e,n);return t}function Ot(i){let e="";if(Lt(i)&&i.nodeValue)return i.nodeValue;if(ne(i)){for(const t of Array.from(i.childNodes))e+=Ot(t);const n=getComputedStyle(i).getPropertyValue("display");(n==="block"||n==="list"||i.tagName==="BR")&&(e+=`
`)}return e}const ii=/data-slate-fragment="(.+?)"/m;function ri(i){const e=i.getData("text/html"),[,n]=e.match(ii)||[];return n}const oi=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Pt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const et=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),ai=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Bt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),li=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),si=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ci=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Tt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Nt=!li&&!ai&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function nt(i){const e=Ze.get(i);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function fe(i){let e=xe.get(i);return e||(e=new Zn,xe.set(i,e)),e}function be(i){const e=[];let n=i;for(;;){const t=Ke.get(n);if(t==null){if(g.isEditor(n))return e;break}const r=He.get(n);if(r==null)break;e.unshift(r),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(i)}`)}function Te(i){const e=le(i,i),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function It(i){return!!ke.get(i)}function fi(i){const e=le(i,i),n=Te(i);ke.set(i,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function it(i,e,n={}){const{editable:t=!1}=n,r=le(i,i);let a;try{a=ne(e)?e:e.parentElement}catch(o){if(!o.message.includes('Permission denied to access property "nodeType"'))throw o}return a?a.closest("[data-svelte-editor]")===r&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===r||!!a.getAttribute("data-slate-zero-width")):!1}function le(i,e,n=!0){const t=Ee.get(i),r=g.isEditor(e)?ve.get(i):t==null?void 0:t.get(fe(e));if(!r&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return r}function At(i,e,n=!0){const[t]=g.node(i,e.path),r=le(i,t,n);let a;g.void(i,{at:e})&&(e={path:e.path,offset:0});const o="[data-slate-string], [data-slate-zero-width]",s=r?Array.from(r.querySelectorAll(o)):[];let l=0;for(const c of s){const u=c.childNodes[0];if(u==null||u.textContent==null)continue;const{length:h}=u.textContent,d=c.getAttribute("data-slate-length"),m=d==null?h:parseInt(d,10),_=l+m;if(e.offset<=_){const D=Math.min(h,Math.max(0,e.offset-l));a=[u,D];break}l=_}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function Ue(i,e,n=!0){const{anchor:t,focus:r}=e,a=P.isBackward(e),o=At(i,t,n);if(!o)return;const s=P.isCollapsed(e)?o:At(i,r),c=nt(i).document.createRange(),[u,h]=a?s:o,[d,m]=a?o:s,D=!!(ne(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),w=!!(ne(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return c.setStart(u,D?1:h),c.setEnd(d,w?1:m),c}function de(i){let e=ne(i)?i:i.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?we.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function di(i,e){const{clientX:n,clientY:t,target:r}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=de(e.target),o=be(a);if(g.isVoid(i,a)){const u=r.getBoundingClientRect(),h=i.isInline(a)?n-u.left<u.left+u.width-n:t-u.top<u.top+u.height-t,d=g.point(i,o,{edge:h?"start":"end"}),m=h?g.before(i,d):g.after(i,d);if(m)return g.range(i,m)}let s;const{document:l}=nt(i);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const u=l.caretPositionFromPoint(n,t);u&&(s=l.createRange(),s.setStart(u.offsetNode,u.offset),s.setEnd(u.offsetNode,u.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Ne(i,s,{exactMatch:!1,suppressThrow:!1})}function Mt(i,e,n){var d;const{exactMatch:t,suppressThrow:r}=n,[a,o]=t?e:ei(e),s=a.parentNode;let l=null,c=0;if(s){const m=s.closest('[data-slate-void="true"]');let _=s.closest("[data-slate-leaf]"),D=null;if(_){l=_.closest('[data-slate-node="text"]');const w=nt(i).document.createRange();w.setStart(l,0),w.setEnd(a,o);const L=w.cloneContents();[...Array.prototype.slice.call(L.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(L.querySelectorAll("[contenteditable=false]"))].forEach(U=>{U.parentNode.removeChild(U)}),c=L.textContent.length,D=l}else m&&(_=m.querySelector("[data-slate-leaf]"),_?(l=_.closest('[data-slate-node="text"]'),D=_,c=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(M=>{c-=M.textContent.length})):c=1);D&&c===D.textContent.length&&(s.hasAttribute("data-slate-zero-width")||et&&((d=D.textContent)==null?void 0:d.endsWith(`

`)))&&c--}if(!l){if(r)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const u=de(l);return{path:be(u),offset:c}}function Ne(i,e,n){const{exactMatch:t,suppressThrow:r}=n,a=St(e)?e.anchorNode:e.startContainer;let o,s,l,c,u;if(a&&(St(e)?(o=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Bt&&ti()?u=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:u=e.isCollapsed):(o=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,u=e.collapsed)),o==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=Mt(i,[o,s],{exactMatch:t,suppressThrow:r});if(!h)return null;const d=u?h:Mt(i,[l,c],{exactMatch:t,suppressThrow:r});if(!d)return null;let m={anchor:h,focus:d};return P.isExpanded(m)&&P.isForward(m)&&ne(l)&&g.void(i,{at:m.focus,mode:"highest"})&&(m=g.unhangRange(i,m,{voids:!0})),m}function ui(i,e){const{anchor:n,focus:t}=e;return g.hasPath(i,n.path)&&g.hasPath(i,t.path)}function Rt(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let r=0;r<i.length;r++){const a=i[r],o=e[r],n=a,{anchor:s,focus:l}=n,c=Je(n,["anchor","focus"]),t=o,{anchor:u,focus:h}=t,d=Je(t,["anchor","focus"]);if(!P.equals(a,o)||a[Be]!==o[Be]||!zn(c,d))return!1}return!0}function Wt(i,e){return i===e||!!i&&!!e&&P.equals(i,e)}function hi(i){let e;const n=i[7].default,t=Le(n,i,i[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,[a]){t&&t.p&&(!e||a&64)&&Fe(t,n,r,r[6],e?Pe(n,r[6],a,null):Oe(r[6]),null)},i(r){e||(C(t,r),e=!0)},o(r){y(t,r),e=!1},d(r){t&&t.d(r)}}}const zt={},Vt={},Ht={},Kt={},vt={};function Ut(){const i=ge(zt);if(!i)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return i}function Ce(){return Vn(Ut())}function qt(){const i=ge(Vt);if(!i)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return i}function gi(){const i=ge(Ht);if(!i)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return i}function Yt(){const i=ge(Kt);if(!i)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return i}function mi(){const i=ge(vt);if(!i)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return i}function Xt(i){return[]}function _i(i,e,n){let{$$slots:t={},$$scope:r}=e,{editor:a}=e,{value:o=a.children}=e,{selection:s=a.selection}=e;const l=he(a);ue(zt,l);const c=he(!0);ue(Vt,c);const u=he(!1);ue(Ht,u);const h=he(Xt);ue(Kt,h);const d=he(a.selection);ue(vt,d);function m(){n(1,s=a.selection),n(0,o=a.children)}Dt.set(a,m);let _=a,D,M;return i.$$set=w=>{"editor"in w&&n(2,a=w.editor),"value"in w&&n(0,o=w.value),"selection"in w&&n(1,s=w.selection),"$$scope"in w&&n(6,r=w.$$scope)},i.$$.update=()=>{i.$$.dirty&12&&a!==_&&(n(3,_=a),l.set(a)),i.$$.dirty&17&&D!==o&&(l.update(w=>(w.children=o,w)),n(4,D=o)),i.$$.dirty&38&&(Wt(M,s)||(d.set(s),l.set(a),n(5,M=s)))},[o,s,a,_,D,M,r,t]}class Dr extends j{constructor(e){super();Z(this,e,_i,hi,Se,{editor:2,value:0,selection:1})}}const Gt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Jt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",wi=new RegExp("^[^"+Jt+"]*["+Gt+"]"),pi=new RegExp("^[^"+Gt+"]*["+Jt+"]");function Qt(i){const e=String(i||"");return wi.test(e)?"rtl":pi.test(e)?"ltr":"neutral"}function jt(i){let e=`
`,n;return{c(){n=Me(e)},l(t){n=Re(t,e)},m(t,r){A(t,n,r)},d(t){t&&S(n)}}}function Ei(i){let e,n,t=i[1]&&jt();return{c(){e=$("span"),n=Me(i[0]),t&&t.c(),this.h()},l(r){e=ee(r,"SPAN",{"data-slate-string":!0});var a=ie(e);n=Re(a,i[0]),t&&t.l(a),a.forEach(S),this.h()},h(){B(e,"data-slate-string","true")},m(r,a){A(r,e,a),gt(e,n),t&&t.m(e,null)},p(r,[a]){a&1&&mt(n,r[0]),r[1]?t||(t=jt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:me,o:me,d(r){r&&S(e),t&&t.d()}}}function ki(i,e,n){let{text:t}=e,{isTrailing:r=!1}=e;return i.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,r=a.isTrailing)},[t,r]}class bi extends j{constructor(e){super();Z(this,e,ki,Ei,ae,{text:0,isTrailing:1})}}function Zt(i){let e;return{c(){e=$("br")},l(n){e=ee(n,"BR",{})},m(n,t){A(n,e,t)},d(n){n&&S(e)}}}function Ci(i){let e,n="\uFEFF",t,r,a=i[1]&&Zt();return{c(){e=$("span"),t=Me(n),a&&a.c(),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ie(e);t=Re(s,n),a&&a.l(s),s.forEach(S),this.h()},h(){B(e,"data-slate-zero-width",r=i[1]?"n":"z"),B(e,"data-slate-length",i[0])},m(o,s){A(o,e,s),gt(e,t),a&&a.m(e,null)},p(o,[s]){o[1]?a||(a=Zt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&r!==(r=o[1]?"n":"z")&&B(e,"data-slate-zero-width",r),s&1&&B(e,"data-slate-length",o[0])},i:me,o:me,d(o){o&&S(e),a&&a.d()}}}function yi(i,e,n){let{length:t=0}=e,{isLineBreak:r=!1}=e;return i.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,r=a.isLineBreak)},[t,r]}class rt extends j{constructor(e){super();Z(this,e,yi,Ci,ae,{length:0,isLineBreak:1})}}function Di(i){let e,n;return e=new bi({props:{isTrailing:i[5],text:i[0].text}}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&32&&(a.isTrailing=t[5]),r&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Si(i){let e,n;return e=new rt({}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:me,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Li(i){let e,n;return e=new rt({props:{isLineBreak:!0}}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:me,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Fi(i){let e,n;return e=new rt({props:{length:te.string(i[1]).length}}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&2&&(a.length=te.string(t[1]).length),e.$set(a)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Oi(i){let e,n,t,r;const a=[Fi,Li,Si,Di],o=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),r=!0},p(l,[c]){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),y(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function Pi(i,e,n){let t,r,a,o,s,l,{isLast:c}=e,{leaf:u}=e,{parent:h}=e,{text:d}=e;const m=Ce();return i.$$set=_=>{"isLast"in _&&n(6,c=_.isLast),"leaf"in _&&n(0,u=_.leaf),"parent"in _&&n(1,h=_.parent),"text"in _&&n(7,d=_.text)},i.$$.update=()=>{i.$$.dirty&65&&n(5,t=c&&u.text.slice(-1)===`
`),i.$$.dirty&128&&n(9,r=be(d)),i.$$.dirty&512&&n(8,a=_e.parent(r)),i.$$.dirty&2&&n(4,o=m.isVoid(h)),i.$$.dirty&1&&n(2,s=u.text===""),i.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===d&&!m.isInline(h)&&g.string(m,a)==="")},[u,h,s,l,o,t,c,d,a,r]}class Bi extends j{constructor(e){super();Z(this,e,Pi,Oi,ae,{isLast:6,leaf:0,parent:1,text:7})}}function xt(i){let e,n,t,r;function a(l){i[7](l)}var o=i[5];function s(l){let c={$$slots:{default:[Ti]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return o&&(e=new o(s(i)),se.push(()=>We(e,"clientHeight",a))),{c(){e&&z(e.$$.fragment),t=I()},l(l){e&&q(e.$$.fragment,l),t=I()},m(l,c){e&&V(e,l,c),A(l,t,c),r=!0},p(l,c){const u={};if(c&514&&(u.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,u.clientHeight=l[6],_t(()=>n=!1)),o!==(o=l[5])){if(e){X();const h=e;y(h.$$.fragment,1,0,()=>{H(h,1)}),G()}o?(e=new o(s(l)),se.push(()=>We(e,"clientHeight",a)),z(e.$$.fragment),C(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){r||(e&&C(e.$$.fragment,l),r=!0)},o(l){e&&y(e.$$.fragment,l),r=!1},d(l){l&&S(t),e&&H(e,l)}}}function Ti(i){let e=i[1].placeholder+"",n;return{c(){n=Me(e)},l(t){n=Re(t,e)},m(t,r){A(t,n,r)},p(t,r){r&2&&e!==(e=t[1].placeholder+"")&&mt(n,e)},d(t){t&&S(n)}}}function Ni(i){let e,n,t,r=Be in i[1]&&xt(i);return n=new Bi({props:{isLast:i[0],leaf:i[1],parent:i[2],text:i[3]}}),{c(){r&&r.c(),e=I(),z(n.$$.fragment)},l(a){r&&r.l(a),e=I(),q(n.$$.fragment,a)},m(a,o){r&&r.m(a,o),A(a,e,o),V(n,a,o),t=!0},p(a,o){Be in a[1]?r?(r.p(a,o),o&2&&C(r,1)):(r=xt(a),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(X(),y(r,1,1,()=>{r=null}),G());const s={};o&1&&(s.isLast=a[0]),o&2&&(s.leaf=a[1]),o&4&&(s.parent=a[2]),o&8&&(s.text=a[3]),n.$set(s)},i(a){t||(C(r),C(n.$$.fragment,a),t=!0)},o(a){y(r),y(n.$$.fragment,a),t=!1},d(a){r&&r.d(a),a&&S(e),H(n,a)}}}function Ii(i){let e,n,t;var r=i[4];function a(o){return{props:{leaf:o[1],$$slots:{default:[Ni]},$$scope:{ctx:o}}}}return r&&(e=new r(a(i))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&q(e.$$.fragment,o),n=I()},m(o,s){e&&V(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.leaf=o[1]),s&623&&(l.$$scope={dirty:s,ctx:o}),r!==(r=o[4])){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{H(c,1)}),G()}r?(e=new r(a(o)),z(e.$$.fragment),C(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}else r&&e.$set(l)},i(o){t||(e&&C(e.$$.fragment,o),t=!0)},o(o){e&&y(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&H(e,o)}}}function Ai(i,e,n){let{isLast:t}=e,{leaf:r}=e,{parent:a}=e,{text:o}=e,{Leaf:s}=e,{Placeholder:l}=e,c,u;Hn(()=>{if(Tt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="")}});function h(d){c=d,n(6,c)}return i.$$set=d=>{"isLast"in d&&n(0,t=d.isLast),"leaf"in d&&n(1,r=d.leaf),"parent"in d&&n(2,a=d.parent),"text"in d&&n(3,o=d.text),"Leaf"in d&&n(4,s=d.Leaf),"Placeholder"in d&&n(5,l=d.Placeholder)},i.$$.update=()=>{if(i.$$.dirty&64&&c!==u&&Tt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${c}px`)}},[t,r,a,o,s,l,c,h]}class $t extends j{constructor(e){super();Z(this,e,Ai,Ii,ae,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function en(i,e,n){const t=i.slice();return t[11]=e[n],t[13]=n,t}function tn(i,e){let n,t,r,a;var o=$t;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return o&&(t=new o(s(e))),{key:i,first:null,c(){n=I(),t&&z(t.$$.fragment),r=I(),this.h()},l(l){n=I(),t&&q(t.$$.fragment,l),r=I(),this.h()},h(){this.first=n},m(l,c){A(l,n,c),t&&V(t,l,c),A(l,r,c),a=!0},p(l,c){e=l;const u={};if(c&8&&(u.Placeholder=e[3]),c&16&&(u.Leaf=e[4]),c&129&&(u.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(u.parent=e[1]),c&128&&(u.leaf=e[11]),c&4&&(u.text=e[2]),o!==(o=$t)){if(t){X();const h=t;y(h.$$.fragment,1,0,()=>{H(h,1)}),G()}o?(t=new o(s(e)),z(t.$$.fragment),C(t.$$.fragment,1),V(t,r.parentNode,r)):t=null}else o&&t.$set(u)},i(l){a||(t&&C(t.$$.fragment,l),a=!0)},o(l){t&&y(t.$$.fragment,l),a=!1},d(l){l&&S(n),l&&S(r),t&&H(t,l)}}}function Mi(i){let e,n=[],t=new Map,r,a=i[7];const o=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=en(i,a,s),c=o(l);t.set(c,n[s]=tn(c,l))}return{c(){e=$("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=ee(s,"SPAN",{"data-slate-node":!0});var l=ie(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(S),this.h()},h(){B(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);i[9](e),r=!0},p(s,[l]){l&223&&(a=s[7],X(),n=wt(n,l,o,1,s,a,t,e,pt,tn,null,en),G())},i(s){if(!r){for(let l=0;l<a.length;l+=1)C(n[l]);r=!0}},o(s){for(let l=0;l<n.length;l+=1)y(n[l]);r=!1},d(s){s&&S(e);for(let l=0;l<n.length;l+=1)n[l].d();i[9](null)}}}function Ri(i,e,n){let t,r,{decorations:a}=e,{isLast:o}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:u}=e;const h=Ce();let d;Qe(()=>{var _;(_=Ee.get(h))==null||_.set(r,d),pe.set(l,d),we.set(d,l)});function m(_){se[_?"unshift":"push"](()=>{d=_,n(5,d)})}return i.$$set=_=>{"decorations"in _&&n(8,a=_.decorations),"isLast"in _&&n(0,o=_.isLast),"parent"in _&&n(1,s=_.parent),"text"in _&&n(2,l=_.text),"Placeholder"in _&&n(3,c=_.Placeholder),"Leaf"in _&&n(4,u=_.Leaf)},i.$$.update=()=>{var _;i.$$.dirty&260&&n(7,t=Kn.decorations(l,a)),i.$$.dirty&4&&n(6,r=fe(l)),i.$$.dirty&100&&d&&((_=Ee.get(h))==null||_.set(r,d),pe.set(l,d),we.set(d,l))},[o,s,l,c,u,d,r,t,a,m]}class ye extends j{constructor(e){super();Z(this,e,Ri,Mi,ae,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Wi(i){let e,n;return e=new sn({props:{node:i[0],decorations:i[1],selection:i[2],Element:i[3],Placeholder:i[5],Leaf:i[4]}}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&1&&(a.node=t[0]),r&2&&(a.decorations=t[1]),r&4&&(a.selection=t[2]),r&8&&(a.Element=t[3]),r&32&&(a.Placeholder=t[5]),r&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function zi(i){let e,n,t,r;const a=[Hi,Vi],o=[];function s(l,c){return l[7]?0:1}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),r=!0},p(l,c){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),y(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function Vi(i){let e,n,t;var r=ye;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return r&&(n=new r(a(i))),{c(){e=$("div"),n&&z(n.$$.fragment),this.h()},l(o){e=ee(o,"DIV",{"data-slate-spacer":!0,class:!0});var s=ie(e);n&&q(n.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),n&&V(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),r!==(r=ye)){if(n){X();const c=n;y(c.$$.fragment,1,0,()=>{H(c,1)}),G()}r?(n=new r(a(o)),z(n.$$.fragment),C(n.$$.fragment,1),V(n,e,null)):n=null}else r&&n.$set(l)},i(o){t||(n&&C(n.$$.fragment,o),t=!0)},o(o){n&&y(n.$$.fragment,o),t=!1},d(o){o&&S(e),n&&H(n)}}}function Hi(i){let e,n,t;var r=ye;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return r&&(n=new r(a(i))),{c(){e=$("span"),n&&z(n.$$.fragment),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ie(e);n&&q(n.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),n&&V(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),r!==(r=ye)){if(n){X();const c=n;y(c.$$.fragment,1,0,()=>{H(c,1)}),G()}r?(n=new r(a(o)),z(n.$$.fragment),C(n.$$.fragment,1),V(n,e,null)):n=null}else r&&n.$set(l)},i(o){t||(n&&C(n.$$.fragment,o),t=!0)},o(o){n&&y(n.$$.fragment,o),t=!1},d(o){o&&S(e),n&&H(n)}}}function Ki(i){let e,n,t,r;const a=[zi,Wi],o=[];function s(l,c){return l[8]?0:1}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),r=!0},p(l,c){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),y(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function vi(i){let e,n,t,r;function a(l){i[18](l)}var o=i[3];function s(l){let c={isVoid:l[8],isInline:l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Ki]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return o&&(e=new o(s(i)),se.push(()=>We(e,"ref",a))),{c(){e&&z(e.$$.fragment),t=I()},l(l){e&&q(e.$$.fragment,l),t=I()},m(l,c){e&&V(e,l,c),A(l,t,c),r=!0},p(l,[c]){const u={};if(c&256&&(u.isVoid=l[8]),c&128&&(u.isInline=l[7]),c&2048&&(u.contenteditable=l[11]),c&1&&(u.element=l[0]),c&512&&(u.dir=l[9]),c&1050047&&(u.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,u.ref=l[6],_t(()=>n=!1)),o!==(o=l[3])){if(e){X();const h=e;y(h.$$.fragment,1,0,()=>{H(h,1)}),G()}o?(e=new o(s(l)),se.push(()=>We(e,"ref",a)),z(e.$$.fragment),C(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){r||(e&&C(e.$$.fragment,l),r=!0)},o(l){e&&y(e.$$.fragment,l),r=!1},d(l){l&&S(t),e&&H(e,l)}}}function Ui(i,e,n){let t,r,a,o,s,l,{element:c}=e,{decorations:u}=e,{selection:h=null}=e,{Element:d}=e,{Leaf:m}=e,{Placeholder:_}=e;const D=Ce(),M=qt();ze(i,M,T=>n(17,l=T));let w,L,R,U,k;Qe(()=>{var T;(T=Ee.get(D))==null||T.set(w,k),pe.set(c,k),we.set(k,c)});function re(T){k=T,n(6,k)}return i.$$set=T=>{"element"in T&&n(0,c=T.element),"decorations"in T&&n(1,u=T.decorations),"selection"in T&&n(2,h=T.selection),"Element"in T&&n(3,d=T.Element),"Leaf"in T&&n(4,m=T.Leaf),"Placeholder"in T&&n(5,_=T.Placeholder)},i.$$.update=()=>{var T;if(i.$$.dirty&131072&&n(15,t=l),i.$$.dirty&1&&n(7,r=D.isInline(c)),i.$$.dirty&1&&n(16,a=fe(c)),i.$$.dirty&81920&&L!==a&&(n(13,w=a),n(14,L=a)),i.$$.dirty&129&&!r&&g.hasInlines(D,c)){const N=Qt(te.string(c));N==="rtl"&&n(9,R=N)}if(i.$$.dirty&1&&n(8,o=g.isVoid(D,c)),i.$$.dirty&32768&&n(11,s=!t),i.$$.dirty&33153&&o){!t&&r&&n(11,s=!1);const[[N]]=te.texts(c);n(10,U=N),He.set(N,0),Ke.set(N,c)}i.$$.dirty&8257&&k&&((T=Ee.get(D))==null||T.set(w,k),pe.set(c,k),we.set(k,c))},[c,u,h,d,m,_,k,r,o,R,U,s,M,w,L,t,a,l,re]}class nn extends j{constructor(e){super();Z(this,e,Ui,vi,ae,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function qi(i){let e,n,t;var r=nn;function a(o){return{props:{Element:o[1],Placeholder:o[3],Leaf:o[2],decorations:o[5],element:o[0],selection:o[4]}}}return r&&(e=new r(a(i))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&q(e.$$.fragment,o),n=I()},m(o,s){e&&V(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.Element=o[1]),s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&32&&(l.decorations=o[5]),s&1&&(l.element=o[0]),s&16&&(l.selection=o[4]),r!==(r=nn)){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{H(c,1)}),G()}r?(e=new r(a(o)),z(e.$$.fragment),C(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}else r&&e.$set(l)},i(o){t||(e&&C(e.$$.fragment,o),t=!0)},o(o){e&&y(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&H(e,o)}}}const rn={};function Sr(){const i=ge(rn);if(!i)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return i}function Yi(i,e,n){let t,r,a,o,{parent:s}=e,{element:l}=e,{path:c}=e,{index:u}=e,{decorate:h}=e,{decorations:d}=e,{selection:m=null}=e,{Element:_}=e,{Leaf:D}=e,{Placeholder:M}=e;const w=he(!1);ue(rn,w);const L=Ce();let R=u,U=s,k=l,re=d,T=m;return i.$$set=N=>{"parent"in N&&n(6,s=N.parent),"element"in N&&n(0,l=N.element),"path"in N&&n(7,c=N.path),"index"in N&&n(8,u=N.index),"decorate"in N&&n(9,h=N.decorate),"decorations"in N&&n(10,d=N.decorations),"selection"in N&&n(11,m=N.selection),"Element"in N&&n(1,_=N.Element),"Leaf"in N&&n(2,D=N.Leaf),"Placeholder"in N&&n(3,M=N.Placeholder)},i.$$.update=()=>{i.$$.dirty&4352&&R!==u&&n(12,R=u),i.$$.dirty&8256&&U!==s&&n(13,U=s),i.$$.dirty&16385&&k!==l&&n(14,k=l),i.$$.dirty&33792&&(Rt(re,d)||n(15,re=d)),i.$$.dirty&67584&&(Wt(T,m)||n(16,T=m)),i.$$.dirty&20480&&He.set(k,R),i.$$.dirty&24576&&Ke.set(k,U),i.$$.dirty&4224&&n(18,t=c.concat(R)),i.$$.dirty&262144&&n(17,r=g.range(L,t)),i.$$.dirty&442880&&n(5,a=ln(h([k,t]),r,re)),i.$$.dirty&196608&&n(4,o=T&&P.intersection(r,T)),i.$$.dirty&16&&w.set(!!o)},[l,_,D,M,o,a,s,c,u,h,d,m,R,U,k,re,T,r,t]}class Xi extends j{constructor(e){super();Z(this,e,Yi,qi,Se,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Gi(i){let e,n,t;var r=ye;function a(o){return{props:{Placeholder:o[3],Leaf:o[2],decorations:o[4],isLast:o[5],parent:o[0],text:o[1]}}}return r&&(e=new r(a(i))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&q(e.$$.fragment,o),n=I()},m(o,s){e&&V(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&16&&(l.decorations=o[4]),s&32&&(l.isLast=o[5]),s&1&&(l.parent=o[0]),s&2&&(l.text=o[1]),r!==(r=ye)){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{H(c,1)}),G()}r?(e=new r(a(o)),z(e.$$.fragment),C(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}else r&&e.$set(l)},i(o){t||(e&&C(e.$$.fragment,o),t=!0)},o(o){e&&y(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&H(e,o)}}}function Ji(i,e,n){let t,r,a,o,{parent:s}=e,{text:l}=e,{path:c}=e,{index:u}=e,{isLeafBlock:h}=e,{decorations:d}=e,{decorate:m}=e,{Leaf:_}=e,{Placeholder:D}=e;const M=Ce();let w=u,L=l,R=s,U=d;return i.$$set=k=>{"parent"in k&&n(0,s=k.parent),"text"in k&&n(1,l=k.text),"path"in k&&n(6,c=k.path),"index"in k&&n(7,u=k.index),"isLeafBlock"in k&&n(8,h=k.isLeafBlock),"decorations"in k&&n(9,d=k.decorations),"decorate"in k&&n(10,m=k.decorate),"Leaf"in k&&n(2,_=k.Leaf),"Placeholder"in k&&n(3,D=k.Placeholder)},i.$$.update=()=>{i.$$.dirty&2176&&w!==u&&n(11,w=u),i.$$.dirty&4098&&L!==l&&n(12,L=l),i.$$.dirty&8193&&R!==s&&n(13,R=s),i.$$.dirty&16896&&(Rt(U,d)||n(14,U=d)),i.$$.dirty&6144&&He.set(L,w),i.$$.dirty&12288&&Ke.set(L,R),i.$$.dirty&2112&&n(16,t=c.concat(w)),i.$$.dirty&10496&&n(5,r=h&&w===R.children.length-1),i.$$.dirty&65536&&n(15,a=g.range(M,t)),i.$$.dirty&119808&&n(4,o=ln(m([L,t]),a,U))},[s,l,_,D,o,r,c,u,h,d,m,w,L,R,U,a,t]}class Qi extends j{constructor(e){super();Z(this,e,Ji,Gi,Se,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function on(i,e,n){const t=i.slice();return t[14]=e[n],t[16]=n,t}function ji(i){let e,n;return e=new Qi({props:{Placeholder:i[4],Leaf:i[3],decorations:i[0],parent:i[5],text:i[14],decorate:i[9],index:i[16],path:i[8],isLeafBlock:i[7]}}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&16&&(a.Placeholder=t[4]),r&8&&(a.Leaf=t[3]),r&1&&(a.decorations=t[0]),r&32&&(a.parent=t[5]),r&64&&(a.text=t[14]),r&512&&(a.decorate=t[9]),r&64&&(a.index=t[16]),r&256&&(a.path=t[8]),r&128&&(a.isLeafBlock=t[7]),e.$set(a)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Zi(i){let e,n;return e=new Xi({props:{Element:i[2],Placeholder:i[4],Leaf:i[3],decorations:i[0],selection:i[1],element:i[14],parent:i[5],decorate:i[9],index:i[16],path:i[8]}}),{c(){z(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&4&&(a.Element=t[2]),r&16&&(a.Placeholder=t[4]),r&8&&(a.Leaf=t[3]),r&1&&(a.decorations=t[0]),r&2&&(a.selection=t[1]),r&64&&(a.element=t[14]),r&32&&(a.parent=t[5]),r&512&&(a.decorate=t[9]),r&64&&(a.index=t[16]),r&256&&(a.path=t[8]),e.$set(a)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function an(i,e){let n,t,r,a,o,s;const l=[Zi,ji],c=[];function u(h,d){return d&64&&(t=null),t==null&&(t=!!Ve.isElement(h[14])),t?0:1}return r=u(e,-1),a=c[r]=l[r](e),{key:i,first:null,c(){n=I(),a.c(),o=I(),this.h()},l(h){n=I(),a.l(h),o=I(),this.h()},h(){this.first=n},m(h,d){A(h,n,d),c[r].m(h,d),A(h,o,d),s=!0},p(h,d){e=h;let m=r;r=u(e,d),r===m?c[r].p(e,d):(X(),y(c[m],1,1,()=>{c[m]=null}),G(),a=c[r],a?a.p(e,d):(a=c[r]=l[r](e),a.c()),C(a,1),a.m(o.parentNode,o))},i(h){s||(C(a),s=!0)},o(h){y(a),s=!1},d(h){h&&S(n),c[r].d(h),h&&S(o)}}}function xi(i){let e=[],n=new Map,t,r,a=i[6];const o=s=>fe(s[14]);for(let s=0;s<a.length;s+=1){let l=on(i,a,s),c=o(l);n.set(c,e[s]=an(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=I()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=I()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);A(s,t,l),r=!0},p(s,[l]){l&1023&&(a=s[6],X(),e=wt(e,l,o,1,s,a,n,t.parentNode,pt,an,t,on),G())},i(s){if(!r){for(let l=0;l<a.length;l+=1)C(e[l]);r=!0}},o(s){for(let l=0;l<e.length;l+=1)y(e[l]);r=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&S(t)}}}function ln(i,e,n=[]){for(const t of n){const r=P.intersection(t,e);r&&i.push(r)}return i}function $i(i,e,n){let t,r,a,o,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:u}=e,{Leaf:h}=e,{Placeholder:d}=e;const m=Ce(),_=Yt();ze(i,_,w=>n(12,o=w));let D=s,M=s.children;return i.$$set=w=>{"node"in w&&n(11,s=w.node),"decorations"in w&&n(0,l=w.decorations),"selection"in w&&n(1,c=w.selection),"Element"in w&&n(2,u=w.Element),"Leaf"in w&&n(3,h=w.Leaf),"Placeholder"in w&&n(4,d=w.Placeholder)},i.$$.update=()=>{i.$$.dirty&4096&&n(9,t=o),i.$$.dirty&2080&&D!==s&&n(5,D=s),i.$$.dirty&2112&&M!==s.children&&n(6,M=s.children),i.$$.dirty&32&&n(8,r=be(D)),i.$$.dirty&32&&n(7,a=Ve.isElement(D)&&!m.isInline(D)&&g.hasInlines(m,D))},[l,c,u,h,d,D,M,a,r,t,_,s,o]}class sn extends j{constructor(e){super();Z(this,e,$i,xi,Se,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function er(i){let e,n;const t=i[7].default,r=Le(t,i,i[6],null);return{c(){e=$("div"),r&&r.c(),this.h()},l(a){e=ee(a,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=ie(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-void",i[2]),B(e,"dir",i[4]),B(e,"contenteditable",i[3]),B(e,"class","svelte-19k8gul")},m(a,o){A(a,e,o),r&&r.m(e,null),i[9](e),n=!0},p(a,o){r&&r.p&&(!n||o&64)&&Fe(r,t,a,a[6],n?Pe(t,a[6],o,null):Oe(a[6]),null),(!n||o&4)&&B(e,"data-slate-void",a[2]),(!n||o&16)&&B(e,"dir",a[4]),(!n||o&8)&&B(e,"contenteditable",a[3])},i(a){n||(C(r,a),n=!0)},o(a){y(r,a),n=!1},d(a){a&&S(e),r&&r.d(a),i[9](null)}}}function tr(i){let e,n;const t=i[7].default,r=Le(t,i,i[6],null);return{c(){e=$("span"),r&&r.c(),this.h()},l(a){e=ee(a,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=ie(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-inline",i[1]),B(e,"data-slate-void",i[2]),B(e,"dir",i[4]),B(e,"contenteditable",i[3]),B(e,"class","svelte-19k8gul")},m(a,o){A(a,e,o),r&&r.m(e,null),i[8](e),n=!0},p(a,o){r&&r.p&&(!n||o&64)&&Fe(r,t,a,a[6],n?Pe(t,a[6],o,null):Oe(a[6]),null),(!n||o&2)&&B(e,"data-slate-inline",a[1]),(!n||o&4)&&B(e,"data-slate-void",a[2]),(!n||o&16)&&B(e,"dir",a[4]),(!n||o&8)&&B(e,"contenteditable",a[3])},i(a){n||(C(r,a),n=!0)},o(a){y(r,a),n=!1},d(a){a&&S(e),r&&r.d(a),i[8](null)}}}function nr(i){let e,n,t,r;const a=[tr,er],o=[];function s(l,c){return l[1]?0:1}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),r=!0},p(l,[c]){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),y(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function ir(i,e,n){let{$$slots:t={},$$scope:r}=e,{element:a}=e,{ref:o}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:c}=e,{dir:u=void 0}=e;function h(m){se[m?"unshift":"push"](()=>{o=m,n(0,o)})}function d(m){se[m?"unshift":"push"](()=>{o=m,n(0,o)})}return i.$$set=m=>{"element"in m&&n(5,a=m.element),"ref"in m&&n(0,o=m.ref),"isInline"in m&&n(1,s=m.isInline),"isVoid"in m&&n(2,l=m.isVoid),"contenteditable"in m&&n(3,c=m.contenteditable),"dir"in m&&n(4,u=m.dir),"$$scope"in m&&n(6,r=m.$$scope)},[o,s,l,c,u,a,r,t,h,d]}class rr extends j{constructor(e){super();Z(this,e,ir,nr,ae,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function or(i){let e,n;const t=i[2].default,r=Le(t,i,i[1],null);return{c(){e=$("span"),r&&r.c(),this.h()},l(a){e=ee(a,"SPAN",{"data-slate-leaf":!0});var o=ie(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-leaf","true")},m(a,o){A(a,e,o),r&&r.m(e,null),n=!0},p(a,[o]){r&&r.p&&(!n||o&2)&&Fe(r,t,a,a[1],n?Pe(t,a[1],o,null):Oe(a[1]),null)},i(a){n||(C(r,a),n=!0)},o(a){y(r,a),n=!1},d(a){a&&S(e),r&&r.d(a)}}}function ar(i,e,n){let{$$slots:t={},$$scope:r}=e,{leaf:a}=e;return i.$$set=o=>{"leaf"in o&&n(0,a=o.leaf),"$$scope"in o&&n(1,r=o.$$scope)},[a,r,t]}class lr extends j{constructor(e){super();Z(this,e,ar,or,ae,{leaf:0})}}function sr(i){let e,n,t;const r=i[2].default,a=Le(r,i,i[1],null);return{c(){e=$("span"),a&&a.c(),this.h()},l(o){e=ee(o,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=ie(e);a&&a.l(s),s.forEach(S),this.h()},h(){B(e,"data-slate-placeholder",""),B(e,"contenteditable","false"),B(e,"class","svelte-lqbb94"),vn(()=>i[3].call(e))},m(o,s){A(o,e,s),a&&a.m(e,null),n=Un(e,i[3].bind(e)),t=!0},p(o,[s]){a&&a.p&&(!t||s&2)&&Fe(a,r,o,o[1],t?Pe(r,o[1],s,null):Oe(o[1]),null)},i(o){t||(C(a,o),t=!0)},o(o){y(a,o),t=!1},d(o){o&&S(e),a&&a.d(o),n()}}}function cr(i,e,n){let{$$slots:t={},$$scope:r}=e,{clientHeight:a}=e;function o(){a=this.clientHeight,n(0,a)}return i.$$set=s=>{"clientHeight"in s&&n(0,a=s.clientHeight),"$$scope"in s&&n(1,r=s.$$scope)},[a,r,t,o]}class fr extends j{constructor(e){super();Z(this,e,cr,sr,ae,{clientHeight:0})}}const dr=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ot={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},cn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:dr?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},at={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let i=1;i<20;i++)at["f"+i]=111+i;function fn(i,e={}){Array.isArray(i)||(i=[i]);const n=i.map(t=>ur(t,e));return function(r){return n.some(a=>hr(a,r))}}function Lr(i,e,n={}){return fn(i,n)(e)}function lt(i){return fn(i,{byKey:!0})}function ur(i,e={}){const n=e&&e.byKey,t={};i=i.replace("++","+add");const r=i.split("+"),{length:a}=r;for(const o in ot)t[ot[o]]=!1;for(let o of r){const s=o.endsWith("?")&&o.length>1;s&&(o=o.slice(0,-1));const l=dn(o),c=ot[l];if(o.length>1&&!c&&!cn[o]&&!at[l])throw new TypeError(`Unknown modifier: "${o}"`);(a===1||!c)&&(n?t.key=l:t.which=gr(o)),c&&(t[c]=s?null:!0)}return t}function hr(i,e){for(const n in i){const t=i[n];let r;if(t!=null&&(n==="key"&&e.key!=null?r=e.key.toLowerCase():n==="which"?r=t===91&&e.which===93?91:e.which:r=e[n],!(r==null&&t===!1)&&r!==t))return!1}return!0}function gr(i){return i=dn(i),at[i]||i.toUpperCase().charCodeAt(0)}function dn(i){return i=i.toLowerCase(),i=cn[i]||i,i}const mr={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},_r={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},wr={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function K(i){const e=mr[i],n=_r[i],t=wr[i],r=e&&lt(e),a=n&&lt(n),o=t&&lt(t);return s=>!!(r&&r(s)||Pt&&a&&a(s)||!Pt&&o&&o(s))}var v={isBold:K("bold"),isCompose:K("compose"),isMoveBackward:K("moveBackward"),isMoveForward:K("moveForward"),isDeleteBackward:K("deleteBackward"),isDeleteForward:K("deleteForward"),isDeleteLineBackward:K("deleteLineBackward"),isDeleteLineForward:K("deleteLineForward"),isDeleteWordBackward:K("deleteWordBackward"),isDeleteWordForward:K("deleteWordForward"),isExtendBackward:K("extendBackward"),isExtendForward:K("extendForward"),isExtendLineBackward:K("extendLineBackward"),isExtendLineForward:K("extendLineForward"),isItalic:K("italic"),isMoveLineBackward:K("moveLineBackward"),isMoveLineForward:K("moveLineForward"),isMoveWordBackward:K("moveWordBackward"),isMoveWordForward:K("moveWordForward"),isRedo:K("redo"),isSplitBlock:K("splitBlock"),isTransposeCharacter:K("transposeCharacter"),isUndo:K("undo")};function pr(i){let e,n,t,r,a,o,s,l;n=new sn({props:{node:i[8],selection:i[9],decorations:i[10],Element:i[1],Leaf:i[2],Placeholder:i[3]}});let c=[i[29],{role:t=i[4]?void 0:"textbox"},{spellcheck:i[5]},{autocorrect:i[6]},{autocapitalize:i[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:r=!i[4]},{"z-index":a=-1}],u={};for(let h=0;h<c.length;h+=1)u=je(u,c[h]);return{c(){e=$("div"),z(n.$$.fragment),this.h()},l(h){e=ee(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var d=ie(e);q(n.$$.fragment,d),d.forEach(S),this.h()},h(){Et(e,u),kt(e,"svelte-m59z04",!0)},m(h,d){A(h,e,d),V(n,e,null),i[40](e),o=!0,s||(l=[J(e,"beforeinput",i[13]),J(e,"keydown",i[15]),J(e,"input",i[14]),J(e,"focus",i[16]),J(e,"blur",i[17]),J(e,"click",i[18]),J(e,"compositionend",i[19]),J(e,"compositionupdate",i[20]),J(e,"compositionstart",i[21]),J(e,"paste",i[22]),J(e,"copy",i[23]),J(e,"cut",i[24]),J(e,"dragover",i[25]),J(e,"dragstart",i[26]),J(e,"drop",i[27]),J(e,"dragend",i[28])],s=!0)},p(h,d){const m={};d[0]&256&&(m.node=h[8]),d[0]&512&&(m.selection=h[9]),d[0]&1024&&(m.decorations=h[10]),d[0]&2&&(m.Element=h[1]),d[0]&4&&(m.Leaf=h[2]),d[0]&8&&(m.Placeholder=h[3]),n.$set(m),Et(e,u=qn(c,[d[0]&536870912&&h[29],(!o||d[0]&16&&t!==(t=h[4]?void 0:"textbox"))&&{role:t},(!o||d[0]&32)&&{spellcheck:h[5]},(!o||d[0]&64)&&{autocorrect:h[6]},(!o||d[0]&128)&&{autocapitalize:h[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!o||d[0]&16&&r!==(r=!h[4]))&&{contenteditable:r},{"z-index":a}])),kt(e,"svelte-m59z04",!0)},i(h){o||(C(n.$$.fragment,h),o=!0)},o(h){y(n.$$.fragment,h),o=!1},d(h){h&&S(e),H(n),i[40](null),s=!1,Yn(l)}}}function De(i,e){return ce(e)&&it(i,e)}function x(i,e){return ce(e)&&it(i,e,{editable:!0})}function un(i,e){if(yt.get(i))return!1;{const n=De(i,e)&&de(e);return g.isVoid(i,n)}}function Er(i,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),Qn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function kr(i,e,n){let t,r,a,o,s,l;const c=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let u=bt(e,c),h,d,{Element:m=rr}=e,{Leaf:_=lr}=e,{Placeholder:D=fr}=e,{placeholder:M}=e,{readOnly:w=!1}=e,{autoFocus:L=!1}=e,{decorate:R=Xt}=e,{scrollSelectionIntoView:U=Er}=e,{ref:k=void 0}=e,{spellcheck:re=!0}=e,{autocorrect:T="true"}=e,{autocapitalize:N="true"}=e,{onKeyDown:qe=()=>{}}=e;const st=Ut();ze(i,st,f=>n(39,d=f));const mn=qt(),Ie=gi(),_n=Yt(),Ye=mi();ze(i,Ye,f=>n(38,h=f));const E={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null,readOnly:w};let Xe=[],Ge;function wn(){if(!E.isComposing&&!E.isUpdatingSelection&&!E.isDraggingInternally){const f=Te(t),p=le(t,t),b=f.getSelection();if(f.activeElement===p?(n(35,E.latestElement=f.activeElement,E),ke.set(t,!0),Ie.set(!0)):(ke.delete(t),Ie.set(!1)),!b){W.deselect(t);return}const{anchorNode:F,focusNode:O}=b,Q=x(t,F)||un(t,F),Y=x(t,O)||un(t,O);if(Q&&Y){const oe=Ne(t,b,{exactMatch:!1,suppressThrow:!0});oe&&W.select(t,oe)}}}function ct(){s()}Qe(()=>{const f=$e(k);return f&&(Ze.set(t,f),f.document.addEventListener("selectionchange",ct)),ve.set(t,k),pe.set(t,k),we.set(k,t),()=>{ve.delete(t),pe.delete(t),f&&(Ze.delete(t),f.document.removeEventListener("selectionchange",ct))}});function pn(){const f=Te(t),p=f==null?void 0:f.getSelection();if(E.isComposing||!p||!It(t))return;const b=p.type!=="None";if(!b)return;const F=ve.get(t);let O=!1;if(F.contains(p.anchorNode)&&F.contains(p.focusNode)&&(O=!0),b&&O&&r){const oe=Ne(t,p,{exactMatch:!0,suppressThrow:!0});if(oe&&P.equals(oe,r))return}if(r&&!ui(t,r)){n(8,t.selection=Ne(t,p,{exactMatch:!1,suppressThrow:!1}),t),Ye.set(t.selection);return}E.isUpdatingSelection&&clearTimeout(E.isUpdatingSelection);let Q=setTimeout(()=>{Y&&et&&le(t,t).focus(),Object.assign(E,{isUpdatingSelection:null})});Object.assign(E,{isUpdatingSelection:Q});const Y=r&&O&&Ue(t,r);Y&&(P.isBackward(r)?p.setBaseAndExtent(Y.endContainer,Y.endOffset,Y.startContainer,Y.startOffset):p.setBaseAndExtent(Y.startContainer,Y.startOffset,Y.endContainer,Y.endOffset),U(t,Y))}Xn(()=>l());function En(f){if(!E.readOnly&&x(t,f.target)){const p=f.inputType,b=f.dataTransfer||f.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let F=!1;if(p==="insertText"&&r&&P.isCollapsed(r)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&r.anchor.offset!==0){F=!0,t.marks&&(F=!1);const O=g.above(t,{at:r.anchor,match:Q=>g.isInline(t,Q),mode:"highest"});if(O){const[,Q]=O;g.isEnd(t,r.anchor,Q)&&(F=!1)}}if(F||f.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[O]=f.getTargetRanges();if(O){const Q=Ne(t,O,{exactMatch:!1,suppressThrow:!1});(!r||!P.equals(r,Q))&&W.select(t,Q)}}if(r&&P.isExpanded(r)&&p.startsWith("delete")){const O=p.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:O});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&E.isComposing&&n(35,E.isComposing=!1,E),(b==null?void 0:b.constructor.name)==="DataTransfer"?t.insertData(b):typeof b=="string"&&(F?Xe.push(()=>g.insertText(t,b)):g.insertText(t,b));break}}}}function kn(f){for(const p of Xe)p();Xe.length=0}function bn(f){if(!E.readOnly&&!E.isComposing&&x(t,f.target)){const p=t.children[r!==null?r.focus.path[0]:0],b=Qt(te.string(p))==="rtl";if(v.isRedo(f)){f.preventDefault();const F=t;typeof F.redo=="function"&&F.redo()}else if(v.isUndo(f)){f.preventDefault();const F=t;typeof F.undo=="function"&&F.undo()}else if(v.isMoveLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",reverse:!0});else if(v.isMoveLineForward(f))f.preventDefault(),W.move(t,{unit:"line"});else if(v.isExtendLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus",reverse:!0});else if(v.isExtendLineForward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus"});else if(v.isMoveBackward(f))f.preventDefault(),r&&P.isCollapsed(r)?W.move(t,{reverse:!b}):W.collapse(t,{edge:"start"});else if(v.isMoveForward(f))f.preventDefault(),r&&P.isCollapsed(r)?W.move(t,{reverse:b}):W.collapse(t,{edge:"end"});else if(v.isMoveWordBackward(f))f.preventDefault(),r&&P.isExpanded(r)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:!b});else if(v.isMoveWordForward(f))f.preventDefault(),r&&P.isExpanded(r)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:b});else if(!Nt)v.isBold(f)||v.isItalic(f)||v.isTransposeCharacter(f)?f.preventDefault():v.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):v.isDeleteBackward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):v.isDeleteForward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):v.isDeleteLineBackward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):v.isDeleteLineForward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):v.isDeleteWordBackward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):v.isDeleteWordForward(f)&&(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((Bt||tt)&&r&&(v.isDeleteBackward(f)||v.isDeleteForward(f))&&P.isCollapsed(r)){const F=te.parent(t,r.anchor.path);if(Ve.isElement(F)&&g.isVoid(t,F)&&g.isInline(t,F)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return qe(f)}}}function Cn(f){if(!E.readOnly&&!E.isUpdatingSelection&&x(t,f.target)){const p=le(t,t),b=Te(t);if(n(35,E.latestElement=b.activeElement,E),et&&f.target!==p){p.focus();return}ke.set(t,!0),Ie.set(!0)}}function yn(f){if(E.readOnly||E.isUpdatingSelection||!x(t,f.target))return;const p=Te(t);if(E.latestElement===p.activeElement)return;const b=f.relatedTarget,F=le(t,t);if(b!==F&&!(ne(b)&&b.hasAttribute("data-slate-spacer"))){if(b!=null&&ce(b)&&it(t,b)){const O=de(b);if(Ve.isElement(O)&&!t.isVoid(O))return}if(tt){const O=p.getSelection();O==null||O.removeAllRanges()}ke.delete(t),Ie.set(!1)}}function Dn(f){if(!E.readOnly&&De(t,f.target)&&ce(f.target)){const p=de(f.target),b=be(p);if(g.hasPath(t,b)&&te.get(t,b)===p){const O=g.start(t,b),Q=g.end(t,b),Y=g.void(t,{at:O}),oe=g.void(t,{at:Q});if(Y&&oe&&_e.equals(Y[1],oe[1])){const Rn=g.range(t,O);W.select(t,Rn)}}}}function Sn(f){if(x(t,f.target)){n(35,E.isComposing=!1,E);const p=f.data;if(!tt&&!si&&!oi&&!ci&&p&&g.insertText(t,p),r&&P.isCollapsed(r)){const b=r.anchor.path,F=te.leaf(t,b);E.hasInsertPrefixInCompositon&&(n(35,E.hasInsertPrefixInCompositon=!1,E),g.withoutNormalizing(t,()=>{const O=F.text.replace(/^\uFEFF/,"");W.delete(t,{distance:F.text.length,reverse:!0}),W.insertText(t,O)}))}}}function Ln(f){x(t,f.target)&&n(35,E.isComposing=!0,E)}function Fn(f){if(x(t,f.target)){const{selection:p,marks:b}=t;if(p){if(P.isExpanded(p)){g.deleteFragment(t);return}const F=g.above(t,{match:O=>g.isInline(t,O),mode:"highest"});if(F){const[,O]=F;if(g.isEnd(t,p.anchor,O)){const Q=g.after(t,O);W.setSelection(t,{anchor:Q,focus:Q})}}b&&(n(35,E.hasInsertPrefixInCompositon=!0,E),W.insertNodes(t,ht({text:"\uFEFF"},b),{select:!0}))}}}function On(f){!E.readOnly&&x(t,f.target)&&(!Nt||$n(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}function Pn(f){x(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}function Bn(f){if(!E.readOnly&&x(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),r))if(P.isExpanded(r))g.deleteFragment(t);else{const p=te.parent(t,r.anchor.path);g.isVoid(t,p)&&W.delete(t)}}function Tn(f){if(De(t,f.target)){const p=de(f.target);g.isVoid(t,p)&&f.preventDefault()}}function Nn(f){if(!E.readOnly&&De(t,f.target)){const p=de(f.target),b=be(p);if(g.isVoid(t,p)||g.void(t,{at:b,voids:!0})){const O=g.range(t,b);W.select(t,O)}n(35,E.isDraggingInternally=!0,E),t.setFragmentData(f.dataTransfer)}}function In(f){if(!E.readOnly&&De(t,f.target)){f.preventDefault();const p=r,b=di(t,f),F=f.dataTransfer;W.select(t,b),E.isDraggingInternally&&(p&&!P.equals(p,b)&&!g.void(t,{at:b,voids:!0})&&W.delete(t,{at:p}),n(35,E.isDraggingInternally=!1,E)),t.insertData(F),It(t)||fi(t)}}function An(f){!E.readOnly&&E.isDraggingInternally&&De(t,f.target)&&n(35,E.isDraggingInternally=!1,E)}function Mn(f){se[f?"unshift":"push"](()=>{k=f,n(0,k)})}return i.$$set=f=>{e=je(je({},e),Gn(f)),n(29,u=bt(e,c)),"Element"in f&&n(1,m=f.Element),"Leaf"in f&&n(2,_=f.Leaf),"Placeholder"in f&&n(3,D=f.Placeholder),"placeholder"in f&&n(30,M=f.placeholder),"readOnly"in f&&n(4,w=f.readOnly),"autoFocus"in f&&n(31,L=f.autoFocus),"decorate"in f&&n(32,R=f.decorate),"scrollSelectionIntoView"in f&&n(33,U=f.scrollSelectionIntoView),"ref"in f&&n(0,k=f.ref),"spellcheck"in f&&n(5,re=f.spellcheck),"autocorrect"in f&&n(6,T=f.autocorrect),"autocapitalize"in f&&n(7,N=f.autocapitalize),"onKeyDown"in f&&n(34,qe=f.onKeyDown)},i.$$.update=()=>{if(i.$$.dirty[1]&256&&n(8,t=d),i.$$.dirty[1]&128&&n(9,r=h),i.$$.dirty[0]&256|i.$$.dirty[1]&2&&n(10,a=R([t,[]])),i.$$.dirty[0]&272&&yt.set(t,w),i.$$.dirty[0]&16&&mn.set(w),i.$$.dirty[0]&16&&n(35,E.readOnly=w,E),i.$$.dirty[1]&2&&_n.set(R),i.$$.dirty[0]&1073742080|i.$$.dirty[1]&18&&t.children.length===1&&Array.from(te.texts(t)).length===1&&te.string(t)===""&&!E.isComposing){const f=g.start(t,[]);n(10,a=[...R([t,[]]),{[Be]:!0,placeholder:M,anchor:f,focus:f}])}i.$$.dirty[0]&1|i.$$.dirty[1]&33&&Ge!==L&&k&&(L&&k.focus(),n(36,Ge=L)),i.$$.dirty[1]&64&&(s=Jn(0,o))},n(37,o=()=>Ct().then(wn)),l=()=>Ct().then(pn),[k,m,_,D,w,re,T,N,t,r,a,st,Ye,En,kn,bn,Cn,yn,Dn,Sn,Ln,Fn,On,Pn,Bn,Tn,Nn,In,An,u,M,L,R,U,qe,E,Ge,o,h,d,Mn]}class Fr extends j{constructor(e){super();Z(this,e,kr,pr,Se,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function hn(i,e){const n=(e.top+e.bottom)/2;return i.top<=n&&i.bottom>=n}function gn(i,e,n){const t=Ue(i,e).getBoundingClientRect(),r=Ue(i,n).getBoundingClientRect();return hn(t,r)&&hn(r,t)}function br(i,e){const n=g.range(i,P.end(e)),t=Array.from(g.positions(i,{at:e}));let r=0,a=t.length,o=Math.floor(a/2);if(gn(i,g.range(i,t[r]),n))return g.range(i,t[r],n);if(t.length<2)return g.range(i,t[t.length-1],n);for(;o!==t.length&&o!==r;)gn(i,g.range(i,t[o]),n)?a=o:r=o,o=Math.floor((r+a)/2);return g.range(i,t[a],n)}function Or(i){const e=i,{apply:n,onChange:t,deleteBackward:r}=e;return Ee.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return r(a);if(i.selection&&P.isCollapsed(i.selection)){const o=g.above(i,{match:s=>g.isBlock(i,s),at:i.selection});if(o){const[,s]=o,l=g.range(i,s,i.selection.anchor),c=br(e,l);P.isCollapsed(c)||W.delete(i,{at:c})}}},e.apply=a=>{const o=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=fe(s);o.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:_e.parent(a.path)})){const c=fe(s);o.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:_e.common(_e.parent(a.path),_e.parent(a.newPath))})){const c=fe(s);o.push([l,c])}break}}n(a);for(const[s,l]of o){const[c]=g.node(e,s);xe.set(c,l)}},e.setFragmentData=a=>{const{selection:o}=e;if(!o)return;const[s,l]=P.edges(o),c=g.void(e,{at:s.path}),u=g.void(e,{at:l.path});if(P.isCollapsed(o)&&!c)return;const h=Ue(e,o);let d=h.cloneContents(),m=d.childNodes[0];if(d.childNodes.forEach(L=>{L.textContent&&L.textContent.trim()!==""&&(m=L)}),u){const[L]=u,R=h.cloneRange(),U=le(e,L);R.setEndAfter(U),d=R.cloneContents()}if(c&&(m=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(L=>{const R=L.getAttribute("data-slate-zero-width")==="n";L.textContent=R?`
`:""}),Lt(m)){const L=document.createElement("span");L.style.whiteSpace="pre",L.appendChild(m),d.appendChild(L),m=L}const _=e.getFragment(),D=JSON.stringify(_),M=window.btoa(encodeURIComponent(D));m.setAttribute("data-slate-fragment",M),a.setData("application/x-slate-fragment",M);const w=document.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),document.body.appendChild(w),a.setData("text/html",w.innerHTML),a.setData("text/plain",Ot(w)),document.body.removeChild(w),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const o=a.getData("application/x-slate-fragment")||ri(a);if(o){const s=decodeURIComponent(window.atob(o)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const o=a.getData("text/plain");if(o){const s=o.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&W.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=Dt.get(e);a&&a(),t()},e}export{Fr as E,Dr as S,Sr as a,gi as b,qt as c,mi as d,be as f,Ce as g,Lr as i,Or as w};
