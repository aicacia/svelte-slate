var zn=Object.defineProperty;var Ie=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var ct=(n,e,t)=>e in n?zn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dt=(n,e)=>{for(var t in e||(e={}))ft.call(e,t)&&ct(n,t,e[t]);if(Ie)for(var t of Ie(e))ut.call(e,t)&&ct(n,t,e[t]);return n};var Je=(n,e)=>{var t={};for(var o in n)ft.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&Ie)for(var o of Ie(n))e.indexOf(o)<0&&ut.call(n,o)&&(t[o]=n[o]);return t};import{a1 as m,a2 as O,D as vn,r as Vn,a3 as Hn,a4 as Kn,S as J,i as Q,s as ne,F as Se,J as Fe,K as Oe,L as Te,q as b,o as y,a5 as xn,t as ze,h as ve,g as A,d as D,e as ee,c as te,a as oe,b as L,I as Rt,j as Wt,M as ke,a6 as qn,O as ae,a7 as Ve,l as B,n as U,p as X,a8 as pe,w as R,x as q,y as W,B as z,a9 as Z,aa as Yn,ab as Un,C as $e,ac as ht,ad as gt,ae as Y,z as Xn,af as Gn,ag as mt,ah as fe,v as Jn,u as Qn,E as _t,ai as jn,aj as Zn,ak as P,al as Me,am as $n,an as eo,Q as zt,P as Pe,ao as vt,ap as Vt,aq as to}from"./vendor-70ee783b.js";const Ht="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Kt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",no=new RegExp("^[^"+Kt+"]*["+Ht+"]"),oo=new RegExp("^[^"+Ht+"]*["+Kt+"]");function xt(n){const e=String(n||"");return no.test(e)?"rtl":oo.test(e)?"ltr":"neutral"}let io=0;class ro{constructor(){this.id=`${io++}`}toString(){return this.id}}const He=new WeakMap,Ke=new WeakMap,et=new WeakMap,Ae=new WeakMap,xe=new WeakMap,Re=new WeakMap,tt=new WeakMap,qe=new WeakMap,qt=new WeakMap,we=new WeakMap,Yt=new WeakMap,De=Symbol("placeholder");function ot(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView||null}function so(n){return he(n)&&n.nodeType===8}function $(n){return he(n)&&n.nodeType===1}function he(n){const e=ot(n);return!!e&&n instanceof e.Node}function pt(n){const e=n&&n.anchorNode&&ot(n.anchorNode);return!!e&&n instanceof e.Selection}function Ut(n){return he(n)&&n.nodeType===3}function ao(n){return n.clipboardData&&n.clipboardData.getData("text/plain")!==""&&n.clipboardData.types.length===1}function lo(n){let[e,t]=n;if($(e)&&e.childNodes.length){let o=t===e.childNodes.length,s=o?t-1:t;for([e,s]=Xt(e,s,o?"backward":"forward"),o=s<t;$(e)&&e.childNodes.length;){const r=o?e.childNodes.length-1:0;e=fo(e,r,o?"backward":"forward")}t=o&&e.textContent!=null?e.textContent.length:0}return[e,t]}function co(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Xt(n,e,t){const{childNodes:o}=n;let s=o[e],r=e,i=!1,l=!1;for(;(so(s)||$(s)&&s.childNodes.length===0||$(s)&&s.getAttribute("contenteditable")==="false")&&!(i&&l);){if(r>=o.length){i=!0,r=e-1,t="backward";continue}if(r<0){l=!0,r=e+1,t="forward";continue}s=o[r],e=r,r+=t==="forward"?1:-1}return[s,e]}function fo(n,e,t){const[o]=Xt(n,e,t);return o}function Gt(n){let e="";if(Ut(n)&&n.nodeValue)return n.nodeValue;if($(n)){for(const o of Array.from(n.childNodes))e+=Gt(o);const t=getComputedStyle(n).getPropertyValue("display");(t==="block"||t==="list"||n.tagName==="BR")&&(e+=`
`)}return e}const uo=/data-slate-fragment="(.+?)"/m;function ho(n){const e=n.getData("text/html"),[,t]=e.match(uo)||[];return t}const go=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,wt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const nt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Qe=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),mo=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Jt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),_o=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),po=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),wo=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),kt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Et=!_o&&!mo&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function it(n){const e=et.get(n);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function de(n){let e=tt.get(n);return e||(e=new ro,tt.set(n,e)),e}function Ee(n){const e=[];let t=n;for(;;){const o=Ke.get(t);if(o==null){if(m.isEditor(t))return e;break}const s=He.get(t);if(s==null)break;e.unshift(s),t=o}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(n)}`)}function ye(n){const e=se(n,n),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:e.ownerDocument}function bt(n){return!!we.get(n)}function ko(n){const e=se(n,n),t=ye(n);we.set(n,!0),t.activeElement!==e&&e.focus({preventScroll:!0})}function rt(n,e,t={}){const{editable:o=!1}=t,s=se(n,n);let r;try{r=$(e)?e:e.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return r?r.closest("[data-svelte-editor]")===s&&(!o||r.isContentEditable?!0:typeof r.isContentEditable=="boolean"&&r.closest('[contenteditable="false"]')===s||!!r.getAttribute("data-slate-zero-width")):!1}function se(n,e,t=!0){const o=qe.get(n),s=m.isEditor(e)?Ae.get(n):o==null?void 0:o.get(de(e));if(!s&&t)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return s}function yt(n,e,t=!0){const[o]=m.node(n,e.path),s=se(n,o,t);let r;m.void(n,{at:e})&&(e={path:e.path,offset:0});const i="[data-slate-string], [data-slate-zero-width]",l=s?Array.from(s.querySelectorAll(i)):[];let a=0;for(const f of l){const h=f.childNodes[0];if(h==null||h.textContent==null)continue;const{length:d}=h.textContent,g=f.getAttribute("data-slate-length"),_=g==null?d:parseInt(g,10),p=a+_;if(e.offset<=p){const S=Math.min(d,Math.max(0,e.offset-a));r=[h,S];break}a=p}if(!r&&t)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return r}function We(n,e,t=!0){const{anchor:o,focus:s}=e,r=O.isBackward(e),i=yt(n,o,t);if(!i)return;const l=O.isCollapsed(e)?i:yt(n,s),f=it(n).document.createRange(),[h,d]=r?l:i,[g,_]=r?i:l,S=!!($(h)?h:h.parentElement).getAttribute("data-slate-zero-width"),T=!!($(g)?g:g.parentElement).getAttribute("data-slate-zero-width");return f.setStart(h,S?1:d),f.setEnd(g,T?1:_),f}function ue(n){let e=$(n)?n:n.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const t=e?xe.get(e):null;if(!t)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return t}function Eo(n,e){const{clientX:t,clientY:o,target:s}=e;if(t==null||o==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const r=ue(e.target),i=Ee(r);if(m.isVoid(n,r)){const h=s.getBoundingClientRect(),d=n.isInline(r)?t-h.left<h.left+h.width-t:o-h.top<h.top+h.height-o,g=m.point(n,i,{edge:d?"start":"end"}),_=d?m.before(n,g):m.after(n,g);if(_)return m.range(n,_)}let l;const{document:a}=it(n);if(a.caretRangeFromPoint)l=a.caretRangeFromPoint(t,o);else{const h=a.caretPositionFromPoint(t,o);h&&(l=a.createRange(),l.setStart(h.offsetNode,h.offset),l.setEnd(h.offsetNode,h.offset))}if(!l)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Ce(n,l,{exactMatch:!1,suppressThrow:!1})}function Ct(n,e,t){var g;const{exactMatch:o,suppressThrow:s}=t,[r,i]=o?e:lo(e),l=r.parentNode;let a=null,f=0;if(l){const _=l.closest('[data-slate-void="true"]');let p=l.closest("[data-slate-leaf]"),S=null;if(p){if(a=p.closest('[data-slate-node="text"]'),a){const T=it(n).document.createRange();T.setStart(a,0),T.setEnd(r,i);const F=T.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(I=>{I.parentNode.removeChild(I)}),f=F.textContent.length,S=a}}else _&&(p=_.querySelector("[data-slate-leaf]"),p?(a=p.closest('[data-slate-node="text"]'),S=p,f=S.textContent.length,S.querySelectorAll("[data-slate-zero-width]").forEach(C=>{f-=C.textContent.length})):f=1);S&&f===S.textContent.length&&(l.hasAttribute("data-slate-zero-width")||nt&&((g=S.textContent)==null?void 0:g.endsWith(`

`)))&&f--}if(!a){if(s)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const h=ue(a);return{path:Ee(h),offset:f}}function Ce(n,e,t){const{exactMatch:o,suppressThrow:s}=t,r=pt(e)?e.anchorNode:e.startContainer;let i,l,a,f,h;if(r&&(pt(e)?(i=e.anchorNode,l=e.anchorOffset,a=e.focusNode,f=e.focusOffset,Jt&&co()?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed):(i=e.startContainer,l=e.startOffset,a=e.endContainer,f=e.endOffset,h=e.collapsed)),i==null||a==null||l==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const d=Ct(n,[i,l],{exactMatch:o,suppressThrow:s});if(!d)return null;const g=h?d:Ct(n,[a,f],{exactMatch:o,suppressThrow:s});if(!g)return null;let _={anchor:d,focus:g};return O.isExpanded(_)&&O.isForward(_)&&$(a)&&m.void(n,{at:_.focus,mode:"highest"})&&(_=m.unhangRange(n,_,{voids:!0})),_}function bo(n,e){const{anchor:t,focus:o}=e;return m.hasPath(n,t.path)&&m.hasPath(n,o.path)}function Qt(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let s=0;s<n.length;s++){const r=n[s],i=e[s],t=r,{anchor:l,focus:a}=t,f=Je(t,["anchor","focus"]),o=i,{anchor:h,focus:d}=o,g=Je(o,["anchor","focus"]);if(!O.equals(r,i)||r[De]!==i[De]||!Kn(f,g))return!1}return!0}function jt(n,e){return n===e||!!n&&!!e&&O.equals(n,e)}function ce(){return{}}function le(n){const e=Hn(n);if(!e)throw new Error("Must be used inside the Slate component's context.");return e}function re(n,e){const t=vn(e);return Vn(n,t),t}function yo(n){let e;const t=n[7].default,o=Se(t,n,n[6],null);return{c(){o&&o.c()},l(s){o&&o.l(s)},m(s,r){o&&o.m(s,r),e=!0},p(s,[r]){o&&o.p&&(!e||r&64)&&Fe(o,t,s,s[6],e?Te(t,s[6],r,null):Oe(s[6]),null)},i(s){e||(b(o,s),e=!0)},o(s){y(o,s),e=!1},d(s){o&&o.d(s)}}}const Zt=ce(),$t=ce(),en=ce(),tn=ce(),nn=ce();function on(){return le(Zt)}function ge(){return xn(on())}function rn(){return le($t)}function Co(){return le(en)}function st(){return le(tn)}function Do(){return le(nn)}function sn(n){return[]}function So(n,e,t){let{$$slots:o={},$$scope:s}=e,{editor:r}=e,{value:i=r.children}=e,{selection:l=r.selection}=e;const a=re(Zt,r),f=re(nn,r.selection);re($t,!0),re(en,!1),re(tn,sn);function h(){t(1,l=r.selection),t(0,i=r.children)}Yt.set(r,h);let d=r,g,_;return n.$$set=p=>{"editor"in p&&t(2,r=p.editor),"value"in p&&t(0,i=p.value),"selection"in p&&t(1,l=p.selection),"$$scope"in p&&t(6,s=p.$$scope)},n.$$.update=()=>{n.$$.dirty&12&&r!==d&&(t(3,d=r),a.set(r)),n.$$.dirty&17&&g!==i&&(a.update(p=>(p.children=i,p)),t(4,g=i)),n.$$.dirty&38&&(jt(_,l)||(f.set(l),a.set(r),t(5,_=l)))},[i,l,r,d,g,_,s,o]}class Ii extends J{constructor(e){super();Q(this,e,So,yo,ne,{editor:2,value:0,selection:1})}}function Dt(n){let e=`
`,t;return{c(){t=ze(e)},l(o){t=ve(o,e)},m(o,s){A(o,t,s)},d(o){o&&D(t)}}}function Fo(n){let e,t=n[0].text+"",o,s=n[1]&&Dt();return{c(){e=ee("span"),o=ze(t),s&&s.c(),this.h()},l(r){e=te(r,"SPAN",{"data-slate-string":!0});var i=oe(e);o=ve(i,t),s&&s.l(i),i.forEach(D),this.h()},h(){L(e,"data-slate-string","true")},m(r,i){A(r,e,i),Rt(e,o),s&&s.m(e,null),n[3](e)},p(r,[i]){i&1&&t!==(t=r[0].text+"")&&Wt(o,t),r[1]?s||(s=Dt(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:ke,o:ke,d(r){r&&D(e),s&&s.d(),n[3](null)}}}function Oo(n,e,t){let{leaf:o}=e,{isTrailing:s=!1}=e,r;qn(()=>{r&&t(2,r.textContent=o.text,r)});function i(l){ae[l?"unshift":"push"](()=>{r=l,t(2,r)})}return n.$$set=l=>{"leaf"in l&&t(0,o=l.leaf),"isTrailing"in l&&t(1,s=l.isTrailing)},[o,s,r,i]}class To extends J{constructor(e){super();Q(this,e,Oo,Fo,ne,{leaf:0,isTrailing:1})}}function St(n){let e;return{c(){e=ee("br")},l(t){e=te(t,"BR",{})},m(t,o){A(t,e,o)},d(t){t&&D(e)}}}function No(n){let e,t="\uFEFF",o,s,r=n[1]&&St();return{c(){e=ee("span"),o=ze(t),r&&r.c(),this.h()},l(i){e=te(i,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var l=oe(e);o=ve(l,t),r&&r.l(l),l.forEach(D),this.h()},h(){L(e,"data-slate-zero-width",s=n[1]?"n":"z"),L(e,"data-slate-length",n[0])},m(i,l){A(i,e,l),Rt(e,o),r&&r.m(e,null)},p(i,[l]){i[1]?r||(r=St(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),l&2&&s!==(s=i[1]?"n":"z")&&L(e,"data-slate-zero-width",s),l&1&&L(e,"data-slate-length",i[0])},i:ke,o:ke,d(i){i&&D(e),r&&r.d()}}}function Lo(n,e,t){let{length:o=0}=e,{isLineBreak:s=!1}=e;return n.$$set=r=>{"length"in r&&t(0,o=r.length),"isLineBreak"in r&&t(1,s=r.isLineBreak)},[o,s]}class at extends J{constructor(e){super();Q(this,e,Lo,No,Ve,{length:0,isLineBreak:1})}}function Bo(n){let e,t;return e=new To({props:{isTrailing:n[5],leaf:n[0]}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p(o,s){const r={};s&32&&(r.isTrailing=o[5]),s&1&&(r.leaf=o[0]),e.$set(r)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Io(n){let e,t;return e=new at({}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p:ke,i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Ao(n){let e,t;return e=new at({props:{isLineBreak:!0}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p:ke,i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Mo(n){let e,t;return e=new at({props:{length:Z.string(n[1]).length}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p(o,s){const r={};s&2&&(r.length=Z.string(o[1]).length),e.$set(r)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function Po(n){let e,t,o,s;const r=[Mo,Ao,Io,Bo],i=[];function l(a,f){return a[4]?0:a[3]?1:a[2]?2:3}return e=l(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(a){t.l(a),o=B()},m(a,f){i[e].m(a,f),A(a,o,f),s=!0},p(a,[f]){let h=e;e=l(a),e===h?i[e].p(a,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(a,f):(t=i[e]=r[e](a),t.c()),b(t,1),t.m(o.parentNode,o))},i(a){s||(b(t),s=!0)},o(a){y(t),s=!1},d(a){i[e].d(a),a&&D(o)}}}function Ro(n,e,t){let o,s,r,i,l,a,{isLast:f}=e,{leaf:h}=e,{parent:d}=e,{text:g}=e;const _=ge();return n.$$set=p=>{"isLast"in p&&t(6,f=p.isLast),"leaf"in p&&t(0,h=p.leaf),"parent"in p&&t(1,d=p.parent),"text"in p&&t(7,g=p.text)},n.$$.update=()=>{n.$$.dirty&65&&t(5,o=f&&h.text.slice(-1)===`
`),n.$$.dirty&128&&t(9,s=Ee(g)),n.$$.dirty&512&&t(8,r=pe.parent(s)),n.$$.dirty&2&&t(4,i=_.isVoid(d)),n.$$.dirty&1&&t(2,l=h.text===""),n.$$.dirty&390&&t(3,a=l&&d.children[d.children.length-1]===g&&!_.isInline(d)&&m.string(_,r)==="")},[h,d,l,a,i,o,f,g,r,s]}class Wo extends J{constructor(e){super();Q(this,e,Ro,Po,ne,{isLast:6,leaf:0,parent:1,text:7})}}function zo(n){let e,t;const o=n[7].default,s=Se(o,n,n[6],null);return{c(){e=ee("div"),s&&s.c(),this.h()},l(r){e=te(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=oe(e);s&&s.l(i),i.forEach(D),this.h()},h(){L(e,"data-slate-node","element"),L(e,"data-slate-void",n[2]),L(e,"dir",n[4]),L(e,"contenteditable",n[3]),L(e,"class","svelte-19k8gul")},m(r,i){A(r,e,i),s&&s.m(e,null),n[9](e),t=!0},p(r,i){s&&s.p&&(!t||i&64)&&Fe(s,o,r,r[6],t?Te(o,r[6],i,null):Oe(r[6]),null),(!t||i&4)&&L(e,"data-slate-void",r[2]),(!t||i&16)&&L(e,"dir",r[4]),(!t||i&8)&&L(e,"contenteditable",r[3])},i(r){t||(b(s,r),t=!0)},o(r){y(s,r),t=!1},d(r){r&&D(e),s&&s.d(r),n[9](null)}}}function vo(n){let e,t;const o=n[7].default,s=Se(o,n,n[6],null);return{c(){e=ee("span"),s&&s.c(),this.h()},l(r){e=te(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=oe(e);s&&s.l(i),i.forEach(D),this.h()},h(){L(e,"data-slate-node","element"),L(e,"data-slate-inline",n[1]),L(e,"data-slate-void",n[2]),L(e,"dir",n[4]),L(e,"contenteditable",n[3]),L(e,"class","svelte-19k8gul")},m(r,i){A(r,e,i),s&&s.m(e,null),n[8](e),t=!0},p(r,i){s&&s.p&&(!t||i&64)&&Fe(s,o,r,r[6],t?Te(o,r[6],i,null):Oe(r[6]),null),(!t||i&2)&&L(e,"data-slate-inline",r[1]),(!t||i&4)&&L(e,"data-slate-void",r[2]),(!t||i&16)&&L(e,"dir",r[4]),(!t||i&8)&&L(e,"contenteditable",r[3])},i(r){t||(b(s,r),t=!0)},o(r){y(s,r),t=!1},d(r){r&&D(e),s&&s.d(r),n[8](null)}}}function Vo(n){let e,t,o,s;const r=[vo,zo],i=[];function l(a,f){return a[1]?0:1}return e=l(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(a){t.l(a),o=B()},m(a,f){i[e].m(a,f),A(a,o,f),s=!0},p(a,[f]){let h=e;e=l(a),e===h?i[e].p(a,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(a,f):(t=i[e]=r[e](a),t.c()),b(t,1),t.m(o.parentNode,o))},i(a){s||(b(t),s=!0)},o(a){y(t),s=!1},d(a){i[e].d(a),a&&D(o)}}}function Ho(n,e,t){let{$$slots:o={},$$scope:s}=e,{element:r}=e,{ref:i}=e,{isInline:l}=e,{isVoid:a}=e,{contenteditable:f}=e,{dir:h=void 0}=e;function d(_){ae[_?"unshift":"push"](()=>{i=_,t(0,i)})}function g(_){ae[_?"unshift":"push"](()=>{i=_,t(0,i)})}return n.$$set=_=>{"element"in _&&t(5,r=_.element),"ref"in _&&t(0,i=_.ref),"isInline"in _&&t(1,l=_.isInline),"isVoid"in _&&t(2,a=_.isVoid),"contenteditable"in _&&t(3,f=_.contenteditable),"dir"in _&&t(4,h=_.dir),"$$scope"in _&&t(6,s=_.$$scope)},[i,l,a,f,h,r,s,o,d,g]}class Ko extends J{constructor(e){super();Q(this,e,Ho,Vo,Ve,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function xo(n){let e,t;const o=n[2].default,s=Se(o,n,n[1],null);return{c(){e=ee("span"),s&&s.c(),this.h()},l(r){e=te(r,"SPAN",{"data-slate-leaf":!0});var i=oe(e);s&&s.l(i),i.forEach(D),this.h()},h(){L(e,"data-slate-leaf","true")},m(r,i){A(r,e,i),s&&s.m(e,null),t=!0},p(r,[i]){s&&s.p&&(!t||i&2)&&Fe(s,o,r,r[1],t?Te(o,r[1],i,null):Oe(r[1]),null)},i(r){t||(b(s,r),t=!0)},o(r){y(s,r),t=!1},d(r){r&&D(e),s&&s.d(r)}}}function qo(n,e,t){let{$$slots:o={},$$scope:s}=e,{leaf:r}=e;return n.$$set=i=>{"leaf"in i&&t(0,r=i.leaf),"$$scope"in i&&t(1,s=i.$$scope)},[r,s,o]}class Yo extends J{constructor(e){super();Q(this,e,qo,xo,Ve,{leaf:0})}}function Uo(n){let e,t,o;const s=n[2].default,r=Se(s,n,n[1],null);return{c(){e=ee("span"),r&&r.c(),this.h()},l(i){e=te(i,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var l=oe(e);r&&r.l(l),l.forEach(D),this.h()},h(){L(e,"data-slate-placeholder","true"),L(e,"contenteditable","false"),L(e,"class","svelte-lqbb94"),Yn(()=>n[3].call(e))},m(i,l){A(i,e,l),r&&r.m(e,null),t=Un(e,n[3].bind(e)),o=!0},p(i,[l]){r&&r.p&&(!o||l&2)&&Fe(r,s,i,i[1],o?Te(s,i[1],l,null):Oe(i[1]),null)},i(i){o||(b(r,i),o=!0)},o(i){y(r,i),o=!1},d(i){i&&D(e),r&&r.d(i),t()}}}function Xo(n,e,t){let{$$slots:o={},$$scope:s}=e,{clientHeight:r=void 0}=e;function i(){r=this.clientHeight,t(0,r)}return n.$$set=l=>{"clientHeight"in l&&t(0,r=l.clientHeight),"$$scope"in l&&t(1,s=l.$$scope)},[r,s,o,i]}class Go extends J{constructor(e){super();Q(this,e,Xo,Uo,Ve,{clientHeight:0})}}const Jo=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),je={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},an={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Jo?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},lt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let n=1;n<20;n++)lt["f"+n]=111+n;function ln(n,e={}){Array.isArray(n)||(n=[n]);const t=n.map(o=>Qo(o,e));return function(s){return t.some(r=>jo(r,s))}}function Ai(n,e,t={}){return ln(n,t)(e)}function Ze(n){return ln(n,{byKey:!0})}function Qo(n,e={}){const t=e&&e.byKey,o={};n=n.replace("++","+add");const s=n.split("+"),{length:r}=s;for(const i in je)o[je[i]]=!1;for(let i of s){const l=i.endsWith("?")&&i.length>1;l&&(i=i.slice(0,-1));const a=cn(i),f=je[a];if(i.length>1&&!f&&!an[i]&&!lt[a])throw new TypeError(`Unknown modifier: "${i}"`);(r===1||!f)&&(t?o.key=a:o.which=Zo(i)),f&&(o[f]=l?null:!0)}return o}function jo(n,e){for(const t in n){const o=n[t];let s;if(o!=null&&(t==="key"&&e.key!=null?s=e.key.toLowerCase():t==="which"?s=o===91&&e.which===93?91:e.which:s=e[t],!(s==null&&o===!1)&&s!==o))return!1}return!0}function Zo(n){return n=cn(n),lt[n]||n.toUpperCase().charCodeAt(0)}function cn(n){return n=n.toLowerCase(),n=an[n]||n,n}const $o={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ei={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ti={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function H(n){const e=$o[n],t=ei[n],o=ti[n],s=e&&Ze(e),r=t&&Ze(t),i=o&&Ze(o);return l=>!!(s&&s(l)||wt&&r&&r(l)||!wt&&i&&i(l))}var K={isBold:H("bold"),isCompose:H("compose"),isMoveBackward:H("moveBackward"),isMoveForward:H("moveForward"),isDeleteBackward:H("deleteBackward"),isDeleteForward:H("deleteForward"),isDeleteLineBackward:H("deleteLineBackward"),isDeleteLineForward:H("deleteLineForward"),isDeleteWordBackward:H("deleteWordBackward"),isDeleteWordForward:H("deleteWordForward"),isExtendBackward:H("extendBackward"),isExtendForward:H("extendForward"),isExtendLineBackward:H("extendLineBackward"),isExtendLineForward:H("extendLineForward"),isItalic:H("italic"),isMoveLineBackward:H("moveLineBackward"),isMoveLineForward:H("moveLineForward"),isMoveWordBackward:H("moveWordBackward"),isMoveWordForward:H("moveWordForward"),isRedo:H("redo"),isSplitBlock:H("splitBlock"),isTransposeCharacter:H("transposeCharacter"),isUndo:H("undo")};function ni(n){let e,t,o,s,r,i,l,a;t=new gn({props:{node:n[6],selection:n[7],decorations:n[5]}});let f=[n[26],{role:o=n[4].readOnly?void 0:"textbox"},{spellcheck:n[1]},{autocorrect:n[2]},{autocapitalize:n[3]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:s=!n[4].readOnly},{"z-index":r=-1}],h={};for(let d=0;d<f.length;d+=1)h=$e(h,f[d]);return{c(){e=ee("div"),R(t.$$.fragment),this.h()},l(d){e=te(d,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var g=oe(e);q(t.$$.fragment,g),g.forEach(D),this.h()},h(){ht(e,h),gt(e,"svelte-m59z04",!0)},m(d,g){A(d,e,g),W(t,e,null),n[38](e),i=!0,l||(a=[Y(e,"beforeinput",n[10]),Y(e,"keydown",n[12]),Y(e,"input",n[11]),Y(e,"focus",n[13]),Y(e,"blur",n[14]),Y(e,"click",n[15]),Y(e,"compositionend",n[16]),Y(e,"compositionupdate",n[17]),Y(e,"compositionstart",n[18]),Y(e,"paste",n[19]),Y(e,"copy",n[20]),Y(e,"cut",n[21]),Y(e,"dragover",n[22]),Y(e,"dragstart",n[23]),Y(e,"drop",n[24]),Y(e,"dragend",n[25])],l=!0)},p(d,g){const _={};g[0]&64&&(_.node=d[6]),g[0]&128&&(_.selection=d[7]),g[0]&32&&(_.decorations=d[5]),t.$set(_),ht(e,h=Xn(f,[g[0]&67108864&&d[26],(!i||g[0]&16&&o!==(o=d[4].readOnly?void 0:"textbox"))&&{role:o},(!i||g[0]&2)&&{spellcheck:d[1]},(!i||g[0]&4)&&{autocorrect:d[2]},(!i||g[0]&8)&&{autocapitalize:d[3]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!i||g[0]&16&&s!==(s=!d[4].readOnly))&&{contenteditable:s},{"z-index":r}])),gt(e,"svelte-m59z04",!0)},i(d){i||(b(t.$$.fragment,d),i=!0)},o(d){y(t.$$.fragment,d),i=!1},d(d){d&&D(e),z(t),n[38](null),l=!1,Gn(a)}}}const fn=ce(),un=ce(),dn=ce();function _e(n,e){return he(e)&&rt(n,e)}function j(n,e){return he(e)&&rt(n,e,{editable:!0})}function Ft(n,e){if(qt.get(n))return!1;{const t=_e(n,e)&&ue(e);return m.isVoid(n,t)}}function oi(n,e){const t=e.startContainer.parentElement,o=t.getBoundingClientRect;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),$n(t,{scrollMode:"if-needed"}),t.getBoundingClientRect=o}function ii(n,e,t){const o=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let s=mt(e,o),r,i,{Element:l=Ko}=e,{Leaf:a=Yo}=e,{Placeholder:f=Go}=e,{placeholder:h=void 0}=e,{readOnly:d=!1}=e,{autoFocus:g=!1}=e,{decorate:_=sn}=e,{scrollSelectionIntoView:p=oi}=e,{ref:S=void 0}=e,{spellcheck:C=!0}=e,{autocorrect:T="true"}=e,{autocapitalize:F="true"}=e,{onKeyDown:v=()=>{}}=e;const I=re(fn,l),G=re(un,a),x=re(dn,f),c=ge(),ie=on();fe(n,ie,u=>t(6,r=u));const _n=rn(),Ne=Co(),pn=st(),Ye=Do();fe(n,Ye,u=>t(7,i=u));const Ue=[],E={isComposing:!1,hasInsertPrefixInCompositon:!0,updateSelectionTimeoutId:null,isDraggingInternally:!1,latestElement:null,readOnly:d};let Le=[],Xe;function wn(){if(E.isComposing||E.isDraggingInternally||E.updateSelectionTimeoutId)Ge();else{const u=ye(c),w=se(c,c),k=u.getSelection();if(u.activeElement===w?(t(4,E.latestElement=u.activeElement,E),we.set(c,!0),Ne.set(!0)):(we.delete(c),Ne.set(!1)),!k){P.deselect(c);return}const N=j(c,k.anchorNode)||Ft(c,k.anchorNode),M=j(c,k.focusNode)||Ft(c,k.focusNode);if(N&&M){const V=Ce(c,k,{exactMatch:!1,suppressThrow:!0});if(V){P.select(c,V);return}}P.deselect(c)}}const Ge=Zn(0,()=>_t().then(wn));Jn(()=>{const u=ot(S);return u&&(et.set(c,u),u.document.addEventListener("selectionchange",Ge)),Ae.set(c,S),Re.set(c,S),xe.set(S,c),()=>{Ae.delete(c),Re.delete(c),u&&(et.delete(c),u.document.removeEventListener("selectionchange",Ge))}});function kn(){const u=ye(c),w=u==null?void 0:u.getSelection();if(E.isComposing||!w||!bt(c))return;const k=w.type!=="None";if(!c.selection&&!k)return;const N=Ae.get(c);let M=!1;if(N.contains(w.anchorNode)&&N.contains(w.focusNode)&&(M=!0),k&&M&&c.selection){const me=Ce(c,w,{exactMatch:!0,suppressThrow:!0});if(me&&O.equals(me,c.selection))return}if(c.selection&&!bo(c,c.selection)){t(36,c.selection=Ce(c,w,{exactMatch:!1,suppressThrow:!1}),c),Ye.set(c.selection);return}const V=c.selection&&M&&We(c,c.selection);V?(O.isBackward(c.selection)?w.setBaseAndExtent(V.endContainer,V.endOffset,V.startContainer,V.startOffset):w.setBaseAndExtent(V.startContainer,V.startOffset,V.endContainer,V.endOffset),p(c,V)):w.removeAllRanges(),E.updateSelectionTimeoutId&&clearTimeout(E.updateSelectionTimeoutId);let Be=setTimeout(()=>{V&&nt&&se(c,c).focus(),Object.assign(E,{updateSelectionTimeoutId:null})});Object.assign(E,{updateSelectionTimeoutId:Be})}Qn(()=>_t().then(kn));function En(u){if(!E.readOnly&&j(c,u.target)){const w=u.inputType,k=u.dataTransfer||u.data||void 0;if(w==="insertCompositionText"||w==="deleteCompositionText")return;let N=!1;if(w==="insertText"&&c.selection&&O.isCollapsed(c.selection)&&u.data&&u.data.length===1&&/[a-z ]/i.test(u.data)&&c.selection.anchor.offset!==0){N=!0,c.marks&&(N=!1);const M=m.above(c,{at:c.selection.anchor,match:V=>m.isInline(c,V),mode:"highest"});if(M){const[,V]=M;m.isEnd(c,c.selection.anchor,V)&&(N=!1)}}if(N||u.preventDefault(),!w.startsWith("delete")||w.startsWith("deleteBy")){const[M]=u.getTargetRanges();if(M){const V=Ce(c,M,{exactMatch:!1,suppressThrow:!1});(!c.selection||!O.equals(c.selection,V))&&P.select(c,V)}}if(c.selection&&O.isExpanded(c.selection)&&w.startsWith("delete")){const M=w.endsWith("Backward")?"backward":"forward";m.deleteFragment(c,{direction:M});return}switch(w){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{m.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{m.deleteForward(c);break}case"deleteContentBackward":{m.deleteBackward(c);break}case"deleteEntireSoftLine":{m.deleteBackward(c,{unit:"line"}),m.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{m.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{m.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{m.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{m.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{m.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{m.deleteForward(c,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{m.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{w==="insertFromComposition"&&E.isComposing&&t(4,E.isComposing=!1,E),(k==null?void 0:k.constructor.name)==="DataTransfer"?c.insertData(k):typeof k=="string"&&(N?Ue.push(()=>m.insertText(c,k)):m.insertText(c,k));break}}}}function bn(u){for(const w of Ue)w();Ue.length=0}function yn(u){if(!E.readOnly&&!E.isComposing&&j(c,u.target)){const w=c.children[c.selection!==null?c.selection.focus.path[0]:0],k=xt(Z.string(w))==="rtl";if(K.isRedo(u)){u.preventDefault();const N=c;typeof N.redo=="function"&&N.redo()}else if(K.isUndo(u)){u.preventDefault();const N=c;typeof N.undo=="function"&&N.undo()}else if(K.isMoveLineBackward(u))u.preventDefault(),P.move(c,{unit:"line",reverse:!0});else if(K.isMoveLineForward(u))u.preventDefault(),P.move(c,{unit:"line"});else if(K.isExtendLineBackward(u))u.preventDefault(),P.move(c,{unit:"line",edge:"focus",reverse:!0});else if(K.isExtendLineForward(u))u.preventDefault(),P.move(c,{unit:"line",edge:"focus"});else if(K.isMoveBackward(u))u.preventDefault(),c.selection&&O.isCollapsed(c.selection)?P.move(c,{reverse:!k}):P.collapse(c,{edge:"start"});else if(K.isMoveForward(u))u.preventDefault(),c.selection&&O.isCollapsed(c.selection)?P.move(c,{reverse:k}):P.collapse(c,{edge:"end"});else if(K.isMoveWordBackward(u))u.preventDefault(),c.selection&&O.isExpanded(c.selection)&&P.collapse(c,{edge:"focus"}),P.move(c,{unit:"word",reverse:!k});else if(K.isMoveWordForward(u))u.preventDefault(),c.selection&&O.isExpanded(c.selection)&&P.collapse(c,{edge:"focus"}),P.move(c,{unit:"word",reverse:k});else if(!Et)K.isBold(u)||K.isItalic(u)||K.isTransposeCharacter(u)?u.preventDefault():K.isSplitBlock(u)?(u.preventDefault(),m.insertBreak(c)):K.isDeleteBackward(u)?(u.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c)):K.isDeleteForward(u)?(u.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c)):K.isDeleteLineBackward(u)?(u.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"line"})):K.isDeleteLineForward(u)?(u.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"line"})):K.isDeleteWordBackward(u)?(u.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"word"})):K.isDeleteWordForward(u)&&(u.preventDefault(),c.selection&&O.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"word"}));else{if((Jt||Qe)&&c.selection&&(K.isDeleteBackward(u)||K.isDeleteForward(u))&&O.isCollapsed(c.selection)){const N=Z.parent(c,c.selection.anchor.path);if(Me.isElement(N)&&m.isVoid(c,N)&&m.isInline(c,N)){u.preventDefault(),m.deleteBackward(c,{unit:"block"});return}}return v(u)}}}function Cn(u){if(!E.readOnly&&!E.updateSelectionTimeoutId&&j(c,u.target)){const w=se(c,c),k=ye(c);if(t(4,E.latestElement=k.activeElement,E),nt&&u.target!==w){w.focus();return}we.set(c,!0),Ne.set(!0)}}function Dn(u){if(E.readOnly||E.updateSelectionTimeoutId||!j(c,u.target))return;const w=ye(c);if(E.latestElement===w.activeElement)return;const k=u.relatedTarget,N=se(c,c);if(k!==N&&!($(k)&&k.hasAttribute("data-slate-spacer"))){if(k!=null&&he(k)&&rt(c,k)){const M=ue(k);if(Me.isElement(M)&&!c.isVoid(M))return}if(Qe){const M=w.getSelection();M==null||M.removeAllRanges()}we.delete(c),Ne.set(!1)}}function Sn(u){if(!E.readOnly&&_e(c,u.target)&&he(u.target)){const w=ue(u.target),k=Ee(w);if(m.hasPath(c,k)&&Z.get(c,k)===w){const M=m.start(c,k),V=m.end(c,k),Be=m.void(c,{at:M}),me=m.void(c,{at:V});if(Be&&me&&pe.equals(Be[1],me[1])){const Wn=m.range(c,M);P.select(c,Wn)}}}}function Fn(u){if(j(c,u.target)){t(4,E.isComposing=!1,E);const w=u.data;if(!Qe&&!po&&!go&&!wo&&w&&m.insertText(c,w),c.selection&&O.isCollapsed(c.selection)){const k=c.selection.anchor.path,N=Z.leaf(c,k);E.hasInsertPrefixInCompositon&&(t(4,E.hasInsertPrefixInCompositon=!1,E),m.withoutNormalizing(c,()=>{const M=N.text.replace(/^\uFEFF/,"");P.delete(c,{distance:N.text.length,reverse:!0}),P.insertText(c,M)}))}}}function On(u){j(c,u.target)&&t(4,E.isComposing=!0,E)}function Tn(u){if(j(c,u.target)&&c.selection){if(O.isExpanded(c.selection)){m.deleteFragment(c);return}const w=m.above(c,{match:k=>m.isInline(c,k),mode:"highest"});if(w){const[,k]=w;if(m.isEnd(c,c.selection.anchor,k)){const N=m.after(c,k);P.setSelection(c,{anchor:N,focus:N})}}c.marks&&(t(4,E.hasInsertPrefixInCompositon=!0,E),P.insertNodes(c,dt({text:"\uFEFF"},c.marks),{select:!0}))}}function Nn(u){!E.readOnly&&j(c,u.target)&&(!Et||ao(u))&&(u.preventDefault(),c.insertData(u.clipboardData))}function Ln(u){j(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData))}function Bn(u){if(!E.readOnly&&j(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData),c.selection))if(O.isExpanded(c.selection))m.deleteFragment(c);else{const w=Z.parent(c,c.selection.anchor.path);m.isVoid(c,w)&&P.delete(c)}}function In(u){if(_e(c,u.target)){const w=ue(u.target);m.isVoid(c,w)&&u.preventDefault()}}function An(u){if(!E.readOnly&&_e(c,u.target)){const w=ue(u.target),k=Ee(w);if(m.isVoid(c,w)||m.void(c,{at:k,voids:!0})){const M=m.range(c,k);P.select(c,M)}t(4,E.isDraggingInternally=!0,E),c.setFragmentData(u.dataTransfer)}}function Mn(u){if(!E.readOnly&&_e(c,u.target)){u.preventDefault();const w=c.selection,k=Eo(c,u),N=u.dataTransfer;P.select(c,k),E.isDraggingInternally&&(w&&!O.equals(w,k)&&!m.void(c,{at:k,voids:!0})&&P.delete(c,{at:w}),t(4,E.isDraggingInternally=!1,E)),c.insertData(N),bt(c)||ko(c)}}function Pn(u){!E.readOnly&&E.isDraggingInternally&&_e(c,u.target)&&t(4,E.isDraggingInternally=!1,E)}function Rn(u){ae[u?"unshift":"push"](()=>{S=u,t(0,S)})}return n.$$set=u=>{e=$e($e({},e),jn(u)),t(26,s=mt(e,o)),"Element"in u&&t(27,l=u.Element),"Leaf"in u&&t(28,a=u.Leaf),"Placeholder"in u&&t(29,f=u.Placeholder),"placeholder"in u&&t(30,h=u.placeholder),"readOnly"in u&&t(31,d=u.readOnly),"autoFocus"in u&&t(32,g=u.autoFocus),"decorate"in u&&t(33,_=u.decorate),"scrollSelectionIntoView"in u&&t(34,p=u.scrollSelectionIntoView),"ref"in u&&t(0,S=u.ref),"spellcheck"in u&&t(1,C=u.spellcheck),"autocorrect"in u&&t(2,T=u.autocorrect),"autocapitalize"in u&&t(3,F=u.autocapitalize),"onKeyDown"in u&&t(35,v=u.onKeyDown)},n.$$.update=()=>{if(n.$$.dirty[0]&134217728&&I.set(l),n.$$.dirty[0]&268435456&&G.set(a),n.$$.dirty[0]&536870912&&x.set(f),n.$$.dirty[1]&33&&qt.set(c,d),n.$$.dirty[1]&1&&_n.set(d),n.$$.dirty[1]&1&&t(4,E.readOnly=d,E),n.$$.dirty[1]&4&&pn.set(_),n.$$.dirty[0]&1073741936|n.$$.dirty[1]&36)if(r.children.length===1&&Array.from(Z.texts(r)).length===1&&Z.string(r)===""&&!E.isComposing){const u=m.start(c,[]);t(5,Le=[..._([c,[]]),{[De]:!0,placeholder:h,anchor:u,focus:u}])}else Le.length&&t(5,Le=_([c,[]]));n.$$.dirty[0]&1|n.$$.dirty[1]&66&&Xe!==g&&S&&(g&&S.focus(),t(37,Xe=g))},[S,C,T,F,E,Le,r,i,ie,Ye,En,bn,yn,Cn,Dn,Sn,Fn,On,Tn,Nn,Ln,Bn,In,An,Mn,Pn,s,l,a,f,h,d,g,_,p,v,c,Xe,Rn]}class Mi extends J{constructor(e){super();Q(this,e,ii,ni,ne,{Element:27,Leaf:28,Placeholder:29,placeholder:30,readOnly:31,autoFocus:32,decorate:33,scrollSelectionIntoView:34,ref:0,spellcheck:1,autocorrect:2,autocapitalize:3,onKeyDown:35},null,[-1,-1])}}function Ot(n){let e,t,o,s;function r(a){n[12](a)}var i=n[5];function l(a){let f={$$slots:{default:[ri]},$$scope:{ctx:a}};return a[4]!==void 0&&(f.clientHeight=a[4]),{props:f}}return i&&(e=new i(l(n)),ae.push(()=>Pe(e,"clientHeight",r))),{c(){e&&R(e.$$.fragment),o=B()},l(a){e&&q(e.$$.fragment,a),o=B()},m(a,f){e&&W(e,a,f),A(a,o,f),s=!0},p(a,f){const h={};if(f&8194&&(h.$$scope={dirty:f,ctx:a}),!t&&f&16&&(t=!0,h.clientHeight=a[4],zt(()=>t=!1)),i!==(i=a[5])){if(e){U();const d=e;y(d.$$.fragment,1,0,()=>{z(d,1)}),X()}i?(e=new i(l(a)),ae.push(()=>Pe(e,"clientHeight",r)),R(e.$$.fragment),b(e.$$.fragment,1),W(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(a){s||(e&&b(e.$$.fragment,a),s=!0)},o(a){e&&y(e.$$.fragment,a),s=!1},d(a){a&&D(o),e&&z(e,a)}}}function ri(n){let e=n[1].placeholder+"",t;return{c(){t=ze(e)},l(o){t=ve(o,e)},m(o,s){A(o,t,s)},p(o,s){s&2&&e!==(e=o[1].placeholder+"")&&Wt(t,e)},d(o){o&&D(t)}}}function si(n){let e,t,o,s=De in n[1]&&Ot(n);return t=new Wo({props:{isLast:n[0],leaf:n[1],parent:n[2],text:n[3]}}),{c(){s&&s.c(),e=B(),R(t.$$.fragment)},l(r){s&&s.l(r),e=B(),q(t.$$.fragment,r)},m(r,i){s&&s.m(r,i),A(r,e,i),W(t,r,i),o=!0},p(r,i){De in r[1]?s?(s.p(r,i),i&2&&b(s,1)):(s=Ot(r),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(U(),y(s,1,1,()=>{s=null}),X());const l={};i&1&&(l.isLast=r[0]),i&2&&(l.leaf=r[1]),i&4&&(l.parent=r[2]),i&8&&(l.text=r[3]),t.$set(l)},i(r){o||(b(s),b(t.$$.fragment,r),o=!0)},o(r){y(s),y(t.$$.fragment,r),o=!1},d(r){s&&s.d(r),r&&D(e),z(t,r)}}}function ai(n){let e,t,o;var s=n[6];function r(i){return{props:{leaf:i[1],$$slots:{default:[si]},$$scope:{ctx:i}}}}return s&&(e=new s(r(n))),{c(){e&&R(e.$$.fragment),t=B()},l(i){e&&q(e.$$.fragment,i),t=B()},m(i,l){e&&W(e,i,l),A(i,t,l),o=!0},p(i,[l]){const a={};if(l&2&&(a.leaf=i[1]),l&8255&&(a.$$scope={dirty:l,ctx:i}),s!==(s=i[6])){if(e){U();const f=e;y(f.$$.fragment,1,0,()=>{z(f,1)}),X()}s?(e=new s(r(i)),R(e.$$.fragment),b(e.$$.fragment,1),W(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(i){o||(e&&b(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&D(t),e&&z(e,i)}}}function li(n,e,t){let o,s,r,i,{isLast:l}=e,{leaf:a}=e,{parent:f}=e,{text:h}=e;const d=le(un);fe(n,d,C=>t(11,i=C));const g=le(dn);fe(n,g,C=>t(10,r=C));let _,p;eo(()=>{if(kt){const C=document.querySelector('[data-svelte-editor="true"]');C&&(C.style.minHeight="auto")}});function S(C){_=C,t(4,_)}return n.$$set=C=>{"isLast"in C&&t(0,l=C.isLast),"leaf"in C&&t(1,a=C.leaf),"parent"in C&&t(2,f=C.parent),"text"in C&&t(3,h=C.text)},n.$$.update=()=>{if(n.$$.dirty&2048&&t(6,o=i),n.$$.dirty&1024&&t(5,s=r),n.$$.dirty&528&&p!==_&&kt){const C=document.querySelector('[data-svelte-editor="true"]');C&&(C.style.minHeight=`${_}px`),t(9,p=_)}},[l,a,f,h,_,s,o,d,g,p,r,i,S]}class Tt extends J{constructor(e){super();Q(this,e,li,ai,ne,{isLast:0,leaf:1,parent:2,text:3})}}function Nt(n,e,t){const o=n.slice();return o[9]=e[t],o[11]=t,o}function Lt(n,e){let t,o,s,r;var i=Tt;function l(a){return{props:{isLast:a[0]&&a[11]===a[5].length-1,parent:a[1],leaf:a[9],text:a[2]}}}return i&&(o=new i(l(e))),{key:n,first:null,c(){t=B(),o&&R(o.$$.fragment),s=B(),this.h()},l(a){t=B(),o&&q(o.$$.fragment,a),s=B(),this.h()},h(){this.first=t},m(a,f){A(a,t,f),o&&W(o,a,f),A(a,s,f),r=!0},p(a,f){e=a;const h={};if(f&33&&(h.isLast=e[0]&&e[11]===e[5].length-1),f&2&&(h.parent=e[1]),f&32&&(h.leaf=e[9]),f&4&&(h.text=e[2]),i!==(i=Tt)){if(o){U();const d=o;y(d.$$.fragment,1,0,()=>{z(d,1)}),X()}i?(o=new i(l(e)),R(o.$$.fragment),b(o.$$.fragment,1),W(o,s.parentNode,s)):o=null}else i&&o.$set(h)},i(a){r||(o&&b(o.$$.fragment,a),r=!0)},o(a){o&&y(o.$$.fragment,a),r=!1},d(a){a&&D(t),a&&D(s),o&&z(o,a)}}}function ci(n){let e,t=[],o=new Map,s,r=n[5];const i=l=>`${l[4]}-${l[11]}`;for(let l=0;l<r.length;l+=1){let a=Nt(n,r,l),f=i(a);o.set(f,t[l]=Lt(f,a))}return{c(){e=ee("span");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=te(l,"SPAN",{"data-slate-node":!0});var a=oe(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(D),this.h()},h(){L(e,"data-slate-node","text")},m(l,a){A(l,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);n[7](e),s=!0},p(l,[a]){a&55&&(r=l[5],U(),t=vt(t,a,i,1,l,r,o,e,Vt,Lt,null,Nt),X())},i(l){if(!s){for(let a=0;a<r.length;a+=1)b(t[a]);s=!0}},o(l){for(let a=0;a<t.length;a+=1)y(t[a]);s=!1},d(l){l&&D(e);for(let a=0;a<t.length;a+=1)t[a].d();n[7](null)}}}function fi(n,e,t){let o,s,{decorations:r}=e,{isLast:i}=e,{parent:l}=e,{text:a}=e;const f=ge();let h;function d(g){ae[g?"unshift":"push"](()=>{h=g,t(3,h)})}return n.$$set=g=>{"decorations"in g&&t(6,r=g.decorations),"isLast"in g&&t(0,i=g.isLast),"parent"in g&&t(1,l=g.parent),"text"in g&&t(2,a=g.text)},n.$$.update=()=>{var g;n.$$.dirty&68&&t(5,o=to.decorations(a,r)),n.$$.dirty&4&&t(4,s=de(a)),n.$$.dirty&28&&h&&((g=qe.get(f))==null||g.set(s,h),Re.set(a,h),xe.set(h,a))},[i,l,a,h,s,o,r,d]}class be extends J{constructor(e){super();Q(this,e,fi,ci,ne,{decorations:6,isLast:0,parent:1,text:2})}}function ui(n){let e,t,o;var s=be;function r(i){return{props:{decorations:i[2],isLast:i[3],parent:i[1],text:i[0]}}}return s&&(e=new s(r(n))),{c(){e&&R(e.$$.fragment),t=B()},l(i){e&&q(e.$$.fragment,i),t=B()},m(i,l){e&&W(e,i,l),A(i,t,l),o=!0},p(i,[l]){const a={};if(l&4&&(a.decorations=i[2]),l&8&&(a.isLast=i[3]),l&2&&(a.parent=i[1]),l&1&&(a.text=i[0]),s!==(s=be)){if(e){U();const f=e;y(f.$$.fragment,1,0,()=>{z(f,1)}),X()}s?(e=new s(r(i)),R(e.$$.fragment),b(e.$$.fragment,1),W(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(i){o||(e&&b(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&D(t),e&&z(e,i)}}}function di(n,e,t){let o,s,r,i,l,{parent:a}=e,{text:f}=e,{path:h}=e,{index:d}=e,{isLeafBlock:g}=e,{decorations:_}=e;const p=st();fe(n,p,I=>t(15,l=I));const S=ge();let C=d,T=f,F=a,v=_;return n.$$set=I=>{"parent"in I&&t(5,a=I.parent),"text"in I&&t(6,f=I.text),"path"in I&&t(7,h=I.path),"index"in I&&t(8,d=I.index),"isLeafBlock"in I&&t(9,g=I.isLeafBlock),"decorations"in I&&t(10,_=I.decorations)},n.$$.update=()=>{n.$$.dirty&2304&&C!==d&&t(11,C=d),n.$$.dirty&65&&T!==f&&t(0,T=f),n.$$.dirty&34&&F!==a&&t(1,F=a),n.$$.dirty&5120&&(Qt(v,_)||t(12,v=_)),n.$$.dirty&2049&&He.set(T,C),n.$$.dirty&3&&Ke.set(T,F),n.$$.dirty&2176&&t(14,o=h.concat(C)),n.$$.dirty&2562&&t(3,s=g&&C===F.children.length-1),n.$$.dirty&16384&&t(13,r=m.range(S,o)),n.$$.dirty&61441&&t(2,i=hn(l([T,o]),r,v))},[T,F,i,s,p,a,f,h,d,g,_,C,v,r,o,l]}class hi extends J{constructor(e){super();Q(this,e,di,ui,ne,{parent:5,text:6,path:7,index:8,isLeafBlock:9,decorations:10})}}function Bt(n,e,t){const o=n.slice();return o[8]=e[t],o[10]=t,o}function gi(n){let e,t;return e=new hi({props:{decorations:n[0],parent:n[2],text:n[8],index:n[10],path:n[5],isLeafBlock:n[4]}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p(o,s){const r={};s&1&&(r.decorations=o[0]),s&4&&(r.parent=o[2]),s&8&&(r.text=o[8]),s&8&&(r.index=o[10]),s&32&&(r.path=o[5]),s&16&&(r.isLeafBlock=o[4]),e.$set(r)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function mi(n){let e,t;return e=new Oi({props:{decorations:n[0],selection:n[1],element:n[8],parent:n[2],index:n[10],path:n[5]}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p(o,s){const r={};s&1&&(r.decorations=o[0]),s&2&&(r.selection=o[1]),s&8&&(r.element=o[8]),s&4&&(r.parent=o[2]),s&8&&(r.index=o[10]),s&32&&(r.path=o[5]),e.$set(r)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function It(n,e){let t,o,s,r,i,l;const a=[mi,gi],f=[];function h(d,g){return g&8&&(o=null),o==null&&(o=!!Me.isElement(d[8])),o?0:1}return s=h(e,-1),r=f[s]=a[s](e),{key:n,first:null,c(){t=B(),r.c(),i=B(),this.h()},l(d){t=B(),r.l(d),i=B(),this.h()},h(){this.first=t},m(d,g){A(d,t,g),f[s].m(d,g),A(d,i,g),l=!0},p(d,g){e=d;let _=s;s=h(e,g),s===_?f[s].p(e,g):(U(),y(f[_],1,1,()=>{f[_]=null}),X(),r=f[s],r?r.p(e,g):(r=f[s]=a[s](e),r.c()),b(r,1),r.m(i.parentNode,i))},i(d){l||(b(r),l=!0)},o(d){y(r),l=!1},d(d){d&&D(t),f[s].d(d),d&&D(i)}}}function _i(n){let e=[],t=new Map,o,s,r=n[3];const i=l=>de(l[8]);for(let l=0;l<r.length;l+=1){let a=Bt(n,r,l),f=i(a);t.set(f,e[l]=It(f,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();o=B()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);o=B()},m(l,a){for(let f=0;f<e.length;f+=1)e[f].m(l,a);A(l,o,a),s=!0},p(l,[a]){a&63&&(r=l[3],U(),e=vt(e,a,i,1,l,r,t,o.parentNode,Vt,It,o,Bt),X())},i(l){if(!s){for(let a=0;a<r.length;a+=1)b(e[a]);s=!0}},o(l){for(let a=0;a<e.length;a+=1)y(e[a]);s=!1},d(l){for(let a=0;a<e.length;a+=1)e[a].d(l);l&&D(o)}}}function hn(n,e,t=[]){for(const o of t){const s=O.intersection(o,e);s&&n.push(s)}return n}function pi(n,e,t){let o,s,{node:r}=e,{decorations:i}=e,{selection:l=null}=e;const a=ge();let f=r,h=r.children;return n.$$set=d=>{"node"in d&&t(6,r=d.node),"decorations"in d&&t(0,i=d.decorations),"selection"in d&&t(1,l=d.selection)},n.$$.update=()=>{n.$$.dirty&68&&(f!==r||r===a)&&t(2,f=r),n.$$.dirty&72&&h!==r.children&&t(3,h=r.children),n.$$.dirty&4&&t(5,o=Ee(f)),n.$$.dirty&4&&t(4,s=Me.isElement(f)&&!a.isInline(f)&&m.hasInlines(a,f))},[i,l,f,h,s,o,r]}class gn extends J{constructor(e){super();Q(this,e,pi,_i,ne,{node:6,decorations:0,selection:1})}}function wi(n){let e,t;return e=new gn({props:{node:n[0],decorations:n[1],selection:n[2]}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,s){W(e,o,s),t=!0},p(o,s){const r={};s&1&&(r.node=o[0]),s&2&&(r.decorations=o[1]),s&4&&(r.selection=o[2]),e.$set(r)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){z(e,o)}}}function ki(n){let e,t,o,s;const r=[bi,Ei],i=[];function l(a,f){return a[4]?0:1}return e=l(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(a){t.l(a),o=B()},m(a,f){i[e].m(a,f),A(a,o,f),s=!0},p(a,f){let h=e;e=l(a),e===h?i[e].p(a,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(a,f):(t=i[e]=r[e](a),t.c()),b(t,1),t.m(o.parentNode,o))},i(a){s||(b(t),s=!0)},o(a){y(t),s=!1},d(a){i[e].d(a),a&&D(o)}}}function Ei(n){let e,t,o;var s=be;function r(i){return{props:{decorations:[],isLast:!1,parent:i[0],text:i[8]}}}return s&&(t=new s(r(n))),{c(){e=ee("div"),t&&R(t.$$.fragment),this.h()},l(i){e=te(i,"DIV",{"data-slate-spacer":!0,class:!0});var l=oe(e);t&&q(t.$$.fragment,l),l.forEach(D),this.h()},h(){L(e,"data-slate-spacer",""),L(e,"class","svelte-yux06v")},m(i,l){A(i,e,l),t&&W(t,e,null),o=!0},p(i,l){const a={};if(l&1&&(a.parent=i[0]),l&256&&(a.text=i[8]),s!==(s=be)){if(t){U();const f=t;y(f.$$.fragment,1,0,()=>{z(f,1)}),X()}s?(t=new s(r(i)),R(t.$$.fragment),b(t.$$.fragment,1),W(t,e,null)):t=null}else s&&t.$set(a)},i(i){o||(t&&b(t.$$.fragment,i),o=!0)},o(i){t&&y(t.$$.fragment,i),o=!1},d(i){i&&D(e),t&&z(t)}}}function bi(n){let e,t,o;var s=be;function r(i){return{props:{decorations:[],isLast:!1,parent:i[0],text:i[8]}}}return s&&(t=new s(r(n))),{c(){e=ee("span"),t&&R(t.$$.fragment),this.h()},l(i){e=te(i,"SPAN",{"data-slate-spacer":!0,class:!0});var l=oe(e);t&&q(t.$$.fragment,l),l.forEach(D),this.h()},h(){L(e,"data-slate-spacer",""),L(e,"class","svelte-yux06v")},m(i,l){A(i,e,l),t&&W(t,e,null),o=!0},p(i,l){const a={};if(l&1&&(a.parent=i[0]),l&256&&(a.text=i[8]),s!==(s=be)){if(t){U();const f=t;y(f.$$.fragment,1,0,()=>{z(f,1)}),X()}s?(t=new s(r(i)),R(t.$$.fragment),b(t.$$.fragment,1),W(t,e,null)):t=null}else s&&t.$set(a)},i(i){o||(t&&b(t.$$.fragment,i),o=!0)},o(i){t&&y(t.$$.fragment,i),o=!1},d(i){i&&D(e),t&&z(t)}}}function yi(n){let e,t,o,s;const r=[ki,wi],i=[];function l(a,f){return a[6]&&!a[5]?0:1}return e=l(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(a){t.l(a),o=B()},m(a,f){i[e].m(a,f),A(a,o,f),s=!0},p(a,f){let h=e;e=l(a),e===h?i[e].p(a,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(a,f):(t=i[e]=r[e](a),t.c()),b(t,1),t.m(o.parentNode,o))},i(a){s||(b(t),s=!0)},o(a){y(t),s=!1},d(a){i[e].d(a),a&&D(o)}}}function Ci(n){let e,t,o,s;function r(a){n[18](a)}var i=n[10];function l(a){let f={isVoid:a[6],isInline:a[4],contenteditable:a[9],element:a[0],dir:a[7],$$slots:{default:[yi]},$$scope:{ctx:a}};return a[3]!==void 0&&(f.ref=a[3]),{props:f}}return i&&(e=new i(l(n)),ae.push(()=>Pe(e,"ref",r))),{c(){e&&R(e.$$.fragment),o=B()},l(a){e&&q(e.$$.fragment,a),o=B()},m(a,f){e&&W(e,a,f),A(a,o,f),s=!0},p(a,[f]){const h={};if(f&64&&(h.isVoid=a[6]),f&16&&(h.isInline=a[4]),f&512&&(h.contenteditable=a[9]),f&1&&(h.element=a[0]),f&128&&(h.dir=a[7]),f&1048951&&(h.$$scope={dirty:f,ctx:a}),!t&&f&8&&(t=!0,h.ref=a[3],zt(()=>t=!1)),i!==(i=a[10])){if(e){U();const d=e;y(d.$$.fragment,1,0,()=>{z(d,1)}),X()}i?(e=new i(l(a)),ae.push(()=>Pe(e,"ref",r)),R(e.$$.fragment),b(e.$$.fragment,1),W(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(a){s||(e&&b(e.$$.fragment,a),s=!0)},o(a){e&&y(e.$$.fragment,a),s=!1},d(a){a&&D(o),e&&z(e,a)}}}function Di(n,e,t){let o,s,r,i,l,a,f,h,{element:d}=e,{decorations:g}=e,{selection:_=null}=e;const p=le(fn);fe(n,p,c=>t(17,h=c));const S=ge(),C=rn();fe(n,C,c=>t(16,f=c));let T,F,v,I,G;function x(c){G=c,t(3,G)}return n.$$set=c=>{"element"in c&&t(0,d=c.element),"decorations"in c&&t(1,g=c.decorations),"selection"in c&&t(2,_=c.selection)},n.$$.update=()=>{var c;if(n.$$.dirty&131072&&t(10,o=h),n.$$.dirty&65536&&t(5,s=f),n.$$.dirty&1&&t(4,r=S.isInline(d)),n.$$.dirty&1&&t(15,i=de(d)),n.$$.dirty&49152&&F!==i&&(t(13,T=i),t(14,F=i)),n.$$.dirty&17&&!r&&m.hasInlines(S,d)){const ie=xt(Z.string(d));ie==="rtl"&&t(7,v=ie)}if(n.$$.dirty&1&&t(6,l=m.isVoid(S,d)),n.$$.dirty&32&&t(9,a=!s),n.$$.dirty&113&&l){!s&&r&&t(9,a=!1);const[[ie]]=Z.texts(d);t(8,I=ie),He.set(ie,0),Ke.set(ie,d)}n.$$.dirty&8201&&G&&((c=qe.get(S))==null||c.set(T,G),Re.set(d,G),xe.set(G,d))},[d,g,_,G,r,s,l,v,I,a,o,p,C,T,F,i,f,h,x]}class At extends J{constructor(e){super();Q(this,e,Di,Ci,ne,{element:0,decorations:1,selection:2})}}function Si(n){let e,t,o;var s=At;function r(i){return{props:{decorations:i[2],element:i[0],selection:i[1]}}}return s&&(e=new s(r(n))),{c(){e&&R(e.$$.fragment),t=B()},l(i){e&&q(e.$$.fragment,i),t=B()},m(i,l){e&&W(e,i,l),A(i,t,l),o=!0},p(i,[l]){const a={};if(l&4&&(a.decorations=i[2]),l&1&&(a.element=i[0]),l&2&&(a.selection=i[1]),s!==(s=At)){if(e){U();const f=e;y(f.$$.fragment,1,0,()=>{z(f,1)}),X()}s?(e=new s(r(i)),R(e.$$.fragment),b(e.$$.fragment,1),W(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(i){o||(e&&b(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&D(t),e&&z(e,i)}}}const mn=ce();function Pi(){return le(mn)}function Fi(n,e,t){let o,s,r,i,l,{parent:a}=e,{element:f}=e,{path:h}=e,{index:d}=e,{decorations:g}=e,{selection:_=null}=e;const p=st();fe(n,p,x=>t(16,l=x));const S=re(mn,!1),C=ge();let T=d,F=a,v=f,I=g,G=_;return n.$$set=x=>{"parent"in x&&t(4,a=x.parent),"element"in x&&t(5,f=x.element),"path"in x&&t(6,h=x.path),"index"in x&&t(7,d=x.index),"decorations"in x&&t(8,g=x.decorations),"selection"in x&&t(9,_=x.selection)},n.$$.update=()=>{n.$$.dirty&1152&&T!==d&&t(10,T=d),n.$$.dirty&2064&&F!==a&&t(11,F=a),n.$$.dirty&33&&v!==f&&t(0,v=f),n.$$.dirty&4352&&(Qt(I,g)||t(12,I=g)),n.$$.dirty&8704&&(jt(G,_)||t(13,G=_)),n.$$.dirty&1025&&He.set(v,T),n.$$.dirty&2049&&Ke.set(v,F),n.$$.dirty&1088&&t(15,o=h.concat(T)),n.$$.dirty&32768&&t(14,s=m.range(C,o)),n.$$.dirty&118785&&t(2,r=hn(l([v,o]),s,I)),n.$$.dirty&24576&&t(1,i=G&&O.intersection(s,G)),n.$$.dirty&2&&S.set(!!i)},[v,i,r,p,a,f,h,d,g,_,T,F,I,G,s,o,l]}class Oi extends J{constructor(e){super();Q(this,e,Fi,Si,ne,{parent:4,element:5,path:6,index:7,decorations:8,selection:9})}}function Mt(n,e){const t=(e.top+e.bottom)/2;return n.top<=t&&n.bottom>=t}function Pt(n,e,t){const o=We(n,e).getBoundingClientRect(),s=We(n,t).getBoundingClientRect();return Mt(o,s)&&Mt(s,o)}function Ti(n,e){const t=m.range(n,O.end(e)),o=Array.from(m.positions(n,{at:e}));let s=0,r=o.length,i=Math.floor(r/2);if(Pt(n,m.range(n,o[s]),t))return m.range(n,o[s],t);if(o.length<2)return m.range(n,o[o.length-1],t);for(;i!==o.length&&i!==s;)Pt(n,m.range(n,o[i]),t)?r=i:s=i,i=Math.floor((s+r)/2);return m.range(n,o[r],t)}function Ri(n){const e=n,{apply:t,onChange:o,deleteBackward:s}=e;return qe.set(e,new WeakMap),e.deleteBackward=r=>{if(r!=="line")return s(r);if(n.selection&&O.isCollapsed(n.selection)){const i=m.above(n,{match:l=>m.isBlock(n,l),at:n.selection});if(i){const[,l]=i,a=m.range(n,l,n.selection.anchor),f=Ti(e,a);O.isCollapsed(f)||P.delete(n,{at:f})}}},e.apply=r=>{const i=[];switch(r.type){case"insert_text":case"remove_text":case"set_node":{for(const[l,a]of m.levels(e,{at:r.path})){const f=de(l);i.push([a,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[l,a]of m.levels(e,{at:pe.parent(r.path)})){const f=de(l);i.push([a,f])}break}case"move_node":{for(const[l,a]of m.levels(e,{at:pe.common(pe.parent(r.path),pe.parent(r.newPath))})){const f=de(l);i.push([a,f])}break}}t(r);for(const[l,a]of i){const[f]=m.node(e,l);tt.set(f,a)}},e.setFragmentData=r=>{const{selection:i}=e;if(!i)return;const[l,a]=O.edges(i),f=m.void(e,{at:l.path}),h=m.void(e,{at:a.path});if(O.isCollapsed(i)&&!f)return;const d=We(e,i);let g=d.cloneContents(),_=g.childNodes[0];if(g.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(_=F)}),h){const[F]=h,v=d.cloneRange(),I=se(e,F);v.setEndAfter(I),g=v.cloneContents()}if(f&&(_=g.querySelector("[data-slate-spacer]")),Array.from(g.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const v=F.getAttribute("data-slate-zero-width")==="n";F.textContent=v?`
`:""}),Ut(_)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(_),g.appendChild(F),_=F}const p=e.getFragment(),S=JSON.stringify(p),C=window.btoa(encodeURIComponent(S));_.setAttribute("data-slate-fragment",C),r.setData("application/x-slate-fragment",C);const T=document.createElement("div");return T.appendChild(g),T.setAttribute("hidden","true"),document.body.appendChild(T),r.setData("text/html",T.innerHTML),r.setData("text/plain",Gt(T)),document.body.removeChild(T),r},e.insertData=r=>{e.insertFragmentData(r)||e.insertTextData(r)},e.insertFragmentData=r=>{const i=r.getData("application/x-slate-fragment")||ho(r);if(i){const l=decodeURIComponent(window.atob(i)),a=JSON.parse(l);return e.insertFragment(a),!0}return!1},e.insertTextData=r=>{const i=r.getData("text/plain");if(i){const l=i.split(/\r\n|\r|\n/);let a=!1;for(const f of l)a&&P.splitNodes(e,{always:!0}),e.insertText(f),a=!0;return!0}return!1},e.onChange=()=>{const r=Yt.get(e);r&&r(),o()},e}export{tn as D,Mi as E,un as L,Ii as S,Pi as a,Co as b,rn as c,re as d,fn as e,Ee as f,ge as g,ce as h,Ai as i,on as j,Ri as w};
