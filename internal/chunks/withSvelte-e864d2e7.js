var Vn=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var gt=(r,e,n)=>e in r?Vn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,mt=(r,e)=>{for(var n in e||(e={}))ut.call(e,n)&&gt(r,n,e[n]);if(Ae)for(var n of Ae(e))ht.call(e,n)&&gt(r,n,e[n]);return r};var Je=(r,e)=>{var n={};for(var t in r)ut.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&Ae)for(var t of Ae(r))e.indexOf(t)<0&&ht.call(r,t)&&(n[t]=r[t]);return n};import{a1 as g,a2 as B,a3 as Hn,S as Q,i as Z,s as ye,F as De,J as Le,K as Se,L as Fe,q as b,o as C,r as de,D as ue,a4 as Oe,a5 as Kn,a6 as ie,t as Me,h as Re,g as A,d as S,e as x,c as $,a as re,b as N,I as _t,j as wt,M as he,l as I,n as X,p as G,a7 as ge,w as V,x as Y,y as H,B as K,a8 as ee,a9 as vn,Q as pt,O as le,P as We,aa as kt,ab as Et,v as Qe,ac as Un,ad as ze,ae as Ve,af as qn,ag as Yn,C as Ze,ah as bt,ai as Ct,aj as J,z as Xn,ak as Gn,al as yt,u as Jn,am as Qn,an as Dt,ao as Zn,E as Lt,ap as R,aq as jn}from"./vendor-665f2a6f.js";const He=new WeakMap,Ke=new WeakMap,je=new WeakMap,ve=new WeakMap,me=new WeakMap,_e=new WeakMap,xe=new WeakMap,we=new WeakMap,St=new WeakMap,pe=new WeakMap,Ft=new WeakMap,Pe=Symbol("placeholder");let xn=0;class $n{constructor(){this.id=`${xn++}`}toString(){return this.id}}function $e(r){return r&&r.ownerDocument&&r.ownerDocument.defaultView||null}function er(r){return se(r)&&r.nodeType===8}function te(r){return se(r)&&r.nodeType===1}function se(r){const e=$e(r);return!!e&&r instanceof e.Node}function Ot(r){const e=r&&r.anchorNode&&$e(r.anchorNode);return!!e&&r instanceof e.Selection}function Pt(r){return se(r)&&r.nodeType===3}function tr(r){return r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1}function nr(r){let[e,n]=r;if(te(e)&&e.childNodes.length){let t=n===e.childNodes.length,i=t?n-1:n;for([e,i]=Bt(e,i,t?"backward":"forward"),t=i<n;te(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=ir(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function rr(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Bt(r,e,n){const{childNodes:t}=r;let i=t[e],a=e,o=!1,s=!1;for(;(er(i)||te(i)&&i.childNodes.length===0||te(i)&&i.getAttribute("contenteditable")==="false")&&!(o&&s);){if(a>=t.length){o=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}i=t[a],e=a,a+=n==="forward"?1:-1}return[i,e]}function ir(r,e,n){const[t]=Bt(r,e,n);return t}function Nt(r){let e="";if(Pt(r)&&r.nodeValue)return r.nodeValue;if(te(r)){for(const t of Array.from(r.childNodes))e+=Nt(t);const n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e}const or=/data-slate-fragment="(.+?)"/m;function ar(r){const e=r.getData("text/html"),[,n]=e.match(or)||[];return n}const lr=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Tt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const et=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),sr=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),It=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),cr=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),fr=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),dr=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),At=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Mt=!cr&&!sr&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function nt(r){const e=je.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(r){let e=xe.get(r);return e||(e=new $n,xe.set(r,e)),e}function ke(r){const e=[];let n=r;for(;;){const t=Ke.get(n);if(t==null){if(g.isEditor(n))return e;break}const i=He.get(n);if(i==null)break;e.unshift(i),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(r)}`)}function Be(r){const e=oe(r,r),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function Rt(r){return!!pe.get(r)}function ur(r){const e=oe(r,r),n=Be(r);pe.set(r,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function rt(r,e,n={}){const{editable:t=!1}=n,i=oe(r,r);let a;try{a=te(e)?e:e.parentElement}catch(o){if(!o.message.includes('Permission denied to access property "nodeType"'))throw o}return a?a.closest("[data-svelte-editor]")===i&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===i||!!a.getAttribute("data-slate-zero-width")):!1}function oe(r,e,n=!0){const t=we.get(r),i=g.isEditor(e)?ve.get(r):t==null?void 0:t.get(ce(e));if(!i&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return i}function Wt(r,e,n=!0){const[t]=g.node(r,e.path),i=oe(r,t,n);let a;g.void(r,{at:e})&&(e={path:e.path,offset:0});const o="[data-slate-string], [data-slate-zero-width]",s=i?Array.from(i.querySelectorAll(o)):[];let l=0;for(const c of s){const u=c.childNodes[0];if(u==null||u.textContent==null)continue;const{length:h}=u.textContent,d=c.getAttribute("data-slate-length"),m=d==null?h:parseInt(d,10),_=l+m;if(e.offset<=_){const D=Math.min(h,Math.max(0,e.offset-l));a=[u,D];break}l=_}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function Ue(r,e,n=!0){const{anchor:t,focus:i}=e,a=B.isBackward(e),o=Wt(r,t,n);if(!o)return;const s=B.isCollapsed(e)?o:Wt(r,i),c=nt(r).document.createRange(),[u,h]=a?s:o,[d,m]=a?o:s,D=!!(te(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),w=!!(te(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return c.setStart(u,D?1:h),c.setEnd(d,w?1:m),c}function fe(r){let e=te(r)?r:r.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?me.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function hr(r,e){const{clientX:n,clientY:t,target:i}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=fe(e.target),o=ke(a);if(g.isVoid(r,a)){const u=i.getBoundingClientRect(),h=r.isInline(a)?n-u.left<u.left+u.width-n:t-u.top<u.top+u.height-t,d=g.point(r,o,{edge:h?"start":"end"}),m=h?g.before(r,d):g.after(r,d);if(m)return g.range(r,m)}let s;const{document:l}=nt(r);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const u=l.caretPositionFromPoint(n,t);u&&(s=l.createRange(),s.setStart(u.offsetNode,u.offset),s.setEnd(u.offsetNode,u.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Ne(r,s,{exactMatch:!1,suppressThrow:!1})}function zt(r,e,n){var d;const{exactMatch:t,suppressThrow:i}=n,[a,o]=t?e:nr(e),s=a.parentNode;let l=null,c=0;if(s){const m=s.closest('[data-slate-void="true"]');let _=s.closest("[data-slate-leaf]"),D=null;if(_){l=_.closest('[data-slate-node="text"]');const w=nt(r).document.createRange();w.setStart(l,0),w.setEnd(a,o);const F=w.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(v=>{v.parentNode.removeChild(v)}),c=F.textContent.length,D=l}else m&&(_=m.querySelector("[data-slate-leaf]"),_?(l=_.closest('[data-slate-node="text"]'),D=_,c=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(W=>{c-=W.textContent.length})):c=1);D&&c===D.textContent.length&&(s.hasAttribute("data-slate-zero-width")||et&&((d=D.textContent)==null?void 0:d.endsWith(`

`)))&&c--}if(!l){if(i)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const u=fe(l);return{path:ke(u),offset:c}}function Ne(r,e,n){const{exactMatch:t,suppressThrow:i}=n,a=Ot(e)?e.anchorNode:e.startContainer;let o,s,l,c,u;if(a&&(Ot(e)?(o=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,It&&rr()?u=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:u=e.isCollapsed):(o=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,u=e.collapsed)),o==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=zt(r,[o,s],{exactMatch:t,suppressThrow:i});if(!h)return null;const d=u?h:zt(r,[l,c],{exactMatch:t,suppressThrow:i});if(!d)return null;let m={anchor:h,focus:d};return B.isExpanded(m)&&B.isForward(m)&&te(l)&&g.void(r,{at:m.focus,mode:"highest"})&&(m=g.unhangRange(r,m,{voids:!0})),m}function gr(r,e){const{anchor:n,focus:t}=e;return g.hasPath(r,n.path)&&g.hasPath(r,t.path)}function Vt(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let i=0;i<r.length;i++){const a=r[i],o=e[i],n=a,{anchor:s,focus:l}=n,c=Je(n,["anchor","focus"]),t=o,{anchor:u,focus:h}=t,d=Je(t,["anchor","focus"]);if(!B.equals(a,o)||a[Pe]!==o[Pe]||!Hn(c,d))return!1}return!0}function Ht(r,e){return r===e||!!r&&!!e&&B.equals(r,e)}function mr(r){let e;const n=r[7].default,t=De(n,r,r[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,a){t&&t.m(i,a),e=!0},p(i,[a]){t&&t.p&&(!e||a&64)&&Le(t,n,i,i[6],e?Fe(n,i[6],a,null):Se(i[6]),null)},i(i){e||(b(t,i),e=!0)},o(i){C(t,i),e=!1},d(i){t&&t.d(i)}}}const Kt={},vt={},Ut={},qt={},Yt={};function Xt(){const r=Oe(Kt);if(!r)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return r}function Ee(){return Kn(Xt())}function Gt(){const r=Oe(vt);if(!r)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return r}function _r(){const r=Oe(Ut);if(!r)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return r}function Jt(){const r=Oe(qt);if(!r)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return r}function wr(){const r=Oe(Yt);if(!r)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return r}function Qt(r){return[]}function pr(r,e,n){let{$$slots:t={},$$scope:i}=e,{editor:a}=e,{value:o=a.children}=e,{selection:s=a.selection}=e;const l=ue(a);de(Kt,l);const c=ue(!0);de(vt,c);const u=ue(!1);de(Ut,u);const h=ue(Qt);de(qt,h);const d=ue(a.selection);de(Yt,d);function m(){n(1,s=a.selection),n(0,o=a.children)}Ft.set(a,m);let _=a,D,W;return r.$$set=w=>{"editor"in w&&n(2,a=w.editor),"value"in w&&n(0,o=w.value),"selection"in w&&n(1,s=w.selection),"$$scope"in w&&n(6,i=w.$$scope)},r.$$.update=()=>{r.$$.dirty&12&&a!==_&&(n(3,_=a),l.set(a)),r.$$.dirty&17&&D!==o&&(l.update(w=>(w.children=o,w)),n(4,D=o)),r.$$.dirty&38&&(Ht(W,s)||(d.set(s),l.set(a),n(5,W=s)))},[o,s,a,_,D,W,i,t]}class Fi extends Q{constructor(e){super();Z(this,e,pr,mr,ye,{editor:2,value:0,selection:1})}}const Zt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",jt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",kr=new RegExp("^[^"+jt+"]*["+Zt+"]"),Er=new RegExp("^[^"+Zt+"]*["+jt+"]");function xt(r){const e=String(r||"");return kr.test(e)?"rtl":Er.test(e)?"ltr":"neutral"}function $t(r){let e=`
`,n;return{c(){n=Me(e)},l(t){n=Re(t,e)},m(t,i){A(t,n,i)},d(t){t&&S(n)}}}function br(r){let e,n,t=r[1]&&$t();return{c(){e=x("span"),n=Me(r[0]),t&&t.c(),this.h()},l(i){e=$(i,"SPAN",{"data-slate-string":!0});var a=re(e);n=Re(a,r[0]),t&&t.l(a),a.forEach(S),this.h()},h(){N(e,"data-slate-string","true")},m(i,a){A(i,e,a),_t(e,n),t&&t.m(e,null)},p(i,[a]){a&1&&wt(n,i[0]),i[1]?t||(t=$t(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:he,o:he,d(i){i&&S(e),t&&t.d()}}}function Cr(r,e,n){let{text:t}=e,{isTrailing:i=!1}=e;return r.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,i=a.isTrailing)},[t,i]}class yr extends Q{constructor(e){super();Z(this,e,Cr,br,ie,{text:0,isTrailing:1})}}function en(r){let e;return{c(){e=x("br")},l(n){e=$(n,"BR",{})},m(n,t){A(n,e,t)},d(n){n&&S(e)}}}function Dr(r){let e,n="\uFEFF",t,i,a=r[1]&&en();return{c(){e=x("span"),t=Me(n),a&&a.c(),this.h()},l(o){e=$(o,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=re(e);t=Re(s,n),a&&a.l(s),s.forEach(S),this.h()},h(){N(e,"data-slate-zero-width",i=r[1]?"n":"z"),N(e,"data-slate-length",r[0])},m(o,s){A(o,e,s),_t(e,t),a&&a.m(e,null)},p(o,[s]){o[1]?a||(a=en(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&i!==(i=o[1]?"n":"z")&&N(e,"data-slate-zero-width",i),s&1&&N(e,"data-slate-length",o[0])},i:he,o:he,d(o){o&&S(e),a&&a.d()}}}function Lr(r,e,n){let{length:t=0}=e,{isLineBreak:i=!1}=e;return r.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,i=a.isLineBreak)},[t,i]}class it extends Q{constructor(e){super();Z(this,e,Lr,Dr,ie,{length:0,isLineBreak:1})}}function Sr(r){let e,n;return e=new yr({props:{isTrailing:r[5],text:r[0].text}}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&32&&(a.isTrailing=t[5]),i&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Fr(r){let e,n;return e=new it({}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:he,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Or(r){let e,n;return e=new it({props:{isLineBreak:!0}}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:he,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Pr(r){let e,n;return e=new it({props:{length:ee.string(r[1]).length}}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&2&&(a.length=ee.string(t[1]).length),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Br(r){let e,n,t,i;const a=[Pr,Or,Fr,Sr],o=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,[c]){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),C(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){o[e].d(l),l&&S(t)}}}function Nr(r,e,n){let t,i,a,o,s,l,{isLast:c}=e,{leaf:u}=e,{parent:h}=e,{text:d}=e;const m=Ee();return r.$$set=_=>{"isLast"in _&&n(6,c=_.isLast),"leaf"in _&&n(0,u=_.leaf),"parent"in _&&n(1,h=_.parent),"text"in _&&n(7,d=_.text)},r.$$.update=()=>{r.$$.dirty&65&&n(5,t=c&&u.text.slice(-1)===`
`),r.$$.dirty&128&&n(9,i=ke(d)),r.$$.dirty&512&&n(8,a=ge.parent(i)),r.$$.dirty&2&&n(4,o=m.isVoid(h)),r.$$.dirty&1&&n(2,s=u.text===""),r.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===d&&!m.isInline(h)&&g.string(m,a)==="")},[u,h,s,l,o,t,c,d,a,i]}class Tr extends Q{constructor(e){super();Z(this,e,Nr,Br,ie,{isLast:6,leaf:0,parent:1,text:7})}}function tn(r){let e,n,t,i;function a(l){r[7](l)}var o=r[5];function s(l){let c={$$slots:{default:[Ir]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return o&&(e=new o(s(r)),le.push(()=>We(e,"clientHeight",a))),{c(){e&&V(e.$$.fragment),t=I()},l(l){e&&Y(e.$$.fragment,l),t=I()},m(l,c){e&&H(e,l,c),A(l,t,c),i=!0},p(l,c){const u={};if(c&514&&(u.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,u.clientHeight=l[6],pt(()=>n=!1)),o!==(o=l[5])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{K(h,1)}),G()}o?(e=new o(s(l)),le.push(()=>We(e,"clientHeight",a)),V(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&S(t),e&&K(e,l)}}}function Ir(r){let e=r[1].placeholder+"",n;return{c(){n=Me(e)},l(t){n=Re(t,e)},m(t,i){A(t,n,i)},p(t,i){i&2&&e!==(e=t[1].placeholder+"")&&wt(n,e)},d(t){t&&S(n)}}}function Ar(r){let e,n,t,i=Pe in r[1]&&tn(r);return n=new Tr({props:{isLast:r[0],leaf:r[1],parent:r[2],text:r[3]}}),{c(){i&&i.c(),e=I(),V(n.$$.fragment)},l(a){i&&i.l(a),e=I(),Y(n.$$.fragment,a)},m(a,o){i&&i.m(a,o),A(a,e,o),H(n,a,o),t=!0},p(a,o){Pe in a[1]?i?(i.p(a,o),o&2&&b(i,1)):(i=tn(a),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(X(),C(i,1,1,()=>{i=null}),G());const s={};o&1&&(s.isLast=a[0]),o&2&&(s.leaf=a[1]),o&4&&(s.parent=a[2]),o&8&&(s.text=a[3]),n.$set(s)},i(a){t||(b(i),b(n.$$.fragment,a),t=!0)},o(a){C(i),C(n.$$.fragment,a),t=!1},d(a){i&&i.d(a),a&&S(e),K(n,a)}}}function Mr(r){let e,n,t;var i=r[4];function a(o){return{props:{leaf:o[1],$$slots:{default:[Ar]},$$scope:{ctx:o}}}}return i&&(e=new i(a(r))),{c(){e&&V(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&H(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.leaf=o[1]),s&623&&(l.$$scope={dirty:s,ctx:o}),i!==(i=o[4])){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{K(c,1)}),G()}i?(e=new i(a(o)),V(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(o){t||(e&&b(e.$$.fragment,o),t=!0)},o(o){e&&C(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&K(e,o)}}}function Rr(r,e,n){let{isLast:t}=e,{leaf:i}=e,{parent:a}=e,{text:o}=e,{Leaf:s}=e,{Placeholder:l}=e,c,u;vn(()=>{if(At){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="")}});function h(d){c=d,n(6,c)}return r.$$set=d=>{"isLast"in d&&n(0,t=d.isLast),"leaf"in d&&n(1,i=d.leaf),"parent"in d&&n(2,a=d.parent),"text"in d&&n(3,o=d.text),"Leaf"in d&&n(4,s=d.Leaf),"Placeholder"in d&&n(5,l=d.Placeholder)},r.$$.update=()=>{if(r.$$.dirty&64&&c!==u&&At){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${c}px`)}},[t,i,a,o,s,l,c,h]}class nn extends Q{constructor(e){super();Z(this,e,Rr,Mr,ie,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function rn(r,e,n){const t=r.slice();return t[11]=e[n],t[13]=n,t}function on(r,e){let n,t,i,a;var o=nn;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return o&&(t=new o(s(e))),{key:r,first:null,c(){n=I(),t&&V(t.$$.fragment),i=I(),this.h()},l(l){n=I(),t&&Y(t.$$.fragment,l),i=I(),this.h()},h(){this.first=n},m(l,c){A(l,n,c),t&&H(t,l,c),A(l,i,c),a=!0},p(l,c){e=l;const u={};if(c&8&&(u.Placeholder=e[3]),c&16&&(u.Leaf=e[4]),c&129&&(u.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(u.parent=e[1]),c&128&&(u.leaf=e[11]),c&4&&(u.text=e[2]),o!==(o=nn)){if(t){X();const h=t;C(h.$$.fragment,1,0,()=>{K(h,1)}),G()}o?(t=new o(s(e)),V(t.$$.fragment),b(t.$$.fragment,1),H(t,i.parentNode,i)):t=null}else o&&t.$set(u)},i(l){a||(t&&b(t.$$.fragment,l),a=!0)},o(l){t&&C(t.$$.fragment,l),a=!1},d(l){l&&S(n),l&&S(i),t&&K(t,l)}}}function Wr(r){let e,n=[],t=new Map,i,a=r[7];const o=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=rn(r,a,s),c=o(l);t.set(c,n[s]=on(c,l))}return{c(){e=x("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=$(s,"SPAN",{"data-slate-node":!0});var l=re(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(S),this.h()},h(){N(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);r[9](e),i=!0},p(s,[l]){l&223&&(a=s[7],X(),n=kt(n,l,o,1,s,a,t,e,Et,on,null,rn),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)C(n[l]);i=!1},d(s){s&&S(e);for(let l=0;l<n.length;l+=1)n[l].d();r[9](null)}}}function zr(r,e,n){let t,i,{decorations:a}=e,{isLast:o}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:u}=e;const h=Ee();let d;Qe(()=>{var _;(_=we.get(h))==null||_.set(i,d),_e.set(l,d),me.set(d,l)});function m(_){le[_?"unshift":"push"](()=>{d=_,n(5,d)})}return r.$$set=_=>{"decorations"in _&&n(8,a=_.decorations),"isLast"in _&&n(0,o=_.isLast),"parent"in _&&n(1,s=_.parent),"text"in _&&n(2,l=_.text),"Placeholder"in _&&n(3,c=_.Placeholder),"Leaf"in _&&n(4,u=_.Leaf)},r.$$.update=()=>{var _;r.$$.dirty&260&&n(7,t=Un.decorations(l,a)),r.$$.dirty&4&&n(6,i=ce(l)),r.$$.dirty&100&&d&&((_=we.get(h))==null||_.set(i,d),_e.set(l,d),me.set(d,l))},[o,s,l,c,u,d,i,t,a,m]}class be extends Q{constructor(e){super();Z(this,e,zr,Wr,ie,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Vr(r){let e,n;return e=new fn({props:{node:r[0],decorations:r[1],selection:r[2],Element:r[3],Placeholder:r[5],Leaf:r[4]}}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&1&&(a.node=t[0]),i&2&&(a.decorations=t[1]),i&4&&(a.selection=t[2]),i&8&&(a.Element=t[3]),i&32&&(a.Placeholder=t[5]),i&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Hr(r){let e,n,t,i;const a=[vr,Kr],o=[];function s(l,c){return l[7]?0:1}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,c){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),C(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){o[e].d(l),l&&S(t)}}}function Kr(r){let e,n,t;var i=be;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return i&&(n=new i(a(r))),{c(){e=x("div"),n&&V(n.$$.fragment),this.h()},l(o){e=$(o,"DIV",{"data-slate-spacer":!0,class:!0});var s=re(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),n&&H(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{K(c,1)}),G()}i?(n=new i(a(o)),V(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(o){t||(n&&b(n.$$.fragment,o),t=!0)},o(o){n&&C(n.$$.fragment,o),t=!1},d(o){o&&S(e),n&&K(n)}}}function vr(r){let e,n,t;var i=be;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return i&&(n=new i(a(r))),{c(){e=x("span"),n&&V(n.$$.fragment),this.h()},l(o){e=$(o,"SPAN",{"data-slate-spacer":!0,class:!0});var s=re(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(o,s){A(o,e,s),n&&H(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{K(c,1)}),G()}i?(n=new i(a(o)),V(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(o){t||(n&&b(n.$$.fragment,o),t=!0)},o(o){n&&C(n.$$.fragment,o),t=!1},d(o){o&&S(e),n&&K(n)}}}function Ur(r){let e,n,t,i;const a=[Hr,Vr],o=[];function s(l,c){return l[8]?0:1}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,c){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),C(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){o[e].d(l),l&&S(t)}}}function qr(r){let e,n,t,i;function a(l){r[18](l)}var o=r[3];function s(l){let c={"data-slate-void":l[8],"data-slate-inline":l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Ur]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return o&&(e=new o(s(r)),le.push(()=>We(e,"ref",a))),{c(){e&&V(e.$$.fragment),t=I()},l(l){e&&Y(e.$$.fragment,l),t=I()},m(l,c){e&&H(e,l,c),A(l,t,c),i=!0},p(l,[c]){const u={};if(c&256&&(u["data-slate-void"]=l[8]),c&128&&(u["data-slate-inline"]=l[7]),c&2048&&(u.contenteditable=l[11]),c&1&&(u.element=l[0]),c&512&&(u.dir=l[9]),c&1050047&&(u.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,u.ref=l[6],pt(()=>n=!1)),o!==(o=l[3])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{K(h,1)}),G()}o?(e=new o(s(l)),le.push(()=>We(e,"ref",a)),V(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&S(t),e&&K(e,l)}}}function Yr(r,e,n){let t,i,a,o,s,l,{element:c}=e,{decorations:u}=e,{selection:h=null}=e,{Element:d}=e,{Leaf:m}=e,{Placeholder:_}=e;const D=Ee(),W=Gt();ze(r,W,L=>n(17,l=L));let w,F,M,v,y;Qe(()=>{var L;(L=we.get(D))==null||L.set(w,y),_e.set(c,y),me.set(y,c)});function ne(L){y=L,n(6,y)}return r.$$set=L=>{"element"in L&&n(0,c=L.element),"decorations"in L&&n(1,u=L.decorations),"selection"in L&&n(2,h=L.selection),"Element"in L&&n(3,d=L.Element),"Leaf"in L&&n(4,m=L.Leaf),"Placeholder"in L&&n(5,_=L.Placeholder)},r.$$.update=()=>{var L;if(r.$$.dirty&131072&&n(15,t=l),r.$$.dirty&1&&n(7,i=D.isInline(c)),r.$$.dirty&1&&n(16,a=ce(c)),r.$$.dirty&81920&&F!==a&&(n(13,w=a),n(14,F=a)),r.$$.dirty&129&&!i&&g.hasInlines(D,c)){const T=xt(ee.string(c));T==="rtl"&&n(9,M=T)}if(r.$$.dirty&1&&n(8,o=g.isVoid(D,c)),r.$$.dirty&32768&&n(11,s=!t),r.$$.dirty&33153&&o){!t&&i&&n(11,s=!1);const[[T]]=ee.texts(c);n(10,v=T),He.set(T,0),Ke.set(T,c)}r.$$.dirty&8257&&y&&((L=we.get(D))==null||L.set(w,y),_e.set(c,y),me.set(y,c))},[c,u,h,d,m,_,y,i,o,M,v,s,W,w,F,t,a,l,ne]}class an extends Q{constructor(e){super();Z(this,e,Yr,qr,ie,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function Xr(r){let e,n,t;var i=an;function a(o){return{props:{Element:o[1],Placeholder:o[3],Leaf:o[2],decorations:o[5],element:o[0],selection:o[4]}}}return i&&(e=new i(a(r))),{c(){e&&V(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&H(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.Element=o[1]),s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&32&&(l.decorations=o[5]),s&1&&(l.element=o[0]),s&16&&(l.selection=o[4]),i!==(i=an)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{K(c,1)}),G()}i?(e=new i(a(o)),V(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(o){t||(e&&b(e.$$.fragment,o),t=!0)},o(o){e&&C(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&K(e,o)}}}const Gr={};function Jr(r,e,n){let t,i,a,o,{parent:s}=e,{element:l}=e,{path:c}=e,{index:u}=e,{decorate:h}=e,{decorations:d}=e,{selection:m=null}=e,{Element:_}=e,{Leaf:D}=e,{Placeholder:W}=e;const w=ue(!1);de(Gr,w);const F=Ee();let M=u,v=s,y=l,ne=d,L=m;return r.$$set=T=>{"parent"in T&&n(6,s=T.parent),"element"in T&&n(0,l=T.element),"path"in T&&n(7,c=T.path),"index"in T&&n(8,u=T.index),"decorate"in T&&n(9,h=T.decorate),"decorations"in T&&n(10,d=T.decorations),"selection"in T&&n(11,m=T.selection),"Element"in T&&n(1,_=T.Element),"Leaf"in T&&n(2,D=T.Leaf),"Placeholder"in T&&n(3,W=T.Placeholder)},r.$$.update=()=>{r.$$.dirty&4352&&M!==u&&n(12,M=u),r.$$.dirty&8256&&v!==s&&n(13,v=s),r.$$.dirty&16385&&y!==l&&n(14,y=l),r.$$.dirty&33792&&(Vt(ne,d)||n(15,ne=d)),r.$$.dirty&67584&&(Ht(L,m)||n(16,L=m)),r.$$.dirty&20480&&He.set(y,M),r.$$.dirty&24576&&Ke.set(y,v),r.$$.dirty&4224&&n(18,t=c.concat(M)),r.$$.dirty&262144&&n(17,i=g.range(F,t)),r.$$.dirty&442880&&n(5,a=cn(h([y,t]),i,ne)),r.$$.dirty&196608&&n(4,o=L&&B.intersection(i,L)),r.$$.dirty&16&&w.set(!!o)},[l,_,D,W,o,a,s,c,u,h,d,m,M,v,y,ne,L,i,t]}class Qr extends Q{constructor(e){super();Z(this,e,Jr,Xr,ye,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Zr(r){let e,n,t;var i=be;function a(o){return{props:{Placeholder:o[3],Leaf:o[2],decorations:o[4],isLast:o[5],parent:o[0],text:o[1]}}}return i&&(e=new i(a(r))),{c(){e&&V(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&H(e,o,s),A(o,n,s),t=!0},p(o,[s]){const l={};if(s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&16&&(l.decorations=o[4]),s&32&&(l.isLast=o[5]),s&1&&(l.parent=o[0]),s&2&&(l.text=o[1]),i!==(i=be)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{K(c,1)}),G()}i?(e=new i(a(o)),V(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(o){t||(e&&b(e.$$.fragment,o),t=!0)},o(o){e&&C(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&K(e,o)}}}function jr(r,e,n){let t,i,a,o,{parent:s}=e,{text:l}=e,{path:c}=e,{index:u}=e,{isLeafBlock:h}=e,{decorations:d}=e,{decorate:m}=e,{Leaf:_}=e,{Placeholder:D}=e;const W=Ee();let w=u,F=l,M=s,v=d;return r.$$set=y=>{"parent"in y&&n(0,s=y.parent),"text"in y&&n(1,l=y.text),"path"in y&&n(6,c=y.path),"index"in y&&n(7,u=y.index),"isLeafBlock"in y&&n(8,h=y.isLeafBlock),"decorations"in y&&n(9,d=y.decorations),"decorate"in y&&n(10,m=y.decorate),"Leaf"in y&&n(2,_=y.Leaf),"Placeholder"in y&&n(3,D=y.Placeholder)},r.$$.update=()=>{r.$$.dirty&2176&&w!==u&&n(11,w=u),r.$$.dirty&4098&&F!==l&&n(12,F=l),r.$$.dirty&8193&&M!==s&&n(13,M=s),r.$$.dirty&16896&&(Vt(v,d)||n(14,v=d)),r.$$.dirty&6144&&He.set(F,w),r.$$.dirty&12288&&Ke.set(F,M),r.$$.dirty&2112&&n(16,t=c.concat(w)),r.$$.dirty&10496&&n(5,i=h&&w===M.children.length-1),r.$$.dirty&65536&&n(15,a=g.range(W,t)),r.$$.dirty&119808&&n(4,o=cn(m([F,t]),a,v))},[s,l,_,D,o,i,c,u,h,d,m,w,F,M,v,a,t]}class xr extends Q{constructor(e){super();Z(this,e,jr,Zr,ye,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function ln(r,e,n){const t=r.slice();return t[14]=e[n],t[16]=n,t}function $r(r){let e,n;return e=new xr({props:{Placeholder:r[4],Leaf:r[3],decorations:r[0],parent:r[5],text:r[14],decorate:r[9],index:r[16],path:r[8],isLeafBlock:r[7]}}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&32&&(a.parent=t[5]),i&64&&(a.text=t[14]),i&512&&(a.decorate=t[9]),i&64&&(a.index=t[16]),i&256&&(a.path=t[8]),i&128&&(a.isLeafBlock=t[7]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function ei(r){let e,n;return e=new Qr({props:{Element:r[2],Placeholder:r[4],Leaf:r[3],decorations:r[0],selection:r[1],element:r[14],parent:r[5],decorate:r[9],index:r[16],path:r[8]}}),{c(){V(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&4&&(a.Element=t[2]),i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&2&&(a.selection=t[1]),i&64&&(a.element=t[14]),i&32&&(a.parent=t[5]),i&512&&(a.decorate=t[9]),i&64&&(a.index=t[16]),i&256&&(a.path=t[8]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function sn(r,e){let n,t,i,a,o,s;const l=[ei,$r],c=[];function u(h,d){return d&64&&(t=null),t==null&&(t=!!Ve.isElement(h[14])),t?0:1}return i=u(e,-1),a=c[i]=l[i](e),{key:r,first:null,c(){n=I(),a.c(),o=I(),this.h()},l(h){n=I(),a.l(h),o=I(),this.h()},h(){this.first=n},m(h,d){A(h,n,d),c[i].m(h,d),A(h,o,d),s=!0},p(h,d){e=h;let m=i;i=u(e,d),i===m?c[i].p(e,d):(X(),C(c[m],1,1,()=>{c[m]=null}),G(),a=c[i],a?a.p(e,d):(a=c[i]=l[i](e),a.c()),b(a,1),a.m(o.parentNode,o))},i(h){s||(b(a),s=!0)},o(h){C(a),s=!1},d(h){h&&S(n),c[i].d(h),h&&S(o)}}}function ti(r){let e=[],n=new Map,t,i,a=r[6];const o=s=>ce(s[14]);for(let s=0;s<a.length;s+=1){let l=ln(r,a,s),c=o(l);n.set(c,e[s]=sn(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=I()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=I()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);A(s,t,l),i=!0},p(s,[l]){l&1023&&(a=s[6],X(),e=kt(e,l,o,1,s,a,n,t.parentNode,Et,sn,t,ln),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(e[l]);i=!0}},o(s){for(let l=0;l<e.length;l+=1)C(e[l]);i=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&S(t)}}}function cn(r,e,n=[]){for(const t of n){const i=B.intersection(t,e);i&&r.push(i)}return r}function ni(r,e,n){let t,i,a,o,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:u}=e,{Leaf:h}=e,{Placeholder:d}=e;const m=Ee(),_=Jt();ze(r,_,w=>n(12,o=w));let D=s,W=s.children;return r.$$set=w=>{"node"in w&&n(11,s=w.node),"decorations"in w&&n(0,l=w.decorations),"selection"in w&&n(1,c=w.selection),"Element"in w&&n(2,u=w.Element),"Leaf"in w&&n(3,h=w.Leaf),"Placeholder"in w&&n(4,d=w.Placeholder)},r.$$.update=()=>{r.$$.dirty&4096&&n(9,t=o),r.$$.dirty&2080&&D!==s&&n(5,D=s),r.$$.dirty&2112&&W!==s.children&&n(6,W=s.children),r.$$.dirty&32&&n(8,i=ke(D)),r.$$.dirty&32&&n(7,a=Ve.isElement(D)&&!m.isInline(D)&&g.hasInlines(m,D))},[l,c,u,h,d,D,W,a,i,t,_,s,o]}class fn extends Q{constructor(e){super();Z(this,e,ni,ti,ye,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function ri(r){let e,n;const t=r[7].default,i=De(t,r,r[6],null);return{c(){e=x("div"),i&&i.c(),this.h()},l(a){e=$(a,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=re(e);i&&i.l(o),o.forEach(S),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-void",r[2]),N(e,"dir",r[4]),N(e,"contenteditable",r[3]),N(e,"class","svelte-19k8gul")},m(a,o){A(a,e,o),i&&i.m(e,null),r[9](e),n=!0},p(a,o){i&&i.p&&(!n||o&64)&&Le(i,t,a,a[6],n?Fe(t,a[6],o,null):Se(a[6]),null),(!n||o&4)&&N(e,"data-slate-void",a[2]),(!n||o&16)&&N(e,"dir",a[4]),(!n||o&8)&&N(e,"contenteditable",a[3])},i(a){n||(b(i,a),n=!0)},o(a){C(i,a),n=!1},d(a){a&&S(e),i&&i.d(a),r[9](null)}}}function ii(r){let e,n;const t=r[7].default,i=De(t,r,r[6],null);return{c(){e=x("span"),i&&i.c(),this.h()},l(a){e=$(a,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=re(e);i&&i.l(o),o.forEach(S),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-inline",r[1]),N(e,"data-slate-void",r[2]),N(e,"dir",r[4]),N(e,"contenteditable",r[3]),N(e,"class","svelte-19k8gul")},m(a,o){A(a,e,o),i&&i.m(e,null),r[8](e),n=!0},p(a,o){i&&i.p&&(!n||o&64)&&Le(i,t,a,a[6],n?Fe(t,a[6],o,null):Se(a[6]),null),(!n||o&2)&&N(e,"data-slate-inline",a[1]),(!n||o&4)&&N(e,"data-slate-void",a[2]),(!n||o&16)&&N(e,"dir",a[4]),(!n||o&8)&&N(e,"contenteditable",a[3])},i(a){n||(b(i,a),n=!0)},o(a){C(i,a),n=!1},d(a){a&&S(e),i&&i.d(a),r[8](null)}}}function oi(r){let e,n,t,i;const a=[ii,ri],o=[];function s(l,c){return l[1]?0:1}return e=s(r),n=o[e]=a[e](r),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),A(l,t,c),i=!0},p(l,[c]){let u=e;e=s(l),e===u?o[e].p(l,c):(X(),C(o[u],1,1,()=>{o[u]=null}),G(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){o[e].d(l),l&&S(t)}}}function ai(r,e,n){let{$$slots:t={},$$scope:i}=e,{element:a}=e,{ref:o}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:c}=e,{dir:u=void 0}=e;function h(m){le[m?"unshift":"push"](()=>{o=m,n(0,o)})}function d(m){le[m?"unshift":"push"](()=>{o=m,n(0,o)})}return r.$$set=m=>{"element"in m&&n(5,a=m.element),"ref"in m&&n(0,o=m.ref),"isInline"in m&&n(1,s=m.isInline),"isVoid"in m&&n(2,l=m.isVoid),"contenteditable"in m&&n(3,c=m.contenteditable),"dir"in m&&n(4,u=m.dir),"$$scope"in m&&n(6,i=m.$$scope)},[o,s,l,c,u,a,i,t,h,d]}class li extends Q{constructor(e){super();Z(this,e,ai,oi,ie,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function si(r){let e,n;const t=r[2].default,i=De(t,r,r[1],null);return{c(){e=x("span"),i&&i.c(),this.h()},l(a){e=$(a,"SPAN",{"data-slate-leaf":!0});var o=re(e);i&&i.l(o),o.forEach(S),this.h()},h(){N(e,"data-slate-leaf","true")},m(a,o){A(a,e,o),i&&i.m(e,null),n=!0},p(a,[o]){i&&i.p&&(!n||o&2)&&Le(i,t,a,a[1],n?Fe(t,a[1],o,null):Se(a[1]),null)},i(a){n||(b(i,a),n=!0)},o(a){C(i,a),n=!1},d(a){a&&S(e),i&&i.d(a)}}}function ci(r,e,n){let{$$slots:t={},$$scope:i}=e,{leaf:a}=e;return r.$$set=o=>{"leaf"in o&&n(0,a=o.leaf),"$$scope"in o&&n(1,i=o.$$scope)},[a,i,t]}class fi extends Q{constructor(e){super();Z(this,e,ci,si,ie,{leaf:0})}}function di(r){let e,n,t;const i=r[2].default,a=De(i,r,r[1],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(o){e=$(o,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=re(e);a&&a.l(s),s.forEach(S),this.h()},h(){N(e,"data-slate-placeholder",""),N(e,"contenteditable","false"),N(e,"class","svelte-lqbb94"),qn(()=>r[3].call(e))},m(o,s){A(o,e,s),a&&a.m(e,null),n=Yn(e,r[3].bind(e)),t=!0},p(o,[s]){a&&a.p&&(!t||s&2)&&Le(a,i,o,o[1],t?Fe(i,o[1],s,null):Se(o[1]),null)},i(o){t||(b(a,o),t=!0)},o(o){C(a,o),t=!1},d(o){o&&S(e),a&&a.d(o),n()}}}function ui(r,e,n){let{$$slots:t={},$$scope:i}=e,{clientHeight:a}=e;function o(){a=this.clientHeight,n(0,a)}return r.$$set=s=>{"clientHeight"in s&&n(0,a=s.clientHeight),"$$scope"in s&&n(1,i=s.$$scope)},[a,i,t,o]}class hi extends Q{constructor(e){super();Z(this,e,ui,di,ie,{clientHeight:0})}}const gi=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ot={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},dn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:gi?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},at={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let r=1;r<20;r++)at["f"+r]=111+r;function un(r,e={}){Array.isArray(r)||(r=[r]);const n=r.map(t=>mi(t,e));return function(i){return n.some(a=>_i(a,i))}}function Oi(r,e,n={}){return un(r,n)(e)}function lt(r){return un(r,{byKey:!0})}function mi(r,e={}){const n=e&&e.byKey,t={};r=r.replace("++","+add");const i=r.split("+"),{length:a}=i;for(const o in ot)t[ot[o]]=!1;for(let o of i){const s=o.endsWith("?")&&o.length>1;s&&(o=o.slice(0,-1));const l=hn(o),c=ot[l];if(o.length>1&&!c&&!dn[o]&&!at[l])throw new TypeError(`Unknown modifier: "${o}"`);(a===1||!c)&&(n?t.key=l:t.which=wi(o)),c&&(t[c]=s?null:!0)}return t}function _i(r,e){for(const n in r){const t=r[n];let i;if(t!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=t===91&&e.which===93?91:e.which:i=e[n],!(i==null&&t===!1)&&i!==t))return!1}return!0}function wi(r){return r=hn(r),at[r]||r.toUpperCase().charCodeAt(0)}function hn(r){return r=r.toLowerCase(),r=dn[r]||r,r}const pi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ki={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Ei={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function U(r){const e=pi[r],n=ki[r],t=Ei[r],i=e&&lt(e),a=n&&lt(n),o=t&&lt(t);return s=>!!(i&&i(s)||Tt&&a&&a(s)||!Tt&&o&&o(s))}var q={isBold:U("bold"),isCompose:U("compose"),isMoveBackward:U("moveBackward"),isMoveForward:U("moveForward"),isDeleteBackward:U("deleteBackward"),isDeleteForward:U("deleteForward"),isDeleteLineBackward:U("deleteLineBackward"),isDeleteLineForward:U("deleteLineForward"),isDeleteWordBackward:U("deleteWordBackward"),isDeleteWordForward:U("deleteWordForward"),isExtendBackward:U("extendBackward"),isExtendForward:U("extendForward"),isExtendLineBackward:U("extendLineBackward"),isExtendLineForward:U("extendLineForward"),isItalic:U("italic"),isMoveLineBackward:U("moveLineBackward"),isMoveLineForward:U("moveLineForward"),isMoveWordBackward:U("moveWordBackward"),isMoveWordForward:U("moveWordForward"),isRedo:U("redo"),isSplitBlock:U("splitBlock"),isTransposeCharacter:U("transposeCharacter"),isUndo:U("undo")};function bi(r){let e,n,t,i,a,o,s,l;n=new fn({props:{node:r[8],selection:r[9],decorations:r[10],Element:r[1],Leaf:r[2],Placeholder:r[3]}});let c=[r[29],{role:t=r[4]?void 0:"textbox"},{spellcheck:r[5]},{autocorrect:r[6]},{autocapitalize:r[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:i=!r[4]},{"z-index":a=-1}],u={};for(let h=0;h<c.length;h+=1)u=Ze(u,c[h]);return{c(){e=x("div"),V(n.$$.fragment),this.h()},l(h){e=$(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var d=re(e);Y(n.$$.fragment,d),d.forEach(S),this.h()},h(){bt(e,u),Ct(e,"svelte-m59z04",!0)},m(h,d){A(h,e,d),H(n,e,null),r[42](e),o=!0,s||(l=[J(e,"beforeinput",r[13]),J(e,"keydown",r[15]),J(e,"input",r[14]),J(e,"focus",r[16]),J(e,"blur",r[17]),J(e,"click",r[18]),J(e,"compositionend",r[19]),J(e,"compositionupdate",r[20]),J(e,"compositionstart",r[21]),J(e,"paste",r[22]),J(e,"copy",r[23]),J(e,"cut",r[24]),J(e,"dragover",r[25]),J(e,"dragstart",r[26]),J(e,"drop",r[27]),J(e,"dragend",r[28])],s=!0)},p(h,d){const m={};d[0]&256&&(m.node=h[8]),d[0]&512&&(m.selection=h[9]),d[0]&1024&&(m.decorations=h[10]),d[0]&2&&(m.Element=h[1]),d[0]&4&&(m.Leaf=h[2]),d[0]&8&&(m.Placeholder=h[3]),n.$set(m),bt(e,u=Xn(c,[d[0]&536870912&&h[29],(!o||d[0]&16&&t!==(t=h[4]?void 0:"textbox"))&&{role:t},(!o||d[0]&32)&&{spellcheck:h[5]},(!o||d[0]&64)&&{autocorrect:h[6]},(!o||d[0]&128)&&{autocapitalize:h[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!o||d[0]&16&&i!==(i=!h[4]))&&{contenteditable:i},{"z-index":a}])),Ct(e,"svelte-m59z04",!0)},i(h){o||(b(n.$$.fragment,h),o=!0)},o(h){C(n.$$.fragment,h),o=!1},d(h){h&&S(e),K(n),r[42](null),s=!1,Gn(l)}}}function Ce(r,e){return se(e)&&rt(r,e)}function j(r,e){return se(e)&&rt(r,e,{editable:!0})}function gn(r,e){if(St.get(r))return!1;{const n=Ce(r,e)&&fe(e);return g.isVoid(r,n)}}function Ci(r,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),jn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function yi(r,e,n){let t,i,a,o,s,l,c,u;const h=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let d=yt(e,h),m,_,{Element:D=li}=e,{Leaf:W=fi}=e,{Placeholder:w=hi}=e,{placeholder:F}=e,{readOnly:M=!1}=e,{autoFocus:v=!1}=e,{decorate:y=Qt}=e,{scrollSelectionIntoView:ne=Ci}=e,{ref:L=void 0}=e,{spellcheck:T=!0}=e,{autocorrect:st="true"}=e,{autocapitalize:ct="true"}=e,{onKeyDown:qe=()=>{}}=e;const ft=Xt();ze(r,ft,f=>n(41,_=f));const wn=Gt(),Te=_r(),pn=Jt(),Ye=wr();ze(r,Ye,f=>n(40,m=f));const k={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:!1,isDraggingInternally:!1,latestElement:null,readOnly:M};let Xe=[],Ge;function kn(){if(!k.isComposing&&!k.isUpdatingSelection&&!k.isDraggingInternally){const f=Be(t),p=oe(t,t),E=f.getSelection();if(f.activeElement===p?(n(35,k.latestElement=f.activeElement,k),pe.set(t,!0),Te.set(!0)):(pe.delete(t),Te.set(!1)),!E){R.deselect(t);return}const{anchorNode:O,focusNode:P}=E,z=j(t,O)||gn(t,O),ae=j(t,P)||gn(t,P);if(z&&ae){const Ie=Ne(t,E,{exactMatch:!1,suppressThrow:!0});R.select(t,Ie)}}}function dt(){l()}Qe(()=>{const f=$e(L);return f&&(je.set(t,f),f.document.addEventListener("selectionchange",dt)),ve.set(t,L),_e.set(t,L),me.set(L,t),()=>{ve.delete(t),_e.delete(t),f&&(je.delete(t),f.document.removeEventListener("selectionchange",dt))}});function En(){console.log("UPDATE");const f=Be(t),p=f==null?void 0:f.getSelection();if(k.isComposing||!p||!Rt(t))return;const E=p.type!=="None";if(!E)return;const O=ve.get(t);let P=!1;if(O.contains(p.anchorNode)&&O.contains(p.focusNode)&&(P=!0),E&&P&&i){const ae=Ne(t,p,{exactMatch:!0,suppressThrow:!0});if(ae&&B.equals(ae,i))return}if(i&&!gr(t,i)){n(8,t.selection=Ne(t,p,{exactMatch:!1,suppressThrow:!1}),t),n(9,i=t.selection),Ye.set(i);return}n(35,k.isUpdatingSelection=!0,k),setTimeout(()=>{z&&et&&oe(t,t).focus(),n(35,k.isUpdatingSelection=!1,k)});const z=i&&P&&Ue(t,i);z&&(B.isBackward(i)?p.setBaseAndExtent(z.endContainer,z.endOffset,z.startContainer,z.startOffset):p.setBaseAndExtent(z.startContainer,z.startOffset,z.endContainer,z.endOffset),ne(t,z))}Jn(()=>u());function bn(f){if(!k.readOnly&&j(t,f.target)){const p=f.inputType,E=f.dataTransfer||f.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let O=!1;if(p==="insertText"&&i&&B.isCollapsed(i)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&i.anchor.offset!==0){O=!0,t.marks&&(O=!1);const P=g.above(t,{at:i.anchor,match:z=>g.isInline(t,z),mode:"highest"});if(P){const[,z]=P;g.isEnd(t,i.anchor,z)&&(O=!1)}}if(O||f.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[P]=f.getTargetRanges();if(P){const z=Ne(t,P,{exactMatch:!1,suppressThrow:!1});(!i||!B.equals(i,z))&&R.select(t,z)}}if(i&&B.isExpanded(i)&&p.startsWith("delete")){const P=p.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:P});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&k.isComposing&&n(35,k.isComposing=!1,k),(E==null?void 0:E.constructor.name)==="DataTransfer"?t.insertData(E):typeof E=="string"&&(O?Xe.push(()=>g.insertText(t,E)):g.insertText(t,E));break}}}}function Cn(f){for(const p of Xe)p();Xe.length=0}function yn(f){if(!k.readOnly&&!k.isComposing&&j(t,f.target)){const p=t.children[i!==null?i.focus.path[0]:0],E=xt(ee.string(p))==="rtl";if(q.isRedo(f)){f.preventDefault();const O=t;typeof O.redo=="function"&&O.redo()}else if(q.isUndo(f)){f.preventDefault();const O=t;typeof O.undo=="function"&&O.undo()}else if(q.isMoveLineBackward(f))f.preventDefault(),R.move(t,{unit:"line",reverse:!0});else if(q.isMoveLineForward(f))f.preventDefault(),R.move(t,{unit:"line"});else if(q.isExtendLineBackward(f))f.preventDefault(),R.move(t,{unit:"line",edge:"focus",reverse:!0});else if(q.isExtendLineForward(f))f.preventDefault(),R.move(t,{unit:"line",edge:"focus"});else if(q.isMoveBackward(f))f.preventDefault(),i&&B.isCollapsed(i)?R.move(t,{reverse:!E}):R.collapse(t,{edge:"start"});else if(q.isMoveForward(f))f.preventDefault(),i&&B.isCollapsed(i)?R.move(t,{reverse:E}):R.collapse(t,{edge:"end"});else if(q.isMoveWordBackward(f))f.preventDefault(),i&&B.isExpanded(i)&&R.collapse(t,{edge:"focus"}),R.move(t,{unit:"word",reverse:!E});else if(q.isMoveWordForward(f))f.preventDefault(),i&&B.isExpanded(i)&&R.collapse(t,{edge:"focus"}),R.move(t,{unit:"word",reverse:E});else if(!Mt)q.isBold(f)||q.isItalic(f)||q.isTransposeCharacter(f)?f.preventDefault():q.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):q.isDeleteBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):q.isDeleteForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):q.isDeleteLineBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):q.isDeleteLineForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):q.isDeleteWordBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):q.isDeleteWordForward(f)&&(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((It||tt)&&i&&(q.isDeleteBackward(f)||q.isDeleteForward(f))&&B.isCollapsed(i)){const O=ee.parent(t,i.anchor.path);if(Ve.isElement(O)&&g.isVoid(t,O)&&g.isInline(t,O)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return qe(f)}}}function Dn(f){if(!k.readOnly&&!k.isUpdatingSelection&&j(t,f.target)){const p=oe(t,t),E=Be(t);if(n(35,k.latestElement=E.activeElement,k),et&&f.target!==p){p.focus();return}pe.set(t,!0),Te.set(!0)}}function Ln(f){if(k.readOnly||k.isUpdatingSelection||!j(t,f.target))return;const p=Be(t);if(k.latestElement===p.activeElement)return;const E=f.relatedTarget,O=oe(t,t);if(E!==O&&!(te(E)&&E.hasAttribute("data-slate-spacer"))){if(E!=null&&se(E)&&rt(t,E)){const P=fe(E);if(Ve.isElement(P)&&!t.isVoid(P))return}if(tt){const P=p.getSelection();P==null||P.removeAllRanges()}pe.delete(t),Te.set(!1)}}function Sn(f){if(!k.readOnly&&Ce(t,f.target)&&se(f.target)){const p=fe(f.target),E=ke(p);if(g.hasPath(t,E)&&ee.get(t,E)===p){const P=g.start(t,E),z=g.end(t,E),ae=g.void(t,{at:P}),Ie=g.void(t,{at:z});if(ae&&Ie&&ge.equals(ae[1],Ie[1])){const zn=g.range(t,P);R.select(t,zn)}}}}function Fn(f){if(j(t,f.target)){n(35,k.isComposing=!1,k);const p=f.data;if(!tt&&!fr&&!lr&&!dr&&p&&g.insertText(t,p),i&&B.isCollapsed(i)){const E=i.anchor.path,O=ee.leaf(t,E);k.hasInsertPrefixInCompositon&&(n(35,k.hasInsertPrefixInCompositon=!1,k),g.withoutNormalizing(t,()=>{const P=O.text.replace(/^\uFEFF/,"");R.delete(t,{distance:O.text.length,reverse:!0}),R.insertText(t,P)}))}}}function On(f){j(t,f.target)&&n(35,k.isComposing=!0,k)}function Pn(f){if(j(t,f.target)){const{selection:p,marks:E}=t;if(p){if(B.isExpanded(p)){g.deleteFragment(t);return}const O=g.above(t,{match:P=>g.isInline(t,P),mode:"highest"});if(O){const[,P]=O;if(g.isEnd(t,p.anchor,P)){const z=g.after(t,P);R.setSelection(t,{anchor:z,focus:z})}}E&&(n(35,k.hasInsertPrefixInCompositon=!0,k),R.insertNodes(t,mt({text:"\uFEFF"},E),{select:!0}))}}}function Bn(f){!k.readOnly&&j(t,f.target)&&(!Mt||tr(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}function Nn(f){j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}function Tn(f){if(!k.readOnly&&j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),i))if(B.isExpanded(i))g.deleteFragment(t);else{const p=ee.parent(t,i.anchor.path);g.isVoid(t,p)&&R.delete(t)}}function In(f){if(Ce(t,f.target)){const p=fe(f.target);g.isVoid(t,p)&&f.preventDefault()}}function An(f){if(!k.readOnly&&Ce(t,f.target)){const p=fe(f.target),E=ke(p);if(g.isVoid(t,p)||g.void(t,{at:E,voids:!0})){const P=g.range(t,E);R.select(t,P)}n(35,k.isDraggingInternally=!0,k),t.setFragmentData(f.dataTransfer)}}function Mn(f){if(!k.readOnly&&Ce(t,f.target)){f.preventDefault();const p=i,E=hr(t,f),O=f.dataTransfer;R.select(t,E),k.isDraggingInternally&&(p&&!B.equals(p,E)&&!g.void(t,{at:E,voids:!0})&&R.delete(t,{at:p}),n(35,k.isDraggingInternally=!1,k)),t.insertData(O),Rt(t)||ur(t)}}function Rn(f){!k.readOnly&&k.isDraggingInternally&&Ce(t,f.target)&&n(35,k.isDraggingInternally=!1,k)}function Wn(f){le[f?"unshift":"push"](()=>{L=f,n(0,L)})}return r.$$set=f=>{e=Ze(Ze({},e),Qn(f)),n(29,d=yt(e,h)),"Element"in f&&n(1,D=f.Element),"Leaf"in f&&n(2,W=f.Leaf),"Placeholder"in f&&n(3,w=f.Placeholder),"placeholder"in f&&n(30,F=f.placeholder),"readOnly"in f&&n(4,M=f.readOnly),"autoFocus"in f&&n(31,v=f.autoFocus),"decorate"in f&&n(32,y=f.decorate),"scrollSelectionIntoView"in f&&n(33,ne=f.scrollSelectionIntoView),"ref"in f&&n(0,L=f.ref),"spellcheck"in f&&n(5,T=f.spellcheck),"autocorrect"in f&&n(6,st=f.autocorrect),"autocapitalize"in f&&n(7,ct=f.autocapitalize),"onKeyDown"in f&&n(34,qe=f.onKeyDown)},r.$$.update=()=>{if(r.$$.dirty[1]&1024&&n(8,t=_),r.$$.dirty[1]&512&&n(9,i=m),r.$$.dirty[0]&256|r.$$.dirty[1]&2&&n(10,a=y([t,[]])),r.$$.dirty[0]&272&&St.set(t,M),r.$$.dirty[0]&16&&wn.set(M),r.$$.dirty[0]&16&&n(35,k.readOnly=M,k),r.$$.dirty[1]&2&&pn.set(y),r.$$.dirty[0]&1073742080|r.$$.dirty[1]&18&&t.children.length===1&&Array.from(ee.texts(t)).length===1&&ee.string(t)===""&&!k.isComposing){const f=g.start(t,[]);n(10,a=[...y([t,[]]),{[Pe]:!0,placeholder:F,anchor:f,focus:f}])}r.$$.dirty[0]&1|r.$$.dirty[1]&33&&Ge!==v&&L&&(v&&L.focus(),n(36,Ge=v)),r.$$.dirty[1]&256&&n(38,s=Dt(100,!1,o,!1)),r.$$.dirty[1]&128&&(l=Zn(0,s)),r.$$.dirty[1]&64&&(u=Dt(0,!1,c,!1))},n(39,o=()=>Lt().then(kn)),n(37,c=()=>Lt().then(En)),[L,D,W,w,M,T,st,ct,t,i,a,ft,Ye,bn,Cn,yn,Dn,Ln,Sn,Fn,On,Pn,Bn,Nn,Tn,In,An,Mn,Rn,d,F,v,y,ne,qe,k,Ge,c,s,o,m,_,Wn]}class Pi extends Q{constructor(e){super();Z(this,e,yi,bi,ye,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function mn(r,e){const n=(e.top+e.bottom)/2;return r.top<=n&&r.bottom>=n}function _n(r,e,n){const t=Ue(r,e).getBoundingClientRect(),i=Ue(r,n).getBoundingClientRect();return mn(t,i)&&mn(i,t)}function Di(r,e){const n=g.range(r,B.end(e)),t=Array.from(g.positions(r,{at:e}));let i=0,a=t.length,o=Math.floor(a/2);if(_n(r,g.range(r,t[i]),n))return g.range(r,t[i],n);if(t.length<2)return g.range(r,t[t.length-1],n);for(;o!==t.length&&o!==i;)_n(r,g.range(r,t[o]),n)?a=o:i=o,o=Math.floor((i+a)/2);return g.range(r,t[a],n)}function Bi(r){const e=r,{apply:n,onChange:t,deleteBackward:i}=e;return we.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return i(a);if(r.selection&&B.isCollapsed(r.selection)){const o=g.above(r,{match:s=>g.isBlock(r,s),at:r.selection});if(o){const[,s]=o,l=g.range(r,s,r.selection.anchor),c=Di(e,l);B.isCollapsed(c)||R.delete(r,{at:c})}}},e.apply=a=>{const o=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=ce(s);o.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:ge.parent(a.path)})){const c=ce(s);o.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:ge.common(ge.parent(a.path),ge.parent(a.newPath))})){const c=ce(s);o.push([l,c])}break}}n(a);for(const[s,l]of o){const[c]=g.node(e,s);xe.set(c,l)}},e.setFragmentData=a=>{const{selection:o}=e;if(!o)return;const[s,l]=B.edges(o),c=g.void(e,{at:s.path}),u=g.void(e,{at:l.path});if(B.isCollapsed(o)&&!c)return;const h=Ue(e,o);let d=h.cloneContents(),m=d.childNodes[0];if(d.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(m=F)}),u){const[F]=u,M=h.cloneRange(),v=oe(e,F);M.setEndAfter(v),d=M.cloneContents()}if(c&&(m=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const M=F.getAttribute("data-slate-zero-width")==="n";F.textContent=M?`
`:""}),Pt(m)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(m),d.appendChild(F),m=F}const _=e.getFragment(),D=JSON.stringify(_),W=window.btoa(encodeURIComponent(D));m.setAttribute("data-slate-fragment",W),a.setData("application/x-slate-fragment",W);const w=document.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),document.body.appendChild(w),a.setData("text/html",w.innerHTML),a.setData("text/plain",Nt(w)),document.body.removeChild(w),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const o=a.getData("application/x-slate-fragment")||ar(a);if(o){const s=decodeURIComponent(window.atob(o)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const o=a.getData("text/plain");if(o){const s=o.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&R.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=Ft.get(e);a&&a(),t()},e}export{Pi as E,Fi as S,Xt as g,Oi as i,Bi as w};
