var zn=Object.defineProperty;var Me=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;var ht=(i,e,n)=>e in i?zn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,gt=(i,e)=>{for(var n in e||(e={}))dt.call(e,n)&&ht(i,n,e[n]);if(Me)for(var n of Me(e))ut.call(e,n)&&ht(i,n,e[n]);return i};var Je=(i,e)=>{var n={};for(var t in i)dt.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&Me)for(var t of Me(i))e.indexOf(t)<0&&ut.call(i,t)&&(n[t]=i[t]);return n};import{a1 as g,a2 as P,a3 as Vn,S as Z,i as x,s as Se,F as Le,J as Fe,K as Oe,L as Pe,q as b,o as C,r as ue,D as he,a4 as Hn,a5 as ge,a6 as ae,t as Ae,h as Re,g as M,d as S,e as ee,c as te,a as re,b as B,I as mt,j as _t,M as me,l as I,n as G,p as J,a7 as _e,w as z,x as Y,y as V,B as H,a8 as ne,a9 as Kn,Q as wt,O as se,P as We,aa as pt,ab as Et,v as Qe,ac as vn,ad as ze,ae as Ve,af as Un,ag as qn,C as je,ah as kt,ai as bt,aj as Q,z as Yn,ak as Xn,al as Ct,u as Gn,am as Jn,an as Qn,ao as jn,E as yt,ap as R,aq as Zn}from"./vendor-e8e751c8.js";const He=new WeakMap,Ke=new WeakMap,Ze=new WeakMap,ve=new WeakMap,we=new WeakMap,pe=new WeakMap,xe=new WeakMap,Ee=new WeakMap,Dt=new WeakMap,ke=new WeakMap,St=new WeakMap,Be=Symbol("placeholder");let xn=0;class $n{constructor(){this.id=`${xn++}`}toString(){return this.id}}function $e(i){return i&&i.ownerDocument&&i.ownerDocument.defaultView||null}function ei(i){return ce(i)&&i.nodeType===8}function ie(i){return ce(i)&&i.nodeType===1}function ce(i){const e=$e(i);return!!e&&i instanceof e.Node}function Lt(i){const e=i&&i.anchorNode&&$e(i.anchorNode);return!!e&&i instanceof e.Selection}function Ft(i){return ce(i)&&i.nodeType===3}function ti(i){return i.clipboardData&&i.clipboardData.getData("text/plain")!==""&&i.clipboardData.types.length===1}function ni(i){let[e,n]=i;if(ie(e)&&e.childNodes.length){let t=n===e.childNodes.length,r=t?n-1:n;for([e,r]=Ot(e,r,t?"backward":"forward"),t=r<n;ie(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=ri(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function ii(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Ot(i,e,n){const{childNodes:t}=i;let r=t[e],a=e,o=!1,s=!1;for(;(ei(r)||ie(r)&&r.childNodes.length===0||ie(r)&&r.getAttribute("contenteditable")==="false")&&!(o&&s);){if(a>=t.length){o=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}r=t[a],e=a,a+=n==="forward"?1:-1}return[r,e]}function ri(i,e,n){const[t]=Ot(i,e,n);return t}function Pt(i){let e="";if(Ft(i)&&i.nodeValue)return i.nodeValue;if(ie(i)){for(const t of Array.from(i.childNodes))e+=Pt(t);const n=getComputedStyle(i).getPropertyValue("display");(n==="block"||n==="list"||i.tagName==="BR")&&(e+=`
`)}return e}const oi=/data-slate-fragment="(.+?)"/m;function ai(i){const e=i.getData("text/html"),[,n]=e.match(oi)||[];return n}const li=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Bt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const et=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),si=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Tt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),ci=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),fi=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),di=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Nt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",It=!ci&&!si&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function nt(i){const e=Ze.get(i);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function fe(i){let e=xe.get(i);return e||(e=new $n,xe.set(i,e)),e}function be(i){const e=[];let n=i;for(;;){const t=Ke.get(n);if(t==null){if(g.isEditor(n))return e;break}const r=He.get(n);if(r==null)break;e.unshift(r),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(i)}`)}function Te(i){const e=le(i,i),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function Mt(i){return!!ke.get(i)}function ui(i){const e=le(i,i),n=Te(i);ke.set(i,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function it(i,e,n={}){const{editable:t=!1}=n,r=le(i,i);let a;try{a=ie(e)?e:e.parentElement}catch(o){if(!o.message.includes('Permission denied to access property "nodeType"'))throw o}return a?a.closest("[data-svelte-editor]")===r&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===r||!!a.getAttribute("data-slate-zero-width")):!1}function le(i,e,n=!0){const t=Ee.get(i),r=g.isEditor(e)?ve.get(i):t==null?void 0:t.get(fe(e));if(!r&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return r}function At(i,e,n=!0){const[t]=g.node(i,e.path),r=le(i,t,n);let a;g.void(i,{at:e})&&(e={path:e.path,offset:0});const o="[data-slate-string], [data-slate-zero-width]",s=r?Array.from(r.querySelectorAll(o)):[];let l=0;for(const c of s){const u=c.childNodes[0];if(u==null||u.textContent==null)continue;const{length:h}=u.textContent,d=c.getAttribute("data-slate-length"),m=d==null?h:parseInt(d,10),_=l+m;if(e.offset<=_){const y=Math.min(h,Math.max(0,e.offset-l));a=[u,y];break}l=_}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function Ue(i,e,n=!0){const{anchor:t,focus:r}=e,a=P.isBackward(e),o=At(i,t,n);if(!o)return;const s=P.isCollapsed(e)?o:At(i,r),c=nt(i).document.createRange(),[u,h]=a?s:o,[d,m]=a?o:s,y=!!(ie(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),w=!!(ie(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return c.setStart(u,y?1:h),c.setEnd(d,w?1:m),c}function de(i){let e=ie(i)?i:i.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?we.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function hi(i,e){const{clientX:n,clientY:t,target:r}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=de(e.target),o=be(a);if(g.isVoid(i,a)){const u=r.getBoundingClientRect(),h=i.isInline(a)?n-u.left<u.left+u.width-n:t-u.top<u.top+u.height-t,d=g.point(i,o,{edge:h?"start":"end"}),m=h?g.before(i,d):g.after(i,d);if(m)return g.range(i,m)}let s;const{document:l}=nt(i);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const u=l.caretPositionFromPoint(n,t);u&&(s=l.createRange(),s.setStart(u.offsetNode,u.offset),s.setEnd(u.offsetNode,u.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Ne(i,s,{exactMatch:!1,suppressThrow:!1})}function Rt(i,e,n){var d;const{exactMatch:t,suppressThrow:r}=n,[a,o]=t?e:ni(e),s=a.parentNode;let l=null,c=0;if(s){const m=s.closest('[data-slate-void="true"]');let _=s.closest("[data-slate-leaf]"),y=null;if(_){l=_.closest('[data-slate-node="text"]');const w=nt(i).document.createRange();w.setStart(l,0),w.setEnd(a,o);const L=w.cloneContents();[...Array.prototype.slice.call(L.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(L.querySelectorAll("[contenteditable=false]"))].forEach(K=>{K.parentNode.removeChild(K)}),c=L.textContent.length,y=l}else m&&(_=m.querySelector("[data-slate-leaf]"),_?(l=_.closest('[data-slate-node="text"]'),y=_,c=y.textContent.length,y.querySelectorAll("[data-slate-zero-width]").forEach(W=>{c-=W.textContent.length})):c=1);y&&c===y.textContent.length&&(s.hasAttribute("data-slate-zero-width")||et&&((d=y.textContent)==null?void 0:d.endsWith(`

`)))&&c--}if(!l){if(r)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const u=de(l);return{path:be(u),offset:c}}function Ne(i,e,n){const{exactMatch:t,suppressThrow:r}=n,a=Lt(e)?e.anchorNode:e.startContainer;let o,s,l,c,u;if(a&&(Lt(e)?(o=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Tt&&ii()?u=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:u=e.isCollapsed):(o=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,u=e.collapsed)),o==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=Rt(i,[o,s],{exactMatch:t,suppressThrow:r});if(!h)return null;const d=u?h:Rt(i,[l,c],{exactMatch:t,suppressThrow:r});if(!d)return null;let m={anchor:h,focus:d};return P.isExpanded(m)&&P.isForward(m)&&ie(l)&&g.void(i,{at:m.focus,mode:"highest"})&&(m=g.unhangRange(i,m,{voids:!0})),m}function gi(i,e){const{anchor:n,focus:t}=e;return g.hasPath(i,n.path)&&g.hasPath(i,t.path)}function Wt(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let r=0;r<i.length;r++){const a=i[r],o=e[r],n=a,{anchor:s,focus:l}=n,c=Je(n,["anchor","focus"]),t=o,{anchor:u,focus:h}=t,d=Je(t,["anchor","focus"]);if(!P.equals(a,o)||a[Be]!==o[Be]||!Vn(c,d))return!1}return!0}function zt(i,e){return i===e||!!i&&!!e&&P.equals(i,e)}function mi(i){let e;const n=i[7].default,t=Le(n,i,i[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,[a]){t&&t.p&&(!e||a&64)&&Fe(t,n,r,r[6],e?Pe(n,r[6],a,null):Oe(r[6]),null)},i(r){e||(b(t,r),e=!0)},o(r){C(t,r),e=!1},d(r){t&&t.d(r)}}}const Vt={},Ht={},Kt={},vt={},Ut={};function qt(){const i=ge(Vt);if(!i)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return i}function Ce(){return Hn(qt())}function Yt(){const i=ge(Ht);if(!i)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return i}function _i(){const i=ge(Kt);if(!i)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return i}function Xt(){const i=ge(vt);if(!i)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return i}function wi(){const i=ge(Ut);if(!i)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return i}function Gt(i){return[]}function pi(i,e,n){let{$$slots:t={},$$scope:r}=e,{editor:a}=e,{value:o=a.children}=e,{selection:s=a.selection}=e;const l=he(a);ue(Vt,l);const c=he(!0);ue(Ht,c);const u=he(!1);ue(Kt,u);const h=he(Gt);ue(vt,h);const d=he(a.selection);ue(Ut,d);function m(){n(1,s=a.selection),n(0,o=a.children)}St.set(a,m);let _=a,y,W;return i.$$set=w=>{"editor"in w&&n(2,a=w.editor),"value"in w&&n(0,o=w.value),"selection"in w&&n(1,s=w.selection),"$$scope"in w&&n(6,r=w.$$scope)},i.$$.update=()=>{i.$$.dirty&12&&a!==_&&(n(3,_=a),l.set(a)),i.$$.dirty&17&&y!==o&&(l.update(w=>(w.children=o,w)),n(4,y=o)),i.$$.dirty&38&&(zt(W,s)||(d.set(s),l.set(a),n(5,W=s)))},[o,s,a,_,y,W,r,t]}class Lr extends Z{constructor(e){super();x(this,e,pi,mi,Se,{editor:2,value:0,selection:1})}}const Jt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Qt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",Ei=new RegExp("^[^"+Qt+"]*["+Jt+"]"),ki=new RegExp("^[^"+Jt+"]*["+Qt+"]");function jt(i){const e=String(i||"");return Ei.test(e)?"rtl":ki.test(e)?"ltr":"neutral"}function Zt(i){let e=`
`,n;return{c(){n=Ae(e)},l(t){n=Re(t,e)},m(t,r){M(t,n,r)},d(t){t&&S(n)}}}function bi(i){let e,n,t=i[1]&&Zt();return{c(){e=ee("span"),n=Ae(i[0]),t&&t.c(),this.h()},l(r){e=te(r,"SPAN",{"data-slate-string":!0});var a=re(e);n=Re(a,i[0]),t&&t.l(a),a.forEach(S),this.h()},h(){B(e,"data-slate-string","true")},m(r,a){M(r,e,a),mt(e,n),t&&t.m(e,null)},p(r,[a]){a&1&&_t(n,r[0]),r[1]?t||(t=Zt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:me,o:me,d(r){r&&S(e),t&&t.d()}}}function Ci(i,e,n){let{text:t}=e,{isTrailing:r=!1}=e;return i.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,r=a.isTrailing)},[t,r]}class yi extends Z{constructor(e){super();x(this,e,Ci,bi,ae,{text:0,isTrailing:1})}}function xt(i){let e;return{c(){e=ee("br")},l(n){e=te(n,"BR",{})},m(n,t){M(n,e,t)},d(n){n&&S(e)}}}function Di(i){let e,n="\uFEFF",t,r,a=i[1]&&xt();return{c(){e=ee("span"),t=Ae(n),a&&a.c(),this.h()},l(o){e=te(o,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=re(e);t=Re(s,n),a&&a.l(s),s.forEach(S),this.h()},h(){B(e,"data-slate-zero-width",r=i[1]?"n":"z"),B(e,"data-slate-length",i[0])},m(o,s){M(o,e,s),mt(e,t),a&&a.m(e,null)},p(o,[s]){o[1]?a||(a=xt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&r!==(r=o[1]?"n":"z")&&B(e,"data-slate-zero-width",r),s&1&&B(e,"data-slate-length",o[0])},i:me,o:me,d(o){o&&S(e),a&&a.d()}}}function Si(i,e,n){let{length:t=0}=e,{isLineBreak:r=!1}=e;return i.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,r=a.isLineBreak)},[t,r]}class rt extends Z{constructor(e){super();x(this,e,Si,Di,ae,{length:0,isLineBreak:1})}}function Li(i){let e,n;return e=new yi({props:{isTrailing:i[5],text:i[0].text}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&32&&(a.isTrailing=t[5]),r&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Fi(i){let e,n;return e=new rt({}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:me,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Oi(i){let e,n;return e=new rt({props:{isLineBreak:!0}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:me,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Pi(i){let e,n;return e=new rt({props:{length:ne.string(i[1]).length}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&2&&(a.length=ne.string(t[1]).length),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Bi(i){let e,n,t,r;const a=[Pi,Oi,Fi,Li],o=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),M(l,t,c),r=!0},p(l,[c]){let u=e;e=s(l),e===u?o[e].p(l,c):(G(),C(o[u],1,1,()=>{o[u]=null}),J(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){r||(b(n),r=!0)},o(l){C(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function Ti(i,e,n){let t,r,a,o,s,l,{isLast:c}=e,{leaf:u}=e,{parent:h}=e,{text:d}=e;const m=Ce();return i.$$set=_=>{"isLast"in _&&n(6,c=_.isLast),"leaf"in _&&n(0,u=_.leaf),"parent"in _&&n(1,h=_.parent),"text"in _&&n(7,d=_.text)},i.$$.update=()=>{i.$$.dirty&65&&n(5,t=c&&u.text.slice(-1)===`
`),i.$$.dirty&128&&n(9,r=be(d)),i.$$.dirty&512&&n(8,a=_e.parent(r)),i.$$.dirty&2&&n(4,o=m.isVoid(h)),i.$$.dirty&1&&n(2,s=u.text===""),i.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===d&&!m.isInline(h)&&g.string(m,a)==="")},[u,h,s,l,o,t,c,d,a,r]}class Ni extends Z{constructor(e){super();x(this,e,Ti,Bi,ae,{isLast:6,leaf:0,parent:1,text:7})}}function $t(i){let e,n,t,r;function a(l){i[7](l)}var o=i[5];function s(l){let c={$$slots:{default:[Ii]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return o&&(e=new o(s(i)),se.push(()=>We(e,"clientHeight",a))),{c(){e&&z(e.$$.fragment),t=I()},l(l){e&&Y(e.$$.fragment,l),t=I()},m(l,c){e&&V(e,l,c),M(l,t,c),r=!0},p(l,c){const u={};if(c&514&&(u.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,u.clientHeight=l[6],wt(()=>n=!1)),o!==(o=l[5])){if(e){G();const h=e;C(h.$$.fragment,1,0,()=>{H(h,1)}),J()}o?(e=new o(s(l)),se.push(()=>We(e,"clientHeight",a)),z(e.$$.fragment),b(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){r||(e&&b(e.$$.fragment,l),r=!0)},o(l){e&&C(e.$$.fragment,l),r=!1},d(l){l&&S(t),e&&H(e,l)}}}function Ii(i){let e=i[1].placeholder+"",n;return{c(){n=Ae(e)},l(t){n=Re(t,e)},m(t,r){M(t,n,r)},p(t,r){r&2&&e!==(e=t[1].placeholder+"")&&_t(n,e)},d(t){t&&S(n)}}}function Mi(i){let e,n,t,r=Be in i[1]&&$t(i);return n=new Ni({props:{isLast:i[0],leaf:i[1],parent:i[2],text:i[3]}}),{c(){r&&r.c(),e=I(),z(n.$$.fragment)},l(a){r&&r.l(a),e=I(),Y(n.$$.fragment,a)},m(a,o){r&&r.m(a,o),M(a,e,o),V(n,a,o),t=!0},p(a,o){Be in a[1]?r?(r.p(a,o),o&2&&b(r,1)):(r=$t(a),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(G(),C(r,1,1,()=>{r=null}),J());const s={};o&1&&(s.isLast=a[0]),o&2&&(s.leaf=a[1]),o&4&&(s.parent=a[2]),o&8&&(s.text=a[3]),n.$set(s)},i(a){t||(b(r),b(n.$$.fragment,a),t=!0)},o(a){C(r),C(n.$$.fragment,a),t=!1},d(a){r&&r.d(a),a&&S(e),H(n,a)}}}function Ai(i){let e,n,t;var r=i[4];function a(o){return{props:{leaf:o[1],$$slots:{default:[Mi]},$$scope:{ctx:o}}}}return r&&(e=new r(a(i))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&V(e,o,s),M(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.leaf=o[1]),s&623&&(l.$$scope={dirty:s,ctx:o}),r!==(r=o[4])){if(e){G();const c=e;C(c.$$.fragment,1,0,()=>{H(c,1)}),J()}r?(e=new r(a(o)),z(e.$$.fragment),b(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}else r&&e.$set(l)},i(o){t||(e&&b(e.$$.fragment,o),t=!0)},o(o){e&&C(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&H(e,o)}}}function Ri(i,e,n){let{isLast:t}=e,{leaf:r}=e,{parent:a}=e,{text:o}=e,{Leaf:s}=e,{Placeholder:l}=e,c,u;Kn(()=>{if(Nt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="")}});function h(d){c=d,n(6,c)}return i.$$set=d=>{"isLast"in d&&n(0,t=d.isLast),"leaf"in d&&n(1,r=d.leaf),"parent"in d&&n(2,a=d.parent),"text"in d&&n(3,o=d.text),"Leaf"in d&&n(4,s=d.Leaf),"Placeholder"in d&&n(5,l=d.Placeholder)},i.$$.update=()=>{if(i.$$.dirty&64&&c!==u&&Nt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${c}px`)}},[t,r,a,o,s,l,c,h]}class en extends Z{constructor(e){super();x(this,e,Ri,Ai,ae,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function tn(i,e,n){const t=i.slice();return t[11]=e[n],t[13]=n,t}function nn(i,e){let n,t,r,a;var o=en;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return o&&(t=new o(s(e))),{key:i,first:null,c(){n=I(),t&&z(t.$$.fragment),r=I(),this.h()},l(l){n=I(),t&&Y(t.$$.fragment,l),r=I(),this.h()},h(){this.first=n},m(l,c){M(l,n,c),t&&V(t,l,c),M(l,r,c),a=!0},p(l,c){e=l;const u={};if(c&8&&(u.Placeholder=e[3]),c&16&&(u.Leaf=e[4]),c&129&&(u.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(u.parent=e[1]),c&128&&(u.leaf=e[11]),c&4&&(u.text=e[2]),o!==(o=en)){if(t){G();const h=t;C(h.$$.fragment,1,0,()=>{H(h,1)}),J()}o?(t=new o(s(e)),z(t.$$.fragment),b(t.$$.fragment,1),V(t,r.parentNode,r)):t=null}else o&&t.$set(u)},i(l){a||(t&&b(t.$$.fragment,l),a=!0)},o(l){t&&C(t.$$.fragment,l),a=!1},d(l){l&&S(n),l&&S(r),t&&H(t,l)}}}function Wi(i){let e,n=[],t=new Map,r,a=i[7];const o=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=tn(i,a,s),c=o(l);t.set(c,n[s]=nn(c,l))}return{c(){e=ee("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=te(s,"SPAN",{"data-slate-node":!0});var l=re(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(S),this.h()},h(){B(e,"data-slate-node","text")},m(s,l){M(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);i[9](e),r=!0},p(s,[l]){l&223&&(a=s[7],G(),n=pt(n,l,o,1,s,a,t,e,Et,nn,null,tn),J())},i(s){if(!r){for(let l=0;l<a.length;l+=1)b(n[l]);r=!0}},o(s){for(let l=0;l<n.length;l+=1)C(n[l]);r=!1},d(s){s&&S(e);for(let l=0;l<n.length;l+=1)n[l].d();i[9](null)}}}function zi(i,e,n){let t,r,{decorations:a}=e,{isLast:o}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:u}=e;const h=Ce();let d;Qe(()=>{var _;(_=Ee.get(h))==null||_.set(r,d),pe.set(l,d),we.set(d,l)});function m(_){se[_?"unshift":"push"](()=>{d=_,n(5,d)})}return i.$$set=_=>{"decorations"in _&&n(8,a=_.decorations),"isLast"in _&&n(0,o=_.isLast),"parent"in _&&n(1,s=_.parent),"text"in _&&n(2,l=_.text),"Placeholder"in _&&n(3,c=_.Placeholder),"Leaf"in _&&n(4,u=_.Leaf)},i.$$.update=()=>{var _;i.$$.dirty&260&&n(7,t=vn.decorations(l,a)),i.$$.dirty&4&&n(6,r=fe(l)),i.$$.dirty&100&&d&&((_=Ee.get(h))==null||_.set(r,d),pe.set(l,d),we.set(d,l))},[o,s,l,c,u,d,r,t,a,m]}class ye extends Z{constructor(e){super();x(this,e,zi,Wi,ae,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Vi(i){let e,n;return e=new cn({props:{node:i[0],decorations:i[1],selection:i[2],Element:i[3],Placeholder:i[5],Leaf:i[4]}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&1&&(a.node=t[0]),r&2&&(a.decorations=t[1]),r&4&&(a.selection=t[2]),r&8&&(a.Element=t[3]),r&32&&(a.Placeholder=t[5]),r&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Hi(i){let e,n,t,r;const a=[vi,Ki],o=[];function s(l,c){return l[7]?0:1}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),M(l,t,c),r=!0},p(l,c){let u=e;e=s(l),e===u?o[e].p(l,c):(G(),C(o[u],1,1,()=>{o[u]=null}),J(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){r||(b(n),r=!0)},o(l){C(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function Ki(i){let e,n,t;var r=ye;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return r&&(n=new r(a(i))),{c(){e=ee("div"),n&&z(n.$$.fragment),this.h()},l(o){e=te(o,"DIV",{"data-slate-spacer":!0,class:!0});var s=re(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){M(o,e,s),n&&V(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),r!==(r=ye)){if(n){G();const c=n;C(c.$$.fragment,1,0,()=>{H(c,1)}),J()}r?(n=new r(a(o)),z(n.$$.fragment),b(n.$$.fragment,1),V(n,e,null)):n=null}else r&&n.$set(l)},i(o){t||(n&&b(n.$$.fragment,o),t=!0)},o(o){n&&C(n.$$.fragment,o),t=!1},d(o){o&&S(e),n&&H(n)}}}function vi(i){let e,n,t;var r=ye;function a(o){return{props:{Placeholder:o[5],Leaf:o[4],decorations:o[1],isLast:!1,parent:o[0],text:o[10]}}}return r&&(n=new r(a(i))),{c(){e=ee("span"),n&&z(n.$$.fragment),this.h()},l(o){e=te(o,"SPAN",{"data-slate-spacer":!0,class:!0});var s=re(e);n&&Y(n.$$.fragment,s),s.forEach(S),this.h()},h(){B(e,"data-slate-spacer",""),B(e,"class","svelte-yux06v")},m(o,s){M(o,e,s),n&&V(n,e,null),t=!0},p(o,s){const l={};if(s&32&&(l.Placeholder=o[5]),s&16&&(l.Leaf=o[4]),s&2&&(l.decorations=o[1]),s&1&&(l.parent=o[0]),s&1024&&(l.text=o[10]),r!==(r=ye)){if(n){G();const c=n;C(c.$$.fragment,1,0,()=>{H(c,1)}),J()}r?(n=new r(a(o)),z(n.$$.fragment),b(n.$$.fragment,1),V(n,e,null)):n=null}else r&&n.$set(l)},i(o){t||(n&&b(n.$$.fragment,o),t=!0)},o(o){n&&C(n.$$.fragment,o),t=!1},d(o){o&&S(e),n&&H(n)}}}function Ui(i){let e,n,t,r;const a=[Hi,Vi],o=[];function s(l,c){return l[8]?0:1}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),M(l,t,c),r=!0},p(l,c){let u=e;e=s(l),e===u?o[e].p(l,c):(G(),C(o[u],1,1,()=>{o[u]=null}),J(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){r||(b(n),r=!0)},o(l){C(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function qi(i){let e,n,t,r;function a(l){i[18](l)}var o=i[3];function s(l){let c={isVoid:l[8],isInline:l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Ui]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return o&&(e=new o(s(i)),se.push(()=>We(e,"ref",a))),{c(){e&&z(e.$$.fragment),t=I()},l(l){e&&Y(e.$$.fragment,l),t=I()},m(l,c){e&&V(e,l,c),M(l,t,c),r=!0},p(l,[c]){const u={};if(c&256&&(u.isVoid=l[8]),c&128&&(u.isInline=l[7]),c&2048&&(u.contenteditable=l[11]),c&1&&(u.element=l[0]),c&512&&(u.dir=l[9]),c&1050047&&(u.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,u.ref=l[6],wt(()=>n=!1)),o!==(o=l[3])){if(e){G();const h=e;C(h.$$.fragment,1,0,()=>{H(h,1)}),J()}o?(e=new o(s(l)),se.push(()=>We(e,"ref",a)),z(e.$$.fragment),b(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){r||(e&&b(e.$$.fragment,l),r=!0)},o(l){e&&C(e.$$.fragment,l),r=!1},d(l){l&&S(t),e&&H(e,l)}}}function Yi(i,e,n){let t,r,a,o,s,l,{element:c}=e,{decorations:u}=e,{selection:h=null}=e,{Element:d}=e,{Leaf:m}=e,{Placeholder:_}=e;const y=Ce(),W=Yt();ze(i,W,T=>n(17,l=T));let w,L,A,K,D;Qe(()=>{var T;(T=Ee.get(y))==null||T.set(w,D),pe.set(c,D),we.set(D,c)});function q(T){D=T,n(6,D)}return i.$$set=T=>{"element"in T&&n(0,c=T.element),"decorations"in T&&n(1,u=T.decorations),"selection"in T&&n(2,h=T.selection),"Element"in T&&n(3,d=T.Element),"Leaf"in T&&n(4,m=T.Leaf),"Placeholder"in T&&n(5,_=T.Placeholder)},i.$$.update=()=>{var T;if(i.$$.dirty&131072&&n(15,t=l),i.$$.dirty&1&&n(7,r=y.isInline(c)),i.$$.dirty&1&&n(16,a=fe(c)),i.$$.dirty&81920&&L!==a&&(n(13,w=a),n(14,L=a)),i.$$.dirty&129&&!r&&g.hasInlines(y,c)){const N=jt(ne.string(c));N==="rtl"&&n(9,A=N)}if(i.$$.dirty&1&&n(8,o=g.isVoid(y,c)),i.$$.dirty&32768&&n(11,s=!t),i.$$.dirty&33153&&o){!t&&r&&n(11,s=!1);const[[N]]=ne.texts(c);n(10,K=N),He.set(N,0),Ke.set(N,c)}i.$$.dirty&8257&&D&&((T=Ee.get(y))==null||T.set(w,D),pe.set(c,D),we.set(D,c))},[c,u,h,d,m,_,D,r,o,A,K,s,W,w,L,t,a,l,q]}class rn extends Z{constructor(e){super();x(this,e,Yi,qi,ae,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function Xi(i){let e,n,t;var r=rn;function a(o){return{props:{Element:o[1],Placeholder:o[3],Leaf:o[2],decorations:o[5],element:o[0],selection:o[4]}}}return r&&(e=new r(a(i))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&V(e,o,s),M(o,n,s),t=!0},p(o,[s]){const l={};if(s&2&&(l.Element=o[1]),s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&32&&(l.decorations=o[5]),s&1&&(l.element=o[0]),s&16&&(l.selection=o[4]),r!==(r=rn)){if(e){G();const c=e;C(c.$$.fragment,1,0,()=>{H(c,1)}),J()}r?(e=new r(a(o)),z(e.$$.fragment),b(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}else r&&e.$set(l)},i(o){t||(e&&b(e.$$.fragment,o),t=!0)},o(o){e&&C(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&H(e,o)}}}const on={};function Fr(){const i=ge(on);if(!i)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return i}function Gi(i,e,n){let t,r,a,o,{parent:s}=e,{element:l}=e,{path:c}=e,{index:u}=e,{decorate:h}=e,{decorations:d}=e,{selection:m=null}=e,{Element:_}=e,{Leaf:y}=e,{Placeholder:W}=e;const w=he(!1);ue(on,w);const L=Ce();let A=u,K=s,D=l,q=d,T=m;return i.$$set=N=>{"parent"in N&&n(6,s=N.parent),"element"in N&&n(0,l=N.element),"path"in N&&n(7,c=N.path),"index"in N&&n(8,u=N.index),"decorate"in N&&n(9,h=N.decorate),"decorations"in N&&n(10,d=N.decorations),"selection"in N&&n(11,m=N.selection),"Element"in N&&n(1,_=N.Element),"Leaf"in N&&n(2,y=N.Leaf),"Placeholder"in N&&n(3,W=N.Placeholder)},i.$$.update=()=>{i.$$.dirty&4352&&A!==u&&n(12,A=u),i.$$.dirty&8256&&K!==s&&n(13,K=s),i.$$.dirty&16385&&D!==l&&n(14,D=l),i.$$.dirty&33792&&(Wt(q,d)||n(15,q=d)),i.$$.dirty&67584&&(zt(T,m)||n(16,T=m)),i.$$.dirty&20480&&He.set(D,A),i.$$.dirty&24576&&Ke.set(D,K),i.$$.dirty&4224&&n(18,t=c.concat(A)),i.$$.dirty&262144&&n(17,r=g.range(L,t)),i.$$.dirty&442880&&n(5,a=sn(h([D,t]),r,q)),i.$$.dirty&196608&&n(4,o=T&&P.intersection(r,T)),i.$$.dirty&16&&w.set(!!o)},[l,_,y,W,o,a,s,c,u,h,d,m,A,K,D,q,T,r,t]}class Ji extends Z{constructor(e){super();x(this,e,Gi,Xi,Se,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Qi(i){let e,n,t;var r=ye;function a(o){return{props:{Placeholder:o[3],Leaf:o[2],decorations:o[4],isLast:o[5],parent:o[0],text:o[1]}}}return r&&(e=new r(a(i))),{c(){e&&z(e.$$.fragment),n=I()},l(o){e&&Y(e.$$.fragment,o),n=I()},m(o,s){e&&V(e,o,s),M(o,n,s),t=!0},p(o,[s]){const l={};if(s&8&&(l.Placeholder=o[3]),s&4&&(l.Leaf=o[2]),s&16&&(l.decorations=o[4]),s&32&&(l.isLast=o[5]),s&1&&(l.parent=o[0]),s&2&&(l.text=o[1]),r!==(r=ye)){if(e){G();const c=e;C(c.$$.fragment,1,0,()=>{H(c,1)}),J()}r?(e=new r(a(o)),z(e.$$.fragment),b(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}else r&&e.$set(l)},i(o){t||(e&&b(e.$$.fragment,o),t=!0)},o(o){e&&C(e.$$.fragment,o),t=!1},d(o){o&&S(n),e&&H(e,o)}}}function ji(i,e,n){let t,r,a,o,{parent:s}=e,{text:l}=e,{path:c}=e,{index:u}=e,{isLeafBlock:h}=e,{decorations:d}=e,{decorate:m}=e,{Leaf:_}=e,{Placeholder:y}=e;const W=Ce();let w=u,L=l,A=s,K=d;return i.$$set=D=>{"parent"in D&&n(0,s=D.parent),"text"in D&&n(1,l=D.text),"path"in D&&n(6,c=D.path),"index"in D&&n(7,u=D.index),"isLeafBlock"in D&&n(8,h=D.isLeafBlock),"decorations"in D&&n(9,d=D.decorations),"decorate"in D&&n(10,m=D.decorate),"Leaf"in D&&n(2,_=D.Leaf),"Placeholder"in D&&n(3,y=D.Placeholder)},i.$$.update=()=>{i.$$.dirty&2176&&w!==u&&n(11,w=u),i.$$.dirty&4098&&L!==l&&n(12,L=l),i.$$.dirty&8193&&A!==s&&n(13,A=s),i.$$.dirty&16896&&(Wt(K,d)||n(14,K=d)),i.$$.dirty&6144&&He.set(L,w),i.$$.dirty&12288&&Ke.set(L,A),i.$$.dirty&2112&&n(16,t=c.concat(w)),i.$$.dirty&10496&&n(5,r=h&&w===A.children.length-1),i.$$.dirty&65536&&n(15,a=g.range(W,t)),i.$$.dirty&119808&&n(4,o=sn(m([L,t]),a,K))},[s,l,_,y,o,r,c,u,h,d,m,w,L,A,K,a,t]}class Zi extends Z{constructor(e){super();x(this,e,ji,Qi,Se,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function an(i,e,n){const t=i.slice();return t[14]=e[n],t[16]=n,t}function xi(i){let e,n;return e=new Zi({props:{Placeholder:i[4],Leaf:i[3],decorations:i[0],parent:i[5],text:i[14],decorate:i[9],index:i[16],path:i[8],isLeafBlock:i[7]}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&16&&(a.Placeholder=t[4]),r&8&&(a.Leaf=t[3]),r&1&&(a.decorations=t[0]),r&32&&(a.parent=t[5]),r&64&&(a.text=t[14]),r&512&&(a.decorate=t[9]),r&64&&(a.index=t[16]),r&256&&(a.path=t[8]),r&128&&(a.isLeafBlock=t[7]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function $i(i){let e,n;return e=new Ji({props:{Element:i[2],Placeholder:i[4],Leaf:i[3],decorations:i[0],selection:i[1],element:i[14],parent:i[5],decorate:i[9],index:i[16],path:i[8]}}),{c(){z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const a={};r&4&&(a.Element=t[2]),r&16&&(a.Placeholder=t[4]),r&8&&(a.Leaf=t[3]),r&1&&(a.decorations=t[0]),r&2&&(a.selection=t[1]),r&64&&(a.element=t[14]),r&32&&(a.parent=t[5]),r&512&&(a.decorate=t[9]),r&64&&(a.index=t[16]),r&256&&(a.path=t[8]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function ln(i,e){let n,t,r,a,o,s;const l=[$i,xi],c=[];function u(h,d){return d&64&&(t=null),t==null&&(t=!!Ve.isElement(h[14])),t?0:1}return r=u(e,-1),a=c[r]=l[r](e),{key:i,first:null,c(){n=I(),a.c(),o=I(),this.h()},l(h){n=I(),a.l(h),o=I(),this.h()},h(){this.first=n},m(h,d){M(h,n,d),c[r].m(h,d),M(h,o,d),s=!0},p(h,d){e=h;let m=r;r=u(e,d),r===m?c[r].p(e,d):(G(),C(c[m],1,1,()=>{c[m]=null}),J(),a=c[r],a?a.p(e,d):(a=c[r]=l[r](e),a.c()),b(a,1),a.m(o.parentNode,o))},i(h){s||(b(a),s=!0)},o(h){C(a),s=!1},d(h){h&&S(n),c[r].d(h),h&&S(o)}}}function er(i){let e=[],n=new Map,t,r,a=i[6];const o=s=>fe(s[14]);for(let s=0;s<a.length;s+=1){let l=an(i,a,s),c=o(l);n.set(c,e[s]=ln(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=I()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=I()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);M(s,t,l),r=!0},p(s,[l]){l&1023&&(a=s[6],G(),e=pt(e,l,o,1,s,a,n,t.parentNode,Et,ln,t,an),J())},i(s){if(!r){for(let l=0;l<a.length;l+=1)b(e[l]);r=!0}},o(s){for(let l=0;l<e.length;l+=1)C(e[l]);r=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&S(t)}}}function sn(i,e,n=[]){for(const t of n){const r=P.intersection(t,e);r&&i.push(r)}return i}function tr(i,e,n){let t,r,a,o,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:u}=e,{Leaf:h}=e,{Placeholder:d}=e;const m=Ce(),_=Xt();ze(i,_,w=>n(12,o=w));let y=s,W=s.children;return i.$$set=w=>{"node"in w&&n(11,s=w.node),"decorations"in w&&n(0,l=w.decorations),"selection"in w&&n(1,c=w.selection),"Element"in w&&n(2,u=w.Element),"Leaf"in w&&n(3,h=w.Leaf),"Placeholder"in w&&n(4,d=w.Placeholder)},i.$$.update=()=>{i.$$.dirty&4096&&n(9,t=o),i.$$.dirty&2080&&y!==s&&n(5,y=s),i.$$.dirty&2112&&W!==s.children&&n(6,W=s.children),i.$$.dirty&32&&n(8,r=be(y)),i.$$.dirty&32&&n(7,a=Ve.isElement(y)&&!m.isInline(y)&&g.hasInlines(m,y))},[l,c,u,h,d,y,W,a,r,t,_,s,o]}class cn extends Z{constructor(e){super();x(this,e,tr,er,Se,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function nr(i){let e,n;const t=i[7].default,r=Le(t,i,i[6],null);return{c(){e=ee("div"),r&&r.c(),this.h()},l(a){e=te(a,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=re(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-void",i[2]),B(e,"dir",i[4]),B(e,"contenteditable",i[3]),B(e,"class","svelte-19k8gul")},m(a,o){M(a,e,o),r&&r.m(e,null),i[9](e),n=!0},p(a,o){r&&r.p&&(!n||o&64)&&Fe(r,t,a,a[6],n?Pe(t,a[6],o,null):Oe(a[6]),null),(!n||o&4)&&B(e,"data-slate-void",a[2]),(!n||o&16)&&B(e,"dir",a[4]),(!n||o&8)&&B(e,"contenteditable",a[3])},i(a){n||(b(r,a),n=!0)},o(a){C(r,a),n=!1},d(a){a&&S(e),r&&r.d(a),i[9](null)}}}function ir(i){let e,n;const t=i[7].default,r=Le(t,i,i[6],null);return{c(){e=ee("span"),r&&r.c(),this.h()},l(a){e=te(a,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var o=re(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-node","element"),B(e,"data-slate-inline",i[1]),B(e,"data-slate-void",i[2]),B(e,"dir",i[4]),B(e,"contenteditable",i[3]),B(e,"class","svelte-19k8gul")},m(a,o){M(a,e,o),r&&r.m(e,null),i[8](e),n=!0},p(a,o){r&&r.p&&(!n||o&64)&&Fe(r,t,a,a[6],n?Pe(t,a[6],o,null):Oe(a[6]),null),(!n||o&2)&&B(e,"data-slate-inline",a[1]),(!n||o&4)&&B(e,"data-slate-void",a[2]),(!n||o&16)&&B(e,"dir",a[4]),(!n||o&8)&&B(e,"contenteditable",a[3])},i(a){n||(b(r,a),n=!0)},o(a){C(r,a),n=!1},d(a){a&&S(e),r&&r.d(a),i[8](null)}}}function rr(i){let e,n,t,r;const a=[ir,nr],o=[];function s(l,c){return l[1]?0:1}return e=s(i),n=o[e]=a[e](i),{c(){n.c(),t=I()},l(l){n.l(l),t=I()},m(l,c){o[e].m(l,c),M(l,t,c),r=!0},p(l,[c]){let u=e;e=s(l),e===u?o[e].p(l,c):(G(),C(o[u],1,1,()=>{o[u]=null}),J(),n=o[e],n?n.p(l,c):(n=o[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){r||(b(n),r=!0)},o(l){C(n),r=!1},d(l){o[e].d(l),l&&S(t)}}}function or(i,e,n){let{$$slots:t={},$$scope:r}=e,{element:a}=e,{ref:o}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:c}=e,{dir:u=void 0}=e;function h(m){se[m?"unshift":"push"](()=>{o=m,n(0,o)})}function d(m){se[m?"unshift":"push"](()=>{o=m,n(0,o)})}return i.$$set=m=>{"element"in m&&n(5,a=m.element),"ref"in m&&n(0,o=m.ref),"isInline"in m&&n(1,s=m.isInline),"isVoid"in m&&n(2,l=m.isVoid),"contenteditable"in m&&n(3,c=m.contenteditable),"dir"in m&&n(4,u=m.dir),"$$scope"in m&&n(6,r=m.$$scope)},[o,s,l,c,u,a,r,t,h,d]}class ar extends Z{constructor(e){super();x(this,e,or,rr,ae,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function lr(i){let e,n;const t=i[2].default,r=Le(t,i,i[1],null);return{c(){e=ee("span"),r&&r.c(),this.h()},l(a){e=te(a,"SPAN",{"data-slate-leaf":!0});var o=re(e);r&&r.l(o),o.forEach(S),this.h()},h(){B(e,"data-slate-leaf","true")},m(a,o){M(a,e,o),r&&r.m(e,null),n=!0},p(a,[o]){r&&r.p&&(!n||o&2)&&Fe(r,t,a,a[1],n?Pe(t,a[1],o,null):Oe(a[1]),null)},i(a){n||(b(r,a),n=!0)},o(a){C(r,a),n=!1},d(a){a&&S(e),r&&r.d(a)}}}function sr(i,e,n){let{$$slots:t={},$$scope:r}=e,{leaf:a}=e;return i.$$set=o=>{"leaf"in o&&n(0,a=o.leaf),"$$scope"in o&&n(1,r=o.$$scope)},[a,r,t]}class cr extends Z{constructor(e){super();x(this,e,sr,lr,ae,{leaf:0})}}function fr(i){let e,n,t;const r=i[2].default,a=Le(r,i,i[1],null);return{c(){e=ee("span"),a&&a.c(),this.h()},l(o){e=te(o,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=re(e);a&&a.l(s),s.forEach(S),this.h()},h(){B(e,"data-slate-placeholder",""),B(e,"contenteditable","false"),B(e,"class","svelte-lqbb94"),Un(()=>i[3].call(e))},m(o,s){M(o,e,s),a&&a.m(e,null),n=qn(e,i[3].bind(e)),t=!0},p(o,[s]){a&&a.p&&(!t||s&2)&&Fe(a,r,o,o[1],t?Pe(r,o[1],s,null):Oe(o[1]),null)},i(o){t||(b(a,o),t=!0)},o(o){C(a,o),t=!1},d(o){o&&S(e),a&&a.d(o),n()}}}function dr(i,e,n){let{$$slots:t={},$$scope:r}=e,{clientHeight:a}=e;function o(){a=this.clientHeight,n(0,a)}return i.$$set=s=>{"clientHeight"in s&&n(0,a=s.clientHeight),"$$scope"in s&&n(1,r=s.$$scope)},[a,r,t,o]}class ur extends Z{constructor(e){super();x(this,e,dr,fr,ae,{clientHeight:0})}}const hr=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ot={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},fn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:hr?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},at={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let i=1;i<20;i++)at["f"+i]=111+i;function dn(i,e={}){Array.isArray(i)||(i=[i]);const n=i.map(t=>gr(t,e));return function(r){return n.some(a=>mr(a,r))}}function Or(i,e,n={}){return dn(i,n)(e)}function lt(i){return dn(i,{byKey:!0})}function gr(i,e={}){const n=e&&e.byKey,t={};i=i.replace("++","+add");const r=i.split("+"),{length:a}=r;for(const o in ot)t[ot[o]]=!1;for(let o of r){const s=o.endsWith("?")&&o.length>1;s&&(o=o.slice(0,-1));const l=un(o),c=ot[l];if(o.length>1&&!c&&!fn[o]&&!at[l])throw new TypeError(`Unknown modifier: "${o}"`);(a===1||!c)&&(n?t.key=l:t.which=_r(o)),c&&(t[c]=s?null:!0)}return t}function mr(i,e){for(const n in i){const t=i[n];let r;if(t!=null&&(n==="key"&&e.key!=null?r=e.key.toLowerCase():n==="which"?r=t===91&&e.which===93?91:e.which:r=e[n],!(r==null&&t===!1)&&r!==t))return!1}return!0}function _r(i){return i=un(i),at[i]||i.toUpperCase().charCodeAt(0)}function un(i){return i=i.toLowerCase(),i=fn[i]||i,i}const wr={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},pr={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Er={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function v(i){const e=wr[i],n=pr[i],t=Er[i],r=e&&lt(e),a=n&&lt(n),o=t&&lt(t);return s=>!!(r&&r(s)||Bt&&a&&a(s)||!Bt&&o&&o(s))}var U={isBold:v("bold"),isCompose:v("compose"),isMoveBackward:v("moveBackward"),isMoveForward:v("moveForward"),isDeleteBackward:v("deleteBackward"),isDeleteForward:v("deleteForward"),isDeleteLineBackward:v("deleteLineBackward"),isDeleteLineForward:v("deleteLineForward"),isDeleteWordBackward:v("deleteWordBackward"),isDeleteWordForward:v("deleteWordForward"),isExtendBackward:v("extendBackward"),isExtendForward:v("extendForward"),isExtendLineBackward:v("extendLineBackward"),isExtendLineForward:v("extendLineForward"),isItalic:v("italic"),isMoveLineBackward:v("moveLineBackward"),isMoveLineForward:v("moveLineForward"),isMoveWordBackward:v("moveWordBackward"),isMoveWordForward:v("moveWordForward"),isRedo:v("redo"),isSplitBlock:v("splitBlock"),isTransposeCharacter:v("transposeCharacter"),isUndo:v("undo")};function kr(i){let e,n,t,r,a,o,s,l;n=new cn({props:{node:i[8],selection:i[9],decorations:i[10],Element:i[1],Leaf:i[2],Placeholder:i[3]}});let c=[i[29],{role:t=i[4]?void 0:"textbox"},{spellcheck:i[5]},{autocorrect:i[6]},{autocapitalize:i[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:r=!i[4]},{"z-index":a=-1}],u={};for(let h=0;h<c.length;h+=1)u=je(u,c[h]);return{c(){e=ee("div"),z(n.$$.fragment),this.h()},l(h){e=te(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var d=re(e);Y(n.$$.fragment,d),d.forEach(S),this.h()},h(){kt(e,u),bt(e,"svelte-m59z04",!0)},m(h,d){M(h,e,d),V(n,e,null),i[41](e),o=!0,s||(l=[Q(e,"beforeinput",i[13]),Q(e,"keydown",i[15]),Q(e,"input",i[14]),Q(e,"focus",i[16]),Q(e,"blur",i[17]),Q(e,"click",i[18]),Q(e,"compositionend",i[19]),Q(e,"compositionupdate",i[20]),Q(e,"compositionstart",i[21]),Q(e,"paste",i[22]),Q(e,"copy",i[23]),Q(e,"cut",i[24]),Q(e,"dragover",i[25]),Q(e,"dragstart",i[26]),Q(e,"drop",i[27]),Q(e,"dragend",i[28])],s=!0)},p(h,d){const m={};d[0]&256&&(m.node=h[8]),d[0]&512&&(m.selection=h[9]),d[0]&1024&&(m.decorations=h[10]),d[0]&2&&(m.Element=h[1]),d[0]&4&&(m.Leaf=h[2]),d[0]&8&&(m.Placeholder=h[3]),n.$set(m),kt(e,u=Yn(c,[d[0]&536870912&&h[29],(!o||d[0]&16&&t!==(t=h[4]?void 0:"textbox"))&&{role:t},(!o||d[0]&32)&&{spellcheck:h[5]},(!o||d[0]&64)&&{autocorrect:h[6]},(!o||d[0]&128)&&{autocapitalize:h[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!o||d[0]&16&&r!==(r=!h[4]))&&{contenteditable:r},{"z-index":a}])),bt(e,"svelte-m59z04",!0)},i(h){o||(b(n.$$.fragment,h),o=!0)},o(h){C(n.$$.fragment,h),o=!1},d(h){h&&S(e),H(n),i[41](null),s=!1,Xn(l)}}}function De(i,e){return ce(e)&&it(i,e)}function $(i,e){return ce(e)&&it(i,e,{editable:!0})}function hn(i,e){if(Dt.get(i))return!1;{const n=De(i,e)&&de(e);return g.isVoid(i,n)}}function br(i,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),Zn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function Cr(i,e,n){let t,r,a,o,s,l,c;const u=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let h=Ct(e,u),d,m,{Element:_=ar}=e,{Leaf:y=cr}=e,{Placeholder:W=ur}=e,{placeholder:w}=e,{readOnly:L=!1}=e,{autoFocus:A=!1}=e,{decorate:K=Gt}=e,{scrollSelectionIntoView:D=br}=e,{ref:q=void 0}=e,{spellcheck:T=!0}=e,{autocorrect:N="true"}=e,{autocapitalize:st="true"}=e,{onKeyDown:qe=()=>{}}=e;const ct=qt();ze(i,ct,f=>n(40,m=f));const _n=Yt(),Ie=_i(),wn=Xt(),Ye=wi();ze(i,Ye,f=>n(39,d=f));const E={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null,readOnly:L};let Xe=[],Ge;function pn(){if(!E.isComposing&&!E.isUpdatingSelection&&!E.isDraggingInternally){const f=Te(t),p=le(t,t),k=f.getSelection();if(f.activeElement===p?(n(35,E.latestElement=f.activeElement,E),ke.set(t,!0),Ie.set(!0)):(ke.delete(t),Ie.set(!1)),!k){R.deselect(t);return}const{anchorNode:F,focusNode:O}=k,j=$(t,F)||hn(t,F),X=$(t,O)||hn(t,O);if(j&&X){const oe=Ne(t,k,{exactMatch:!1,suppressThrow:!0});oe&&R.select(t,oe)}}}function ft(){l()}Qe(()=>{const f=$e(q);return f&&(Ze.set(t,f),f.document.addEventListener("selectionchange",ft)),ve.set(t,q),pe.set(t,q),we.set(q,t),()=>{ve.delete(t),pe.delete(t),f&&(Ze.delete(t),f.document.removeEventListener("selectionchange",ft))}});function En(){const f=Te(t),p=f==null?void 0:f.getSelection();if(E.isComposing||!p||!Mt(t))return;const k=p.type!=="None";if(!k)return;const F=ve.get(t);let O=!1;if(F.contains(p.anchorNode)&&F.contains(p.focusNode)&&(O=!0),k&&O&&r){const oe=Ne(t,p,{exactMatch:!0,suppressThrow:!0});if(oe&&P.equals(oe,r))return}if(r&&!gi(t,r)){n(8,t.selection=Ne(t,p,{exactMatch:!1,suppressThrow:!1}),t),Ye.set(t.selection);return}E.isUpdatingSelection&&clearTimeout(E.isUpdatingSelection);let j=setTimeout(()=>{X&&et&&le(t,t).focus(),Object.assign(E,{isUpdatingSelection:null})});Object.assign(E,{isUpdatingSelection:j});const X=r&&O&&Ue(t,r);X&&(P.isBackward(r)?p.setBaseAndExtent(X.endContainer,X.endOffset,X.startContainer,X.startOffset):p.setBaseAndExtent(X.startContainer,X.startOffset,X.endContainer,X.endOffset),D(t,X))}Gn(()=>c());function kn(f){if(!E.readOnly&&$(t,f.target)){const p=f.inputType,k=f.dataTransfer||f.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let F=!1;if(p==="insertText"&&r&&P.isCollapsed(r)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&r.anchor.offset!==0){F=!0,t.marks&&(F=!1);const O=g.above(t,{at:r.anchor,match:j=>g.isInline(t,j),mode:"highest"});if(O){const[,j]=O;g.isEnd(t,r.anchor,j)&&(F=!1)}}if(F||f.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[O]=f.getTargetRanges();if(O){const j=Ne(t,O,{exactMatch:!1,suppressThrow:!1});(!r||!P.equals(r,j))&&R.select(t,j)}}if(r&&P.isExpanded(r)&&p.startsWith("delete")){const O=p.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:O});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&E.isComposing&&n(35,E.isComposing=!1,E),(k==null?void 0:k.constructor.name)==="DataTransfer"?t.insertData(k):typeof k=="string"&&(F?Xe.push(()=>g.insertText(t,k)):g.insertText(t,k));break}}}}function bn(f){for(const p of Xe)p();Xe.length=0}function Cn(f){if(!E.readOnly&&!E.isComposing&&$(t,f.target)){const p=t.children[r!==null?r.focus.path[0]:0],k=jt(ne.string(p))==="rtl";if(U.isRedo(f)){f.preventDefault();const F=t;typeof F.redo=="function"&&F.redo()}else if(U.isUndo(f)){f.preventDefault();const F=t;typeof F.undo=="function"&&F.undo()}else if(U.isMoveLineBackward(f))f.preventDefault(),R.move(t,{unit:"line",reverse:!0});else if(U.isMoveLineForward(f))f.preventDefault(),R.move(t,{unit:"line"});else if(U.isExtendLineBackward(f))f.preventDefault(),R.move(t,{unit:"line",edge:"focus",reverse:!0});else if(U.isExtendLineForward(f))f.preventDefault(),R.move(t,{unit:"line",edge:"focus"});else if(U.isMoveBackward(f))f.preventDefault(),r&&P.isCollapsed(r)?R.move(t,{reverse:!k}):R.collapse(t,{edge:"start"});else if(U.isMoveForward(f))f.preventDefault(),r&&P.isCollapsed(r)?R.move(t,{reverse:k}):R.collapse(t,{edge:"end"});else if(U.isMoveWordBackward(f))f.preventDefault(),r&&P.isExpanded(r)&&R.collapse(t,{edge:"focus"}),R.move(t,{unit:"word",reverse:!k});else if(U.isMoveWordForward(f))f.preventDefault(),r&&P.isExpanded(r)&&R.collapse(t,{edge:"focus"}),R.move(t,{unit:"word",reverse:k});else if(!It)U.isBold(f)||U.isItalic(f)||U.isTransposeCharacter(f)?f.preventDefault():U.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):U.isDeleteBackward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):U.isDeleteForward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):U.isDeleteLineBackward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):U.isDeleteLineForward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):U.isDeleteWordBackward(f)?(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):U.isDeleteWordForward(f)&&(f.preventDefault(),r&&P.isExpanded(r)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((Tt||tt)&&r&&(U.isDeleteBackward(f)||U.isDeleteForward(f))&&P.isCollapsed(r)){const F=ne.parent(t,r.anchor.path);if(Ve.isElement(F)&&g.isVoid(t,F)&&g.isInline(t,F)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return qe(f)}}}function yn(f){if(!E.readOnly&&!E.isUpdatingSelection&&$(t,f.target)){const p=le(t,t),k=Te(t);if(n(35,E.latestElement=k.activeElement,E),et&&f.target!==p){p.focus();return}ke.set(t,!0),Ie.set(!0)}}function Dn(f){if(E.readOnly||E.isUpdatingSelection||!$(t,f.target))return;const p=Te(t);if(E.latestElement===p.activeElement)return;const k=f.relatedTarget,F=le(t,t);if(k!==F&&!(ie(k)&&k.hasAttribute("data-slate-spacer"))){if(k!=null&&ce(k)&&it(t,k)){const O=de(k);if(Ve.isElement(O)&&!t.isVoid(O))return}if(tt){const O=p.getSelection();O==null||O.removeAllRanges()}ke.delete(t),Ie.set(!1)}}function Sn(f){if(!E.readOnly&&De(t,f.target)&&ce(f.target)){const p=de(f.target),k=be(p);if(g.hasPath(t,k)&&ne.get(t,k)===p){const O=g.start(t,k),j=g.end(t,k),X=g.void(t,{at:O}),oe=g.void(t,{at:j});if(X&&oe&&_e.equals(X[1],oe[1])){const Wn=g.range(t,O);R.select(t,Wn)}}}}function Ln(f){if($(t,f.target)){n(35,E.isComposing=!1,E);const p=f.data;if(!tt&&!fi&&!li&&!di&&p&&g.insertText(t,p),r&&P.isCollapsed(r)){const k=r.anchor.path,F=ne.leaf(t,k);E.hasInsertPrefixInCompositon&&(n(35,E.hasInsertPrefixInCompositon=!1,E),g.withoutNormalizing(t,()=>{const O=F.text.replace(/^\uFEFF/,"");R.delete(t,{distance:F.text.length,reverse:!0}),R.insertText(t,O)}))}}}function Fn(f){$(t,f.target)&&n(35,E.isComposing=!0,E)}function On(f){if($(t,f.target)){const{selection:p,marks:k}=t;if(p){if(P.isExpanded(p)){g.deleteFragment(t);return}const F=g.above(t,{match:O=>g.isInline(t,O),mode:"highest"});if(F){const[,O]=F;if(g.isEnd(t,p.anchor,O)){const j=g.after(t,O);R.setSelection(t,{anchor:j,focus:j})}}k&&(n(35,E.hasInsertPrefixInCompositon=!0,E),R.insertNodes(t,gt({text:"\uFEFF"},k),{select:!0}))}}}function Pn(f){!E.readOnly&&$(t,f.target)&&(!It||ti(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}function Bn(f){$(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}function Tn(f){if(!E.readOnly&&$(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),r))if(P.isExpanded(r))g.deleteFragment(t);else{const p=ne.parent(t,r.anchor.path);g.isVoid(t,p)&&R.delete(t)}}function Nn(f){if(De(t,f.target)){const p=de(f.target);g.isVoid(t,p)&&f.preventDefault()}}function In(f){if(!E.readOnly&&De(t,f.target)){const p=de(f.target),k=be(p);if(g.isVoid(t,p)||g.void(t,{at:k,voids:!0})){const O=g.range(t,k);R.select(t,O)}n(35,E.isDraggingInternally=!0,E),t.setFragmentData(f.dataTransfer)}}function Mn(f){if(!E.readOnly&&De(t,f.target)){f.preventDefault();const p=r,k=hi(t,f),F=f.dataTransfer;R.select(t,k),E.isDraggingInternally&&(p&&!P.equals(p,k)&&!g.void(t,{at:k,voids:!0})&&R.delete(t,{at:p}),n(35,E.isDraggingInternally=!1,E)),t.insertData(F),Mt(t)||ui(t)}}function An(f){!E.readOnly&&E.isDraggingInternally&&De(t,f.target)&&n(35,E.isDraggingInternally=!1,E)}function Rn(f){se[f?"unshift":"push"](()=>{q=f,n(0,q)})}return i.$$set=f=>{e=je(je({},e),Jn(f)),n(29,h=Ct(e,u)),"Element"in f&&n(1,_=f.Element),"Leaf"in f&&n(2,y=f.Leaf),"Placeholder"in f&&n(3,W=f.Placeholder),"placeholder"in f&&n(30,w=f.placeholder),"readOnly"in f&&n(4,L=f.readOnly),"autoFocus"in f&&n(31,A=f.autoFocus),"decorate"in f&&n(32,K=f.decorate),"scrollSelectionIntoView"in f&&n(33,D=f.scrollSelectionIntoView),"ref"in f&&n(0,q=f.ref),"spellcheck"in f&&n(5,T=f.spellcheck),"autocorrect"in f&&n(6,N=f.autocorrect),"autocapitalize"in f&&n(7,st=f.autocapitalize),"onKeyDown"in f&&n(34,qe=f.onKeyDown)},i.$$.update=()=>{if(i.$$.dirty[1]&512&&n(8,t=m),i.$$.dirty[1]&256&&n(9,r=d),i.$$.dirty[0]&256|i.$$.dirty[1]&2&&n(10,a=K([t,[]])),i.$$.dirty[0]&272&&Dt.set(t,L),i.$$.dirty[0]&16&&_n.set(L),i.$$.dirty[0]&16&&n(35,E.readOnly=L,E),i.$$.dirty[1]&2&&wn.set(K),i.$$.dirty[0]&1073742080|i.$$.dirty[1]&18&&t.children.length===1&&Array.from(ne.texts(t)).length===1&&ne.string(t)===""&&!E.isComposing){const f=g.start(t,[]);n(10,a=[...K([t,[]]),{[Be]:!0,placeholder:w,anchor:f,focus:f}])}i.$$.dirty[0]&1|i.$$.dirty[1]&33&&Ge!==A&&q&&(A&&q.focus(),n(36,Ge=A)),i.$$.dirty[1]&128&&n(37,s=Qn(100,!1,o,!1)),i.$$.dirty[1]&64&&(l=jn(0,s))},n(38,o=()=>yt().then(pn)),c=()=>yt().then(En),[q,_,y,W,L,T,N,st,t,r,a,ct,Ye,kn,bn,Cn,yn,Dn,Sn,Ln,Fn,On,Pn,Bn,Tn,Nn,In,Mn,An,h,w,A,K,D,qe,E,Ge,s,o,d,m,Rn]}class Pr extends Z{constructor(e){super();x(this,e,Cr,kr,Se,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function gn(i,e){const n=(e.top+e.bottom)/2;return i.top<=n&&i.bottom>=n}function mn(i,e,n){const t=Ue(i,e).getBoundingClientRect(),r=Ue(i,n).getBoundingClientRect();return gn(t,r)&&gn(r,t)}function yr(i,e){const n=g.range(i,P.end(e)),t=Array.from(g.positions(i,{at:e}));let r=0,a=t.length,o=Math.floor(a/2);if(mn(i,g.range(i,t[r]),n))return g.range(i,t[r],n);if(t.length<2)return g.range(i,t[t.length-1],n);for(;o!==t.length&&o!==r;)mn(i,g.range(i,t[o]),n)?a=o:r=o,o=Math.floor((r+a)/2);return g.range(i,t[a],n)}function Br(i){const e=i,{apply:n,onChange:t,deleteBackward:r}=e;return Ee.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return r(a);if(i.selection&&P.isCollapsed(i.selection)){const o=g.above(i,{match:s=>g.isBlock(i,s),at:i.selection});if(o){const[,s]=o,l=g.range(i,s,i.selection.anchor),c=yr(e,l);P.isCollapsed(c)||R.delete(i,{at:c})}}},e.apply=a=>{const o=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=fe(s);o.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:_e.parent(a.path)})){const c=fe(s);o.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:_e.common(_e.parent(a.path),_e.parent(a.newPath))})){const c=fe(s);o.push([l,c])}break}}n(a);for(const[s,l]of o){const[c]=g.node(e,s);xe.set(c,l)}},e.setFragmentData=a=>{const{selection:o}=e;if(!o)return;const[s,l]=P.edges(o),c=g.void(e,{at:s.path}),u=g.void(e,{at:l.path});if(P.isCollapsed(o)&&!c)return;const h=Ue(e,o);let d=h.cloneContents(),m=d.childNodes[0];if(d.childNodes.forEach(L=>{L.textContent&&L.textContent.trim()!==""&&(m=L)}),u){const[L]=u,A=h.cloneRange(),K=le(e,L);A.setEndAfter(K),d=A.cloneContents()}if(c&&(m=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(L=>{const A=L.getAttribute("data-slate-zero-width")==="n";L.textContent=A?`
`:""}),Ft(m)){const L=document.createElement("span");L.style.whiteSpace="pre",L.appendChild(m),d.appendChild(L),m=L}const _=e.getFragment(),y=JSON.stringify(_),W=window.btoa(encodeURIComponent(y));m.setAttribute("data-slate-fragment",W),a.setData("application/x-slate-fragment",W);const w=document.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),document.body.appendChild(w),a.setData("text/html",w.innerHTML),a.setData("text/plain",Pt(w)),document.body.removeChild(w),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const o=a.getData("application/x-slate-fragment")||ai(a);if(o){const s=decodeURIComponent(window.atob(o)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const o=a.getData("text/plain");if(o){const s=o.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&R.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=St.get(e);a&&a(),t()},e}export{Pr as E,Lr as S,Fr as a,_i as b,Yt as c,wi as d,be as f,Ce as g,Or as i,Br as w};
