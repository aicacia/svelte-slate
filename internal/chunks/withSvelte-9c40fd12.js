var In=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var ft=(n,e,t)=>e in n?In(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ut=(n,e)=>{for(var t in e||(e={}))st.call(e,t)&&ft(n,t,e[t]);if(Ae)for(var t of Ae(e))ct.call(e,t)&&ft(n,t,e[t]);return n};var Je=(n,e)=>{var t={};for(var o in n)st.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&Ae)for(var o of Ae(n))e.indexOf(o)<0&&ct.call(n,o)&&(t[o]=n[o]);return t};import{a1 as m,a2 as T,a3 as An,S as Q,i as j,s as Se,F as Le,J as Fe,K as Oe,L as Te,q as D,o as y,r as he,D as ge,a4 as Mn,a5 as me,a6 as ie,t as Me,h as Re,g as A,d as L,e as $,c as ee,a as oe,b as N,I as dt,j as ht,M as _e,l as B,n as U,p as X,a7 as we,w as z,x as Y,y as V,B as H,a8 as te,a9 as Rn,Q as gt,O as le,P as We,aa as mt,ab as _t,v as Qe,ac as Wn,ad as ze,ae as Ve,af as zn,ag as Vn,C as je,ah as wt,ai as pt,aj as G,z as Hn,ak as vn,al as kt,u as Kn,E as Et,am as qn,an as Yn,ao as R,ap as Un}from"./vendor-4689c375.js";const He=new WeakMap,ve=new WeakMap,Ze=new WeakMap,Ke=new WeakMap,pe=new WeakMap,ke=new WeakMap,xe=new WeakMap,Ee=new WeakMap,bt=new WeakMap,be=new WeakMap,Ct=new WeakMap,Pe=Symbol("placeholder");let Xn=0;class Gn{constructor(){this.id=`${Xn++}`}toString(){return this.id}}function $e(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView||null}function Jn(n){return se(n)&&n.nodeType===8}function ne(n){return se(n)&&n.nodeType===1}function se(n){const e=$e(n);return!!e&&n instanceof e.Node}function Dt(n){const e=n&&n.anchorNode&&$e(n.anchorNode);return!!e&&n instanceof e.Selection}function yt(n){return se(n)&&n.nodeType===3}function Qn(n){return n.clipboardData&&n.clipboardData.getData("text/plain")!==""&&n.clipboardData.types.length===1}function jn(n){let[e,t]=n;if(ne(e)&&e.childNodes.length){let o=t===e.childNodes.length,a=o?t-1:t;for([e,a]=St(e,a,o?"backward":"forward"),o=a<t;ne(e)&&e.childNodes.length;){const r=o?e.childNodes.length-1:0;e=xn(e,r,o?"backward":"forward")}t=o&&e.textContent!=null?e.textContent.length:0}return[e,t]}function Zn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function St(n,e,t){const{childNodes:o}=n;let a=o[e],r=e,i=!1,s=!1;for(;(Jn(a)||ne(a)&&a.childNodes.length===0||ne(a)&&a.getAttribute("contenteditable")==="false")&&!(i&&s);){if(r>=o.length){i=!0,r=e-1,t="backward";continue}if(r<0){s=!0,r=e+1,t="forward";continue}a=o[r],e=r,r+=t==="forward"?1:-1}return[a,e]}function xn(n,e,t){const[o]=St(n,e,t);return o}function Lt(n){let e="";if(yt(n)&&n.nodeValue)return n.nodeValue;if(ne(n)){for(const o of Array.from(n.childNodes))e+=Lt(o);const t=getComputedStyle(n).getPropertyValue("display");(t==="block"||t==="list"||n.tagName==="BR")&&(e+=`
`)}return e}const $n=/data-slate-fragment="(.+?)"/m;function eo(n){const e=n.getData("text/html"),[,t]=e.match($n)||[];return t}const to=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ft=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const et=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),no=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Ot=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),oo=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),io=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ro=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Tt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Pt=!oo&&!no&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function nt(n){const e=Ze.get(n);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(n){let e=xe.get(n);return e||(e=new Gn,xe.set(n,e)),e}function Ce(n){const e=[];let t=n;for(;;){const o=ve.get(t);if(o==null){if(m.isEditor(t))return e;break}const a=He.get(t);if(a==null)break;e.unshift(a),t=o}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(n)}`)}function Ne(n){const e=re(n,n),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:e.ownerDocument}function Nt(n){return!!be.get(n)}function ao(n){const e=re(n,n),t=Ne(n);be.set(n,!0),t.activeElement!==e&&e.focus({preventScroll:!0})}function ot(n,e,t={}){const{editable:o=!1}=t,a=re(n,n);let r;try{r=ne(e)?e:e.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return r?r.closest("[data-svelte-editor]")===a&&(!o||r.isContentEditable?!0:typeof r.isContentEditable=="boolean"&&r.closest('[contenteditable="false"]')===a||!!r.getAttribute("data-slate-zero-width")):!1}function re(n,e,t=!0){const o=Ee.get(n),a=m.isEditor(e)?Ke.get(n):o==null?void 0:o.get(ce(e));if(!a&&t)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return a}function Bt(n,e,t=!0){const[o]=m.node(n,e.path),a=re(n,o,t);let r;m.void(n,{at:e})&&(e={path:e.path,offset:0});const i="[data-slate-string], [data-slate-zero-width]",s=a?Array.from(a.querySelectorAll(i)):[];let l=0;for(const f of s){const h=f.childNodes[0];if(h==null||h.textContent==null)continue;const{length:g}=h.textContent,d=f.getAttribute("data-slate-length"),_=d==null?g:parseInt(d,10),w=l+_;if(e.offset<=w){const k=Math.min(g,Math.max(0,e.offset-l));r=[h,k];break}l=w}if(!r&&t)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return r}function qe(n,e,t=!0){const{anchor:o,focus:a}=e,r=T.isBackward(e),i=Bt(n,o,t);if(!i)return;const s=T.isCollapsed(e)?i:Bt(n,a),f=nt(n).document.createRange(),[h,g]=r?s:i,[d,_]=r?i:s,k=!!(ne(h)?h:h.parentElement).getAttribute("data-slate-zero-width"),p=!!(ne(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return f.setStart(h,k?1:g),f.setEnd(d,p?1:_),f}function fe(n){let e=ne(n)?n:n.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const t=e?pe.get(e):null;if(!t)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return t}function lo(n,e){const{clientX:t,clientY:o,target:a}=e;if(t==null||o==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const r=fe(e.target),i=Ce(r);if(m.isVoid(n,r)){const h=a.getBoundingClientRect(),g=n.isInline(r)?t-h.left<h.left+h.width-t:o-h.top<h.top+h.height-o,d=m.point(n,i,{edge:g?"start":"end"}),_=g?m.before(n,d):m.after(n,d);if(_)return m.range(n,_)}let s;const{document:l}=nt(n);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(t,o);else{const h=l.caretPositionFromPoint(t,o);h&&(s=l.createRange(),s.setStart(h.offsetNode,h.offset),s.setEnd(h.offsetNode,h.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Be(n,s,{exactMatch:!1,suppressThrow:!1})}function It(n,e,t){var d;const{exactMatch:o,suppressThrow:a}=t,[r,i]=o?e:jn(e),s=r.parentNode;let l=null,f=0;if(s){const _=s.closest('[data-slate-void="true"]');let w=s.closest("[data-slate-leaf]"),k=null;if(w){if(l=w.closest('[data-slate-node="text"]'),l){const p=nt(n).document.createRange();p.setStart(l,0),p.setEnd(r,i);const F=p.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(c=>{c.parentNode.removeChild(c)}),f=F.textContent.length,k=l}}else _&&(w=_.querySelector("[data-slate-leaf]"),w?(l=w.closest('[data-slate-node="text"]'),k=w,f=k.textContent.length,k.querySelectorAll("[data-slate-zero-width]").forEach(W=>{f-=W.textContent.length})):f=1);k&&f===k.textContent.length&&(s.hasAttribute("data-slate-zero-width")||et&&((d=k.textContent)==null?void 0:d.endsWith(`

`)))&&f--}if(!l){if(a)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const h=fe(l);return{path:Ce(h),offset:f}}function Be(n,e,t){const{exactMatch:o,suppressThrow:a}=t,r=Dt(e)?e.anchorNode:e.startContainer;let i,s,l,f,h;if(r&&(Dt(e)?(i=e.anchorNode,s=e.anchorOffset,l=e.focusNode,f=e.focusOffset,Ot&&Zn()?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed):(i=e.startContainer,s=e.startOffset,l=e.endContainer,f=e.endOffset,h=e.collapsed)),i==null||l==null||s==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const g=It(n,[i,s],{exactMatch:o,suppressThrow:a});if(!g)return null;const d=h?g:It(n,[l,f],{exactMatch:o,suppressThrow:a});if(!d)return null;let _={anchor:g,focus:d};return T.isExpanded(_)&&T.isForward(_)&&ne(l)&&m.void(n,{at:_.focus,mode:"highest"})&&(_=m.unhangRange(n,_,{voids:!0})),_}function so(n,e){const{anchor:t,focus:o}=e;return m.hasPath(n,t.path)&&m.hasPath(n,o.path)}function At(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let a=0;a<n.length;a++){const r=n[a],i=e[a],t=r,{anchor:s,focus:l}=t,f=Je(t,["anchor","focus"]),o=i,{anchor:h,focus:g}=o,d=Je(o,["anchor","focus"]);if(!T.equals(r,i)||r[Pe]!==i[Pe]||!An(f,d))return!1}return!0}function Mt(n,e){return n===e||!!n&&!!e&&T.equals(n,e)}function co(n){let e;const t=n[7].default,o=Le(t,n,n[6],null);return{c(){o&&o.c()},l(a){o&&o.l(a)},m(a,r){o&&o.m(a,r),e=!0},p(a,[r]){o&&o.p&&(!e||r&64)&&Fe(o,t,a,a[6],e?Te(t,a[6],r,null):Oe(a[6]),null)},i(a){e||(D(o,a),e=!0)},o(a){y(o,a),e=!1},d(a){o&&o.d(a)}}}const Rt={},Wt={},zt={},Vt={},Ht={};function vt(){const n=me(Rt);if(!n)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return n}function ue(){return Mn(vt())}function Kt(){const n=me(Wt);if(!n)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return n}function fo(){const n=me(zt);if(!n)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return n}function qt(){const n=me(Vt);if(!n)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return n}function uo(){const n=me(Ht);if(!n)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return n}function Yt(n){return[]}function ho(n,e,t){let{$$slots:o={},$$scope:a}=e,{editor:r}=e,{value:i=r.children}=e,{selection:s=r.selection}=e;const l=ge(r);he(Rt,l);const f=ge(!0);he(Wt,f);const h=ge(!1);he(zt,h);const g=ge(Yt);he(Vt,g);const d=ge(r.selection);he(Ht,d);function _(){t(1,s=r.selection),t(0,i=r.children)}Ct.set(r,_);let w=r,k,W;return n.$$set=p=>{"editor"in p&&t(2,r=p.editor),"value"in p&&t(0,i=p.value),"selection"in p&&t(1,s=p.selection),"$$scope"in p&&t(6,a=p.$$scope)},n.$$.update=()=>{n.$$.dirty&12&&r!==w&&(t(3,w=r),l.set(r)),n.$$.dirty&17&&k!==i&&(l.update(p=>(p.children=i,p)),t(4,k=i)),n.$$.dirty&38&&(Mt(W,s)||(d.set(s),l.set(r),t(5,W=s)))},[i,s,r,w,k,W,a,o]}class Ci extends Q{constructor(e){super();j(this,e,ho,co,Se,{editor:2,value:0,selection:1})}}const Ut="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Xt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",go=new RegExp("^[^"+Xt+"]*["+Ut+"]"),mo=new RegExp("^[^"+Ut+"]*["+Xt+"]");function Gt(n){const e=String(n||"");return go.test(e)?"rtl":mo.test(e)?"ltr":"neutral"}function Jt(n){let e=`
`,t;return{c(){t=Me(e)},l(o){t=Re(o,e)},m(o,a){A(o,t,a)},d(o){o&&L(t)}}}function _o(n){let e,t,o=n[1]&&Jt();return{c(){e=$("span"),t=Me(n[0]),o&&o.c(),this.h()},l(a){e=ee(a,"SPAN",{"data-slate-string":!0});var r=oe(e);t=Re(r,n[0]),o&&o.l(r),r.forEach(L),this.h()},h(){N(e,"data-slate-string","true")},m(a,r){A(a,e,r),dt(e,t),o&&o.m(e,null)},p(a,[r]){r&1&&ht(t,a[0]),a[1]?o||(o=Jt(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:_e,o:_e,d(a){a&&L(e),o&&o.d()}}}function wo(n,e,t){let{text:o}=e,{isTrailing:a=!1}=e;return n.$$set=r=>{"text"in r&&t(0,o=r.text),"isTrailing"in r&&t(1,a=r.isTrailing)},[o,a]}class po extends Q{constructor(e){super();j(this,e,wo,_o,ie,{text:0,isTrailing:1})}}function Qt(n){let e;return{c(){e=$("br")},l(t){e=ee(t,"BR",{})},m(t,o){A(t,e,o)},d(t){t&&L(e)}}}function ko(n){let e,t="\uFEFF",o,a,r=n[1]&&Qt();return{c(){e=$("span"),o=Me(t),r&&r.c(),this.h()},l(i){e=ee(i,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=oe(e);o=Re(s,t),r&&r.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-zero-width",a=n[1]?"n":"z"),N(e,"data-slate-length",n[0])},m(i,s){A(i,e,s),dt(e,o),r&&r.m(e,null)},p(i,[s]){i[1]?r||(r=Qt(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),s&2&&a!==(a=i[1]?"n":"z")&&N(e,"data-slate-zero-width",a),s&1&&N(e,"data-slate-length",i[0])},i:_e,o:_e,d(i){i&&L(e),r&&r.d()}}}function Eo(n,e,t){let{length:o=0}=e,{isLineBreak:a=!1}=e;return n.$$set=r=>{"length"in r&&t(0,o=r.length),"isLineBreak"in r&&t(1,a=r.isLineBreak)},[o,a]}class it extends Q{constructor(e){super();j(this,e,Eo,ko,ie,{length:0,isLineBreak:1})}}function bo(n){let e,t;return e=new po({props:{isTrailing:n[5],text:n[0].text}}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&32&&(r.isTrailing=o[5]),a&1&&(r.text=o[0].text),e.$set(r)},i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Co(n){let e,t;return e=new it({}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p:_e,i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Do(n){let e,t;return e=new it({props:{isLineBreak:!0}}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p:_e,i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function yo(n){let e,t;return e=new it({props:{length:te.string(n[1]).length}}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&2&&(r.length=te.string(o[1]).length),e.$set(r)},i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function So(n){let e,t,o,a;const r=[yo,Do,Co,bo],i=[];function s(l,f){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,[f]){let h=e;e=s(l),e===h?i[e].p(l,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),D(t,1),t.m(o.parentNode,o))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function Lo(n,e,t){let o,a,r,i,s,l,{isLast:f}=e,{leaf:h}=e,{parent:g}=e,{text:d}=e;const _=ue();return n.$$set=w=>{"isLast"in w&&t(6,f=w.isLast),"leaf"in w&&t(0,h=w.leaf),"parent"in w&&t(1,g=w.parent),"text"in w&&t(7,d=w.text)},n.$$.update=()=>{n.$$.dirty&65&&t(5,o=f&&h.text.slice(-1)===`
`),n.$$.dirty&128&&t(9,a=Ce(d)),n.$$.dirty&512&&t(8,r=we.parent(a)),n.$$.dirty&2&&t(4,i=_.isVoid(g)),n.$$.dirty&1&&t(2,s=h.text===""),n.$$.dirty&390&&t(3,l=s&&g.children[g.children.length-1]===d&&!_.isInline(g)&&m.string(_,r)==="")},[h,g,s,l,i,o,f,d,r,a]}class Fo extends Q{constructor(e){super();j(this,e,Lo,So,ie,{isLast:6,leaf:0,parent:1,text:7})}}function jt(n){let e,t,o,a;function r(l){n[8](l)}var i=n[5];function s(l){let f={$$slots:{default:[Oo]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.clientHeight=l[6]),{props:f}}return i&&(e=new i(s(n)),le.push(()=>We(e,"clientHeight",r))),{c(){e&&z(e.$$.fragment),o=B()},l(l){e&&Y(e.$$.fragment,l),o=B()},m(l,f){e&&V(e,l,f),A(l,o,f),a=!0},p(l,f){const h={};if(f&514&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.clientHeight=l[6],gt(()=>t=!1)),i!==(i=l[5])){if(e){U();const g=e;y(g.$$.fragment,1,0,()=>{H(g,1)}),X()}i?(e=new i(s(l)),le.push(()=>We(e,"clientHeight",r)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(l){a||(e&&D(e.$$.fragment,l),a=!0)},o(l){e&&y(e.$$.fragment,l),a=!1},d(l){l&&L(o),e&&H(e,l)}}}function Oo(n){let e=n[1].placeholder+"",t;return{c(){t=Me(e)},l(o){t=Re(o,e)},m(o,a){A(o,t,a)},p(o,a){a&2&&e!==(e=o[1].placeholder+"")&&ht(t,e)},d(o){o&&L(t)}}}function To(n){let e,t,o,a=Pe in n[1]&&jt(n);return t=new Fo({props:{isLast:n[0],leaf:n[1],parent:n[2],text:n[3]}}),{c(){a&&a.c(),e=B(),z(t.$$.fragment)},l(r){a&&a.l(r),e=B(),Y(t.$$.fragment,r)},m(r,i){a&&a.m(r,i),A(r,e,i),V(t,r,i),o=!0},p(r,i){Pe in r[1]?a?(a.p(r,i),i&2&&D(a,1)):(a=jt(r),a.c(),D(a,1),a.m(e.parentNode,e)):a&&(U(),y(a,1,1,()=>{a=null}),X());const s={};i&1&&(s.isLast=r[0]),i&2&&(s.leaf=r[1]),i&4&&(s.parent=r[2]),i&8&&(s.text=r[3]),t.$set(s)},i(r){o||(D(a),D(t.$$.fragment,r),o=!0)},o(r){y(a),y(t.$$.fragment,r),o=!1},d(r){a&&a.d(r),r&&L(e),H(t,r)}}}function Po(n){let e,t,o;var a=n[4];function r(i){return{props:{leaf:i[1],$$slots:{default:[To]},$$scope:{ctx:i}}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=B()},l(i){e&&Y(e.$$.fragment,i),t=B()},m(i,s){e&&V(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&2&&(l.leaf=i[1]),s&623&&(l.$$scope={dirty:s,ctx:i}),a!==(a=i[4])){if(e){U();const f=e;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}a?(e=new a(r(i)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(i){o||(e&&D(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&L(t),e&&H(e,i)}}}function No(n,e,t){let{isLast:o}=e,{leaf:a}=e,{parent:r}=e,{text:i}=e,{Leaf:s}=e,{Placeholder:l}=e,f,h;Rn(()=>{if(Tt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="auto")}});function g(d){f=d,t(6,f)}return n.$$set=d=>{"isLast"in d&&t(0,o=d.isLast),"leaf"in d&&t(1,a=d.leaf),"parent"in d&&t(2,r=d.parent),"text"in d&&t(3,i=d.text),"Leaf"in d&&t(4,s=d.Leaf),"Placeholder"in d&&t(5,l=d.Placeholder)},n.$$.update=()=>{if(n.$$.dirty&192&&h!==f&&Tt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${f}px`),t(7,h=f)}},[o,a,r,i,s,l,f,h,g]}class Zt extends Q{constructor(e){super();j(this,e,No,Po,ie,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function xt(n,e,t){const o=n.slice();return o[11]=e[t],o[13]=t,o}function $t(n,e){let t,o,a,r;var i=Zt;function s(l){return{props:{Placeholder:l[4],Leaf:l[3],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return i&&(o=new i(s(e))),{key:n,first:null,c(){t=B(),o&&z(o.$$.fragment),a=B(),this.h()},l(l){t=B(),o&&Y(o.$$.fragment,l),a=B(),this.h()},h(){this.first=t},m(l,f){A(l,t,f),o&&V(o,l,f),A(l,a,f),r=!0},p(l,f){e=l;const h={};if(f&16&&(h.Placeholder=e[4]),f&8&&(h.Leaf=e[3]),f&129&&(h.isLast=e[0]&&e[13]===e[7].length-1),f&2&&(h.parent=e[1]),f&128&&(h.leaf=e[11]),f&4&&(h.text=e[2]),i!==(i=Zt)){if(o){U();const g=o;y(g.$$.fragment,1,0,()=>{H(g,1)}),X()}i?(o=new i(s(e)),z(o.$$.fragment),D(o.$$.fragment,1),V(o,a.parentNode,a)):o=null}else i&&o.$set(h)},i(l){r||(o&&D(o.$$.fragment,l),r=!0)},o(l){o&&y(o.$$.fragment,l),r=!1},d(l){l&&L(t),l&&L(a),o&&H(o,l)}}}function Bo(n){let e,t=[],o=new Map,a,r=n[7];const i=s=>`${s[6]}-${s[13]}`;for(let s=0;s<r.length;s+=1){let l=xt(n,r,s),f=i(l);o.set(f,t[s]=$t(f,l))}return{c(){e=$("span");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=ee(s,"SPAN",{"data-slate-node":!0});var l=oe(e);for(let f=0;f<t.length;f+=1)t[f].l(l);l.forEach(L),this.h()},h(){N(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let f=0;f<t.length;f+=1)t[f].m(e,null);n[9](e),a=!0},p(s,[l]){l&223&&(r=s[7],U(),t=mt(t,l,i,1,s,r,o,e,_t,$t,null,xt),X())},i(s){if(!a){for(let l=0;l<r.length;l+=1)D(t[l]);a=!0}},o(s){for(let l=0;l<t.length;l+=1)y(t[l]);a=!1},d(s){s&&L(e);for(let l=0;l<t.length;l+=1)t[l].d();n[9](null)}}}function Io(n,e,t){let o,a,{decorations:r}=e,{isLast:i}=e,{parent:s}=e,{text:l}=e,{Leaf:f}=e,{Placeholder:h}=e;const g=ue();let d;Qe(()=>{var w;(w=Ee.get(g))==null||w.set(a,d),ke.set(l,d),pe.set(d,l)});function _(w){le[w?"unshift":"push"](()=>{d=w,t(5,d)})}return n.$$set=w=>{"decorations"in w&&t(8,r=w.decorations),"isLast"in w&&t(0,i=w.isLast),"parent"in w&&t(1,s=w.parent),"text"in w&&t(2,l=w.text),"Leaf"in w&&t(3,f=w.Leaf),"Placeholder"in w&&t(4,h=w.Placeholder)},n.$$.update=()=>{var w;n.$$.dirty&260&&t(7,o=Wn.decorations(l,r)),n.$$.dirty&4&&t(6,a=ce(l)),n.$$.dirty&100&&d&&((w=Ee.get(g))==null||w.set(a,d),ke.set(l,d),pe.set(d,l))},[i,s,l,f,h,d,a,o,r,_]}class De extends Q{constructor(e){super();j(this,e,Io,Bo,ie,{decorations:8,isLast:0,parent:1,text:2,Leaf:3,Placeholder:4})}}function Ao(n){let e,t;return e=new an({props:{node:n[0],decorations:n[1],selection:n[2],Element:n[3],Placeholder:n[5],Leaf:n[4]}}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&1&&(r.node=o[0]),a&2&&(r.decorations=o[1]),a&4&&(r.selection=o[2]),a&8&&(r.Element=o[3]),a&32&&(r.Placeholder=o[5]),a&16&&(r.Leaf=o[4]),e.$set(r)},i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Mo(n){let e,t,o,a;const r=[Wo,Ro],i=[];function s(l,f){return l[7]?0:1}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,f){let h=e;e=s(l),e===h?i[e].p(l,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),D(t,1),t.m(o.parentNode,o))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function Ro(n){let e,t,o;var a=De;function r(i){return{props:{Placeholder:i[5],Leaf:i[4],decorations:i[1],isLast:!1,parent:i[0],text:i[10]}}}return a&&(t=new a(r(n))),{c(){e=$("div"),t&&z(t.$$.fragment),this.h()},l(i){e=ee(i,"DIV",{"data-slate-spacer":!0,class:!0});var s=oe(e);t&&Y(t.$$.fragment,s),s.forEach(L),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(i,s){A(i,e,s),t&&V(t,e,null),o=!0},p(i,s){const l={};if(s&32&&(l.Placeholder=i[5]),s&16&&(l.Leaf=i[4]),s&2&&(l.decorations=i[1]),s&1&&(l.parent=i[0]),s&1024&&(l.text=i[10]),a!==(a=De)){if(t){U();const f=t;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}a?(t=new a(r(i)),z(t.$$.fragment),D(t.$$.fragment,1),V(t,e,null)):t=null}else a&&t.$set(l)},i(i){o||(t&&D(t.$$.fragment,i),o=!0)},o(i){t&&y(t.$$.fragment,i),o=!1},d(i){i&&L(e),t&&H(t)}}}function Wo(n){let e,t,o;var a=De;function r(i){return{props:{Placeholder:i[5],Leaf:i[4],decorations:i[1],isLast:!1,parent:i[0],text:i[10]}}}return a&&(t=new a(r(n))),{c(){e=$("span"),t&&z(t.$$.fragment),this.h()},l(i){e=ee(i,"SPAN",{"data-slate-spacer":!0,class:!0});var s=oe(e);t&&Y(t.$$.fragment,s),s.forEach(L),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(i,s){A(i,e,s),t&&V(t,e,null),o=!0},p(i,s){const l={};if(s&32&&(l.Placeholder=i[5]),s&16&&(l.Leaf=i[4]),s&2&&(l.decorations=i[1]),s&1&&(l.parent=i[0]),s&1024&&(l.text=i[10]),a!==(a=De)){if(t){U();const f=t;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}a?(t=new a(r(i)),z(t.$$.fragment),D(t.$$.fragment,1),V(t,e,null)):t=null}else a&&t.$set(l)},i(i){o||(t&&D(t.$$.fragment,i),o=!0)},o(i){t&&y(t.$$.fragment,i),o=!1},d(i){i&&L(e),t&&H(t)}}}function zo(n){let e,t,o,a;const r=[Mo,Ao],i=[];function s(l,f){return l[8]?0:1}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,f){let h=e;e=s(l),e===h?i[e].p(l,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),D(t,1),t.m(o.parentNode,o))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function Vo(n){let e,t,o,a;function r(l){n[18](l)}var i=n[3];function s(l){let f={isVoid:l[8],isInline:l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[zo]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.ref=l[6]),{props:f}}return i&&(e=new i(s(n)),le.push(()=>We(e,"ref",r))),{c(){e&&z(e.$$.fragment),o=B()},l(l){e&&Y(e.$$.fragment,l),o=B()},m(l,f){e&&V(e,l,f),A(l,o,f),a=!0},p(l,[f]){const h={};if(f&256&&(h.isVoid=l[8]),f&128&&(h.isInline=l[7]),f&2048&&(h.contenteditable=l[11]),f&1&&(h.element=l[0]),f&512&&(h.dir=l[9]),f&1050047&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.ref=l[6],gt(()=>t=!1)),i!==(i=l[3])){if(e){U();const g=e;y(g.$$.fragment,1,0,()=>{H(g,1)}),X()}i?(e=new i(s(l)),le.push(()=>We(e,"ref",r)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(l){a||(e&&D(e.$$.fragment,l),a=!0)},o(l){e&&y(e.$$.fragment,l),a=!1},d(l){l&&L(o),e&&H(e,l)}}}function Ho(n,e,t){let o,a,r,i,s,l,{element:f}=e,{decorations:h}=e,{selection:g=null}=e,{Element:d}=e,{Leaf:_}=e,{Placeholder:w}=e;const k=ue(),W=Kt();ze(n,W,O=>t(17,l=O));let p,F,v,c,S;Qe(()=>{var O;(O=Ee.get(k))==null||O.set(p,S),ke.set(f,S),pe.set(S,f)});function ae(O){S=O,t(6,S)}return n.$$set=O=>{"element"in O&&t(0,f=O.element),"decorations"in O&&t(1,h=O.decorations),"selection"in O&&t(2,g=O.selection),"Element"in O&&t(3,d=O.Element),"Leaf"in O&&t(4,_=O.Leaf),"Placeholder"in O&&t(5,w=O.Placeholder)},n.$$.update=()=>{var O;if(n.$$.dirty&131072&&t(15,o=l),n.$$.dirty&1&&t(7,a=k.isInline(f)),n.$$.dirty&1&&t(16,r=ce(f)),n.$$.dirty&81920&&F!==r&&(t(13,p=r),t(14,F=r)),n.$$.dirty&129&&!a&&m.hasInlines(k,f)){const I=Gt(te.string(f));I==="rtl"&&t(9,v=I)}if(n.$$.dirty&1&&t(8,i=m.isVoid(k,f)),n.$$.dirty&32768&&t(11,s=!o),n.$$.dirty&33153&&i){!o&&a&&t(11,s=!1);const[[I]]=te.texts(f);t(10,c=I),He.set(I,0),ve.set(I,f)}n.$$.dirty&8257&&S&&((O=Ee.get(k))==null||O.set(p,S),ke.set(f,S),pe.set(S,f))},[f,h,g,d,_,w,S,a,i,v,c,s,W,p,F,o,r,l,ae]}class en extends Q{constructor(e){super();j(this,e,Ho,Vo,ie,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function vo(n){let e,t,o;var a=en;function r(i){return{props:{Element:i[1],Placeholder:i[3],Leaf:i[2],decorations:i[5],element:i[0],selection:i[4]}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=B()},l(i){e&&Y(e.$$.fragment,i),t=B()},m(i,s){e&&V(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&2&&(l.Element=i[1]),s&8&&(l.Placeholder=i[3]),s&4&&(l.Leaf=i[2]),s&32&&(l.decorations=i[5]),s&1&&(l.element=i[0]),s&16&&(l.selection=i[4]),a!==(a=en)){if(e){U();const f=e;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}a?(e=new a(r(i)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(i){o||(e&&D(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&L(t),e&&H(e,i)}}}const tn={};function Di(){const n=me(tn);if(!n)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return n}function Ko(n,e,t){let o,a,r,i,{parent:s}=e,{element:l}=e,{path:f}=e,{index:h}=e,{decorate:g}=e,{decorations:d}=e,{selection:_=null}=e,{Element:w}=e,{Leaf:k}=e,{Placeholder:W}=e;const p=ge(!1);he(tn,p);const F=ue();let v=h,c=s,S=l,ae=d,O=_;return n.$$set=I=>{"parent"in I&&t(6,s=I.parent),"element"in I&&t(0,l=I.element),"path"in I&&t(7,f=I.path),"index"in I&&t(8,h=I.index),"decorate"in I&&t(9,g=I.decorate),"decorations"in I&&t(10,d=I.decorations),"selection"in I&&t(11,_=I.selection),"Element"in I&&t(1,w=I.Element),"Leaf"in I&&t(2,k=I.Leaf),"Placeholder"in I&&t(3,W=I.Placeholder)},n.$$.update=()=>{n.$$.dirty&4352&&v!==h&&t(12,v=h),n.$$.dirty&8256&&c!==s&&t(13,c=s),n.$$.dirty&16385&&S!==l&&t(14,S=l),n.$$.dirty&33792&&(At(ae,d)||t(15,ae=d)),n.$$.dirty&67584&&(Mt(O,_)||t(16,O=_)),n.$$.dirty&20480&&He.set(S,v),n.$$.dirty&24576&&ve.set(S,c),n.$$.dirty&4224&&t(18,o=f.concat(v)),n.$$.dirty&262144&&t(17,a=m.range(F,o)),n.$$.dirty&442880&&t(5,r=rn(g([S,o]),a,ae)),n.$$.dirty&196608&&t(4,i=O&&T.intersection(a,O)),n.$$.dirty&16&&p.set(!!i)},[l,w,k,W,i,r,s,f,h,g,d,_,v,c,S,ae,O,a,o]}class qo extends Q{constructor(e){super();j(this,e,Ko,vo,Se,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Yo(n){let e,t,o;var a=De;function r(i){return{props:{Placeholder:i[3],Leaf:i[2],decorations:i[4],isLast:i[5],parent:i[0],text:i[1]}}}return a&&(e=new a(r(n))),{c(){e&&z(e.$$.fragment),t=B()},l(i){e&&Y(e.$$.fragment,i),t=B()},m(i,s){e&&V(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&8&&(l.Placeholder=i[3]),s&4&&(l.Leaf=i[2]),s&16&&(l.decorations=i[4]),s&32&&(l.isLast=i[5]),s&1&&(l.parent=i[0]),s&2&&(l.text=i[1]),a!==(a=De)){if(e){U();const f=e;y(f.$$.fragment,1,0,()=>{H(f,1)}),X()}a?(e=new a(r(i)),z(e.$$.fragment),D(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else a&&e.$set(l)},i(i){o||(e&&D(e.$$.fragment,i),o=!0)},o(i){e&&y(e.$$.fragment,i),o=!1},d(i){i&&L(t),e&&H(e,i)}}}function Uo(n,e,t){let o,a,r,i,{parent:s}=e,{text:l}=e,{path:f}=e,{index:h}=e,{isLeafBlock:g}=e,{decorations:d}=e,{decorate:_}=e,{Leaf:w}=e,{Placeholder:k}=e;const W=ue();let p=h,F=l,v=s,c=d;return n.$$set=S=>{"parent"in S&&t(0,s=S.parent),"text"in S&&t(1,l=S.text),"path"in S&&t(6,f=S.path),"index"in S&&t(7,h=S.index),"isLeafBlock"in S&&t(8,g=S.isLeafBlock),"decorations"in S&&t(9,d=S.decorations),"decorate"in S&&t(10,_=S.decorate),"Leaf"in S&&t(2,w=S.Leaf),"Placeholder"in S&&t(3,k=S.Placeholder)},n.$$.update=()=>{n.$$.dirty&2176&&p!==h&&t(11,p=h),n.$$.dirty&4098&&F!==l&&t(12,F=l),n.$$.dirty&8193&&v!==s&&t(13,v=s),n.$$.dirty&16896&&(At(c,d)||t(14,c=d)),n.$$.dirty&6144&&He.set(F,p),n.$$.dirty&12288&&ve.set(F,v),n.$$.dirty&2112&&t(16,o=f.concat(p)),n.$$.dirty&10496&&t(5,a=g&&p===v.children.length-1),n.$$.dirty&65536&&t(15,r=m.range(W,o)),n.$$.dirty&119808&&t(4,i=rn(_([F,o]),r,c))},[s,l,w,k,i,a,f,h,g,d,_,p,F,v,c,r,o]}class Xo extends Q{constructor(e){super();j(this,e,Uo,Yo,Se,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function nn(n,e,t){const o=n.slice();return o[14]=e[t],o[16]=t,o}function Go(n){let e,t;return e=new Xo({props:{Placeholder:n[4],Leaf:n[3],decorations:n[0],parent:n[5],text:n[14],decorate:n[9],index:n[16],path:n[8],isLeafBlock:n[7]}}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&16&&(r.Placeholder=o[4]),a&8&&(r.Leaf=o[3]),a&1&&(r.decorations=o[0]),a&32&&(r.parent=o[5]),a&64&&(r.text=o[14]),a&512&&(r.decorate=o[9]),a&64&&(r.index=o[16]),a&256&&(r.path=o[8]),a&128&&(r.isLeafBlock=o[7]),e.$set(r)},i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Jo(n){let e,t;return e=new qo({props:{Element:n[2],Placeholder:n[4],Leaf:n[3],decorations:n[0],selection:n[1],element:n[14],parent:n[5],decorate:n[9],index:n[16],path:n[8]}}),{c(){z(e.$$.fragment)},l(o){Y(e.$$.fragment,o)},m(o,a){V(e,o,a),t=!0},p(o,a){const r={};a&4&&(r.Element=o[2]),a&16&&(r.Placeholder=o[4]),a&8&&(r.Leaf=o[3]),a&1&&(r.decorations=o[0]),a&2&&(r.selection=o[1]),a&64&&(r.element=o[14]),a&32&&(r.parent=o[5]),a&512&&(r.decorate=o[9]),a&64&&(r.index=o[16]),a&256&&(r.path=o[8]),e.$set(r)},i(o){t||(D(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function on(n,e){let t,o,a,r,i,s;const l=[Jo,Go],f=[];function h(g,d){return d&64&&(o=null),o==null&&(o=!!Ve.isElement(g[14])),o?0:1}return a=h(e,-1),r=f[a]=l[a](e),{key:n,first:null,c(){t=B(),r.c(),i=B(),this.h()},l(g){t=B(),r.l(g),i=B(),this.h()},h(){this.first=t},m(g,d){A(g,t,d),f[a].m(g,d),A(g,i,d),s=!0},p(g,d){e=g;let _=a;a=h(e,d),a===_?f[a].p(e,d):(U(),y(f[_],1,1,()=>{f[_]=null}),X(),r=f[a],r?r.p(e,d):(r=f[a]=l[a](e),r.c()),D(r,1),r.m(i.parentNode,i))},i(g){s||(D(r),s=!0)},o(g){y(r),s=!1},d(g){g&&L(t),f[a].d(g),g&&L(i)}}}function Qo(n){let e=[],t=new Map,o,a,r=n[6];const i=s=>ce(s[14]);for(let s=0;s<r.length;s+=1){let l=nn(n,r,s),f=i(l);t.set(f,e[s]=on(f,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();o=B()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);o=B()},m(s,l){for(let f=0;f<e.length;f+=1)e[f].m(s,l);A(s,o,l),a=!0},p(s,[l]){l&1023&&(r=s[6],U(),e=mt(e,l,i,1,s,r,t,o.parentNode,_t,on,o,nn),X())},i(s){if(!a){for(let l=0;l<r.length;l+=1)D(e[l]);a=!0}},o(s){for(let l=0;l<e.length;l+=1)y(e[l]);a=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&L(o)}}}function rn(n,e,t=[]){for(const o of t){const a=T.intersection(o,e);a&&n.push(a)}return n}function jo(n,e,t){let o,a,r,i,{node:s}=e,{decorations:l}=e,{selection:f=null}=e,{Element:h}=e,{Leaf:g}=e,{Placeholder:d}=e;const _=ue(),w=qt();ze(n,w,p=>t(12,i=p));let k=s,W=k.children;return n.$$set=p=>{"node"in p&&t(11,s=p.node),"decorations"in p&&t(0,l=p.decorations),"selection"in p&&t(1,f=p.selection),"Element"in p&&t(2,h=p.Element),"Leaf"in p&&t(3,g=p.Leaf),"Placeholder"in p&&t(4,d=p.Placeholder)},n.$$.update=()=>{n.$$.dirty&4096&&t(9,o=i),n.$$.dirty&2080&&(k!==s||s===_)&&t(5,k=s),n.$$.dirty&96&&W!==k.children&&t(6,W=k.children),n.$$.dirty&32&&t(8,a=Ce(k)),n.$$.dirty&32&&t(7,r=Ve.isElement(k)&&!_.isInline(k)&&m.hasInlines(_,k))},[l,f,h,g,d,k,W,r,a,o,w,s,i]}class an extends Q{constructor(e){super();j(this,e,jo,Qo,Se,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function Zo(n){let e,t;const o=n[7].default,a=Le(o,n,n[6],null);return{c(){e=$("div"),a&&a.c(),this.h()},l(r){e=ee(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=oe(e);a&&a.l(i),i.forEach(L),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-void",n[2]),N(e,"dir",n[4]),N(e,"contenteditable",n[3]),N(e,"class","svelte-19k8gul")},m(r,i){A(r,e,i),a&&a.m(e,null),n[9](e),t=!0},p(r,i){a&&a.p&&(!t||i&64)&&Fe(a,o,r,r[6],t?Te(o,r[6],i,null):Oe(r[6]),null),(!t||i&4)&&N(e,"data-slate-void",r[2]),(!t||i&16)&&N(e,"dir",r[4]),(!t||i&8)&&N(e,"contenteditable",r[3])},i(r){t||(D(a,r),t=!0)},o(r){y(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n[9](null)}}}function xo(n){let e,t;const o=n[7].default,a=Le(o,n,n[6],null);return{c(){e=$("span"),a&&a.c(),this.h()},l(r){e=ee(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=oe(e);a&&a.l(i),i.forEach(L),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-inline",n[1]),N(e,"data-slate-void",n[2]),N(e,"dir",n[4]),N(e,"contenteditable",n[3]),N(e,"class","svelte-19k8gul")},m(r,i){A(r,e,i),a&&a.m(e,null),n[8](e),t=!0},p(r,i){a&&a.p&&(!t||i&64)&&Fe(a,o,r,r[6],t?Te(o,r[6],i,null):Oe(r[6]),null),(!t||i&2)&&N(e,"data-slate-inline",r[1]),(!t||i&4)&&N(e,"data-slate-void",r[2]),(!t||i&16)&&N(e,"dir",r[4]),(!t||i&8)&&N(e,"contenteditable",r[3])},i(r){t||(D(a,r),t=!0)},o(r){y(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n[8](null)}}}function $o(n){let e,t,o,a;const r=[xo,Zo],i=[];function s(l,f){return l[1]?0:1}return e=s(n),t=i[e]=r[e](n),{c(){t.c(),o=B()},l(l){t.l(l),o=B()},m(l,f){i[e].m(l,f),A(l,o,f),a=!0},p(l,[f]){let h=e;e=s(l),e===h?i[e].p(l,f):(U(),y(i[h],1,1,()=>{i[h]=null}),X(),t=i[e],t?t.p(l,f):(t=i[e]=r[e](l),t.c()),D(t,1),t.m(o.parentNode,o))},i(l){a||(D(t),a=!0)},o(l){y(t),a=!1},d(l){i[e].d(l),l&&L(o)}}}function ei(n,e,t){let{$$slots:o={},$$scope:a}=e,{element:r}=e,{ref:i}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:f}=e,{dir:h=void 0}=e;function g(_){le[_?"unshift":"push"](()=>{i=_,t(0,i)})}function d(_){le[_?"unshift":"push"](()=>{i=_,t(0,i)})}return n.$$set=_=>{"element"in _&&t(5,r=_.element),"ref"in _&&t(0,i=_.ref),"isInline"in _&&t(1,s=_.isInline),"isVoid"in _&&t(2,l=_.isVoid),"contenteditable"in _&&t(3,f=_.contenteditable),"dir"in _&&t(4,h=_.dir),"$$scope"in _&&t(6,a=_.$$scope)},[i,s,l,f,h,r,a,o,g,d]}class ti extends Q{constructor(e){super();j(this,e,ei,$o,ie,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function ni(n){let e,t;const o=n[2].default,a=Le(o,n,n[1],null);return{c(){e=$("span"),a&&a.c(),this.h()},l(r){e=ee(r,"SPAN",{"data-slate-leaf":!0});var i=oe(e);a&&a.l(i),i.forEach(L),this.h()},h(){N(e,"data-slate-leaf","true")},m(r,i){A(r,e,i),a&&a.m(e,null),t=!0},p(r,[i]){a&&a.p&&(!t||i&2)&&Fe(a,o,r,r[1],t?Te(o,r[1],i,null):Oe(r[1]),null)},i(r){t||(D(a,r),t=!0)},o(r){y(a,r),t=!1},d(r){r&&L(e),a&&a.d(r)}}}function oi(n,e,t){let{$$slots:o={},$$scope:a}=e,{leaf:r}=e;return n.$$set=i=>{"leaf"in i&&t(0,r=i.leaf),"$$scope"in i&&t(1,a=i.$$scope)},[r,a,o]}class ii extends Q{constructor(e){super();j(this,e,oi,ni,ie,{leaf:0})}}function ri(n){let e,t,o;const a=n[2].default,r=Le(a,n,n[1],null);return{c(){e=$("span"),r&&r.c(),this.h()},l(i){e=ee(i,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=oe(e);r&&r.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-placeholder","true"),N(e,"contenteditable","false"),N(e,"class","svelte-lqbb94"),zn(()=>n[3].call(e))},m(i,s){A(i,e,s),r&&r.m(e,null),t=Vn(e,n[3].bind(e)),o=!0},p(i,[s]){r&&r.p&&(!o||s&2)&&Fe(r,a,i,i[1],o?Te(a,i[1],s,null):Oe(i[1]),null)},i(i){o||(D(r,i),o=!0)},o(i){y(r,i),o=!1},d(i){i&&L(e),r&&r.d(i),t()}}}function ai(n,e,t){let{$$slots:o={},$$scope:a}=e,{clientHeight:r=void 0}=e;function i(){r=this.clientHeight,t(0,r)}return n.$$set=s=>{"clientHeight"in s&&t(0,r=s.clientHeight),"$$scope"in s&&t(1,a=s.$$scope)},[r,a,o,i]}class li extends Q{constructor(e){super();j(this,e,ai,ri,ie,{clientHeight:0})}}const si=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),rt={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ln={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:si?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},at={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let n=1;n<20;n++)at["f"+n]=111+n;function sn(n,e={}){Array.isArray(n)||(n=[n]);const t=n.map(o=>ci(o,e));return function(a){return t.some(r=>fi(r,a))}}function yi(n,e,t={}){return sn(n,t)(e)}function lt(n){return sn(n,{byKey:!0})}function ci(n,e={}){const t=e&&e.byKey,o={};n=n.replace("++","+add");const a=n.split("+"),{length:r}=a;for(const i in rt)o[rt[i]]=!1;for(let i of a){const s=i.endsWith("?")&&i.length>1;s&&(i=i.slice(0,-1));const l=cn(i),f=rt[l];if(i.length>1&&!f&&!ln[i]&&!at[l])throw new TypeError(`Unknown modifier: "${i}"`);(r===1||!f)&&(t?o.key=l:o.which=ui(i)),f&&(o[f]=s?null:!0)}return o}function fi(n,e){for(const t in n){const o=n[t];let a;if(o!=null&&(t==="key"&&e.key!=null?a=e.key.toLowerCase():t==="which"?a=o===91&&e.which===93?91:e.which:a=e[t],!(a==null&&o===!1)&&a!==o))return!1}return!0}function ui(n){return n=cn(n),at[n]||n.toUpperCase().charCodeAt(0)}function cn(n){return n=n.toLowerCase(),n=ln[n]||n,n}const di={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},hi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},gi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function K(n){const e=di[n],t=hi[n],o=gi[n],a=e&&lt(e),r=t&&lt(t),i=o&&lt(o);return s=>!!(a&&a(s)||Ft&&r&&r(s)||!Ft&&i&&i(s))}var q={isBold:K("bold"),isCompose:K("compose"),isMoveBackward:K("moveBackward"),isMoveForward:K("moveForward"),isDeleteBackward:K("deleteBackward"),isDeleteForward:K("deleteForward"),isDeleteLineBackward:K("deleteLineBackward"),isDeleteLineForward:K("deleteLineForward"),isDeleteWordBackward:K("deleteWordBackward"),isDeleteWordForward:K("deleteWordForward"),isExtendBackward:K("extendBackward"),isExtendForward:K("extendForward"),isExtendLineBackward:K("extendLineBackward"),isExtendLineForward:K("extendLineForward"),isItalic:K("italic"),isMoveLineBackward:K("moveLineBackward"),isMoveLineForward:K("moveLineForward"),isMoveWordBackward:K("moveWordBackward"),isMoveWordForward:K("moveWordForward"),isRedo:K("redo"),isSplitBlock:K("splitBlock"),isTransposeCharacter:K("transposeCharacter"),isUndo:K("undo")};function mi(n){let e,t,o,a,r,i,s,l;t=new an({props:{node:n[9],selection:n[10],decorations:n[8],Element:n[1],Leaf:n[2],Placeholder:n[3]}});let f=[n[29],{role:o=n[7].readOnly?void 0:"textbox"},{spellcheck:n[4]},{autocorrect:n[5]},{autocapitalize:n[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:a=!n[7].readOnly},{"z-index":r=-1}],h={};for(let g=0;g<f.length;g+=1)h=je(h,f[g]);return{c(){e=$("div"),z(t.$$.fragment),this.h()},l(g){e=ee(g,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var d=oe(e);Y(t.$$.fragment,d),d.forEach(L),this.h()},h(){wt(e,h),pt(e,"svelte-m59z04",!0)},m(g,d){A(g,e,d),V(t,e,null),n[38](e),i=!0,s||(l=[G(e,"beforeinput",n[13]),G(e,"keydown",n[15]),G(e,"input",n[14]),G(e,"focus",n[16]),G(e,"blur",n[17]),G(e,"click",n[18]),G(e,"compositionend",n[19]),G(e,"compositionupdate",n[20]),G(e,"compositionstart",n[21]),G(e,"paste",n[22]),G(e,"copy",n[23]),G(e,"cut",n[24]),G(e,"dragover",n[25]),G(e,"dragstart",n[26]),G(e,"drop",n[27]),G(e,"dragend",n[28])],s=!0)},p(g,d){const _={};d[0]&512&&(_.node=g[9]),d[0]&1024&&(_.selection=g[10]),d[0]&256&&(_.decorations=g[8]),d[0]&2&&(_.Element=g[1]),d[0]&4&&(_.Leaf=g[2]),d[0]&8&&(_.Placeholder=g[3]),t.$set(_),wt(e,h=Hn(f,[d[0]&536870912&&g[29],(!i||d[0]&128&&o!==(o=g[7].readOnly?void 0:"textbox"))&&{role:o},(!i||d[0]&16)&&{spellcheck:g[4]},(!i||d[0]&32)&&{autocorrect:g[5]},(!i||d[0]&64)&&{autocapitalize:g[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!i||d[0]&128&&a!==(a=!g[7].readOnly))&&{contenteditable:a},{"z-index":r}])),pt(e,"svelte-m59z04",!0)},i(g){i||(D(t.$$.fragment,g),i=!0)},o(g){y(t.$$.fragment,g),i=!1},d(g){g&&L(e),H(t),n[38](null),s=!1,vn(l)}}}function ye(n,e){return se(e)&&ot(n,e)}function x(n,e){return se(e)&&ot(n,e,{editable:!0})}function fn(n,e){if(bt.get(n))return!1;{const t=ye(n,e)&&fe(e);return m.isVoid(n,t)}}function _i(n,e){const t=e.startContainer.parentElement,o=t.getBoundingClientRect;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),Un(t,{scrollMode:"if-needed"}),t.getBoundingClientRect=o}function wi(n,e,t){const o=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let a=kt(e,o),r,i,{Element:s=ti}=e,{Leaf:l=ii}=e,{Placeholder:f=li}=e,{placeholder:h=void 0}=e,{readOnly:g=!1}=e,{autoFocus:d=!1}=e,{decorate:_=Yt}=e,{scrollSelectionIntoView:w=_i}=e,{ref:k=void 0}=e,{spellcheck:W=!0}=e,{autocorrect:p="true"}=e,{autocapitalize:F="true"}=e,{onKeyDown:v=()=>{}}=e;const c=ue(),S=vt();ze(n,S,u=>t(9,r=u));const ae=Kt(),O=fo(),I=qt(),Ye=uo();ze(n,Ye,u=>t(10,i=u));const Ue=[],C={isComposing:!1,hasInsertPrefixInCompositon:!0,updateSelectionTimeoutId:null,isDraggingInternally:!1,latestElement:null,readOnly:g};let Ie=[],Xe;function hn(){if(C.isComposing||C.isDraggingInternally||C.updateSelectionTimeoutId)Ge();else{const u=Ne(c),E=re(c,c),b=u.getSelection();if(u.activeElement===E?(t(7,C.latestElement=u.activeElement,C),be.set(c,!0),O.set(!0)):(be.delete(c),O.set(!1)),!b){R.deselect(c);return}const P=x(c,b.anchorNode)||fn(c,b.anchorNode),M=x(c,b.focusNode)||fn(c,b.focusNode);if(P&&M){const Z=Be(c,b,{exactMatch:!1,suppressThrow:!0});if(Z){R.select(c,Z);return}}R.deselect(c)}}const Ge=Yn(0,()=>Et().then(hn));Qe(()=>{const u=$e(k);return u&&(Ze.set(c,u),u.document.addEventListener("selectionchange",Ge)),Ke.set(c,k),ke.set(c,k),pe.set(k,c),()=>{Ke.delete(c),ke.delete(c),u&&(Ze.delete(c),u.document.removeEventListener("selectionchange",Ge))}});function gn(){const u=Ne(c),E=u==null?void 0:u.getSelection();if(C.isComposing||!E||!Nt(c))return;const b=E.type!=="None";if(!b)return;const P=Ke.get(c);let M=!1;if(P.contains(E.anchorNode)&&P.contains(E.focusNode)&&(M=!0),b&&M&&c.selection){const de=Be(c,E,{exactMatch:!0,suppressThrow:!0});if(de&&T.equals(de,c.selection))return}if(c.selection&&!so(c,c.selection)){t(36,c.selection=Be(c,E,{exactMatch:!1,suppressThrow:!1}),c),Ye.set(c.selection);return}C.updateSelectionTimeoutId&&clearTimeout(C.updateSelectionTimeoutId);let Z=setTimeout(()=>{J&&et&&re(c,c).focus(),Object.assign(C,{updateSelectionTimeoutId:null})});Object.assign(C,{updateSelectionTimeoutId:Z});const J=c.selection&&M&&qe(c,c.selection);J?(T.isBackward(c.selection)?E.setBaseAndExtent(J.endContainer,J.endOffset,J.startContainer,J.startOffset):E.setBaseAndExtent(J.startContainer,J.startOffset,J.endContainer,J.endOffset),w(c,J)):E.removeAllRanges()}Kn(()=>Et().then(gn));function mn(u){if(!C.readOnly&&x(c,u.target)){const E=u.inputType,b=u.dataTransfer||u.data||void 0;if(E==="insertCompositionText"||E==="deleteCompositionText")return;let P=!1;if(E==="insertText"&&c.selection&&T.isCollapsed(c.selection)&&u.data&&u.data.length===1&&/[a-z ]/i.test(u.data)&&c.selection.anchor.offset!==0){P=!0,c.marks&&(P=!1);const M=m.above(c,{at:c.selection.anchor,match:Z=>m.isInline(c,Z),mode:"highest"});if(M){const[,Z]=M;m.isEnd(c,c.selection.anchor,Z)&&(P=!1)}}if(P||u.preventDefault(),!E.startsWith("delete")||E.startsWith("deleteBy")){const[M]=u.getTargetRanges();if(M){const Z=Be(c,M,{exactMatch:!1,suppressThrow:!1});(!c.selection||!T.equals(c.selection,Z))&&R.select(c,Z)}}if(c.selection&&T.isExpanded(c.selection)&&E.startsWith("delete")){const M=E.endsWith("Backward")?"backward":"forward";m.deleteFragment(c,{direction:M});return}switch(E){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{m.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{m.deleteForward(c);break}case"deleteContentBackward":{m.deleteBackward(c);break}case"deleteEntireSoftLine":{m.deleteBackward(c,{unit:"line"}),m.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{m.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{m.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{m.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{m.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{m.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{m.deleteForward(c,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{m.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{E==="insertFromComposition"&&C.isComposing&&t(7,C.isComposing=!1,C),(b==null?void 0:b.constructor.name)==="DataTransfer"?c.insertData(b):typeof b=="string"&&(P?Ue.push(()=>m.insertText(c,b)):m.insertText(c,b));break}}}}function _n(u){for(const E of Ue)E();Ue.length=0}function wn(u){if(!C.readOnly&&!C.isComposing&&x(c,u.target)){const E=c.children[c.selection!==null?c.selection.focus.path[0]:0],b=Gt(te.string(E))==="rtl";if(q.isRedo(u)){u.preventDefault();const P=c;typeof P.redo=="function"&&P.redo()}else if(q.isUndo(u)){u.preventDefault();const P=c;typeof P.undo=="function"&&P.undo()}else if(q.isMoveLineBackward(u))u.preventDefault(),R.move(c,{unit:"line",reverse:!0});else if(q.isMoveLineForward(u))u.preventDefault(),R.move(c,{unit:"line"});else if(q.isExtendLineBackward(u))u.preventDefault(),R.move(c,{unit:"line",edge:"focus",reverse:!0});else if(q.isExtendLineForward(u))u.preventDefault(),R.move(c,{unit:"line",edge:"focus"});else if(q.isMoveBackward(u))u.preventDefault(),c.selection&&T.isCollapsed(c.selection)?R.move(c,{reverse:!b}):R.collapse(c,{edge:"start"});else if(q.isMoveForward(u))u.preventDefault(),c.selection&&T.isCollapsed(c.selection)?R.move(c,{reverse:b}):R.collapse(c,{edge:"end"});else if(q.isMoveWordBackward(u))u.preventDefault(),c.selection&&T.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:!b});else if(q.isMoveWordForward(u))u.preventDefault(),c.selection&&T.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:b});else if(!Pt)q.isBold(u)||q.isItalic(u)||q.isTransposeCharacter(u)?u.preventDefault():q.isSplitBlock(u)?(u.preventDefault(),m.insertBreak(c)):q.isDeleteBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c)):q.isDeleteForward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c)):q.isDeleteLineBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"line"})):q.isDeleteLineForward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"line"})):q.isDeleteWordBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"word"})):q.isDeleteWordForward(u)&&(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"word"}));else{if((Ot||tt)&&c.selection&&(q.isDeleteBackward(u)||q.isDeleteForward(u))&&T.isCollapsed(c.selection)){const P=te.parent(c,c.selection.anchor.path);if(Ve.isElement(P)&&m.isVoid(c,P)&&m.isInline(c,P)){u.preventDefault(),m.deleteBackward(c,{unit:"block"});return}}return v(u)}}}function pn(u){if(!C.readOnly&&!C.updateSelectionTimeoutId&&x(c,u.target)){const E=re(c,c),b=Ne(c);if(t(7,C.latestElement=b.activeElement,C),et&&u.target!==E){E.focus();return}be.set(c,!0),O.set(!0)}}function kn(u){if(C.readOnly||C.updateSelectionTimeoutId||!x(c,u.target))return;const E=Ne(c);if(C.latestElement===E.activeElement)return;const b=u.relatedTarget,P=re(c,c);if(b!==P&&!(ne(b)&&b.hasAttribute("data-slate-spacer"))){if(b!=null&&se(b)&&ot(c,b)){const M=fe(b);if(Ve.isElement(M)&&!c.isVoid(M))return}if(tt){const M=E.getSelection();M==null||M.removeAllRanges()}be.delete(c),O.set(!1)}}function En(u){if(!C.readOnly&&ye(c,u.target)&&se(u.target)){const E=fe(u.target),b=Ce(E);if(m.hasPath(c,b)&&te.get(c,b)===E){const M=m.start(c,b),Z=m.end(c,b),J=m.void(c,{at:M}),de=m.void(c,{at:Z});if(J&&de&&we.equals(J[1],de[1])){const Bn=m.range(c,M);R.select(c,Bn)}}}}function bn(u){if(x(c,u.target)){t(7,C.isComposing=!1,C);const E=u.data;if(!tt&&!io&&!to&&!ro&&E&&m.insertText(c,E),c.selection&&T.isCollapsed(c.selection)){const b=c.selection.anchor.path,P=te.leaf(c,b);C.hasInsertPrefixInCompositon&&(t(7,C.hasInsertPrefixInCompositon=!1,C),m.withoutNormalizing(c,()=>{const M=P.text.replace(/^\uFEFF/,"");R.delete(c,{distance:P.text.length,reverse:!0}),R.insertText(c,M)}))}}}function Cn(u){x(c,u.target)&&t(7,C.isComposing=!0,C)}function Dn(u){if(x(c,u.target)&&c.selection){if(T.isExpanded(c.selection)){m.deleteFragment(c);return}const E=m.above(c,{match:b=>m.isInline(c,b),mode:"highest"});if(E){const[,b]=E;if(m.isEnd(c,c.selection.anchor,b)){const P=m.after(c,b);R.setSelection(c,{anchor:P,focus:P})}}c.marks&&(t(7,C.hasInsertPrefixInCompositon=!0,C),R.insertNodes(c,ut({text:"\uFEFF"},c.marks),{select:!0}))}}function yn(u){!C.readOnly&&x(c,u.target)&&(!Pt||Qn(u))&&(u.preventDefault(),c.insertData(u.clipboardData))}function Sn(u){x(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData))}function Ln(u){if(!C.readOnly&&x(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData),c.selection))if(T.isExpanded(c.selection))m.deleteFragment(c);else{const E=te.parent(c,c.selection.anchor.path);m.isVoid(c,E)&&R.delete(c)}}function Fn(u){if(ye(c,u.target)){const E=fe(u.target);m.isVoid(c,E)&&u.preventDefault()}}function On(u){if(!C.readOnly&&ye(c,u.target)){const E=fe(u.target),b=Ce(E);if(m.isVoid(c,E)||m.void(c,{at:b,voids:!0})){const M=m.range(c,b);R.select(c,M)}t(7,C.isDraggingInternally=!0,C),c.setFragmentData(u.dataTransfer)}}function Tn(u){if(!C.readOnly&&ye(c,u.target)){u.preventDefault();const E=c.selection,b=lo(c,u),P=u.dataTransfer;R.select(c,b),C.isDraggingInternally&&(E&&!T.equals(E,b)&&!m.void(c,{at:b,voids:!0})&&R.delete(c,{at:E}),t(7,C.isDraggingInternally=!1,C)),c.insertData(P),Nt(c)||ao(c)}}function Pn(u){!C.readOnly&&C.isDraggingInternally&&ye(c,u.target)&&t(7,C.isDraggingInternally=!1,C)}function Nn(u){le[u?"unshift":"push"](()=>{k=u,t(0,k)})}return n.$$set=u=>{e=je(je({},e),qn(u)),t(29,a=kt(e,o)),"Element"in u&&t(1,s=u.Element),"Leaf"in u&&t(2,l=u.Leaf),"Placeholder"in u&&t(3,f=u.Placeholder),"placeholder"in u&&t(30,h=u.placeholder),"readOnly"in u&&t(31,g=u.readOnly),"autoFocus"in u&&t(32,d=u.autoFocus),"decorate"in u&&t(33,_=u.decorate),"scrollSelectionIntoView"in u&&t(34,w=u.scrollSelectionIntoView),"ref"in u&&t(0,k=u.ref),"spellcheck"in u&&t(4,W=u.spellcheck),"autocorrect"in u&&t(5,p=u.autocorrect),"autocapitalize"in u&&t(6,F=u.autocapitalize),"onKeyDown"in u&&t(35,v=u.onKeyDown)},n.$$.update=()=>{if(n.$$.dirty[1]&33&&bt.set(c,g),n.$$.dirty[1]&1&&ae.set(g),n.$$.dirty[1]&1&&t(7,C.readOnly=g,C),n.$$.dirty[1]&4&&I.set(_),n.$$.dirty[0]&1073742720|n.$$.dirty[1]&36)if(r.children.length===1&&Array.from(te.texts(r)).length===1&&te.string(r)===""&&!C.isComposing){const u=m.start(c,[]);t(8,Ie=[..._([c,[]]),{[Pe]:!0,placeholder:h,anchor:u,focus:u}])}else Ie.length&&t(8,Ie=_([c,[]]));n.$$.dirty[0]&1|n.$$.dirty[1]&66&&Xe!==d&&k&&(d&&k.focus(),t(37,Xe=d))},[k,s,l,f,W,p,F,C,Ie,r,i,S,Ye,mn,_n,wn,pn,kn,En,bn,Cn,Dn,yn,Sn,Ln,Fn,On,Tn,Pn,a,h,g,d,_,w,v,c,Xe,Nn]}class Si extends Q{constructor(e){super();j(this,e,wi,mi,Se,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:31,autoFocus:32,decorate:33,scrollSelectionIntoView:34,ref:0,spellcheck:4,autocorrect:5,autocapitalize:6,onKeyDown:35},null,[-1,-1])}}function un(n,e){const t=(e.top+e.bottom)/2;return n.top<=t&&n.bottom>=t}function dn(n,e,t){const o=qe(n,e).getBoundingClientRect(),a=qe(n,t).getBoundingClientRect();return un(o,a)&&un(a,o)}function pi(n,e){const t=m.range(n,T.end(e)),o=Array.from(m.positions(n,{at:e}));let a=0,r=o.length,i=Math.floor(r/2);if(dn(n,m.range(n,o[a]),t))return m.range(n,o[a],t);if(o.length<2)return m.range(n,o[o.length-1],t);for(;i!==o.length&&i!==a;)dn(n,m.range(n,o[i]),t)?r=i:a=i,i=Math.floor((a+r)/2);return m.range(n,o[r],t)}function Li(n){const e=n,{apply:t,onChange:o,deleteBackward:a}=e;return Ee.set(e,new WeakMap),e.deleteBackward=r=>{if(r!=="line")return a(r);if(n.selection&&T.isCollapsed(n.selection)){const i=m.above(n,{match:s=>m.isBlock(n,s),at:n.selection});if(i){const[,s]=i,l=m.range(n,s,n.selection.anchor),f=pi(e,l);T.isCollapsed(f)||R.delete(n,{at:f})}}},e.apply=r=>{const i=[];switch(r.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of m.levels(e,{at:r.path})){const f=ce(s);i.push([l,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of m.levels(e,{at:we.parent(r.path)})){const f=ce(s);i.push([l,f])}break}case"move_node":{for(const[s,l]of m.levels(e,{at:we.common(we.parent(r.path),we.parent(r.newPath))})){const f=ce(s);i.push([l,f])}break}}t(r);for(const[s,l]of i){const[f]=m.node(e,s);xe.set(f,l)}},e.setFragmentData=r=>{const{selection:i}=e;if(!i)return;const[s,l]=T.edges(i),f=m.void(e,{at:s.path}),h=m.void(e,{at:l.path});if(T.isCollapsed(i)&&!f)return;const g=qe(e,i);let d=g.cloneContents(),_=d.childNodes[0];if(d.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(_=F)}),h){const[F]=h,v=g.cloneRange(),c=re(e,F);v.setEndAfter(c),d=v.cloneContents()}if(f&&(_=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const v=F.getAttribute("data-slate-zero-width")==="n";F.textContent=v?`
`:""}),yt(_)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(_),d.appendChild(F),_=F}const w=e.getFragment(),k=JSON.stringify(w),W=window.btoa(encodeURIComponent(k));_.setAttribute("data-slate-fragment",W),r.setData("application/x-slate-fragment",W);const p=document.createElement("div");return p.appendChild(d),p.setAttribute("hidden","true"),document.body.appendChild(p),r.setData("text/html",p.innerHTML),r.setData("text/plain",Lt(p)),document.body.removeChild(p),r},e.insertData=r=>{e.insertFragmentData(r)||e.insertTextData(r)},e.insertFragmentData=r=>{const i=r.getData("application/x-slate-fragment")||eo(r);if(i){const s=decodeURIComponent(window.atob(i)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=r=>{const i=r.getData("text/plain");if(i){const s=i.split(/\r\n|\r|\n/);let l=!1;for(const f of s)l&&R.splitNodes(e,{always:!0}),e.insertText(f),l=!0;return!0}return!1},e.onChange=()=>{const r=Ct.get(e);r&&r(),o()},e}export{Si as E,Ci as S,Di as a,fo as b,Kt as c,vt as d,Ce as f,ue as g,yi as i,Li as w};
