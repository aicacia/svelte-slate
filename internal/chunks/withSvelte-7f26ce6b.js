var Wn=Object.defineProperty;var Me=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var ht=(o,e,n)=>e in o?Wn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,gt=(o,e)=>{for(var n in e||(e={}))ut.call(e,n)&&ht(o,n,e[n]);if(Me)for(var n of Me(e))dt.call(e,n)&&ht(o,n,e[n]);return o};var Qe=(o,e)=>{var n={};for(var t in o)ut.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&Me)for(var t of Me(o))e.indexOf(t)<0&&dt.call(o,t)&&(n[t]=o[t]);return n};import{a1 as g,a2 as B,a3 as zn,S as Q,i as Z,s as De,F as ye,J as Le,K as Se,L as Fe,q as b,o as C,r as de,D as he,a4 as Oe,a5 as vn,a6 as ie,t as Re,h as We,g as M,d as L,e as x,c as $,a as ne,b as N,I as mt,j as _t,M as ge,l as A,n as X,p as G,a7 as me,w as v,x as Y,y as H,B as V,a8 as ee,a9 as Hn,Q as wt,O as le,P as ze,aa as pt,ab as kt,v as Ze,ac as Vn,ad as ve,ae as He,C as Pe,af as je,ag as Kn,ah as Un,ai as Et,aj as bt,ak as J,z as qn,al as Yn,am as Ct,u as Xn,E as Gn,an as Dt,ao as W,ap as Jn}from"./vendor-6bac273f.js";const Ve=new WeakMap,Ke=new WeakMap,xe=new WeakMap,Ue=new WeakMap,_e=new WeakMap,we=new WeakMap,$e=new WeakMap,pe=new WeakMap,yt=new WeakMap,ke=new WeakMap,Lt=new WeakMap,Be=Symbol("placeholder");let Qn=0;class Zn{constructor(){this.id=`${Qn++}`}toString(){return this.id}}function et(o){return o&&o.ownerDocument&&o.ownerDocument.defaultView||null}function jn(o){return se(o)&&o.nodeType===8}function te(o){return se(o)&&o.nodeType===1}function se(o){const e=et(o);return!!e&&o instanceof e.Node}function St(o){const e=o&&o.anchorNode&&et(o.anchorNode);return!!e&&o instanceof e.Selection}function Ft(o){return se(o)&&o.nodeType===3}function xn(o){return o.clipboardData&&o.clipboardData.getData("text/plain")!==""&&o.clipboardData.types.length===1}function $n(o){let[e,n]=o;if(te(e)&&e.childNodes.length){let t=n===e.childNodes.length,i=t?n-1:n;for([e,i]=Ot(e,i,t?"backward":"forward"),t=i<n;te(e)&&e.childNodes.length;){const a=t?e.childNodes.length-1:0;e=to(e,a,t?"backward":"forward")}n=t&&e.textContent!=null?e.textContent.length:0}return[e,n]}function eo(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function Ot(o,e,n){const{childNodes:t}=o;let i=t[e],a=e,r=!1,s=!1;for(;(jn(i)||te(i)&&i.childNodes.length===0||te(i)&&i.getAttribute("contenteditable")==="false")&&!(r&&s);){if(a>=t.length){r=!0,a=e-1,n="backward";continue}if(a<0){s=!0,a=e+1,n="forward";continue}i=t[a],e=a,a+=n==="forward"?1:-1}return[i,e]}function to(o,e,n){const[t]=Ot(o,e,n);return t}function Pt(o){let e="";if(Ft(o)&&o.nodeValue)return o.nodeValue;if(te(o)){for(const t of Array.from(o.childNodes))e+=Pt(t);const n=getComputedStyle(o).getPropertyValue("display");(n==="block"||n==="list"||o.tagName==="BR")&&(e+=`
`)}return e}const no=/data-slate-fragment="(.+?)"/m;function oo(o){const e=o.getData("text/html"),[,n]=e.match(no)||[];return n}const io=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Bt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const tt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),nt=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),ro=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Nt=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),ao=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),lo=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),so=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),Tt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",It=!ao&&!ro&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function ot(o){const e=xe.get(o);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(o){let e=$e.get(o);return e||(e=new Zn,$e.set(o,e)),e}function Ee(o){const e=[];let n=o;for(;;){const t=Ke.get(n);if(t==null){if(g.isEditor(n))return e;break}const i=Ve.get(n);if(i==null)break;e.unshift(i),n=t}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(o)}`)}function Ne(o){const e=re(o,o),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:e.ownerDocument}function At(o){return!!ke.get(o)}function co(o){const e=re(o,o),n=Ne(o);ke.set(o,!0),n.activeElement!==e&&e.focus({preventScroll:!0})}function it(o,e,n={}){const{editable:t=!1}=n,i=re(o,o);let a;try{a=te(e)?e:e.parentElement}catch(r){if(!r.message.includes('Permission denied to access property "nodeType"'))throw r}return a?a.closest("[data-svelte-editor]")===i&&(!t||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===i||!!a.getAttribute("data-slate-zero-width")):!1}function re(o,e,n=!0){const t=pe.get(o),i=g.isEditor(e)?Ue.get(o):t==null?void 0:t.get(ce(e));if(!i&&n)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return i}function Mt(o,e,n=!0){const[t]=g.node(o,e.path),i=re(o,t,n);let a;g.void(o,{at:e})&&(e={path:e.path,offset:0});const r="[data-slate-string], [data-slate-zero-width]",s=i?Array.from(i.querySelectorAll(r)):[];let l=0;for(const c of s){const d=c.childNodes[0];if(d==null||d.textContent==null)continue;const{length:h}=d.textContent,u=c.getAttribute("data-slate-length"),m=u==null?h:parseInt(u,10),_=l+m;if(e.offset<=_){const D=Math.min(h,Math.max(0,e.offset-l));a=[d,D];break}l=_}if(!a&&n)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function qe(o,e,n=!0){const{anchor:t,focus:i}=e,a=B.isBackward(e),r=Mt(o,t,n);if(!r)return;const s=B.isCollapsed(e)?r:Mt(o,i),c=ot(o).document.createRange(),[d,h]=a?s:r,[u,m]=a?r:s,D=!!(te(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),w=!!(te(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return c.setStart(d,D?1:h),c.setEnd(u,w?1:m),c}function fe(o){let e=te(o)?o:o.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const n=e?_e.get(e):null;if(!n)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return n}function fo(o,e){const{clientX:n,clientY:t,target:i}=e;if(n==null||t==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=fe(e.target),r=Ee(a);if(g.isVoid(o,a)){const d=i.getBoundingClientRect(),h=o.isInline(a)?n-d.left<d.left+d.width-n:t-d.top<d.top+d.height-t,u=g.point(o,r,{edge:h?"start":"end"}),m=h?g.before(o,u):g.after(o,u);if(m)return g.range(o,m)}let s;const{document:l}=ot(o);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(n,t);else{const d=l.caretPositionFromPoint(n,t);d&&(s=l.createRange(),s.setStart(d.offsetNode,d.offset),s.setEnd(d.offsetNode,d.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Te(o,s,{exactMatch:!1,suppressThrow:!1})}function Rt(o,e,n){var u;const{exactMatch:t,suppressThrow:i}=n,[a,r]=t?e:$n(e),s=a.parentNode;let l=null,c=0;if(s){const m=s.closest('[data-slate-void="true"]');let _=s.closest("[data-slate-leaf]"),D=null;if(_){l=_.closest('[data-slate-node="text"]');const w=ot(o).document.createRange();w.setStart(l,0),w.setEnd(a,r);const F=w.cloneContents();[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))].forEach(q=>{q.parentNode.removeChild(q)}),c=F.textContent.length,D=l}else m&&(_=m.querySelector("[data-slate-leaf]"),_?(l=_.closest('[data-slate-node="text"]'),D=_,c=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(S=>{c-=S.textContent.length})):c=1);D&&c===D.textContent.length&&(s.hasAttribute("data-slate-zero-width")||tt&&((u=D.textContent)==null?void 0:u.endsWith(`

`)))&&c--}if(!l){if(i)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const d=fe(l);return{path:Ee(d),offset:c}}function Te(o,e,n){const{exactMatch:t,suppressThrow:i}=n,a=St(e)?e.anchorNode:e.startContainer;let r,s,l,c,d;if(a&&(St(e)?(r=e.anchorNode,s=e.anchorOffset,l=e.focusNode,c=e.focusOffset,Nt&&eo()?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed):(r=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset,d=e.collapsed)),r==null||l==null||s==null||c==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const h=Rt(o,[r,s],{exactMatch:t,suppressThrow:i});if(!h)return null;const u=d?h:Rt(o,[l,c],{exactMatch:t,suppressThrow:i});if(!u)return null;let m={anchor:h,focus:u};return B.isExpanded(m)&&B.isForward(m)&&te(l)&&g.void(o,{at:m.focus,mode:"highest"})&&(m=g.unhangRange(o,m,{voids:!0})),m}function uo(o,e){const{anchor:n,focus:t}=e;return g.hasPath(o,n.path)&&g.hasPath(o,t.path)}function Wt(o,e){if(o===e)return!0;if(o.length!==e.length)return!1;for(let i=0;i<o.length;i++){const a=o[i],r=e[i],n=a,{anchor:s,focus:l}=n,c=Qe(n,["anchor","focus"]),t=r,{anchor:d,focus:h}=t,u=Qe(t,["anchor","focus"]);if(!B.equals(a,r)||a[Be]!==r[Be]||!zn(c,u))return!1}return!0}function zt(o,e){return o===e||!!o&&!!e&&B.equals(o,e)}function ho(o){let e;const n=o[7].default,t=ye(n,o,o[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,a){t&&t.m(i,a),e=!0},p(i,[a]){t&&t.p&&(!e||a&64)&&Le(t,n,i,i[6],e?Fe(n,i[6],a,null):Se(i[6]),null)},i(i){e||(b(t,i),e=!0)},o(i){C(t,i),e=!1},d(i){t&&t.d(i)}}}const vt={},Ht={},Vt={},Kt={},Ut={};function qt(){const o=Oe(vt);if(!o)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return o}function ue(){return vn(qt())}function Yt(){const o=Oe(Ht);if(!o)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return o}function go(){const o=Oe(Vt);if(!o)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return o}function Xt(){const o=Oe(Kt);if(!o)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return o}function mo(){const o=Oe(Ut);if(!o)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return o}function Gt(o){return[]}function _o(o,e,n){let{$$slots:t={},$$scope:i}=e,{editor:a}=e,{value:r=a.children}=e,{selection:s=a.selection}=e;const l=he(a);de(vt,l);const c=he(!0);de(Ht,c);const d=he(!1);de(Vt,d);const h=he(Gt);de(Kt,h);const u=he(a.selection);de(Ut,u);function m(){n(1,s=a.selection),n(0,r=a.children)}Lt.set(a,m);let _=a,D,S;return o.$$set=w=>{"editor"in w&&n(2,a=w.editor),"value"in w&&n(0,r=w.value),"selection"in w&&n(1,s=w.selection),"$$scope"in w&&n(6,i=w.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&a!==_&&(n(3,_=a),l.set(a)),o.$$.dirty&17&&D!==r&&(l.update(w=>(w.children=r,w)),n(4,D=r)),o.$$.dirty&38&&(zt(S,s)||(u.set(s),l.set(a),n(5,S=s)))},[r,s,a,_,D,S,i,t]}class Li extends Q{constructor(e){super();Z(this,e,_o,ho,De,{editor:2,value:0,selection:1})}}const Jt="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Qt="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",wo=new RegExp("^[^"+Qt+"]*["+Jt+"]"),po=new RegExp("^[^"+Jt+"]*["+Qt+"]");function Zt(o){const e=String(o||"");return wo.test(e)?"rtl":po.test(e)?"ltr":"neutral"}function jt(o){let e=`
`,n;return{c(){n=Re(e)},l(t){n=We(t,e)},m(t,i){M(t,n,i)},d(t){t&&L(n)}}}function ko(o){let e,n,t=o[1]&&jt();return{c(){e=x("span"),n=Re(o[0]),t&&t.c(),this.h()},l(i){e=$(i,"SPAN",{"data-slate-string":!0});var a=ne(e);n=We(a,o[0]),t&&t.l(a),a.forEach(L),this.h()},h(){N(e,"data-slate-string","true")},m(i,a){M(i,e,a),mt(e,n),t&&t.m(e,null)},p(i,[a]){a&1&&_t(n,i[0]),i[1]?t||(t=jt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:ge,o:ge,d(i){i&&L(e),t&&t.d()}}}function Eo(o,e,n){let{text:t}=e,{isTrailing:i=!1}=e;return o.$$set=a=>{"text"in a&&n(0,t=a.text),"isTrailing"in a&&n(1,i=a.isTrailing)},[t,i]}class bo extends Q{constructor(e){super();Z(this,e,Eo,ko,ie,{text:0,isTrailing:1})}}function xt(o){let e;return{c(){e=x("br")},l(n){e=$(n,"BR",{})},m(n,t){M(n,e,t)},d(n){n&&L(e)}}}function Co(o){let e,n="\uFEFF",t,i,a=o[1]&&xt();return{c(){e=x("span"),t=Re(n),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=ne(e);t=We(s,n),a&&a.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-zero-width",i=o[1]?"n":"z"),N(e,"data-slate-length",o[0])},m(r,s){M(r,e,s),mt(e,t),a&&a.m(e,null)},p(r,[s]){r[1]?a||(a=xt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&i!==(i=r[1]?"n":"z")&&N(e,"data-slate-zero-width",i),s&1&&N(e,"data-slate-length",r[0])},i:ge,o:ge,d(r){r&&L(e),a&&a.d()}}}function Do(o,e,n){let{length:t=0}=e,{isLineBreak:i=!1}=e;return o.$$set=a=>{"length"in a&&n(0,t=a.length),"isLineBreak"in a&&n(1,i=a.isLineBreak)},[t,i]}class rt extends Q{constructor(e){super();Z(this,e,Do,Co,ie,{length:0,isLineBreak:1})}}function yo(o){let e,n;return e=new bo({props:{isTrailing:o[5],text:o[0].text}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&32&&(a.isTrailing=t[5]),i&1&&(a.text=t[0].text),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Lo(o){let e,n;return e=new rt({}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:ge,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function So(o){let e,n;return e=new rt({props:{isLineBreak:!0}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p:ge,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Fo(o){let e,n;return e=new rt({props:{length:ee.string(o[1]).length}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&2&&(a.length=ee.string(t[1]).length),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Oo(o){let e,n,t,i;const a=[Fo,So,Lo,yo],r=[];function s(l,c){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),M(l,t,c),i=!0},p(l,[c]){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&L(t)}}}function Po(o,e,n){let t,i,a,r,s,l,{isLast:c}=e,{leaf:d}=e,{parent:h}=e,{text:u}=e;const m=ue();return o.$$set=_=>{"isLast"in _&&n(6,c=_.isLast),"leaf"in _&&n(0,d=_.leaf),"parent"in _&&n(1,h=_.parent),"text"in _&&n(7,u=_.text)},o.$$.update=()=>{o.$$.dirty&65&&n(5,t=c&&d.text.slice(-1)===`
`),o.$$.dirty&128&&n(9,i=Ee(u)),o.$$.dirty&512&&n(8,a=me.parent(i)),o.$$.dirty&2&&n(4,r=m.isVoid(h)),o.$$.dirty&1&&n(2,s=d.text===""),o.$$.dirty&390&&n(3,l=s&&h.children[h.children.length-1]===u&&!m.isInline(h)&&g.string(m,a)==="")},[d,h,s,l,r,t,c,u,a,i]}class Bo extends Q{constructor(e){super();Z(this,e,Po,Oo,ie,{isLast:6,leaf:0,parent:1,text:7})}}function $t(o){let e,n,t,i;function a(l){o[7](l)}var r=o[4];function s(l){let c={style:"position: absolute; pointer-events: none; width: 100%; max-width: 100%; display: block; opacity: 0.333; user-select: none; text-decoration: none;",contenteditable:"false",$$slots:{default:[No]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.clientHeight=l[6]),{props:c}}return r&&(e=new r(s(o)),le.push(()=>ze(e,"clientHeight",a))),{c(){e&&v(e.$$.fragment),t=A()},l(l){e&&Y(e.$$.fragment,l),t=A()},m(l,c){e&&H(e,l,c),M(l,t,c),i=!0},p(l,c){const d={};if(c&514&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.clientHeight=l[6],wt(()=>n=!1)),r!==(r=l[4])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(e=new r(s(l)),le.push(()=>ze(e,"clientHeight",a)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else r&&e.$set(d)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&L(t),e&&V(e,l)}}}function No(o){let e=o[1].placeholder+"",n;return{c(){n=Re(e)},l(t){n=We(t,e)},m(t,i){M(t,n,i)},p(t,i){i&2&&e!==(e=t[1].placeholder+"")&&_t(n,e)},d(t){t&&L(n)}}}function To(o){let e,n,t,i=Be in o[1]&&$t(o);return n=new Bo({props:{isLast:o[0],leaf:o[1],parent:o[2],text:o[3]}}),{c(){i&&i.c(),e=A(),v(n.$$.fragment)},l(a){i&&i.l(a),e=A(),Y(n.$$.fragment,a)},m(a,r){i&&i.m(a,r),M(a,e,r),H(n,a,r),t=!0},p(a,r){Be in a[1]?i?(i.p(a,r),r&2&&b(i,1)):(i=$t(a),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(X(),C(i,1,1,()=>{i=null}),G());const s={};r&1&&(s.isLast=a[0]),r&2&&(s.leaf=a[1]),r&4&&(s.parent=a[2]),r&8&&(s.text=a[3]),n.$set(s)},i(a){t||(b(i),b(n.$$.fragment,a),t=!0)},o(a){C(i),C(n.$$.fragment,a),t=!1},d(a){i&&i.d(a),a&&L(e),V(n,a)}}}function Io(o){let e,n,t;var i=o[5];function a(r){return{props:{leaf:r[1],"data-slate-leaf":"true",$$slots:{default:[To]},$$scope:{ctx:r}}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),M(r,n,s),t=!0},p(r,[s]){const l={};if(s&2&&(l.leaf=r[1]),s&607&&(l.$$scope={dirty:s,ctx:r}),i!==(i=r[5])){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&L(n),e&&V(e,r)}}}function Ao(o,e,n){let{isLast:t}=e,{leaf:i}=e,{parent:a}=e,{text:r}=e,{Placeholder:s}=e,{Leaf:l}=e,c,d;Hn(()=>{if(Tt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight="")}});function h(u){c=u,n(6,c)}return o.$$set=u=>{"isLast"in u&&n(0,t=u.isLast),"leaf"in u&&n(1,i=u.leaf),"parent"in u&&n(2,a=u.parent),"text"in u&&n(3,r=u.text),"Placeholder"in u&&n(4,s=u.Placeholder),"Leaf"in u&&n(5,l=u.Leaf)},o.$$.update=()=>{if(o.$$.dirty&64&&c!==d&&Tt){const u=document.querySelector('[data-svelte-editor="true"]');u&&(u.style.minHeight=`${c}px`)}},[t,i,a,r,s,l,c,h]}class en extends Q{constructor(e){super();Z(this,e,Ao,Io,ie,{isLast:0,leaf:1,parent:2,text:3,Placeholder:4,Leaf:5})}}function tn(o,e,n){const t=o.slice();return t[11]=e[n],t[13]=n,t}function nn(o,e){let n,t,i,a;var r=en;function s(l){return{props:{Placeholder:l[3],Leaf:l[4],isLast:l[0]&&l[13]===l[7].length-1,parent:l[1],leaf:l[11],text:l[2]}}}return r&&(t=new r(s(e))),{key:o,first:null,c(){n=A(),t&&v(t.$$.fragment),i=A(),this.h()},l(l){n=A(),t&&Y(t.$$.fragment,l),i=A(),this.h()},h(){this.first=n},m(l,c){M(l,n,c),t&&H(t,l,c),M(l,i,c),a=!0},p(l,c){e=l;const d={};if(c&8&&(d.Placeholder=e[3]),c&16&&(d.Leaf=e[4]),c&129&&(d.isLast=e[0]&&e[13]===e[7].length-1),c&2&&(d.parent=e[1]),c&128&&(d.leaf=e[11]),c&4&&(d.text=e[2]),r!==(r=en)){if(t){X();const h=t;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(t=new r(s(e)),v(t.$$.fragment),b(t.$$.fragment,1),H(t,i.parentNode,i)):t=null}else r&&t.$set(d)},i(l){a||(t&&b(t.$$.fragment,l),a=!0)},o(l){t&&C(t.$$.fragment,l),a=!1},d(l){l&&L(n),l&&L(i),t&&V(t,l)}}}function Mo(o){let e,n=[],t=new Map,i,a=o[7];const r=s=>`${s[6]}-${s[13]}`;for(let s=0;s<a.length;s+=1){let l=tn(o,a,s),c=r(l);t.set(c,n[s]=nn(c,l))}return{c(){e=x("span");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=$(s,"SPAN",{"data-slate-node":!0});var l=ne(e);for(let c=0;c<n.length;c+=1)n[c].l(l);l.forEach(L),this.h()},h(){N(e,"data-slate-node","text")},m(s,l){M(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);o[9](e),i=!0},p(s,[l]){l&223&&(a=s[7],X(),n=pt(n,l,r,1,s,a,t,e,kt,nn,null,tn),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)C(n[l]);i=!1},d(s){s&&L(e);for(let l=0;l<n.length;l+=1)n[l].d();o[9](null)}}}function Ro(o,e,n){let t,i,{decorations:a}=e,{isLast:r}=e,{parent:s}=e,{text:l}=e,{Placeholder:c}=e,{Leaf:d}=e;const h=ue();let u;Ze(()=>{var _;(_=pe.get(h))==null||_.set(i,u),we.set(l,u),_e.set(u,l)});function m(_){le[_?"unshift":"push"](()=>{u=_,n(5,u)})}return o.$$set=_=>{"decorations"in _&&n(8,a=_.decorations),"isLast"in _&&n(0,r=_.isLast),"parent"in _&&n(1,s=_.parent),"text"in _&&n(2,l=_.text),"Placeholder"in _&&n(3,c=_.Placeholder),"Leaf"in _&&n(4,d=_.Leaf)},o.$$.update=()=>{var _;o.$$.dirty&260&&n(7,t=Vn.decorations(l,a)),o.$$.dirty&4&&n(6,i=ce(l)),o.$$.dirty&100&&u&&((_=pe.get(h))==null||_.set(i,u),we.set(l,u),_e.set(u,l))},[r,s,l,c,d,u,i,t,a,m]}class be extends Q{constructor(e){super();Z(this,e,Ro,Mo,ie,{decorations:8,isLast:0,parent:1,text:2,Placeholder:3,Leaf:4})}}function Wo(o){let e,n;return e=new sn({props:{node:o[0],decorations:o[1],selection:o[2],Element:o[3],Placeholder:o[5],Leaf:o[4]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&1&&(a.node=t[0]),i&2&&(a.decorations=t[1]),i&4&&(a.selection=t[2]),i&8&&(a.Element=t[3]),i&32&&(a.Placeholder=t[5]),i&16&&(a.Leaf=t[4]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function zo(o){let e,n,t,i;const a=[Ho,vo],r=[];function s(l,c){return l[7]?0:1}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),M(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&L(t)}}}function vo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[5],Leaf:r[4],decorations:r[1],isLast:!1,parent:r[0],text:r[10]}}}return i&&(n=new i(a(o))),{c(){e=x("div"),n&&v(n.$$.fragment),this.h()},l(r){e=$(r,"DIV",{"data-slate-spacer":!0,class:!0});var s=ne(e);n&&Y(n.$$.fragment,s),s.forEach(L),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(r,s){M(r,e,s),n&&H(n,e,null),t=!0},p(r,s){const l={};if(s&32&&(l.Placeholder=r[5]),s&16&&(l.Leaf=r[4]),s&2&&(l.decorations=r[1]),s&1&&(l.parent=r[0]),s&1024&&(l.text=r[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(r)),v(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(r){t||(n&&b(n.$$.fragment,r),t=!0)},o(r){n&&C(n.$$.fragment,r),t=!1},d(r){r&&L(e),n&&V(n)}}}function Ho(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[5],Leaf:r[4],decorations:r[1],isLast:!1,parent:r[0],text:r[10]}}}return i&&(n=new i(a(o))),{c(){e=x("span"),n&&v(n.$$.fragment),this.h()},l(r){e=$(r,"SPAN",{"data-slate-spacer":!0,class:!0});var s=ne(e);n&&Y(n.$$.fragment,s),s.forEach(L),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(r,s){M(r,e,s),n&&H(n,e,null),t=!0},p(r,s){const l={};if(s&32&&(l.Placeholder=r[5]),s&16&&(l.Leaf=r[4]),s&2&&(l.decorations=r[1]),s&1&&(l.parent=r[0]),s&1024&&(l.text=r[10]),i!==(i=be)){if(n){X();const c=n;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(n=new i(a(r)),v(n.$$.fragment),b(n.$$.fragment,1),H(n,e,null)):n=null}else i&&n.$set(l)},i(r){t||(n&&b(n.$$.fragment,r),t=!0)},o(r){n&&C(n.$$.fragment,r),t=!1},d(r){r&&L(e),n&&V(n)}}}function Vo(o){let e,n,t,i;const a=[zo,Wo],r=[];function s(l,c){return l[8]?0:1}return e=s(o),n=r[e]=a[e](o),{c(){n.c(),t=A()},l(l){n.l(l),t=A()},m(l,c){r[e].m(l,c),M(l,t,c),i=!0},p(l,c){let d=e;e=s(l),e===d?r[e].p(l,c):(X(),C(r[d],1,1,()=>{r[d]=null}),G(),n=r[e],n?n.p(l,c):(n=r[e]=a[e](l),n.c()),b(n,1),n.m(t.parentNode,t))},i(l){i||(b(n),i=!0)},o(l){C(n),i=!1},d(l){r[e].d(l),l&&L(t)}}}function Ko(o){let e,n,t,i;function a(l){o[18](l)}var r=o[3];function s(l){let c={"data-slate-void":l[8],"data-slate-inline":l[7],contenteditable:l[11],element:l[0],dir:l[9],$$slots:{default:[Vo]},$$scope:{ctx:l}};return l[6]!==void 0&&(c.ref=l[6]),{props:c}}return r&&(e=new r(s(o)),le.push(()=>ze(e,"ref",a))),{c(){e&&v(e.$$.fragment),t=A()},l(l){e&&Y(e.$$.fragment,l),t=A()},m(l,c){e&&H(e,l,c),M(l,t,c),i=!0},p(l,[c]){const d={};if(c&256&&(d["data-slate-void"]=l[8]),c&128&&(d["data-slate-inline"]=l[7]),c&2048&&(d.contenteditable=l[11]),c&1&&(d.element=l[0]),c&512&&(d.dir=l[9]),c&1050047&&(d.$$scope={dirty:c,ctx:l}),!n&&c&64&&(n=!0,d.ref=l[6],wt(()=>n=!1)),r!==(r=l[3])){if(e){X();const h=e;C(h.$$.fragment,1,0,()=>{V(h,1)}),G()}r?(e=new r(s(l)),le.push(()=>ze(e,"ref",a)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,t.parentNode,t)):e=null}else r&&e.$set(d)},i(l){i||(e&&b(e.$$.fragment,l),i=!0)},o(l){e&&C(e.$$.fragment,l),i=!1},d(l){l&&L(t),e&&V(e,l)}}}function Uo(o,e,n){let t,i,a,r,s,l,{element:c}=e,{decorations:d}=e,{selection:h=null}=e,{Element:u}=e,{Leaf:m}=e,{Placeholder:_}=e;const D=ue(),S=Yt();ve(o,S,T=>n(17,l=T));let w,F,R,q,k;Ze(()=>{var T;(T=pe.get(D))==null||T.set(w,k),we.set(c,k),_e.set(k,c)});function oe(T){k=T,n(6,k)}return o.$$set=T=>{"element"in T&&n(0,c=T.element),"decorations"in T&&n(1,d=T.decorations),"selection"in T&&n(2,h=T.selection),"Element"in T&&n(3,u=T.Element),"Leaf"in T&&n(4,m=T.Leaf),"Placeholder"in T&&n(5,_=T.Placeholder)},o.$$.update=()=>{var T;if(o.$$.dirty&131072&&n(15,t=l),o.$$.dirty&1&&n(7,i=D.isInline(c)),o.$$.dirty&1&&n(16,a=ce(c)),o.$$.dirty&81920&&F!==a&&(n(13,w=a),n(14,F=a)),o.$$.dirty&129&&!i&&g.hasInlines(D,c)){const I=Zt(ee.string(c));I==="rtl"&&n(9,R=I)}if(o.$$.dirty&1&&n(8,r=g.isVoid(D,c)),o.$$.dirty&32768&&n(11,s=!t),o.$$.dirty&33153&&r){!t&&i&&n(11,s=!1);const[[I]]=ee.texts(c);n(10,q=I),Ve.set(I,0),Ke.set(I,c)}o.$$.dirty&8257&&k&&((T=pe.get(D))==null||T.set(w,k),we.set(c,k),_e.set(k,c))},[c,d,h,u,m,_,k,i,r,R,q,s,S,w,F,t,a,l,oe]}class on extends Q{constructor(e){super();Z(this,e,Uo,Ko,ie,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function qo(o){let e,n,t;var i=on;function a(r){return{props:{Element:r[1],Placeholder:r[3],Leaf:r[2],decorations:r[5],element:r[0],selection:r[4]}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),M(r,n,s),t=!0},p(r,[s]){const l={};if(s&2&&(l.Element=r[1]),s&8&&(l.Placeholder=r[3]),s&4&&(l.Leaf=r[2]),s&32&&(l.decorations=r[5]),s&1&&(l.element=r[0]),s&16&&(l.selection=r[4]),i!==(i=on)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&L(n),e&&V(e,r)}}}const Yo={};function Xo(o,e,n){let t,i,a,r,{parent:s}=e,{element:l}=e,{path:c}=e,{index:d}=e,{decorate:h}=e,{decorations:u}=e,{selection:m=null}=e,{Element:_}=e,{Leaf:D}=e,{Placeholder:S}=e;const w=he(!1);de(Yo,w);const F=ue();let R=d,q=s,k=l,oe=u,T=m;return o.$$set=I=>{"parent"in I&&n(6,s=I.parent),"element"in I&&n(0,l=I.element),"path"in I&&n(7,c=I.path),"index"in I&&n(8,d=I.index),"decorate"in I&&n(9,h=I.decorate),"decorations"in I&&n(10,u=I.decorations),"selection"in I&&n(11,m=I.selection),"Element"in I&&n(1,_=I.Element),"Leaf"in I&&n(2,D=I.Leaf),"Placeholder"in I&&n(3,S=I.Placeholder)},o.$$.update=()=>{o.$$.dirty&4352&&R!==d&&n(12,R=d),o.$$.dirty&8256&&q!==s&&n(13,q=s),o.$$.dirty&16385&&k!==l&&n(14,k=l),o.$$.dirty&33792&&(Wt(oe,u)||n(15,oe=u)),o.$$.dirty&67584&&(zt(T,m)||n(16,T=m)),o.$$.dirty&20480&&Ve.set(k,R),o.$$.dirty&24576&&Ke.set(k,q),o.$$.dirty&4224&&n(18,t=c.concat(R)),o.$$.dirty&262144&&n(17,i=g.range(F,t)),o.$$.dirty&442880&&n(5,a=ln(h([k,t]),i,oe)),o.$$.dirty&196608&&n(4,r=T&&B.intersection(i,T)),o.$$.dirty&16&&w.set(!!r)},[l,_,D,S,r,a,s,c,d,h,u,m,R,q,k,oe,T,i,t]}class Go extends Q{constructor(e){super();Z(this,e,Xo,qo,De,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Jo(o){let e,n,t;var i=be;function a(r){return{props:{Placeholder:r[3],Leaf:r[2],decorations:r[4],isLast:r[5],parent:r[0],text:r[1]}}}return i&&(e=new i(a(o))),{c(){e&&v(e.$$.fragment),n=A()},l(r){e&&Y(e.$$.fragment,r),n=A()},m(r,s){e&&H(e,r,s),M(r,n,s),t=!0},p(r,[s]){const l={};if(s&8&&(l.Placeholder=r[3]),s&4&&(l.Leaf=r[2]),s&16&&(l.decorations=r[4]),s&32&&(l.isLast=r[5]),s&1&&(l.parent=r[0]),s&2&&(l.text=r[1]),i!==(i=be)){if(e){X();const c=e;C(c.$$.fragment,1,0,()=>{V(c,1)}),G()}i?(e=new i(a(r)),v(e.$$.fragment),b(e.$$.fragment,1),H(e,n.parentNode,n)):e=null}else i&&e.$set(l)},i(r){t||(e&&b(e.$$.fragment,r),t=!0)},o(r){e&&C(e.$$.fragment,r),t=!1},d(r){r&&L(n),e&&V(e,r)}}}function Qo(o,e,n){let t,i,a,r,{parent:s}=e,{text:l}=e,{path:c}=e,{index:d}=e,{isLeafBlock:h}=e,{decorations:u}=e,{decorate:m}=e,{Leaf:_}=e,{Placeholder:D}=e;const S=ue();let w=d,F=l,R=s,q=u;return o.$$set=k=>{"parent"in k&&n(0,s=k.parent),"text"in k&&n(1,l=k.text),"path"in k&&n(6,c=k.path),"index"in k&&n(7,d=k.index),"isLeafBlock"in k&&n(8,h=k.isLeafBlock),"decorations"in k&&n(9,u=k.decorations),"decorate"in k&&n(10,m=k.decorate),"Leaf"in k&&n(2,_=k.Leaf),"Placeholder"in k&&n(3,D=k.Placeholder)},o.$$.update=()=>{o.$$.dirty&2176&&w!==d&&n(11,w=d),o.$$.dirty&4098&&F!==l&&n(12,F=l),o.$$.dirty&8193&&R!==s&&n(13,R=s),o.$$.dirty&16896&&(Wt(q,u)||n(14,q=u)),o.$$.dirty&6144&&Ve.set(F,w),o.$$.dirty&12288&&Ke.set(F,R),o.$$.dirty&2112&&n(16,t=c.concat(w)),o.$$.dirty&10496&&n(5,i=h&&w===R.children.length-1),o.$$.dirty&65536&&n(15,a=g.range(S,t)),o.$$.dirty&119808&&n(4,r=ln(m([F,t]),a,q))},[s,l,_,D,r,i,c,d,h,u,m,w,F,R,q,a,t]}class Zo extends Q{constructor(e){super();Z(this,e,Qo,Jo,De,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function rn(o,e,n){const t=o.slice();return t[13]=e[n],t[15]=n,t}function jo(o){let e,n;return e=new Zo({props:{Placeholder:o[4],Leaf:o[3],decorations:o[0],parent:o[5],text:o[13],decorate:o[8],index:o[15],path:o[7],isLeafBlock:o[6]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&32&&(a.parent=t[5]),i&32&&(a.text=t[13]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),i&64&&(a.isLeafBlock=t[6]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function xo(o){let e,n;return e=new Go({props:{Element:o[2],Placeholder:o[4],Leaf:o[3],decorations:o[0],selection:o[1],element:o[13],parent:o[5],decorate:o[8],index:o[15],path:o[7]}}),{c(){v(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){H(e,t,i),n=!0},p(t,i){const a={};i&4&&(a.Element=t[2]),i&16&&(a.Placeholder=t[4]),i&8&&(a.Leaf=t[3]),i&1&&(a.decorations=t[0]),i&2&&(a.selection=t[1]),i&32&&(a.element=t[13]),i&32&&(a.parent=t[5]),i&256&&(a.decorate=t[8]),i&32&&(a.index=t[15]),i&128&&(a.path=t[7]),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function an(o,e){let n,t,i,a,r,s;const l=[xo,jo],c=[];function d(h,u){return u&32&&(t=null),t==null&&(t=!!He.isElement(h[13])),t?0:1}return i=d(e,-1),a=c[i]=l[i](e),{key:o,first:null,c(){n=A(),a.c(),r=A(),this.h()},l(h){n=A(),a.l(h),r=A(),this.h()},h(){this.first=n},m(h,u){M(h,n,u),c[i].m(h,u),M(h,r,u),s=!0},p(h,u){e=h;let m=i;i=d(e,u),i===m?c[i].p(e,u):(X(),C(c[m],1,1,()=>{c[m]=null}),G(),a=c[i],a?a.p(e,u):(a=c[i]=l[i](e),a.c()),b(a,1),a.m(r.parentNode,r))},i(h){s||(b(a),s=!0)},o(h){C(a),s=!1},d(h){h&&L(n),c[i].d(h),h&&L(r)}}}function $o(o){let e=[],n=new Map,t,i,a=o[5].children;const r=s=>ce(s[13]);for(let s=0;s<a.length;s+=1){let l=rn(o,a,s),c=r(l);n.set(c,e[s]=an(c,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=A()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);t=A()},m(s,l){for(let c=0;c<e.length;c+=1)e[c].m(s,l);M(s,t,l),i=!0},p(s,[l]){l&511&&(a=s[5].children,X(),e=pt(e,l,r,1,s,a,n,t.parentNode,kt,an,t,rn),G())},i(s){if(!i){for(let l=0;l<a.length;l+=1)b(e[l]);i=!0}},o(s){for(let l=0;l<e.length;l+=1)C(e[l]);i=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&L(t)}}}function ln(o,e,n=[]){for(const t of n){const i=B.intersection(t,e);i&&o.push(i)}return o}function ei(o,e,n){let t,i,a,r,{node:s}=e,{decorations:l}=e,{selection:c=null}=e,{Element:d}=e,{Leaf:h}=e,{Placeholder:u}=e;const m=ue(),_=Xt();ve(o,_,S=>n(11,r=S));let D=s;return o.$$set=S=>{"node"in S&&n(10,s=S.node),"decorations"in S&&n(0,l=S.decorations),"selection"in S&&n(1,c=S.selection),"Element"in S&&n(2,d=S.Element),"Leaf"in S&&n(3,h=S.Leaf),"Placeholder"in S&&n(4,u=S.Placeholder)},o.$$.update=()=>{o.$$.dirty&2048&&n(8,t=r),o.$$.dirty&1056&&(D!==s||s===m)&&n(5,D=s),o.$$.dirty&32&&n(7,i=Ee(D)),o.$$.dirty&32&&n(6,a=He.isElement(D)&&!m.isInline(D)&&g.hasInlines(m,D))},[l,c,d,h,u,D,a,i,t,_,s,r]}class sn extends Q{constructor(e){super();Z(this,e,ei,$o,De,{node:10,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function ti(o){let e,n,t;const i=o[7].default,a=ye(i,o,o[6],null);return{c(){e=x("div"),a&&a.c(),this.h()},l(r){e=$(r,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=ne(e);a&&a.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-void",n=o[5]["data-slate-void"]),N(e,"dir",o[2]),N(e,"contenteditable",o[3]),N(e,"class","svelte-19k8gul")},m(r,s){M(r,e,s),a&&a.m(e,null),o[9](e),t=!0},p(r,s){a&&a.p&&(!t||s&64)&&Le(a,i,r,r[6],t?Fe(i,r[6],s,null):Se(r[6]),null),(!t||s&32&&n!==(n=r[5]["data-slate-void"]))&&N(e,"data-slate-void",n),(!t||s&4)&&N(e,"dir",r[2]),(!t||s&8)&&N(e,"contenteditable",r[3])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),o[9](null)}}}function ni(o){let e,n,t;const i=o[7].default,a=ye(i,o,o[6],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=ne(e);a&&a.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-inline","true"),N(e,"data-slate-void",n=o[5]["data-slate-void"]),N(e,"dir",o[2]),N(e,"contenteditable",o[3]),N(e,"class","svelte-19k8gul")},m(r,s){M(r,e,s),a&&a.m(e,null),o[8](e),t=!0},p(r,s){a&&a.p&&(!t||s&64)&&Le(a,i,r,r[6],t?Fe(i,r[6],s,null):Se(r[6]),null),(!t||s&32&&n!==(n=r[5]["data-slate-void"]))&&N(e,"data-slate-void",n),(!t||s&4)&&N(e,"dir",r[2]),(!t||s&8)&&N(e,"contenteditable",r[3])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),o[8](null)}}}function oi(o){let e,n,t,i,a;const r=[ni,ti],s=[];function l(c,d){return d&2&&(e=null),e==null&&(e=!!c[4].isInline(c[1])),e?0:1}return n=l(o,-1),t=s[n]=r[n](o),{c(){t.c(),i=A()},l(c){t.l(c),i=A()},m(c,d){s[n].m(c,d),M(c,i,d),a=!0},p(c,[d]){let h=n;n=l(c,d),n===h?s[n].p(c,d):(X(),C(s[h],1,1,()=>{s[h]=null}),G(),t=s[n],t?t.p(c,d):(t=s[n]=r[n](c),t.c()),b(t,1),t.m(i.parentNode,i))},i(c){a||(b(t),a=!0)},o(c){C(t),a=!1},d(c){s[n].d(c),c&&L(i)}}}function ii(o,e,n){let{$$slots:t={},$$scope:i}=e,{element:a}=e,{ref:r}=e,{dir:s}=e,{contenteditable:l}=e;const c=ue();function d(u){le[u?"unshift":"push"](()=>{r=u,n(0,r)})}function h(u){le[u?"unshift":"push"](()=>{r=u,n(0,r)})}return o.$$set=u=>{n(5,e=Pe(Pe({},e),je(u))),"element"in u&&n(1,a=u.element),"ref"in u&&n(0,r=u.ref),"dir"in u&&n(2,s=u.dir),"contenteditable"in u&&n(3,l=u.contenteditable),"$$scope"in u&&n(6,i=u.$$scope)},e=je(e),[r,a,s,l,c,e,i,t,d,h]}class ri extends Q{constructor(e){super();Z(this,e,ii,oi,ie,{element:1,ref:0,dir:2,contenteditable:3})}}function ai(o){let e,n;const t=o[1].default,i=ye(t,o,o[0],null);return{c(){e=x("span"),i&&i.c(),this.h()},l(a){e=$(a,"SPAN",{"data-slate-leaf":!0});var r=ne(e);i&&i.l(r),r.forEach(L),this.h()},h(){N(e,"data-slate-leaf","true")},m(a,r){M(a,e,r),i&&i.m(e,null),n=!0},p(a,[r]){i&&i.p&&(!n||r&1)&&Le(i,t,a,a[0],n?Fe(t,a[0],r,null):Se(a[0]),null)},i(a){n||(b(i,a),n=!0)},o(a){C(i,a),n=!1},d(a){a&&L(e),i&&i.d(a)}}}function li(o,e,n){let{$$slots:t={},$$scope:i}=e;return o.$$set=a=>{"$$scope"in a&&n(0,i=a.$$scope)},[i,t]}class si extends Q{constructor(e){super();Z(this,e,li,ai,ie,{})}}function ci(o){let e,n,t;const i=o[4].default,a=ye(i,o,o[3],null);return{c(){e=x("span"),a&&a.c(),this.h()},l(r){e=$(r,"SPAN",{"data-slate-placeholder":!0,style:!0,contenteditable:!0});var s=ne(e);a&&a.l(s),s.forEach(L),this.h()},h(){N(e,"data-slate-placeholder",""),N(e,"style",o[1]),N(e,"contenteditable",o[2]),Kn(()=>o[5].call(e))},m(r,s){M(r,e,s),a&&a.m(e,null),n=Un(e,o[5].bind(e)),t=!0},p(r,[s]){a&&a.p&&(!t||s&8)&&Le(a,i,r,r[3],t?Fe(i,r[3],s,null):Se(r[3]),null),(!t||s&2)&&N(e,"style",r[1]),(!t||s&4)&&N(e,"contenteditable",r[2])},i(r){t||(b(a,r),t=!0)},o(r){C(a,r),t=!1},d(r){r&&L(e),a&&a.d(r),n()}}}function fi(o,e,n){let{$$slots:t={},$$scope:i}=e,{clientHeight:a}=e,{style:r}=e,{contenteditable:s}=e;function l(){a=this.clientHeight,n(0,a)}return o.$$set=c=>{"clientHeight"in c&&n(0,a=c.clientHeight),"style"in c&&n(1,r=c.style),"contenteditable"in c&&n(2,s=c.contenteditable),"$$scope"in c&&n(3,i=c.$$scope)},[a,r,s,i,t,l]}class ui extends Q{constructor(e){super();Z(this,e,fi,ci,ie,{clientHeight:0,style:1,contenteditable:2})}}const di=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),at={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},cn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:di?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},lt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let o=1;o<20;o++)lt["f"+o]=111+o;function fn(o,e={}){Array.isArray(o)||(o=[o]);const n=o.map(t=>hi(t,e));return function(i){return n.some(a=>gi(a,i))}}function Si(o,e,n={}){return fn(o,n)(e)}function st(o){return fn(o,{byKey:!0})}function hi(o,e={}){const n=e&&e.byKey,t={};o=o.replace("++","+add");const i=o.split("+"),{length:a}=i;for(const r in at)t[at[r]]=!1;for(let r of i){const s=r.endsWith("?")&&r.length>1;s&&(r=r.slice(0,-1));const l=un(r),c=at[l];if(r.length>1&&!c&&!cn[r]&&!lt[l])throw new TypeError(`Unknown modifier: "${r}"`);(a===1||!c)&&(n?t.key=l:t.which=mi(r)),c&&(t[c]=s?null:!0)}return t}function gi(o,e){for(const n in o){const t=o[n];let i;if(t!=null&&(n==="key"&&e.key!=null?i=e.key.toLowerCase():n==="which"?i=t===91&&e.which===93?91:e.which:i=e[n],!(i==null&&t===!1)&&i!==t))return!1}return!0}function mi(o){return o=un(o),lt[o]||o.toUpperCase().charCodeAt(0)}function un(o){return o=o.toLowerCase(),o=cn[o]||o,o}const _i={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},wi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},pi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function K(o){const e=_i[o],n=wi[o],t=pi[o],i=e&&st(e),a=n&&st(n),r=t&&st(t);return s=>!!(i&&i(s)||Bt&&a&&a(s)||!Bt&&r&&r(s))}var U={isBold:K("bold"),isCompose:K("compose"),isMoveBackward:K("moveBackward"),isMoveForward:K("moveForward"),isDeleteBackward:K("deleteBackward"),isDeleteForward:K("deleteForward"),isDeleteLineBackward:K("deleteLineBackward"),isDeleteLineForward:K("deleteLineForward"),isDeleteWordBackward:K("deleteWordBackward"),isDeleteWordForward:K("deleteWordForward"),isExtendBackward:K("extendBackward"),isExtendForward:K("extendForward"),isExtendLineBackward:K("extendLineBackward"),isExtendLineForward:K("extendLineForward"),isItalic:K("italic"),isMoveLineBackward:K("moveLineBackward"),isMoveLineForward:K("moveLineForward"),isMoveWordBackward:K("moveWordBackward"),isMoveWordForward:K("moveWordForward"),isRedo:K("redo"),isSplitBlock:K("splitBlock"),isTransposeCharacter:K("transposeCharacter"),isUndo:K("undo")};function ki(o){let e,n,t,i,a,r,s,l;n=new sn({props:{node:o[8],selection:o[9],decorations:o[10],Element:o[1],Leaf:o[2],Placeholder:o[3]}});let c=[o[29],{role:t=o[4]?void 0:"textbox"},{spellcheck:o[5]},{autocorrect:o[6]},{autocapitalize:o[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:i=!o[4]},{"z-index":a=-1}],d={};for(let h=0;h<c.length;h+=1)d=Pe(d,c[h]);return{c(){e=x("div"),v(n.$$.fragment),this.h()},l(h){e=$(h,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var u=ne(e);Y(n.$$.fragment,u),u.forEach(L),this.h()},h(){Et(e,d),bt(e,"svelte-m59z04",!0)},m(h,u){M(h,e,u),H(n,e,null),o[40](e),r=!0,s||(l=[J(e,"beforeinput",o[13]),J(e,"keydown",o[15]),J(e,"input",o[14]),J(e,"focus",o[16]),J(e,"blur",o[17]),J(e,"click",o[18]),J(e,"compositionend",o[19]),J(e,"compositionupdate",o[20]),J(e,"compositionstart",o[21]),J(e,"paste",o[22]),J(e,"copy",o[23]),J(e,"cut",o[24]),J(e,"dragover",o[25]),J(e,"dragstart",o[26]),J(e,"drop",o[27]),J(e,"dragend",o[28])],s=!0)},p(h,u){const m={};u[0]&256&&(m.node=h[8]),u[0]&512&&(m.selection=h[9]),u[0]&1024&&(m.decorations=h[10]),u[0]&2&&(m.Element=h[1]),u[0]&4&&(m.Leaf=h[2]),u[0]&8&&(m.Placeholder=h[3]),n.$set(m),Et(e,d=qn(c,[u[0]&536870912&&h[29],(!r||u[0]&16&&t!==(t=h[4]?void 0:"textbox"))&&{role:t},(!r||u[0]&32)&&{spellcheck:h[5]},(!r||u[0]&64)&&{autocorrect:h[6]},(!r||u[0]&128)&&{autocapitalize:h[7]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!r||u[0]&16&&i!==(i=!h[4]))&&{contenteditable:i},{"z-index":a}])),bt(e,"svelte-m59z04",!0)},i(h){r||(b(n.$$.fragment,h),r=!0)},o(h){C(n.$$.fragment,h),r=!1},d(h){h&&L(e),V(n),o[40](null),s=!1,Yn(l)}}}function Ce(o,e){return se(e)&&it(o,e)}function j(o,e){return se(e)&&it(o,e,{editable:!0})}function dn(o,e){if(yt.get(o))return!1;{const n=Ce(o,e)&&fe(e);return g.isVoid(o,n)}}function Ei(o,e){const n=e.startContainer.parentElement,t=n.getBoundingClientRect;n.getBoundingClientRect=e.getBoundingClientRect.bind(e),Jn(n,{scrollMode:"if-needed"}),n.getBoundingClientRect=t}function bi(o,e,n){let t,i,a,r,s,l;const c=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let d=Ct(e,c),h,u,{Element:m=ri}=e,{Leaf:_=si}=e,{Placeholder:D=ui}=e,{placeholder:S}=e,{readOnly:w=!1}=e,{autoFocus:F=!1}=e,{decorate:R=Gt}=e,{scrollSelectionIntoView:q=Ei}=e,{ref:k=void 0}=e,{spellcheck:oe=!0}=e,{autocorrect:T="true"}=e,{autocapitalize:I="true"}=e,{onKeyDown:Ye=()=>{}}=e;const ct=qt();ve(o,ct,f=>n(39,u=f));const mn=Yt(),Ie=go(),_n=Xt(),Xe=mo();ve(o,Xe,f=>n(38,h=f));const y={isComposing:!1,hasInsertPrefixInCompositon:!0,isUpdatingSelection:null,isDraggingInternally:!1,latestElement:null};let Ge=[],Je;function wn(){if(!y.isComposing&&!y.isUpdatingSelection&&!y.isDraggingInternally){const f=Ne(t),p=re(t,t),E=f.getSelection();if(f.activeElement===p?(n(35,y.latestElement=f.activeElement,y),ke.set(t,!0),Ie.set(!0)):(ke.delete(t),Ie.set(!1)),!E){W.deselect(t);return}const{anchorNode:O,focusNode:P}=E,z=j(t,O)||dn(t,O),ae=j(t,P)||dn(t,P);if(z&&ae){const Ae=Te(t,E,{exactMatch:!1,suppressThrow:!0});W.select(t,Ae)}}}function ft(){s()}Ze(()=>{const f=et(k);return f&&(xe.set(t,f),f.document.addEventListener("selectionchange",ft)),Ue.set(t,k),we.set(t,k),_e.set(k,t),()=>{Ue.delete(t),we.delete(t),f&&(xe.delete(t),f.document.removeEventListener("selectionchange",ft))}});function pn(){const f=Ne(t),p=f==null?void 0:f.getSelection();if(y.isComposing||!p||!At(t))return;const E=p.type!=="None";if(!E)return;const O=Ue.get(t);let P=!1;if(O.contains(p.anchorNode)&&O.contains(p.focusNode)&&(P=!0),E&&P&&i){const ae=Te(t,p,{exactMatch:!0,suppressThrow:!0});if(ae&&B.equals(ae,i))return}if(i&&!uo(t,i)){n(8,t.selection=Te(t,p,{exactMatch:!1,suppressThrow:!1}),t),n(9,i=t.selection),Xe.set(i);return}y.isUpdatingSelection&&clearTimeout(y.isUpdatingSelection),n(35,y.isUpdatingSelection=setTimeout(()=>{z&&tt&&re(t,t).focus(),n(35,y.isUpdatingSelection=null,y)}),y);const z=i&&P&&qe(t,i);z?(B.isBackward(i)?p.setBaseAndExtent(z.endContainer,z.endOffset,z.startContainer,z.startOffset):p.setBaseAndExtent(z.startContainer,z.startOffset,z.endContainer,z.endOffset),q(t,z)):p.removeAllRanges()}Xn(()=>l());function kn(f){if(!w&&j(t,f.target)){const p=f.inputType,E=f.dataTransfer||f.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let O=!1;if(p==="insertText"&&i&&B.isCollapsed(i)&&f.data&&f.data.length===1&&/[a-z ]/i.test(f.data)&&i.anchor.offset!==0){O=!0,t.marks&&(O=!1);const P=g.above(t,{at:i.anchor,match:z=>g.isInline(t,z),mode:"highest"});if(P){const[,z]=P;g.isEnd(t,i.anchor,z)&&(O=!1)}}if(O||f.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[P]=f.getTargetRanges();if(P){const z=Te(t,P,{exactMatch:!1,suppressThrow:!1});(!i||!B.equals(i,z))&&W.select(t,z)}}if(i&&B.isExpanded(i)&&p.startsWith("delete")){const P=p.endsWith("Backward")?"backward":"forward";g.deleteFragment(t,{direction:P});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{g.deleteFragment(t);break}case"deleteContent":case"deleteContentForward":{g.deleteForward(t);break}case"deleteContentBackward":{g.deleteBackward(t);break}case"deleteEntireSoftLine":{g.deleteBackward(t,{unit:"line"}),g.deleteForward(t,{unit:"line"});break}case"deleteHardLineBackward":{g.deleteBackward(t,{unit:"block"});break}case"deleteSoftLineBackward":{g.deleteBackward(t,{unit:"line"});break}case"deleteHardLineForward":{g.deleteForward(t,{unit:"block"});break}case"deleteSoftLineForward":{g.deleteForward(t,{unit:"line"});break}case"deleteWordBackward":{g.deleteBackward(t,{unit:"word"});break}case"deleteWordForward":{g.deleteForward(t,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{g.insertBreak(t);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&y.isComposing&&n(35,y.isComposing=!1,y),(E==null?void 0:E.constructor.name)==="DataTransfer"?t.insertData(E):typeof E=="string"&&(O?Ge.push(()=>g.insertText(t,E)):g.insertText(t,E));break}}}}function En(f){for(const p of Ge)p();Ge.length=0}function bn(f){if(!w&&!y.isComposing&&j(t,f.target)){const p=t.children[i!==null?i.focus.path[0]:0],E=Zt(ee.string(p))==="rtl";if(U.isRedo(f)){f.preventDefault();const O=t;typeof O.redo=="function"&&O.redo()}else if(U.isUndo(f)){f.preventDefault();const O=t;typeof O.undo=="function"&&O.undo()}else if(U.isMoveLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",reverse:!0});else if(U.isMoveLineForward(f))f.preventDefault(),W.move(t,{unit:"line"});else if(U.isExtendLineBackward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus",reverse:!0});else if(U.isExtendLineForward(f))f.preventDefault(),W.move(t,{unit:"line",edge:"focus"});else if(U.isMoveBackward(f))f.preventDefault(),i&&B.isCollapsed(i)?W.move(t,{reverse:!E}):W.collapse(t,{edge:"start"});else if(U.isMoveForward(f))f.preventDefault(),i&&B.isCollapsed(i)?W.move(t,{reverse:E}):W.collapse(t,{edge:"end"});else if(U.isMoveWordBackward(f))f.preventDefault(),i&&B.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:!E});else if(U.isMoveWordForward(f))f.preventDefault(),i&&B.isExpanded(i)&&W.collapse(t,{edge:"focus"}),W.move(t,{unit:"word",reverse:E});else if(!It)U.isBold(f)||U.isItalic(f)||U.isTransposeCharacter(f)?f.preventDefault():U.isSplitBlock(f)?(f.preventDefault(),g.insertBreak(t)):U.isDeleteBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t)):U.isDeleteForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t)):U.isDeleteLineBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"line"})):U.isDeleteLineForward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"line"})):U.isDeleteWordBackward(f)?(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"backward"}):g.deleteBackward(t,{unit:"word"})):U.isDeleteWordForward(f)&&(f.preventDefault(),i&&B.isExpanded(i)?g.deleteFragment(t,{direction:"forward"}):g.deleteForward(t,{unit:"word"}));else{if((Nt||nt)&&i&&(U.isDeleteBackward(f)||U.isDeleteForward(f))&&B.isCollapsed(i)){const O=ee.parent(t,i.anchor.path);if(He.isElement(O)&&g.isVoid(t,O)&&g.isInline(t,O)){f.preventDefault(),g.deleteBackward(t,{unit:"block"});return}}return Ye(f)}}}function Cn(f){if(!w&&!y.isUpdatingSelection&&j(t,f.target)){const p=re(t,t),E=Ne(t);if(n(35,y.latestElement=E.activeElement,y),tt&&f.target!==p){p.focus();return}ke.set(t,!0),Ie.set(!0)}}function Dn(f){if(w||y.isUpdatingSelection||!j(t,f.target))return;const p=Ne(t);if(y.latestElement===p.activeElement)return;const E=f.relatedTarget,O=re(t,t);if(E!==O&&!(te(E)&&E.hasAttribute("data-slate-spacer"))){if(E!=null&&se(E)&&it(t,E)){const P=fe(E);if(He.isElement(P)&&!t.isVoid(P))return}if(nt){const P=p.getSelection();P==null||P.removeAllRanges()}ke.delete(t),Ie.set(!1)}}function yn(f){if(!w&&Ce(t,f.target)&&se(f.target)){const p=fe(f.target),E=Ee(p);if(g.hasPath(t,E)&&ee.get(t,E)===p){const P=g.start(t,E),z=g.end(t,E),ae=g.void(t,{at:P}),Ae=g.void(t,{at:z});if(ae&&Ae&&me.equals(ae[1],Ae[1])){const Rn=g.range(t,P);W.select(t,Rn)}}}}function Ln(f){if(j(t,f.target)){n(35,y.isComposing=!1,y);const p=f.data;if(!nt&&!lo&&!io&&!so&&p&&g.insertText(t,p),i&&B.isCollapsed(i)){const E=i.anchor.path,O=ee.leaf(t,E);y.hasInsertPrefixInCompositon&&(n(35,y.hasInsertPrefixInCompositon=!1,y),g.withoutNormalizing(t,()=>{const P=O.text.replace(/^\uFEFF/,"");W.delete(t,{distance:O.text.length,reverse:!0}),W.insertText(t,P)}))}}}function Sn(f){j(t,f.target)&&n(35,y.isComposing=!0,y)}function Fn(f){if(j(t,f.target)){const{selection:p,marks:E}=t;if(p){if(B.isExpanded(p)){g.deleteFragment(t);return}const O=g.above(t,{match:P=>g.isInline(t,P),mode:"highest"});if(O){const[,P]=O;if(g.isEnd(t,p.anchor,P)){const z=g.after(t,P);W.setSelection(t,{anchor:z,focus:z})}}E&&(n(35,y.hasInsertPrefixInCompositon=!0,y),W.insertNodes(t,gt({text:"\uFEFF"},E),{select:!0}))}}}function On(f){!w&&j(t,f.target)&&(!It||xn(f))&&(f.preventDefault(),t.insertData(f.clipboardData))}function Pn(f){j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData))}function Bn(f){if(!w&&j(t,f.target)&&(f.preventDefault(),t.setFragmentData(f.clipboardData),i))if(B.isExpanded(i))g.deleteFragment(t);else{const p=ee.parent(t,i.anchor.path);g.isVoid(t,p)&&W.delete(t)}}function Nn(f){if(Ce(t,f.target)){const p=fe(f.target);g.isVoid(t,p)&&f.preventDefault()}}function Tn(f){if(!w&&Ce(t,f.target)){const p=fe(f.target),E=Ee(p);if(g.isVoid(t,p)||g.void(t,{at:E,voids:!0})){const P=g.range(t,E);W.select(t,P)}n(35,y.isDraggingInternally=!0,y),t.setFragmentData(f.dataTransfer)}}function In(f){if(!w&&Ce(t,f.target)){f.preventDefault();const p=i,E=fo(t,f),O=f.dataTransfer;W.select(t,E),y.isDraggingInternally&&(p&&!B.equals(p,E)&&!g.void(t,{at:E,voids:!0})&&W.delete(t,{at:p}),n(35,y.isDraggingInternally=!1,y)),t.insertData(O),At(t)||co(t)}}function An(f){!w&&y.isDraggingInternally&&Ce(t,f.target)&&n(35,y.isDraggingInternally=!1,y)}function Mn(f){le[f?"unshift":"push"](()=>{k=f,n(0,k)})}return o.$$set=f=>{e=Pe(Pe({},e),je(f)),n(29,d=Ct(e,c)),"Element"in f&&n(1,m=f.Element),"Leaf"in f&&n(2,_=f.Leaf),"Placeholder"in f&&n(3,D=f.Placeholder),"placeholder"in f&&n(30,S=f.placeholder),"readOnly"in f&&n(4,w=f.readOnly),"autoFocus"in f&&n(31,F=f.autoFocus),"decorate"in f&&n(32,R=f.decorate),"scrollSelectionIntoView"in f&&n(33,q=f.scrollSelectionIntoView),"ref"in f&&n(0,k=f.ref),"spellcheck"in f&&n(5,oe=f.spellcheck),"autocorrect"in f&&n(6,T=f.autocorrect),"autocapitalize"in f&&n(7,I=f.autocapitalize),"onKeyDown"in f&&n(34,Ye=f.onKeyDown)},o.$$.update=()=>{if(o.$$.dirty[1]&256&&n(8,t=u),o.$$.dirty[1]&128&&n(9,i=h),o.$$.dirty[0]&256|o.$$.dirty[1]&2&&n(10,a=R([t,[]])),o.$$.dirty[0]&272&&yt.set(t,w),o.$$.dirty[0]&16&&mn.set(w),o.$$.dirty[1]&2&&_n.set(R),o.$$.dirty[0]&1073742080|o.$$.dirty[1]&18&&t.children.length===1&&Array.from(ee.texts(t)).length===1&&ee.string(t)===""&&!y.isComposing){const f=g.start(t,[]);n(10,a=[...R([t,[]]),{[Be]:!0,placeholder:S,anchor:f,focus:f}])}o.$$.dirty[0]&1|o.$$.dirty[1]&33&&Je!==F&&k&&(F&&k.focus(),n(36,Je=F)),o.$$.dirty[1]&64&&(s=Dt(100,r,!1))},n(37,r=()=>Gn().then(wn)),l=Dt(0,pn,!1),[k,m,_,D,w,oe,T,I,t,i,a,ct,Xe,kn,En,bn,Cn,Dn,yn,Ln,Sn,Fn,On,Pn,Bn,Nn,Tn,In,An,d,S,F,R,q,Ye,y,Je,r,h,u,Mn]}class Fi extends Q{constructor(e){super();Z(this,e,bi,ki,De,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:4,autoFocus:31,decorate:32,scrollSelectionIntoView:33,ref:0,spellcheck:5,autocorrect:6,autocapitalize:7,onKeyDown:34},null,[-1,-1])}}function hn(o,e){const n=(e.top+e.bottom)/2;return o.top<=n&&o.bottom>=n}function gn(o,e,n){const t=qe(o,e).getBoundingClientRect(),i=qe(o,n).getBoundingClientRect();return hn(t,i)&&hn(i,t)}function Ci(o,e){const n=g.range(o,B.end(e)),t=Array.from(g.positions(o,{at:e}));let i=0,a=t.length,r=Math.floor(a/2);if(gn(o,g.range(o,t[i]),n))return g.range(o,t[i],n);if(t.length<2)return g.range(o,t[t.length-1],n);for(;r!==t.length&&r!==i;)gn(o,g.range(o,t[r]),n)?a=r:i=r,r=Math.floor((i+a)/2);return g.range(o,t[a],n)}function Oi(o){const e=o,{apply:n,onChange:t,deleteBackward:i}=e;return pe.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return i(a);if(o.selection&&B.isCollapsed(o.selection)){const r=g.above(o,{match:s=>g.isBlock(o,s),at:o.selection});if(r){const[,s]=r,l=g.range(o,s,o.selection.anchor),c=Ci(e,l);B.isCollapsed(c)||W.delete(o,{at:c})}}},e.apply=a=>{const r=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of g.levels(e,{at:a.path})){const c=ce(s);r.push([l,c])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of g.levels(e,{at:me.parent(a.path)})){const c=ce(s);r.push([l,c])}break}case"move_node":{for(const[s,l]of g.levels(e,{at:me.common(me.parent(a.path),me.parent(a.newPath))})){const c=ce(s);r.push([l,c])}break}}n(a);for(const[s,l]of r){const[c]=g.node(e,s);$e.set(c,l)}},e.setFragmentData=a=>{const{selection:r}=e;if(!r)return;const[s,l]=B.edges(r),c=g.void(e,{at:s.path}),d=g.void(e,{at:l.path});if(B.isCollapsed(r)&&!c)return;const h=qe(e,r);let u=h.cloneContents(),m=u.childNodes[0];if(u.childNodes.forEach(F=>{F.textContent&&F.textContent.trim()!==""&&(m=F)}),d){const[F]=d,R=h.cloneRange(),q=re(e,F);R.setEndAfter(q),u=R.cloneContents()}if(c&&(m=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(F=>{const R=F.getAttribute("data-slate-zero-width")==="n";F.textContent=R?`
`:""}),Ft(m)){const F=document.createElement("span");F.style.whiteSpace="pre",F.appendChild(m),u.appendChild(F),m=F}const _=e.getFragment(),D=JSON.stringify(_),S=window.btoa(encodeURIComponent(D));m.setAttribute("data-slate-fragment",S),a.setData("application/x-slate-fragment",S);const w=document.createElement("div");return w.appendChild(u),w.setAttribute("hidden","true"),document.body.appendChild(w),a.setData("text/html",w.innerHTML),a.setData("text/plain",Pt(w)),document.body.removeChild(w),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const r=a.getData("application/x-slate-fragment")||oo(a);if(r){const s=decodeURIComponent(window.atob(r)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const r=a.getData("text/plain");if(r){const s=r.split(/\r\n|\r|\n/);let l=!1;for(const c of s)l&&W.splitNodes(e,{always:!0}),e.insertText(c),l=!0;return!0}return!1},e.onChange=()=>{const a=Lt.get(e);a&&a(),t()},e}export{Fi as E,Li as S,qt as g,Si as i,Oi as w};
