var In=Object.defineProperty;var Ne=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var st=(n,e,t)=>e in n?In(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ut=(n,e)=>{for(var t in e||(e={}))ct.call(e,t)&&st(n,t,e[t]);if(Ne)for(var t of Ne(e))ft.call(e,t)&&st(n,t,e[t]);return n};var Je=(n,e)=>{var t={};for(var o in n)ct.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&Ne)for(var o of Ne(n))e.indexOf(o)<0&&ft.call(n,o)&&(t[o]=n[o]);return t};import{a1 as m,a2 as T,a3 as An,S as Q,i as Z,s as ie,F as Se,J as Le,K as Fe,L as Oe,q as y,o as S,r as he,D as ge,a4 as Mn,a5 as be,t as ze,h as Ve,g as A,d as F,e as te,c as ne,a as re,b as N,I as Mt,j as Rt,M as pe,a6 as Rn,O as le,a7 as He,l as I,n as G,p as J,a8 as _e,w as W,x as U,y as z,B as V,a9 as $,aa as Wn,Q as Wt,P as Ie,ab as zt,ac as Vt,v as nt,ad as zn,ae as Ae,af as Me,ag as Vn,ah as Hn,C as xe,ai as dt,aj as ht,ak as X,z as Kn,al as vn,am as gt,u as qn,E as mt,an as Yn,ao as Un,ap as R,aq as Xn}from"./vendor-aba435a1.js";const Ke=new WeakMap,ve=new WeakMap,$e=new WeakMap,Be=new WeakMap,qe=new WeakMap,Re=new WeakMap,et=new WeakMap,Ye=new WeakMap,Ht=new WeakMap,we=new WeakMap,Kt=new WeakMap,De=Symbol("placeholder");let Gn=0;class Jn{constructor(){this.id=`${Gn++}`}toString(){return this.id}}function ot(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView||null}function Qn(n){return fe(n)&&n.nodeType===8}function ee(n){return fe(n)&&n.nodeType===1}function fe(n){const e=ot(n);return!!e&&n instanceof e.Node}function _t(n){const e=n&&n.anchorNode&&ot(n.anchorNode);return!!e&&n instanceof e.Selection}function vt(n){return fe(n)&&n.nodeType===3}function Zn(n){return n.clipboardData&&n.clipboardData.getData("text/plain")!==""&&n.clipboardData.types.length===1}function jn(n){let[e,t]=n;if(ee(e)&&e.childNodes.length){let o=t===e.childNodes.length,r=o?t-1:t;for([e,r]=qt(e,r,o?"backward":"forward"),o=r<t;ee(e)&&e.childNodes.length;){const a=o?e.childNodes.length-1:0;e=$n(e,a,o?"backward":"forward")}t=o&&e.textContent!=null?e.textContent.length:0}return[e,t]}function xn(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function qt(n,e,t){const{childNodes:o}=n;let r=o[e],a=e,i=!1,s=!1;for(;(Qn(r)||ee(r)&&r.childNodes.length===0||ee(r)&&r.getAttribute("contenteditable")==="false")&&!(i&&s);){if(a>=o.length){i=!0,a=e-1,t="backward";continue}if(a<0){s=!0,a=e+1,t="forward";continue}r=o[a],e=a,a+=t==="forward"?1:-1}return[r,e]}function $n(n,e,t){const[o]=qt(n,e,t);return o}function Yt(n){let e="";if(vt(n)&&n.nodeValue)return n.nodeValue;if(ee(n)){for(const o of Array.from(n.childNodes))e+=Yt(o);const t=getComputedStyle(n).getPropertyValue("display");(t==="block"||t==="list"||n.tagName==="BR")&&(e+=`
`)}return e}const eo=/data-slate-fragment="(.+?)"/m;function to(n){const e=n.getData("text/html"),[,t]=e.match(eo)||[];return t}const no=typeof navigator!="undefined"&&typeof window!="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,wt=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent);typeof navigator!="undefined"&&/Android/.test(navigator.userAgent);const tt=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Qe=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),oo=typeof navigator!="undefined"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Ut=typeof navigator!="undefined"&&/Chrome/i.test(navigator.userAgent),io=typeof navigator!="undefined"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),ro=typeof navigator!="undefined"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),ao=typeof navigator!="undefined"&&/.*QQBrowser/.test(navigator.userAgent),pt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",kt=!io&&!oo&&typeof globalThis!="undefined"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function it(n){const e=$e.get(n);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function ce(n){let e=et.get(n);return e||(e=new Jn,et.set(n,e)),e}function ke(n){const e=[];let t=n;for(;;){const o=ve.get(t);if(o==null){if(m.isEditor(t))return e;break}const r=Ke.get(t);if(r==null)break;e.unshift(r),t=o}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(n)}`)}function Ce(n){const e=ae(n,n),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:e.ownerDocument}function Et(n){return!!we.get(n)}function lo(n){const e=ae(n,n),t=Ce(n);we.set(n,!0),t.activeElement!==e&&e.focus({preventScroll:!0})}function rt(n,e,t={}){const{editable:o=!1}=t,r=ae(n,n);let a;try{a=ee(e)?e:e.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return a?a.closest("[data-svelte-editor]")===r&&(!o||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===r||!!a.getAttribute("data-slate-zero-width")):!1}function ae(n,e,t=!0){const o=Ye.get(n),r=m.isEditor(e)?Be.get(n):o==null?void 0:o.get(ce(e));if(!r&&t)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return r}function bt(n,e,t=!0){const[o]=m.node(n,e.path),r=ae(n,o,t);let a;m.void(n,{at:e})&&(e={path:e.path,offset:0});const i="[data-slate-string], [data-slate-zero-width]",s=r?Array.from(r.querySelectorAll(i)):[];let l=0;for(const f of s){const h=f.childNodes[0];if(h==null||h.textContent==null)continue;const{length:g}=h.textContent,d=f.getAttribute("data-slate-length"),_=d==null?g:parseInt(d,10),C=l+_;if(e.offset<=C){const b=Math.min(g,Math.max(0,e.offset-l));a=[h,b];break}l=C}if(!a&&t)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function We(n,e,t=!0){const{anchor:o,focus:r}=e,a=T.isBackward(e),i=bt(n,o,t);if(!i)return;const s=T.isCollapsed(e)?i:bt(n,r),f=it(n).document.createRange(),[h,g]=a?s:i,[d,_]=a?i:s,b=!!(ee(h)?h:h.parentElement).getAttribute("data-slate-zero-width"),w=!!(ee(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return f.setStart(h,b?1:g),f.setEnd(d,w?1:_),f}function se(n){let e=ee(n)?n:n.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const t=e?qe.get(e):null;if(!t)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return t}function so(n,e){const{clientX:t,clientY:o,target:r}=e;if(t==null||o==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=se(e.target),i=ke(a);if(m.isVoid(n,a)){const h=r.getBoundingClientRect(),g=n.isInline(a)?t-h.left<h.left+h.width-t:o-h.top<h.top+h.height-o,d=m.point(n,i,{edge:g?"start":"end"}),_=g?m.before(n,d):m.after(n,d);if(_)return m.range(n,_)}let s;const{document:l}=it(n);if(l.caretRangeFromPoint)s=l.caretRangeFromPoint(t,o);else{const h=l.caretPositionFromPoint(t,o);h&&(s=l.createRange(),s.setStart(h.offsetNode,h.offset),s.setEnd(h.offsetNode,h.offset))}if(!s)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return ye(n,s,{exactMatch:!1,suppressThrow:!1})}function Ct(n,e,t){var d;const{exactMatch:o,suppressThrow:r}=t,[a,i]=o?e:jn(e),s=a.parentNode;let l=null,f=0;if(s){const _=s.closest('[data-slate-void="true"]');let C=s.closest("[data-slate-leaf]"),b=null;if(C){if(l=C.closest('[data-slate-node="text"]'),l){const w=it(n).document.createRange();w.setStart(l,0),w.setEnd(a,i);const O=w.cloneContents();[...Array.prototype.slice.call(O.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(O.querySelectorAll("[contenteditable=false]"))].forEach(c=>{c.parentNode.removeChild(c)}),f=O.textContent.length,b=l}}else _&&(C=_.querySelector("[data-slate-leaf]"),C?(l=C.closest('[data-slate-node="text"]'),b=C,f=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(D=>{f-=D.textContent.length})):f=1);b&&f===b.textContent.length&&(s.hasAttribute("data-slate-zero-width")||tt&&((d=b.textContent)==null?void 0:d.endsWith(`

`)))&&f--}if(!l){if(r)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const h=se(l);return{path:ke(h),offset:f}}function ye(n,e,t){const{exactMatch:o,suppressThrow:r}=t,a=_t(e)?e.anchorNode:e.startContainer;let i,s,l,f,h;if(a&&(_t(e)?(i=e.anchorNode,s=e.anchorOffset,l=e.focusNode,f=e.focusOffset,Ut&&xn()?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed):(i=e.startContainer,s=e.startOffset,l=e.endContainer,f=e.endOffset,h=e.collapsed)),i==null||l==null||s==null||f==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const g=Ct(n,[i,s],{exactMatch:o,suppressThrow:r});if(!g)return null;const d=h?g:Ct(n,[l,f],{exactMatch:o,suppressThrow:r});if(!d)return null;let _={anchor:g,focus:d};return T.isExpanded(_)&&T.isForward(_)&&ee(l)&&m.void(n,{at:_.focus,mode:"highest"})&&(_=m.unhangRange(n,_,{voids:!0})),_}function co(n,e){const{anchor:t,focus:o}=e;return m.hasPath(n,t.path)&&m.hasPath(n,o.path)}function Xt(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){const a=n[r],i=e[r],t=a,{anchor:s,focus:l}=t,f=Je(t,["anchor","focus"]),o=i,{anchor:h,focus:g}=o,d=Je(o,["anchor","focus"]);if(!T.equals(a,i)||a[De]!==i[De]||!An(f,d))return!1}return!0}function Gt(n,e){return n===e||!!n&&!!e&&T.equals(n,e)}function fo(n){let e;const t=n[7].default,o=Se(t,n,n[6],null);return{c(){o&&o.c()},l(r){o&&o.l(r)},m(r,a){o&&o.m(r,a),e=!0},p(r,[a]){o&&o.p&&(!e||a&64)&&Le(o,t,r,r[6],e?Oe(t,r[6],a,null):Fe(r[6]),null)},i(r){e||(y(o,r),e=!0)},o(r){S(o,r),e=!1},d(r){o&&o.d(r)}}}const Jt={},Qt={},Zt={},jt={},xt={};function $t(){const n=be(Jt);if(!n)throw new Error("The `getEditorContext` must be used inside the Slate component's context.");return n}function ue(){return Mn($t())}function en(){const n=be(Qt);if(!n)throw new Error("The `getReadOnlyContext` must be used inside the Slate component's context.");return n}function uo(){const n=be(Zt);if(!n)throw new Error("The `getFocusedContext` must be used inside the Slate component's context.");return n}function tn(){const n=be(jt);if(!n)throw new Error("The `getDecorateContext` must be used inside the Slate component's context.");return n}function ho(){const n=be(xt);if(!n)throw new Error("The `getSelectionContext` must be used inside the Slate component's context.");return n}function nn(n){return[]}function go(n,e,t){let{$$slots:o={},$$scope:r}=e,{editor:a}=e,{value:i=a.children}=e,{selection:s=a.selection}=e;const l=ge(a);he(Jt,l);const f=ge(!0);he(Qt,f);const h=ge(!1);he(Zt,h);const g=ge(nn);he(jt,g);const d=ge(a.selection);he(xt,d);function _(){t(1,s=a.selection),t(0,i=a.children)}Kt.set(a,_);let C=a,b,D;return n.$$set=w=>{"editor"in w&&t(2,a=w.editor),"value"in w&&t(0,i=w.value),"selection"in w&&t(1,s=w.selection),"$$scope"in w&&t(6,r=w.$$scope)},n.$$.update=()=>{n.$$.dirty&12&&a!==C&&(t(3,C=a),l.set(a)),n.$$.dirty&17&&b!==i&&(l.update(w=>(w.children=i,w)),t(4,b=i)),n.$$.dirty&38&&(Gt(D,s)||(d.set(s),l.set(a),t(5,D=s)))},[i,s,a,C,b,D,r,o]}class yi extends Q{constructor(e){super();Z(this,e,go,fo,ie,{editor:2,value:0,selection:1})}}const on="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",rn="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",mo=new RegExp("^[^"+rn+"]*["+on+"]"),_o=new RegExp("^[^"+on+"]*["+rn+"]");function an(n){const e=String(n||"");return mo.test(e)?"rtl":_o.test(e)?"ltr":"neutral"}function yt(n){let e=`
`,t;return{c(){t=ze(e)},l(o){t=Ve(o,e)},m(o,r){A(o,t,r)},d(o){o&&F(t)}}}function wo(n){let e,t=n[0].text+"",o,r=n[1]&&yt();return{c(){e=te("span"),o=ze(t),r&&r.c(),this.h()},l(a){e=ne(a,"SPAN",{"data-slate-string":!0});var i=re(e);o=Ve(i,t),r&&r.l(i),i.forEach(F),this.h()},h(){N(e,"data-slate-string","true")},m(a,i){A(a,e,i),Mt(e,o),r&&r.m(e,null),n[3](e)},p(a,[i]){i&1&&t!==(t=a[0].text+"")&&Rt(o,t),a[1]?r||(r=yt(),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:pe,o:pe,d(a){a&&F(e),r&&r.d(),n[3](null)}}}function po(n,e,t){let{leaf:o}=e,{isTrailing:r=!1}=e,a;Rn(()=>{a&&t(2,a.textContent=o.text,a)});function i(s){le[s?"unshift":"push"](()=>{a=s,t(2,a)})}return n.$$set=s=>{"leaf"in s&&t(0,o=s.leaf),"isTrailing"in s&&t(1,r=s.isTrailing)},[o,r,a,i]}class ko extends Q{constructor(e){super();Z(this,e,po,wo,ie,{leaf:0,isTrailing:1})}}function Dt(n){let e;return{c(){e=te("br")},l(t){e=ne(t,"BR",{})},m(t,o){A(t,e,o)},d(t){t&&F(e)}}}function Eo(n){let e,t="\uFEFF",o,r,a=n[1]&&Dt();return{c(){e=te("span"),o=ze(t),a&&a.c(),this.h()},l(i){e=ne(i,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var s=re(e);o=Ve(s,t),a&&a.l(s),s.forEach(F),this.h()},h(){N(e,"data-slate-zero-width",r=n[1]?"n":"z"),N(e,"data-slate-length",n[0])},m(i,s){A(i,e,s),Mt(e,o),a&&a.m(e,null)},p(i,[s]){i[1]?a||(a=Dt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),s&2&&r!==(r=i[1]?"n":"z")&&N(e,"data-slate-zero-width",r),s&1&&N(e,"data-slate-length",i[0])},i:pe,o:pe,d(i){i&&F(e),a&&a.d()}}}function bo(n,e,t){let{length:o=0}=e,{isLineBreak:r=!1}=e;return n.$$set=a=>{"length"in a&&t(0,o=a.length),"isLineBreak"in a&&t(1,r=a.isLineBreak)},[o,r]}class at extends Q{constructor(e){super();Z(this,e,bo,Eo,He,{length:0,isLineBreak:1})}}function Co(n){let e,t;return e=new ko({props:{isTrailing:n[5],leaf:n[0]}}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p(o,r){const a={};r&32&&(a.isTrailing=o[5]),r&1&&(a.leaf=o[0]),e.$set(a)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function yo(n){let e,t;return e=new at({}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p:pe,i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function Do(n){let e,t;return e=new at({props:{isLineBreak:!0}}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p:pe,i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function So(n){let e,t;return e=new at({props:{length:$.string(n[1]).length}}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p(o,r){const a={};r&2&&(a.length=$.string(o[1]).length),e.$set(a)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function Lo(n){let e,t,o,r;const a=[So,Do,yo,Co],i=[];function s(l,f){return l[4]?0:l[3]?1:l[2]?2:3}return e=s(n),t=i[e]=a[e](n),{c(){t.c(),o=I()},l(l){t.l(l),o=I()},m(l,f){i[e].m(l,f),A(l,o,f),r=!0},p(l,[f]){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),S(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=a[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){r||(y(t),r=!0)},o(l){S(t),r=!1},d(l){i[e].d(l),l&&F(o)}}}function Fo(n,e,t){let o,r,a,i,s,l,{isLast:f}=e,{leaf:h}=e,{parent:g}=e,{text:d}=e;const _=ue();return n.$$set=C=>{"isLast"in C&&t(6,f=C.isLast),"leaf"in C&&t(0,h=C.leaf),"parent"in C&&t(1,g=C.parent),"text"in C&&t(7,d=C.text)},n.$$.update=()=>{n.$$.dirty&65&&t(5,o=f&&h.text.slice(-1)===`
`),n.$$.dirty&128&&t(9,r=ke(d)),n.$$.dirty&512&&t(8,a=_e.parent(r)),n.$$.dirty&2&&t(4,i=_.isVoid(g)),n.$$.dirty&1&&t(2,s=h.text===""),n.$$.dirty&390&&t(3,l=s&&g.children[g.children.length-1]===d&&!_.isInline(g)&&m.string(_,a)==="")},[h,g,s,l,i,o,f,d,a,r]}class Oo extends Q{constructor(e){super();Z(this,e,Fo,Lo,ie,{isLast:6,leaf:0,parent:1,text:7})}}function St(n){let e,t,o,r;function a(l){n[8](l)}var i=n[5];function s(l){let f={$$slots:{default:[To]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.clientHeight=l[6]),{props:f}}return i&&(e=new i(s(n)),le.push(()=>Ie(e,"clientHeight",a))),{c(){e&&W(e.$$.fragment),o=I()},l(l){e&&U(e.$$.fragment,l),o=I()},m(l,f){e&&z(e,l,f),A(l,o,f),r=!0},p(l,f){const h={};if(f&514&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.clientHeight=l[6],Wt(()=>t=!1)),i!==(i=l[5])){if(e){G();const g=e;S(g.$$.fragment,1,0,()=>{V(g,1)}),J()}i?(e=new i(s(l)),le.push(()=>Ie(e,"clientHeight",a)),W(e.$$.fragment),y(e.$$.fragment,1),z(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(l){r||(e&&y(e.$$.fragment,l),r=!0)},o(l){e&&S(e.$$.fragment,l),r=!1},d(l){l&&F(o),e&&V(e,l)}}}function To(n){let e=n[1].placeholder+"",t;return{c(){t=ze(e)},l(o){t=Ve(o,e)},m(o,r){A(o,t,r)},p(o,r){r&2&&e!==(e=o[1].placeholder+"")&&Rt(t,e)},d(o){o&&F(t)}}}function Po(n){let e,t,o,r=De in n[1]&&St(n);return t=new Oo({props:{isLast:n[0],leaf:n[1],parent:n[2],text:n[3]}}),{c(){r&&r.c(),e=I(),W(t.$$.fragment)},l(a){r&&r.l(a),e=I(),U(t.$$.fragment,a)},m(a,i){r&&r.m(a,i),A(a,e,i),z(t,a,i),o=!0},p(a,i){De in a[1]?r?(r.p(a,i),i&2&&y(r,1)):(r=St(a),r.c(),y(r,1),r.m(e.parentNode,e)):r&&(G(),S(r,1,1,()=>{r=null}),J());const s={};i&1&&(s.isLast=a[0]),i&2&&(s.leaf=a[1]),i&4&&(s.parent=a[2]),i&8&&(s.text=a[3]),t.$set(s)},i(a){o||(y(r),y(t.$$.fragment,a),o=!0)},o(a){S(r),S(t.$$.fragment,a),o=!1},d(a){r&&r.d(a),a&&F(e),V(t,a)}}}function No(n){let e,t,o;var r=n[4];function a(i){return{props:{leaf:i[1],$$slots:{default:[Po]},$$scope:{ctx:i}}}}return r&&(e=new r(a(n))),{c(){e&&W(e.$$.fragment),t=I()},l(i){e&&U(e.$$.fragment,i),t=I()},m(i,s){e&&z(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&2&&(l.leaf=i[1]),s&623&&(l.$$scope={dirty:s,ctx:i}),r!==(r=i[4])){if(e){G();const f=e;S(f.$$.fragment,1,0,()=>{V(f,1)}),J()}r?(e=new r(a(i)),W(e.$$.fragment),y(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else r&&e.$set(l)},i(i){o||(e&&y(e.$$.fragment,i),o=!0)},o(i){e&&S(e.$$.fragment,i),o=!1},d(i){i&&F(t),e&&V(e,i)}}}function Bo(n,e,t){let{isLast:o}=e,{leaf:r}=e,{parent:a}=e,{text:i}=e,{Leaf:s}=e,{Placeholder:l}=e,f,h;Wn(()=>{if(pt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight="auto")}});function g(d){f=d,t(6,f)}return n.$$set=d=>{"isLast"in d&&t(0,o=d.isLast),"leaf"in d&&t(1,r=d.leaf),"parent"in d&&t(2,a=d.parent),"text"in d&&t(3,i=d.text),"Leaf"in d&&t(4,s=d.Leaf),"Placeholder"in d&&t(5,l=d.Placeholder)},n.$$.update=()=>{if(n.$$.dirty&192&&h!==f&&pt){const d=document.querySelector('[data-svelte-editor="true"]');d&&(d.style.minHeight=`${f}px`),t(7,h=f)}},[o,r,a,i,s,l,f,h,g]}class Lt extends Q{constructor(e){super();Z(this,e,Bo,No,ie,{isLast:0,leaf:1,parent:2,text:3,Leaf:4,Placeholder:5})}}function Ft(n,e,t){const o=n.slice();return o[13]=e[t],o[15]=t,o}function Ot(n,e){let t,o,r,a;var i=Lt;function s(l){return{props:{Placeholder:l[4],Leaf:l[3],isLast:l[0]&&l[15]===l[7].length-1,parent:l[1],leaf:l[13],text:l[2]}}}return i&&(o=new i(s(e))),{key:n,first:null,c(){t=I(),o&&W(o.$$.fragment),r=I(),this.h()},l(l){t=I(),o&&U(o.$$.fragment,l),r=I(),this.h()},h(){this.first=t},m(l,f){A(l,t,f),o&&z(o,l,f),A(l,r,f),a=!0},p(l,f){e=l;const h={};if(f&16&&(h.Placeholder=e[4]),f&8&&(h.Leaf=e[3]),f&129&&(h.isLast=e[0]&&e[15]===e[7].length-1),f&2&&(h.parent=e[1]),f&128&&(h.leaf=e[13]),f&4&&(h.text=e[2]),i!==(i=Lt)){if(o){G();const g=o;S(g.$$.fragment,1,0,()=>{V(g,1)}),J()}i?(o=new i(s(e)),W(o.$$.fragment),y(o.$$.fragment,1),z(o,r.parentNode,r)):o=null}else i&&o.$set(h)},i(l){a||(o&&y(o.$$.fragment,l),a=!0)},o(l){o&&S(o.$$.fragment,l),a=!1},d(l){l&&F(t),l&&F(r),o&&V(o,l)}}}function Io(n){let e,t=[],o=new Map,r,a=n[7];const i=s=>`${s[6]}-${s[15]}`;for(let s=0;s<a.length;s+=1){let l=Ft(n,a,s),f=i(l);o.set(f,t[s]=Ot(f,l))}return{c(){e=te("span");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=ne(s,"SPAN",{"data-slate-node":!0});var l=re(e);for(let f=0;f<t.length;f+=1)t[f].l(l);l.forEach(F),this.h()},h(){N(e,"data-slate-node","text")},m(s,l){A(s,e,l);for(let f=0;f<t.length;f+=1)t[f].m(e,null);n[10](e),r=!0},p(s,[l]){l&223&&(a=s[7],G(),t=zt(t,l,i,1,s,a,o,e,Vt,Ot,null,Ft),J())},i(s){if(!r){for(let l=0;l<a.length;l+=1)y(t[l]);r=!0}},o(s){for(let l=0;l<t.length;l+=1)S(t[l]);r=!1},d(s){s&&F(e);for(let l=0;l<t.length;l+=1)t[l].d();n[10](null)}}}function Ao(n,e,t){let o,r,{decorations:a}=e,{isLast:i}=e,{parent:s}=e,{text:l}=e,{Leaf:f}=e,{Placeholder:h}=e;const g=ue();let d,_=d;function C(){var D;(D=Ye.get(g))==null||D.set(r,d),Re.set(l,d),qe.set(d,l)}nt(C);function b(D){le[D?"unshift":"push"](()=>{d=D,t(5,d)})}return n.$$set=D=>{"decorations"in D&&t(8,a=D.decorations),"isLast"in D&&t(0,i=D.isLast),"parent"in D&&t(1,s=D.parent),"text"in D&&t(2,l=D.text),"Leaf"in D&&t(3,f=D.Leaf),"Placeholder"in D&&t(4,h=D.Placeholder)},n.$$.update=()=>{n.$$.dirty&260&&t(7,o=zn.decorations(l,a)),n.$$.dirty&4&&t(6,r=ce(l)),n.$$.dirty&544&&_!==d&&(t(9,_=d),C())},[i,s,l,f,h,d,r,o,a,_,b]}class Ee extends Q{constructor(e){super();Z(this,e,Ao,Io,ie,{decorations:8,isLast:0,parent:1,text:2,Leaf:3,Placeholder:4})}}function Mo(n){let e,t;return e=new cn({props:{node:n[0],decorations:n[1],selection:n[2],Element:n[3],Placeholder:n[5],Leaf:n[4]}}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p(o,r){const a={};r&1&&(a.node=o[0]),r&2&&(a.decorations=o[1]),r&4&&(a.selection=o[2]),r&8&&(a.Element=o[3]),r&32&&(a.Placeholder=o[5]),r&16&&(a.Leaf=o[4]),e.$set(a)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function Ro(n){let e,t,o,r;const a=[zo,Wo],i=[];function s(l,f){return l[7]?0:1}return e=s(n),t=i[e]=a[e](n),{c(){t.c(),o=I()},l(l){t.l(l),o=I()},m(l,f){i[e].m(l,f),A(l,o,f),r=!0},p(l,f){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),S(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=a[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){r||(y(t),r=!0)},o(l){S(t),r=!1},d(l){i[e].d(l),l&&F(o)}}}function Wo(n){let e,t,o;var r=Ee;function a(i){return{props:{Placeholder:i[5],Leaf:i[4],decorations:[],isLast:!1,parent:i[0],text:i[11]}}}return r&&(t=new r(a(n))),{c(){e=te("div"),t&&W(t.$$.fragment),this.h()},l(i){e=ne(i,"DIV",{"data-slate-spacer":!0,class:!0});var s=re(e);t&&U(t.$$.fragment,s),s.forEach(F),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(i,s){A(i,e,s),t&&z(t,e,null),o=!0},p(i,s){const l={};if(s&32&&(l.Placeholder=i[5]),s&16&&(l.Leaf=i[4]),s&1&&(l.parent=i[0]),s&2048&&(l.text=i[11]),r!==(r=Ee)){if(t){G();const f=t;S(f.$$.fragment,1,0,()=>{V(f,1)}),J()}r?(t=new r(a(i)),W(t.$$.fragment),y(t.$$.fragment,1),z(t,e,null)):t=null}else r&&t.$set(l)},i(i){o||(t&&y(t.$$.fragment,i),o=!0)},o(i){t&&S(t.$$.fragment,i),o=!1},d(i){i&&F(e),t&&V(t)}}}function zo(n){let e,t,o;var r=Ee;function a(i){return{props:{Placeholder:i[5],Leaf:i[4],decorations:[],isLast:!1,parent:i[0],text:i[11]}}}return r&&(t=new r(a(n))),{c(){e=te("span"),t&&W(t.$$.fragment),this.h()},l(i){e=ne(i,"SPAN",{"data-slate-spacer":!0,class:!0});var s=re(e);t&&U(t.$$.fragment,s),s.forEach(F),this.h()},h(){N(e,"data-slate-spacer",""),N(e,"class","svelte-yux06v")},m(i,s){A(i,e,s),t&&z(t,e,null),o=!0},p(i,s){const l={};if(s&32&&(l.Placeholder=i[5]),s&16&&(l.Leaf=i[4]),s&1&&(l.parent=i[0]),s&2048&&(l.text=i[11]),r!==(r=Ee)){if(t){G();const f=t;S(f.$$.fragment,1,0,()=>{V(f,1)}),J()}r?(t=new r(a(i)),W(t.$$.fragment),y(t.$$.fragment,1),z(t,e,null)):t=null}else r&&t.$set(l)},i(i){o||(t&&y(t.$$.fragment,i),o=!0)},o(i){t&&S(t.$$.fragment,i),o=!1},d(i){i&&F(e),t&&V(t)}}}function Vo(n){let e,t,o,r;const a=[Ro,Mo],i=[];function s(l,f){return l[9]&&!l[8]?0:1}return e=s(n),t=i[e]=a[e](n),{c(){t.c(),o=I()},l(l){t.l(l),o=I()},m(l,f){i[e].m(l,f),A(l,o,f),r=!0},p(l,f){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),S(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=a[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){r||(y(t),r=!0)},o(l){S(t),r=!1},d(l){i[e].d(l),l&&F(o)}}}function Ho(n){let e,t,o,r;function a(l){n[18](l)}var i=n[3];function s(l){let f={isVoid:l[9],isInline:l[7],contenteditable:l[12],element:l[0],dir:l[10],$$slots:{default:[Vo]},$$scope:{ctx:l}};return l[6]!==void 0&&(f.ref=l[6]),{props:f}}return i&&(e=new i(s(n)),le.push(()=>Ie(e,"ref",a))),{c(){e&&W(e.$$.fragment),o=I()},l(l){e&&U(e.$$.fragment,l),o=I()},m(l,f){e&&z(e,l,f),A(l,o,f),r=!0},p(l,[f]){const h={};if(f&512&&(h.isVoid=l[9]),f&128&&(h.isInline=l[7]),f&4096&&(h.contenteditable=l[12]),f&1&&(h.element=l[0]),f&1024&&(h.dir=l[10]),f&4197311&&(h.$$scope={dirty:f,ctx:l}),!t&&f&64&&(t=!0,h.ref=l[6],Wt(()=>t=!1)),i!==(i=l[3])){if(e){G();const g=e;S(g.$$.fragment,1,0,()=>{V(g,1)}),J()}i?(e=new i(s(l)),le.push(()=>Ie(e,"ref",a)),W(e.$$.fragment),y(e.$$.fragment,1),z(e,o.parentNode,o)):e=null}else i&&e.$set(h)},i(l){r||(e&&y(e.$$.fragment,l),r=!0)},o(l){e&&S(e.$$.fragment,l),r=!1},d(l){l&&F(o),e&&V(e,l)}}}function Ko(n,e,t){let o,r,a,i,s,l,{element:f}=e,{decorations:h}=e,{selection:g=null}=e,{Element:d}=e,{Leaf:_}=e,{Placeholder:C}=e;const b=ue(),D=en();Ae(n,D,B=>t(17,l=B));let w,O,H,c,L,oe=L;function j(){var B;(B=Ye.get(b))==null||B.set(w,L),Re.set(f,L),qe.set(L,f)}nt(j);function K(B){L=B,t(6,L)}return n.$$set=B=>{"element"in B&&t(0,f=B.element),"decorations"in B&&t(1,h=B.decorations),"selection"in B&&t(2,g=B.selection),"Element"in B&&t(3,d=B.Element),"Leaf"in B&&t(4,_=B.Leaf),"Placeholder"in B&&t(5,C=B.Placeholder)},n.$$.update=()=>{if(n.$$.dirty&131072&&t(8,o=l),n.$$.dirty&1&&t(7,r=b.isInline(f)),n.$$.dirty&1&&t(16,a=ce(f)),n.$$.dirty&81920&&O!==a&&(w=a,t(14,O=a)),n.$$.dirty&129&&!r&&m.hasInlines(b,f)){const B=an($.string(f));B==="rtl"&&t(10,H=B)}if(n.$$.dirty&1&&t(9,i=m.isVoid(b,f)),n.$$.dirty&256&&t(12,s=!o),n.$$.dirty&897&&i){!o&&r&&t(12,s=!1);const[[B]]=$.texts(f);t(11,c=B),Ke.set(B,0),ve.set(B,f)}n.$$.dirty&32832&&oe!==L&&(t(15,oe=L),j())},[f,h,g,d,_,C,L,r,o,i,H,c,s,D,O,oe,a,l,K]}class Tt extends Q{constructor(e){super();Z(this,e,Ko,Ho,ie,{element:0,decorations:1,selection:2,Element:3,Leaf:4,Placeholder:5})}}function vo(n){let e,t,o;var r=Tt;function a(i){return{props:{Element:i[1],Placeholder:i[3],Leaf:i[2],decorations:i[5],element:i[0],selection:i[4]}}}return r&&(e=new r(a(n))),{c(){e&&W(e.$$.fragment),t=I()},l(i){e&&U(e.$$.fragment,i),t=I()},m(i,s){e&&z(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&2&&(l.Element=i[1]),s&8&&(l.Placeholder=i[3]),s&4&&(l.Leaf=i[2]),s&32&&(l.decorations=i[5]),s&1&&(l.element=i[0]),s&16&&(l.selection=i[4]),r!==(r=Tt)){if(e){G();const f=e;S(f.$$.fragment,1,0,()=>{V(f,1)}),J()}r?(e=new r(a(i)),W(e.$$.fragment),y(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else r&&e.$set(l)},i(i){o||(e&&y(e.$$.fragment,i),o=!0)},o(i){e&&S(e.$$.fragment,i),o=!1},d(i){i&&F(t),e&&V(e,i)}}}const ln={};function Di(){const n=be(ln);if(!n)throw new Error("The `getSelectedContext` must be used inside a Slate Element component's context.");return n}function qo(n,e,t){let o,r,a,i,{parent:s}=e,{element:l}=e,{path:f}=e,{index:h}=e,{decorate:g}=e,{decorations:d}=e,{selection:_=null}=e,{Element:C}=e,{Leaf:b}=e,{Placeholder:D}=e;const w=ge(!1);he(ln,w);const O=ue();let H=h,c=s,L=l,oe=d,j=_;return n.$$set=K=>{"parent"in K&&t(6,s=K.parent),"element"in K&&t(0,l=K.element),"path"in K&&t(7,f=K.path),"index"in K&&t(8,h=K.index),"decorate"in K&&t(9,g=K.decorate),"decorations"in K&&t(10,d=K.decorations),"selection"in K&&t(11,_=K.selection),"Element"in K&&t(1,C=K.Element),"Leaf"in K&&t(2,b=K.Leaf),"Placeholder"in K&&t(3,D=K.Placeholder)},n.$$.update=()=>{n.$$.dirty&4352&&H!==h&&t(12,H=h),n.$$.dirty&8256&&c!==s&&t(13,c=s),n.$$.dirty&16385&&L!==l&&t(14,L=l),n.$$.dirty&33792&&(Xt(oe,d)||t(15,oe=d)),n.$$.dirty&67584&&(Gt(j,_)||t(16,j=_)),n.$$.dirty&20480&&Ke.set(L,H),n.$$.dirty&24576&&ve.set(L,c),n.$$.dirty&4224&&t(18,o=f.concat(H)),n.$$.dirty&262144&&t(17,r=m.range(O,o)),n.$$.dirty&442880&&t(5,a=sn(g([L,o]),r,oe)),n.$$.dirty&196608&&t(4,i=j&&T.intersection(r,j)),n.$$.dirty&16&&w.set(!!i)},[l,C,b,D,i,a,s,f,h,g,d,_,H,c,L,oe,j,r,o]}class Yo extends Q{constructor(e){super();Z(this,e,qo,vo,ie,{parent:6,element:0,path:7,index:8,decorate:9,decorations:10,selection:11,Element:1,Leaf:2,Placeholder:3})}}function Uo(n){let e,t,o;var r=Ee;function a(i){return{props:{Placeholder:i[3],Leaf:i[2],decorations:i[4],isLast:i[5],parent:i[0],text:i[1]}}}return r&&(e=new r(a(n))),{c(){e&&W(e.$$.fragment),t=I()},l(i){e&&U(e.$$.fragment,i),t=I()},m(i,s){e&&z(e,i,s),A(i,t,s),o=!0},p(i,[s]){const l={};if(s&8&&(l.Placeholder=i[3]),s&4&&(l.Leaf=i[2]),s&16&&(l.decorations=i[4]),s&32&&(l.isLast=i[5]),s&1&&(l.parent=i[0]),s&2&&(l.text=i[1]),r!==(r=Ee)){if(e){G();const f=e;S(f.$$.fragment,1,0,()=>{V(f,1)}),J()}r?(e=new r(a(i)),W(e.$$.fragment),y(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}else r&&e.$set(l)},i(i){o||(e&&y(e.$$.fragment,i),o=!0)},o(i){e&&S(e.$$.fragment,i),o=!1},d(i){i&&F(t),e&&V(e,i)}}}function Xo(n,e,t){let o,r,a,i,{parent:s}=e,{text:l}=e,{path:f}=e,{index:h}=e,{isLeafBlock:g}=e,{decorations:d}=e,{decorate:_}=e,{Leaf:C}=e,{Placeholder:b}=e;const D=ue();let w=h,O=l,H=s,c=d;return n.$$set=L=>{"parent"in L&&t(0,s=L.parent),"text"in L&&t(1,l=L.text),"path"in L&&t(6,f=L.path),"index"in L&&t(7,h=L.index),"isLeafBlock"in L&&t(8,g=L.isLeafBlock),"decorations"in L&&t(9,d=L.decorations),"decorate"in L&&t(10,_=L.decorate),"Leaf"in L&&t(2,C=L.Leaf),"Placeholder"in L&&t(3,b=L.Placeholder)},n.$$.update=()=>{n.$$.dirty&2176&&w!==h&&t(11,w=h),n.$$.dirty&4098&&O!==l&&t(12,O=l),n.$$.dirty&8193&&H!==s&&t(13,H=s),n.$$.dirty&16896&&(Xt(c,d)||t(14,c=d)),n.$$.dirty&6144&&Ke.set(O,w),n.$$.dirty&12288&&ve.set(O,H),n.$$.dirty&2112&&t(16,o=f.concat(w)),n.$$.dirty&10496&&t(5,r=g&&w===H.children.length-1),n.$$.dirty&65536&&t(15,a=m.range(D,o)),n.$$.dirty&119808&&t(4,i=sn(_([O,o]),a,c))},[s,l,C,b,i,r,f,h,g,d,_,w,O,H,c,a,o]}class Go extends Q{constructor(e){super();Z(this,e,Xo,Uo,ie,{parent:0,text:1,path:6,index:7,isLeafBlock:8,decorations:9,decorate:10,Leaf:2,Placeholder:3})}}function Pt(n,e,t){const o=n.slice();return o[14]=e[t],o[16]=t,o}function Jo(n){let e,t;return e=new Go({props:{Placeholder:n[4],Leaf:n[3],decorations:n[0],parent:n[5],text:n[14],decorate:n[9],index:n[16],path:n[8],isLeafBlock:n[7]}}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p(o,r){const a={};r&16&&(a.Placeholder=o[4]),r&8&&(a.Leaf=o[3]),r&1&&(a.decorations=o[0]),r&32&&(a.parent=o[5]),r&64&&(a.text=o[14]),r&512&&(a.decorate=o[9]),r&64&&(a.index=o[16]),r&256&&(a.path=o[8]),r&128&&(a.isLeafBlock=o[7]),e.$set(a)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function Qo(n){let e,t;return e=new Yo({props:{Element:n[2],Placeholder:n[4],Leaf:n[3],decorations:n[0],selection:n[1],element:n[14],parent:n[5],decorate:n[9],index:n[16],path:n[8]}}),{c(){W(e.$$.fragment)},l(o){U(e.$$.fragment,o)},m(o,r){z(e,o,r),t=!0},p(o,r){const a={};r&4&&(a.Element=o[2]),r&16&&(a.Placeholder=o[4]),r&8&&(a.Leaf=o[3]),r&1&&(a.decorations=o[0]),r&2&&(a.selection=o[1]),r&64&&(a.element=o[14]),r&32&&(a.parent=o[5]),r&512&&(a.decorate=o[9]),r&64&&(a.index=o[16]),r&256&&(a.path=o[8]),e.$set(a)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function Nt(n,e){let t,o,r,a,i,s;const l=[Qo,Jo],f=[];function h(g,d){return d&64&&(o=null),o==null&&(o=!!Me.isElement(g[14])),o?0:1}return r=h(e,-1),a=f[r]=l[r](e),{key:n,first:null,c(){t=I(),a.c(),i=I(),this.h()},l(g){t=I(),a.l(g),i=I(),this.h()},h(){this.first=t},m(g,d){A(g,t,d),f[r].m(g,d),A(g,i,d),s=!0},p(g,d){e=g;let _=r;r=h(e,d),r===_?f[r].p(e,d):(G(),S(f[_],1,1,()=>{f[_]=null}),J(),a=f[r],a?a.p(e,d):(a=f[r]=l[r](e),a.c()),y(a,1),a.m(i.parentNode,i))},i(g){s||(y(a),s=!0)},o(g){S(a),s=!1},d(g){g&&F(t),f[r].d(g),g&&F(i)}}}function Zo(n){let e=[],t=new Map,o,r,a=n[6];const i=s=>ce(s[14]);for(let s=0;s<a.length;s+=1){let l=Pt(n,a,s),f=i(l);t.set(f,e[s]=Nt(f,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();o=I()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);o=I()},m(s,l){for(let f=0;f<e.length;f+=1)e[f].m(s,l);A(s,o,l),r=!0},p(s,[l]){l&1023&&(a=s[6],G(),e=zt(e,l,i,1,s,a,t,o.parentNode,Vt,Nt,o,Pt),J())},i(s){if(!r){for(let l=0;l<a.length;l+=1)y(e[l]);r=!0}},o(s){for(let l=0;l<e.length;l+=1)S(e[l]);r=!1},d(s){for(let l=0;l<e.length;l+=1)e[l].d(s);s&&F(o)}}}function sn(n,e,t=[]){for(const o of t){const r=T.intersection(o,e);r&&n.push(r)}return n}function jo(n,e,t){let o,r,a,i,{node:s}=e,{decorations:l}=e,{selection:f=null}=e,{Element:h}=e,{Leaf:g}=e,{Placeholder:d}=e;const _=ue(),C=tn();Ae(n,C,w=>t(12,i=w));let b=s,D=s.children;return n.$$set=w=>{"node"in w&&t(11,s=w.node),"decorations"in w&&t(0,l=w.decorations),"selection"in w&&t(1,f=w.selection),"Element"in w&&t(2,h=w.Element),"Leaf"in w&&t(3,g=w.Leaf),"Placeholder"in w&&t(4,d=w.Placeholder)},n.$$.update=()=>{n.$$.dirty&4096&&t(9,o=i),n.$$.dirty&2080&&(b!==s||s===_)&&t(5,b=s),n.$$.dirty&2112&&D!==s.children&&t(6,D=s.children),n.$$.dirty&32&&t(8,r=ke(b)),n.$$.dirty&32&&t(7,a=Me.isElement(b)&&!_.isInline(b)&&m.hasInlines(_,b))},[l,f,h,g,d,b,D,a,r,o,C,s,i]}class cn extends Q{constructor(e){super();Z(this,e,jo,Zo,ie,{node:11,decorations:0,selection:1,Element:2,Leaf:3,Placeholder:4})}}function xo(n){let e,t;const o=n[7].default,r=Se(o,n,n[6],null);return{c(){e=te("div"),r&&r.c(),this.h()},l(a){e=ne(a,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=re(e);r&&r.l(i),i.forEach(F),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-void",n[2]),N(e,"dir",n[4]),N(e,"contenteditable",n[3]),N(e,"class","svelte-19k8gul")},m(a,i){A(a,e,i),r&&r.m(e,null),n[9](e),t=!0},p(a,i){r&&r.p&&(!t||i&64)&&Le(r,o,a,a[6],t?Oe(o,a[6],i,null):Fe(a[6]),null),(!t||i&4)&&N(e,"data-slate-void",a[2]),(!t||i&16)&&N(e,"dir",a[4]),(!t||i&8)&&N(e,"contenteditable",a[3])},i(a){t||(y(r,a),t=!0)},o(a){S(r,a),t=!1},d(a){a&&F(e),r&&r.d(a),n[9](null)}}}function $o(n){let e,t;const o=n[7].default,r=Se(o,n,n[6],null);return{c(){e=te("span"),r&&r.c(),this.h()},l(a){e=ne(a,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var i=re(e);r&&r.l(i),i.forEach(F),this.h()},h(){N(e,"data-slate-node","element"),N(e,"data-slate-inline",n[1]),N(e,"data-slate-void",n[2]),N(e,"dir",n[4]),N(e,"contenteditable",n[3]),N(e,"class","svelte-19k8gul")},m(a,i){A(a,e,i),r&&r.m(e,null),n[8](e),t=!0},p(a,i){r&&r.p&&(!t||i&64)&&Le(r,o,a,a[6],t?Oe(o,a[6],i,null):Fe(a[6]),null),(!t||i&2)&&N(e,"data-slate-inline",a[1]),(!t||i&4)&&N(e,"data-slate-void",a[2]),(!t||i&16)&&N(e,"dir",a[4]),(!t||i&8)&&N(e,"contenteditable",a[3])},i(a){t||(y(r,a),t=!0)},o(a){S(r,a),t=!1},d(a){a&&F(e),r&&r.d(a),n[8](null)}}}function ei(n){let e,t,o,r;const a=[$o,xo],i=[];function s(l,f){return l[1]?0:1}return e=s(n),t=i[e]=a[e](n),{c(){t.c(),o=I()},l(l){t.l(l),o=I()},m(l,f){i[e].m(l,f),A(l,o,f),r=!0},p(l,[f]){let h=e;e=s(l),e===h?i[e].p(l,f):(G(),S(i[h],1,1,()=>{i[h]=null}),J(),t=i[e],t?t.p(l,f):(t=i[e]=a[e](l),t.c()),y(t,1),t.m(o.parentNode,o))},i(l){r||(y(t),r=!0)},o(l){S(t),r=!1},d(l){i[e].d(l),l&&F(o)}}}function ti(n,e,t){let{$$slots:o={},$$scope:r}=e,{element:a}=e,{ref:i}=e,{isInline:s}=e,{isVoid:l}=e,{contenteditable:f}=e,{dir:h=void 0}=e;function g(_){le[_?"unshift":"push"](()=>{i=_,t(0,i)})}function d(_){le[_?"unshift":"push"](()=>{i=_,t(0,i)})}return n.$$set=_=>{"element"in _&&t(5,a=_.element),"ref"in _&&t(0,i=_.ref),"isInline"in _&&t(1,s=_.isInline),"isVoid"in _&&t(2,l=_.isVoid),"contenteditable"in _&&t(3,f=_.contenteditable),"dir"in _&&t(4,h=_.dir),"$$scope"in _&&t(6,r=_.$$scope)},[i,s,l,f,h,a,r,o,g,d]}class ni extends Q{constructor(e){super();Z(this,e,ti,ei,He,{element:5,ref:0,isInline:1,isVoid:2,contenteditable:3,dir:4})}}function oi(n){let e,t;const o=n[2].default,r=Se(o,n,n[1],null);return{c(){e=te("span"),r&&r.c(),this.h()},l(a){e=ne(a,"SPAN",{"data-slate-leaf":!0});var i=re(e);r&&r.l(i),i.forEach(F),this.h()},h(){N(e,"data-slate-leaf","true")},m(a,i){A(a,e,i),r&&r.m(e,null),t=!0},p(a,[i]){r&&r.p&&(!t||i&2)&&Le(r,o,a,a[1],t?Oe(o,a[1],i,null):Fe(a[1]),null)},i(a){t||(y(r,a),t=!0)},o(a){S(r,a),t=!1},d(a){a&&F(e),r&&r.d(a)}}}function ii(n,e,t){let{$$slots:o={},$$scope:r}=e,{leaf:a}=e;return n.$$set=i=>{"leaf"in i&&t(0,a=i.leaf),"$$scope"in i&&t(1,r=i.$$scope)},[a,r,o]}class ri extends Q{constructor(e){super();Z(this,e,ii,oi,He,{leaf:0})}}function ai(n){let e,t,o;const r=n[2].default,a=Se(r,n,n[1],null);return{c(){e=te("span"),a&&a.c(),this.h()},l(i){e=ne(i,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var s=re(e);a&&a.l(s),s.forEach(F),this.h()},h(){N(e,"data-slate-placeholder","true"),N(e,"contenteditable","false"),N(e,"class","svelte-lqbb94"),Vn(()=>n[3].call(e))},m(i,s){A(i,e,s),a&&a.m(e,null),t=Hn(e,n[3].bind(e)),o=!0},p(i,[s]){a&&a.p&&(!o||s&2)&&Le(a,r,i,i[1],o?Oe(r,i[1],s,null):Fe(i[1]),null)},i(i){o||(y(a,i),o=!0)},o(i){S(a,i),o=!1},d(i){i&&F(e),a&&a.d(i),t()}}}function li(n,e,t){let{$$slots:o={},$$scope:r}=e,{clientHeight:a=void 0}=e;function i(){a=this.clientHeight,t(0,a)}return n.$$set=s=>{"clientHeight"in s&&t(0,a=s.clientHeight),"$$scope"in s&&t(1,r=s.$$scope)},[a,r,o,i]}class si extends Q{constructor(e){super();Z(this,e,li,ai,He,{clientHeight:0})}}const ci=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Ze={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},fn={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:ci?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},lt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let n=1;n<20;n++)lt["f"+n]=111+n;function un(n,e={}){Array.isArray(n)||(n=[n]);const t=n.map(o=>fi(o,e));return function(r){return t.some(a=>ui(a,r))}}function Si(n,e,t={}){return un(n,t)(e)}function je(n){return un(n,{byKey:!0})}function fi(n,e={}){const t=e&&e.byKey,o={};n=n.replace("++","+add");const r=n.split("+"),{length:a}=r;for(const i in Ze)o[Ze[i]]=!1;for(let i of r){const s=i.endsWith("?")&&i.length>1;s&&(i=i.slice(0,-1));const l=dn(i),f=Ze[l];if(i.length>1&&!f&&!fn[i]&&!lt[l])throw new TypeError(`Unknown modifier: "${i}"`);(a===1||!f)&&(t?o.key=l:o.which=di(i)),f&&(o[f]=s?null:!0)}return o}function ui(n,e){for(const t in n){const o=n[t];let r;if(o!=null&&(t==="key"&&e.key!=null?r=e.key.toLowerCase():t==="which"?r=o===91&&e.which===93?91:e.which:r=e[t],!(r==null&&o===!1)&&r!==o))return!1}return!0}function di(n){return n=dn(n),lt[n]||n.toUpperCase().charCodeAt(0)}function dn(n){return n=n.toLowerCase(),n=fn[n]||n,n}const hi={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},gi={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},mi={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function q(n){const e=hi[n],t=gi[n],o=mi[n],r=e&&je(e),a=t&&je(t),i=o&&je(o);return s=>!!(r&&r(s)||wt&&a&&a(s)||!wt&&i&&i(s))}var Y={isBold:q("bold"),isCompose:q("compose"),isMoveBackward:q("moveBackward"),isMoveForward:q("moveForward"),isDeleteBackward:q("deleteBackward"),isDeleteForward:q("deleteForward"),isDeleteLineBackward:q("deleteLineBackward"),isDeleteLineForward:q("deleteLineForward"),isDeleteWordBackward:q("deleteWordBackward"),isDeleteWordForward:q("deleteWordForward"),isExtendBackward:q("extendBackward"),isExtendForward:q("extendForward"),isExtendLineBackward:q("extendLineBackward"),isExtendLineForward:q("extendLineForward"),isItalic:q("italic"),isMoveLineBackward:q("moveLineBackward"),isMoveLineForward:q("moveLineForward"),isMoveWordBackward:q("moveWordBackward"),isMoveWordForward:q("moveWordForward"),isRedo:q("redo"),isSplitBlock:q("splitBlock"),isTransposeCharacter:q("transposeCharacter"),isUndo:q("undo")};function _i(n){let e,t,o,r,a,i,s,l;t=new cn({props:{node:n[9],selection:n[10],decorations:n[8],Element:n[1],Leaf:n[2],Placeholder:n[3]}});let f=[n[29],{role:o=n[7].readOnly?void 0:"textbox"},{spellcheck:n[4]},{autocorrect:n[5]},{autocapitalize:n[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:r=!n[7].readOnly},{"z-index":a=-1}],h={};for(let g=0;g<f.length;g+=1)h=xe(h,f[g]);return{c(){e=te("div"),W(t.$$.fragment),this.h()},l(g){e=ne(g,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0,"z-index":!0});var d=re(e);U(t.$$.fragment,d),d.forEach(F),this.h()},h(){dt(e,h),ht(e,"svelte-m59z04",!0)},m(g,d){A(g,e,d),z(t,e,null),n[38](e),i=!0,s||(l=[X(e,"beforeinput",n[13]),X(e,"keydown",n[15]),X(e,"input",n[14]),X(e,"focus",n[16]),X(e,"blur",n[17]),X(e,"click",n[18]),X(e,"compositionend",n[19]),X(e,"compositionupdate",n[20]),X(e,"compositionstart",n[21]),X(e,"paste",n[22]),X(e,"copy",n[23]),X(e,"cut",n[24]),X(e,"dragover",n[25]),X(e,"dragstart",n[26]),X(e,"drop",n[27]),X(e,"dragend",n[28])],s=!0)},p(g,d){const _={};d[0]&512&&(_.node=g[9]),d[0]&1024&&(_.selection=g[10]),d[0]&256&&(_.decorations=g[8]),d[0]&2&&(_.Element=g[1]),d[0]&4&&(_.Leaf=g[2]),d[0]&8&&(_.Placeholder=g[3]),t.$set(_),dt(e,h=Kn(f,[d[0]&536870912&&g[29],(!i||d[0]&128&&o!==(o=g[7].readOnly?void 0:"textbox"))&&{role:o},(!i||d[0]&16)&&{spellcheck:g[4]},(!i||d[0]&32)&&{autocorrect:g[5]},(!i||d[0]&64)&&{autocapitalize:g[6]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!i||d[0]&128&&r!==(r=!g[7].readOnly))&&{contenteditable:r},{"z-index":a}])),ht(e,"svelte-m59z04",!0)},i(g){i||(y(t.$$.fragment,g),i=!0)},o(g){S(t.$$.fragment,g),i=!1},d(g){g&&F(e),V(t),n[38](null),s=!1,vn(l)}}}function me(n,e){return fe(e)&&rt(n,e)}function x(n,e){return fe(e)&&rt(n,e,{editable:!0})}function Bt(n,e){if(Ht.get(n))return!1;{const t=me(n,e)&&se(e);return m.isVoid(n,t)}}function wi(n,e){const t=e.startContainer.parentElement,o=t.getBoundingClientRect;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),Xn(t,{scrollMode:"if-needed"}),t.getBoundingClientRect=o}function pi(n,e,t){const o=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let r=gt(e,o),a,i,{Element:s=ni}=e,{Leaf:l=ri}=e,{Placeholder:f=si}=e,{placeholder:h=void 0}=e,{readOnly:g=!1}=e,{autoFocus:d=!1}=e,{decorate:_=nn}=e,{scrollSelectionIntoView:C=wi}=e,{ref:b=void 0}=e,{spellcheck:D=!0}=e,{autocorrect:w="true"}=e,{autocapitalize:O="true"}=e,{onKeyDown:H=()=>{}}=e;const c=ue(),L=$t();Ae(n,L,u=>t(9,a=u));const oe=en(),j=uo(),K=tn(),B=ho();Ae(n,B,u=>t(10,i=u));const Ue=[],E={isComposing:!1,hasInsertPrefixInCompositon:!0,updateSelectionTimeoutId:null,isDraggingInternally:!1,latestElement:null,readOnly:g};let Te=[],Xe;function hn(){if(E.isComposing||E.isDraggingInternally||E.updateSelectionTimeoutId)Ge();else{const u=Ce(c),p=ae(c,c),k=u.getSelection();if(u.activeElement===p?(t(7,E.latestElement=u.activeElement,E),we.set(c,!0),j.set(!0)):(we.delete(c),j.set(!1)),!k){R.deselect(c);return}const P=x(c,k.anchorNode)||Bt(c,k.anchorNode),M=x(c,k.focusNode)||Bt(c,k.focusNode);if(P&&M){const v=ye(c,k,{exactMatch:!1,suppressThrow:!0});if(v){R.select(c,v);return}}R.deselect(c)}}const Ge=Un(0,()=>mt().then(hn));nt(()=>{const u=ot(b);return u&&($e.set(c,u),u.document.addEventListener("selectionchange",Ge)),Be.set(c,b),Re.set(c,b),qe.set(b,c),()=>{Be.delete(c),Re.delete(c),u&&($e.delete(c),u.document.removeEventListener("selectionchange",Ge))}});function gn(){const u=Ce(c),p=u==null?void 0:u.getSelection();if(E.isComposing||!p||!Et(c))return;const k=p.type!=="None";if(!c.selection&&!k)return;const P=Be.get(c);let M=!1;if(P.contains(p.anchorNode)&&P.contains(p.focusNode)&&(M=!0),k&&M&&c.selection){const de=ye(c,p,{exactMatch:!0,suppressThrow:!0});if(de&&T.equals(de,c.selection))return}if(c.selection&&!co(c,c.selection)){t(36,c.selection=ye(c,p,{exactMatch:!1,suppressThrow:!1}),c),B.set(c.selection);return}const v=c.selection&&M&&We(c,c.selection);v?(T.isBackward(c.selection)?p.setBaseAndExtent(v.endContainer,v.endOffset,v.startContainer,v.startOffset):p.setBaseAndExtent(v.startContainer,v.startOffset,v.endContainer,v.endOffset),C(c,v)):p.removeAllRanges(),E.updateSelectionTimeoutId&&clearTimeout(E.updateSelectionTimeoutId);let Pe=setTimeout(()=>{v&&tt&&ae(c,c).focus(),Object.assign(E,{updateSelectionTimeoutId:null})});Object.assign(E,{updateSelectionTimeoutId:Pe})}qn(()=>mt().then(gn));function mn(u){if(!E.readOnly&&x(c,u.target)){const p=u.inputType,k=u.dataTransfer||u.data||void 0;if(p==="insertCompositionText"||p==="deleteCompositionText")return;let P=!1;if(p==="insertText"&&c.selection&&T.isCollapsed(c.selection)&&u.data&&u.data.length===1&&/[a-z ]/i.test(u.data)&&c.selection.anchor.offset!==0){P=!0,c.marks&&(P=!1);const M=m.above(c,{at:c.selection.anchor,match:v=>m.isInline(c,v),mode:"highest"});if(M){const[,v]=M;m.isEnd(c,c.selection.anchor,v)&&(P=!1)}}if(P||u.preventDefault(),!p.startsWith("delete")||p.startsWith("deleteBy")){const[M]=u.getTargetRanges();if(M){const v=ye(c,M,{exactMatch:!1,suppressThrow:!1});(!c.selection||!T.equals(c.selection,v))&&R.select(c,v)}}if(c.selection&&T.isExpanded(c.selection)&&p.startsWith("delete")){const M=p.endsWith("Backward")?"backward":"forward";m.deleteFragment(c,{direction:M});return}switch(p){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{m.deleteFragment(c);break}case"deleteContent":case"deleteContentForward":{m.deleteForward(c);break}case"deleteContentBackward":{m.deleteBackward(c);break}case"deleteEntireSoftLine":{m.deleteBackward(c,{unit:"line"}),m.deleteForward(c,{unit:"line"});break}case"deleteHardLineBackward":{m.deleteBackward(c,{unit:"block"});break}case"deleteSoftLineBackward":{m.deleteBackward(c,{unit:"line"});break}case"deleteHardLineForward":{m.deleteForward(c,{unit:"block"});break}case"deleteSoftLineForward":{m.deleteForward(c,{unit:"line"});break}case"deleteWordBackward":{m.deleteBackward(c,{unit:"word"});break}case"deleteWordForward":{m.deleteForward(c,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{m.insertBreak(c);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{p==="insertFromComposition"&&E.isComposing&&t(7,E.isComposing=!1,E),(k==null?void 0:k.constructor.name)==="DataTransfer"?c.insertData(k):typeof k=="string"&&(P?Ue.push(()=>m.insertText(c,k)):m.insertText(c,k));break}}}}function _n(u){for(const p of Ue)p();Ue.length=0}function wn(u){if(!E.readOnly&&!E.isComposing&&x(c,u.target)){const p=c.children[c.selection!==null?c.selection.focus.path[0]:0],k=an($.string(p))==="rtl";if(Y.isRedo(u)){u.preventDefault();const P=c;typeof P.redo=="function"&&P.redo()}else if(Y.isUndo(u)){u.preventDefault();const P=c;typeof P.undo=="function"&&P.undo()}else if(Y.isMoveLineBackward(u))u.preventDefault(),R.move(c,{unit:"line",reverse:!0});else if(Y.isMoveLineForward(u))u.preventDefault(),R.move(c,{unit:"line"});else if(Y.isExtendLineBackward(u))u.preventDefault(),R.move(c,{unit:"line",edge:"focus",reverse:!0});else if(Y.isExtendLineForward(u))u.preventDefault(),R.move(c,{unit:"line",edge:"focus"});else if(Y.isMoveBackward(u))u.preventDefault(),c.selection&&T.isCollapsed(c.selection)?R.move(c,{reverse:!k}):R.collapse(c,{edge:"start"});else if(Y.isMoveForward(u))u.preventDefault(),c.selection&&T.isCollapsed(c.selection)?R.move(c,{reverse:k}):R.collapse(c,{edge:"end"});else if(Y.isMoveWordBackward(u))u.preventDefault(),c.selection&&T.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:!k});else if(Y.isMoveWordForward(u))u.preventDefault(),c.selection&&T.isExpanded(c.selection)&&R.collapse(c,{edge:"focus"}),R.move(c,{unit:"word",reverse:k});else if(!kt)Y.isBold(u)||Y.isItalic(u)||Y.isTransposeCharacter(u)?u.preventDefault():Y.isSplitBlock(u)?(u.preventDefault(),m.insertBreak(c)):Y.isDeleteBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c)):Y.isDeleteForward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c)):Y.isDeleteLineBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"line"})):Y.isDeleteLineForward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"line"})):Y.isDeleteWordBackward(u)?(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"backward"}):m.deleteBackward(c,{unit:"word"})):Y.isDeleteWordForward(u)&&(u.preventDefault(),c.selection&&T.isExpanded(c.selection)?m.deleteFragment(c,{direction:"forward"}):m.deleteForward(c,{unit:"word"}));else{if((Ut||Qe)&&c.selection&&(Y.isDeleteBackward(u)||Y.isDeleteForward(u))&&T.isCollapsed(c.selection)){const P=$.parent(c,c.selection.anchor.path);if(Me.isElement(P)&&m.isVoid(c,P)&&m.isInline(c,P)){u.preventDefault(),m.deleteBackward(c,{unit:"block"});return}}return H(u)}}}function pn(u){if(!E.readOnly&&!E.updateSelectionTimeoutId&&x(c,u.target)){const p=ae(c,c),k=Ce(c);if(t(7,E.latestElement=k.activeElement,E),tt&&u.target!==p){p.focus();return}we.set(c,!0),j.set(!0)}}function kn(u){if(E.readOnly||E.updateSelectionTimeoutId||!x(c,u.target))return;const p=Ce(c);if(E.latestElement===p.activeElement)return;const k=u.relatedTarget,P=ae(c,c);if(k!==P&&!(ee(k)&&k.hasAttribute("data-slate-spacer"))){if(k!=null&&fe(k)&&rt(c,k)){const M=se(k);if(Me.isElement(M)&&!c.isVoid(M))return}if(Qe){const M=p.getSelection();M==null||M.removeAllRanges()}we.delete(c),j.set(!1)}}function En(u){if(!E.readOnly&&me(c,u.target)&&fe(u.target)){const p=se(u.target),k=ke(p);if(m.hasPath(c,k)&&$.get(c,k)===p){const M=m.start(c,k),v=m.end(c,k),Pe=m.void(c,{at:M}),de=m.void(c,{at:v});if(Pe&&de&&_e.equals(Pe[1],de[1])){const Bn=m.range(c,M);R.select(c,Bn)}}}}function bn(u){if(x(c,u.target)){t(7,E.isComposing=!1,E);const p=u.data;if(!Qe&&!ro&&!no&&!ao&&p&&m.insertText(c,p),c.selection&&T.isCollapsed(c.selection)){const k=c.selection.anchor.path,P=$.leaf(c,k);E.hasInsertPrefixInCompositon&&(t(7,E.hasInsertPrefixInCompositon=!1,E),m.withoutNormalizing(c,()=>{const M=P.text.replace(/^\uFEFF/,"");R.delete(c,{distance:P.text.length,reverse:!0}),R.insertText(c,M)}))}}}function Cn(u){x(c,u.target)&&t(7,E.isComposing=!0,E)}function yn(u){if(x(c,u.target)&&c.selection){if(T.isExpanded(c.selection)){m.deleteFragment(c);return}const p=m.above(c,{match:k=>m.isInline(c,k),mode:"highest"});if(p){const[,k]=p;if(m.isEnd(c,c.selection.anchor,k)){const P=m.after(c,k);R.setSelection(c,{anchor:P,focus:P})}}c.marks&&(t(7,E.hasInsertPrefixInCompositon=!0,E),R.insertNodes(c,ut({text:"\uFEFF"},c.marks),{select:!0}))}}function Dn(u){!E.readOnly&&x(c,u.target)&&(!kt||Zn(u))&&(u.preventDefault(),c.insertData(u.clipboardData))}function Sn(u){x(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData))}function Ln(u){if(!E.readOnly&&x(c,u.target)&&(u.preventDefault(),c.setFragmentData(u.clipboardData),c.selection))if(T.isExpanded(c.selection))m.deleteFragment(c);else{const p=$.parent(c,c.selection.anchor.path);m.isVoid(c,p)&&R.delete(c)}}function Fn(u){if(me(c,u.target)){const p=se(u.target);m.isVoid(c,p)&&u.preventDefault()}}function On(u){if(!E.readOnly&&me(c,u.target)){const p=se(u.target),k=ke(p);if(m.isVoid(c,p)||m.void(c,{at:k,voids:!0})){const M=m.range(c,k);R.select(c,M)}t(7,E.isDraggingInternally=!0,E),c.setFragmentData(u.dataTransfer)}}function Tn(u){if(!E.readOnly&&me(c,u.target)){u.preventDefault();const p=c.selection,k=so(c,u),P=u.dataTransfer;R.select(c,k),E.isDraggingInternally&&(p&&!T.equals(p,k)&&!m.void(c,{at:k,voids:!0})&&R.delete(c,{at:p}),t(7,E.isDraggingInternally=!1,E)),c.insertData(P),Et(c)||lo(c)}}function Pn(u){!E.readOnly&&E.isDraggingInternally&&me(c,u.target)&&t(7,E.isDraggingInternally=!1,E)}function Nn(u){le[u?"unshift":"push"](()=>{b=u,t(0,b)})}return n.$$set=u=>{e=xe(xe({},e),Yn(u)),t(29,r=gt(e,o)),"Element"in u&&t(1,s=u.Element),"Leaf"in u&&t(2,l=u.Leaf),"Placeholder"in u&&t(3,f=u.Placeholder),"placeholder"in u&&t(30,h=u.placeholder),"readOnly"in u&&t(31,g=u.readOnly),"autoFocus"in u&&t(32,d=u.autoFocus),"decorate"in u&&t(33,_=u.decorate),"scrollSelectionIntoView"in u&&t(34,C=u.scrollSelectionIntoView),"ref"in u&&t(0,b=u.ref),"spellcheck"in u&&t(4,D=u.spellcheck),"autocorrect"in u&&t(5,w=u.autocorrect),"autocapitalize"in u&&t(6,O=u.autocapitalize),"onKeyDown"in u&&t(35,H=u.onKeyDown)},n.$$.update=()=>{if(n.$$.dirty[1]&33&&Ht.set(c,g),n.$$.dirty[1]&1&&oe.set(g),n.$$.dirty[1]&1&&t(7,E.readOnly=g,E),n.$$.dirty[1]&4&&K.set(_),n.$$.dirty[0]&1073742720|n.$$.dirty[1]&36)if(a.children.length===1&&Array.from($.texts(a)).length===1&&$.string(a)===""&&!E.isComposing){const u=m.start(c,[]);t(8,Te=[..._([c,[]]),{[De]:!0,placeholder:h,anchor:u,focus:u}])}else Te.length&&t(8,Te=_([c,[]]));n.$$.dirty[0]&1|n.$$.dirty[1]&66&&Xe!==d&&b&&(d&&b.focus(),t(37,Xe=d))},[b,s,l,f,D,w,O,E,Te,a,i,L,B,mn,_n,wn,pn,kn,En,bn,Cn,yn,Dn,Sn,Ln,Fn,On,Tn,Pn,r,h,g,d,_,C,H,c,Xe,Nn]}class Li extends Q{constructor(e){super();Z(this,e,pi,_i,ie,{Element:1,Leaf:2,Placeholder:3,placeholder:30,readOnly:31,autoFocus:32,decorate:33,scrollSelectionIntoView:34,ref:0,spellcheck:4,autocorrect:5,autocapitalize:6,onKeyDown:35},null,[-1,-1])}}function It(n,e){const t=(e.top+e.bottom)/2;return n.top<=t&&n.bottom>=t}function At(n,e,t){const o=We(n,e).getBoundingClientRect(),r=We(n,t).getBoundingClientRect();return It(o,r)&&It(r,o)}function ki(n,e){const t=m.range(n,T.end(e)),o=Array.from(m.positions(n,{at:e}));let r=0,a=o.length,i=Math.floor(a/2);if(At(n,m.range(n,o[r]),t))return m.range(n,o[r],t);if(o.length<2)return m.range(n,o[o.length-1],t);for(;i!==o.length&&i!==r;)At(n,m.range(n,o[i]),t)?a=i:r=i,i=Math.floor((r+a)/2);return m.range(n,o[a],t)}function Fi(n){const e=n,{apply:t,onChange:o,deleteBackward:r}=e;return Ye.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return r(a);if(n.selection&&T.isCollapsed(n.selection)){const i=m.above(n,{match:s=>m.isBlock(n,s),at:n.selection});if(i){const[,s]=i,l=m.range(n,s,n.selection.anchor),f=ki(e,l);T.isCollapsed(f)||R.delete(n,{at:f})}}},e.apply=a=>{const i=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[s,l]of m.levels(e,{at:a.path})){const f=ce(s);i.push([l,f])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[s,l]of m.levels(e,{at:_e.parent(a.path)})){const f=ce(s);i.push([l,f])}break}case"move_node":{for(const[s,l]of m.levels(e,{at:_e.common(_e.parent(a.path),_e.parent(a.newPath))})){const f=ce(s);i.push([l,f])}break}}t(a);for(const[s,l]of i){const[f]=m.node(e,s);et.set(f,l)}},e.setFragmentData=a=>{const{selection:i}=e;if(!i)return;const[s,l]=T.edges(i),f=m.void(e,{at:s.path}),h=m.void(e,{at:l.path});if(T.isCollapsed(i)&&!f)return;const g=We(e,i);let d=g.cloneContents(),_=d.childNodes[0];if(d.childNodes.forEach(O=>{O.textContent&&O.textContent.trim()!==""&&(_=O)}),h){const[O]=h,H=g.cloneRange(),c=ae(e,O);H.setEndAfter(c),d=H.cloneContents()}if(f&&(_=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(O=>{const H=O.getAttribute("data-slate-zero-width")==="n";O.textContent=H?`
`:""}),vt(_)){const O=document.createElement("span");O.style.whiteSpace="pre",O.appendChild(_),d.appendChild(O),_=O}const C=e.getFragment(),b=JSON.stringify(C),D=window.btoa(encodeURIComponent(b));_.setAttribute("data-slate-fragment",D),a.setData("application/x-slate-fragment",D);const w=document.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),document.body.appendChild(w),a.setData("text/html",w.innerHTML),a.setData("text/plain",Yt(w)),document.body.removeChild(w),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const i=a.getData("application/x-slate-fragment")||to(a);if(i){const s=decodeURIComponent(window.atob(i)),l=JSON.parse(s);return e.insertFragment(l),!0}return!1},e.insertTextData=a=>{const i=a.getData("text/plain");if(i){const s=i.split(/\r\n|\r|\n/);let l=!1;for(const f of s)l&&R.splitNodes(e,{always:!0}),e.insertText(f),l=!0;return!0}return!1},e.onChange=()=>{const a=Kt.get(e);a&&a(),o()},e}export{Li as E,yi as S,Di as a,uo as b,en as c,$t as d,ke as f,ue as g,Si as i,Fi as w};
