import{S as x,i as $,G as ae,_ as Ue,u as P,v as S,w as U,T as F,b as R,t as A,x as X,ab as Xe,H as pe,h as M,j as O,k as y,d as w,l as C,a as G,K as be,L as ve,M as we,O as Y,P as Q,Q as Z,N as J,y as We,n as ie,p as se,Z as z,J as H,ac as De,R as je,q as qe,U as ye,s as le,A as j,B as ue,C as ce,D as te,E as de,F as me,z as he,o as Fe}from"./index-7c29a546.js";import{O as Ie,Q as Ge,n as Ee,R as Ve,E as oe,U as Ke,V as Me,W as Qe,X as Ze,l as Oe,g as Je,m as xe,b as $e,k as et,T as ne,i as tt,Y as nt,Z as ot,_ as it}from"./withSvelte-4ad56d53.js";import{i as st}from"./ImageElement-0bb0a82b.js";import{P as lt,j as rt}from"./MdFormatQuote-84516da8.js";import{I as _e}from"./IconBase-f1ee9f89.js";import"./preload-helper-176e53da.js";const{window:ge}=Xe;function ft(n){let e,t;const i=n[7].default,l=pe(i,n,n[10],null);return{c(){e=M("div"),l&&l.c(),this.h()},l(o){e=O(o,"DIV",{class:!0});var s=y(e);l&&l.l(s),s.forEach(w),this.h()},h(){C(e,"class","hovering-menu svelte-1us4u7o")},m(o,s){G(o,e,s),l&&l.m(e,null),n[9](e),t=!0},p(o,s){l&&l.p&&(!t||s&1024)&&be(l,i,o,o[10],t?we(i,o[10],s,null):ve(o[10]),null)},i(o){t||(R(l,o),t=!0)},o(o){A(l,o),t=!1},d(o){o&&w(e),l&&l.d(o),n[9](null)}}}function at(n){let e,t,i,l;return Ue(n[8]),e=new lt({props:{$$slots:{default:[ft]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(o){S(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0,i||(l=F(ge,"resize",n[8]),i=!0)},p(o,[s]){const r={};s&1025&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){X(e,o),i=!1,l()}}}function Te(n,e,t,i,l,o){const s=window.getSelection();if(!s||s.type.toLowerCase()==="none"){o>0&&setTimeout(()=>{Te(n,e,t,i,l,o-1)},100);return}const f=s.getRangeAt(0).getBoundingClientRect(),u=e.getBoundingClientRect();f.left+window.pageXOffset-n.offsetWidth/2<u.left?n.style.left=`${u.left+window.pageXOffset}px`:f.right+window.pageXOffset+n.offsetWidth/2>u.right?n.style.left=`${u.right+window.pageXOffset-n.offsetWidth}px`:n.style.left=`${f.left+window.pageXOffset-n.offsetWidth/2+f.width/2}px`,f.top+window.pageYOffset-n.offsetHeight<u.top?n.style.top=`${f.bottom+window.pageYOffset+l}px`:n.style.top=`${f.top+window.pageYOffset-n.offsetHeight-l}px`,n.style.opacity="1"}function ut(n,e,t){let{$$slots:i={},$$scope:l}=e,{container:o=void 0}=e,{ref:s=void 0}=e,{open:r=!1}=e,{offsetY:f=4}=e,{retires:u=2}=e,h=640,a=480;function _(){t(1,h=ge.innerWidth),t(2,a=ge.innerHeight)}function b(g){Y[g?"unshift":"push"](()=>{s=g,t(0,s)})}return n.$$set=g=>{"container"in g&&t(3,o=g.container),"ref"in g&&t(0,s=g.ref),"open"in g&&t(4,r=g.open),"offsetY"in g&&t(5,f=g.offsetY),"retires"in g&&t(6,u=g.retires),"$$scope"in g&&t(10,l=g.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&o===void 0&&typeof document<"u"&&t(3,o=document.body),n.$$.dirty&127&&s&&(r?Te(s,o,h,a,f,u):s.removeAttribute("style"))},[s,h,a,o,r,f,u,i,_,b,l]}class Be extends x{constructor(e){super(),$(this,e,ut,at,ae,{container:3,ref:0,open:4,offsetY:5,retires:6})}}function ct(n){let e;const t=n[13].default,i=pe(t,n,n[16],null);return{c(){i&&i.c()},l(l){i&&i.l(l)},m(l,o){i&&i.m(l,o),e=!0},p(l,o){i&&i.p&&(!e||o&65536)&&be(i,t,l,l[16],e?we(t,l[16],o,null):ve(l[16]),null)},i(l){e||(R(i,l),e=!0)},o(l){A(i,l),e=!1},d(l){i&&i.d(l)}}}function dt(n){let e,t,i,l;function o(f){n[14](f)}function s(f){n[15](f)}let r={container:n[1],offsetY:n[2],$$slots:{default:[ct]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.open=n[0]),n[3]!==void 0&&(r.ref=n[3]),e=new Be({props:r}),Y.push(()=>Q(e,"open",o)),Y.push(()=>Q(e,"ref",s)),{c(){P(e.$$.fragment)},l(f){S(e.$$.fragment,f)},m(f,u){U(e,f,u),l=!0},p(f,[u]){const h={};u&2&&(h.container=f[1]),u&4&&(h.offsetY=f[2]),u&65536&&(h.$$scope={dirty:u,ctx:f}),!t&&u&1&&(t=!0,h.open=f[0],Z(()=>t=!1)),!i&&u&8&&(i=!0,h.ref=f[3],Z(()=>i=!1)),e.$set(h)},i(f){l||(R(e.$$.fragment,f),l=!0)},o(f){A(e.$$.fragment,f),l=!1},d(f){X(e,f)}}}function mt(n,e,t){let i,l,o,s,r,f,{$$slots:u={},$$scope:h}=e,{container:a=void 0}=e,{open:_=!1}=e,{offsetY:b=4}=e;const g=Ie();J(n,g,d=>t(12,f=d));const I=Ge();J(n,I,d=>t(11,r=d));const v=Ee();J(n,v,d=>t(10,s=d));let D;function T(d){_=d,t(0,_),t(3,D),t(8,l),t(9,o),t(7,i),t(11,r),t(10,s),t(12,f)}function V(d){D=d,t(3,D)}return n.$$set=d=>{"container"in d&&t(1,a=d.container),"open"in d&&t(0,_=d.open),"offsetY"in d&&t(2,b=d.offsetY),"$$scope"in d&&t(16,h=d.$$scope)},n.$$.update=()=>{if(n.$$.dirty&4096&&t(7,i=f),n.$$.dirty&2048&&t(8,l=r),n.$$.dirty&1024&&t(9,o=s),n.$$.dirty&904&&D)if(!l||!o||Ve.isCollapsed(l)||oe.string(i,l)==="")t(0,_=!1);else{const[d]=Array.from(oe.nodes(i,{at:oe.unhangRange(i,i.selection),match:st}));d||t(0,_=!0)}},[_,a,b,D,g,I,v,i,l,o,s,r,f,u,T,V,h]}class Jt extends x{constructor(e){super(),$(this,e,mt,dt,ae,{container:1,open:0,offsetY:2})}}function ht(n,e){var t;e===void 0&&(e={enabled:!0});var i=e.limit,l=(t=e.enabled)!==null&&t!==void 0?t:!0,o=function(s){n&&!n.contains(s.target)&&!s.defaultPrevented&&(!i||i.parent.contains(s.target))&&n.dispatchEvent(new CustomEvent("clickoutside",{detail:s}))};return e.enabled!==!1&&document.addEventListener("mousedown",o,!0),{update:function(s){var r;!l&&s.enabled?document.addEventListener("mousedown",o,!0):l&&!s.enabled&&document.removeEventListener("mousedown",o,!0),i=s.limit,l=(r=s.enabled)!==null&&r!==void 0?r:!0},destroy:function(){document.removeEventListener("mousedown",o,!0)}}}function _t(n){let e;return{c(){e=ie("Update")},l(t){e=se(t,"Update")},m(t,i){G(t,e,i)},d(t){t&&w(e)}}}function gt(n){let e;return{c(){e=ie("Insert")},l(t){e=se(t,"Insert")},m(t,i){G(t,e,i)},d(t){t&&w(e)}}}function pt(n){let e;return{c(){e=ie("Inline")},l(t){e=se(t,"Inline")},m(t,i){G(t,e,i)},d(t){t&&w(e)}}}function bt(n){let e;return{c(){e=ie("Block")},l(t){e=se(t,"Block")},m(t,i){G(t,e,i)},d(t){t&&w(e)}}}function vt(n){let e,t,i,l,o,s,r,f,u,h,a,_,b,g;function I(E,N){return E[4]?gt:_t}let v=I(n),D=v(n);function T(E,N){return E[2]?bt:pt}let V=T(n),d=V(n);return{c(){e=M("div"),t=M("div"),i=ie(n[3]),l=M("div"),o=M("div"),s=M("div"),r=M("textarea"),f=M("div"),u=M("button"),D.c(),h=M("button"),d.c(),a=M("div"),_=M("span"),this.h()},l(E){e=O(E,"DIV",{class:!0});var N=y(e);t=O(N,"DIV",{class:!0});var B=y(t);i=se(B,n[3]),B.forEach(w),l=O(N,"DIV",{class:!0});var K=y(l);o=O(K,"DIV",{class:!0});var m=y(o);s=O(m,"DIV",{class:!0});var c=y(s);r=O(c,"TEXTAREA",{class:!0}),y(r).forEach(w),c.forEach(w),f=O(m,"DIV",{class:!0});var k=y(f);u=O(k,"BUTTON",{class:!0});var L=y(u);D.l(L),L.forEach(w),h=O(k,"BUTTON",{class:!0});var W=y(h);d.l(W),W.forEach(w),k.forEach(w),a=O(m,"DIV",{class:!0});var q=y(a);_=O(q,"SPAN",{class:!0}),y(_).forEach(w),q.forEach(w),m.forEach(w),K.forEach(w),N.forEach(w),this.h()},h(){C(t,"class","math-editor-title svelte-17vn65m"),C(r,"class","svelte-17vn65m"),C(s,"class","math-editor-latexinput svelte-17vn65m"),C(u,"class","svelte-17vn65m"),z(u,"active",!n[1]),C(h,"class","svelte-17vn65m"),z(h,"active",!n[2]),C(f,"class","math-editor-buttons"),C(_,"class","svelte-17vn65m"),C(a,"class","math-editor-rendering svelte-17vn65m"),C(o,"class","math-editor-math svelte-17vn65m"),C(l,"class","math-editor-content"),C(e,"class","math-editor-body svelte-17vn65m")},m(E,N){G(E,e,N),H(e,t),H(t,i),H(e,l),H(l,o),H(o,s),H(s,r),n[16](r),De(r,n[1]),H(o,f),H(f,u),D.m(u,null),H(f,h),d.m(h,null),H(o,a),H(a,_),n[18](_),n[19](e),b||(g=[F(r,"input",n[17]),F(u,"click",n[10]),F(h,"click",n[11]),je(ht.call(null,e)),F(e,"clickoutside",n[12])],b=!0)},p(E,N){N&8&&qe(i,E[3]),N&2&&De(r,E[1]),v!==(v=I(E))&&(D.d(1),D=v(E),D&&(D.c(),D.m(u,null))),N&2&&z(u,"active",!E[1]),V!==(V=T(E))&&(d.d(1),d=V(E),d&&(d.c(),d.m(h,null))),N&4&&z(h,"active",!E[2])},d(E){E&&w(e),n[16](null),D.d(),d.d(),n[18](null),n[19](null),b=!1,ye(g)}}}function wt(n){let e,t,i;function l(s){n[20](s)}let o={container:n[8],$$slots:{default:[vt]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.open=n[0]),e=new Be({props:o}),Y.push(()=>Q(e,"open",l)),{c(){P(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,r){U(e,s,r),i=!0},p(s,[r]){const f={};r&256&&(f.container=s[8]),r&4194558&&(f.$$scope={dirty:r,ctx:s}),!t&&r&1&&(t=!0,f.open=s[0],Z(()=>t=!1)),e.$set(f)},i(s){i||(R(e.$$.fragment,s),i=!0)},o(s){A(e.$$.fragment,s),i=!1},d(s){X(e,s)}}}function Et(n,e){if(e){let t=e.parentNode;for(;t;){if(n===t)return!0;t=t.parentNode}}return!1}function Ct(n,e,t){let i,l,{open:o=!1}=e,{title:s="LaTeX Editor"}=e,{math:r=""}=e,{inline:f=!0}=e,{isNew:u=!0}=e,{onDone:h}=e;const a=Ke();J(n,a,m=>t(15,l=m));let _=Date.now(),b=o;function g(){t(0,o=!1),h(r,f)}function I(){t(2,f=!f)}let v;function D(){var m;_+500<Date.now()&&!Et(v,(m=window.getSelection())==null?void 0:m.focusNode)&&t(0,o=!1)}let T,V;function d(m){Y[m?"unshift":"push"](()=>{T=m,t(5,T)})}function E(){r=this.value,t(1,r)}function N(m){Y[m?"unshift":"push"](()=>{V=m,t(6,V)})}function B(m){Y[m?"unshift":"push"](()=>{v=m,t(7,v)})}function K(m){o=m,t(0,o)}return n.$$set=m=>{"open"in m&&t(0,o=m.open),"title"in m&&t(3,s=m.title),"math"in m&&t(1,r=m.math),"inline"in m&&t(2,f=m.inline),"isNew"in m&&t(4,u=m.isNew),"onDone"in m&&t(13,h=m.onDone)},n.$$.update=()=>{n.$$.dirty&32768&&t(8,i=l),n.$$.dirty&16385&&b!==o&&(_=Date.now(),t(14,b=o)),n.$$.dirty&71&&o&&V&&Me.render(r,V,{displayMode:!f,output:"html",throwOnError:!1}),n.$$.dirty&33&&o&&T&&We().then(()=>{T.focus()})},[o,r,f,s,u,T,V,v,i,a,g,I,D,h,b,l,d,E,N,B,K]}class Le extends x{constructor(e){super(),$(this,e,Ct,wt,ae,{open:0,title:3,math:1,inline:2,isNew:4,onDone:13})}}function kt(n){let e;return{c(){e=de("path"),this.h()},l(t){e=me(t,"path",{d:!0}),y(e).forEach(w),this.h()},h(){C(e,"d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z")},m(t,i){G(t,e,i)},p:he,d(t){t&&w(e)}}}function Dt(n){let e,t;const i=[{viewBox:"0 0 24 24"},n[0]];let l={$$slots:{default:[kt]},$$scope:{ctx:n}};for(let o=0;o<i.length;o+=1)l=j(l,i[o]);return e=new _e({props:l}),{c(){P(e.$$.fragment)},l(o){S(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,[s]){const r=s&1?ue(i,[i[0],ce(o[0])]):{};s&2&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){X(e,o)}}}function Nt(n,e,t){return n.$$set=i=>{t(0,e=j(j({},e),te(i)))},e=te(e),[e]}class yt extends x{constructor(e){super(),$(this,e,Nt,Dt,le,{})}}function It(n){let e;return{c(){e=de("path"),this.h()},l(t){e=me(t,"path",{d:!0}),y(e).forEach(w),this.h()},h(){C(e,"d","M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z")},m(t,i){G(t,e,i)},p:he,d(t){t&&w(e)}}}function Vt(n){let e,t;const i=[{viewBox:"0 0 24 24"},n[0]];let l={$$slots:{default:[It]},$$scope:{ctx:n}};for(let o=0;o<i.length;o+=1)l=j(l,i[o]);return e=new _e({props:l}),{c(){P(e.$$.fragment)},l(o){S(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,[s]){const r=s&1?ue(i,[i[0],ce(o[0])]):{};s&2&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){X(e,o)}}}function Mt(n,e,t){return n.$$set=i=>{t(0,e=j(j({},e),te(i)))},e=te(e),[e]}class Ot extends x{constructor(e){super(),$(this,e,Mt,Vt,le,{})}}function Tt(n){let e;return{c(){e=de("path"),this.h()},l(t){e=me(t,"path",{d:!0}),y(e).forEach(w),this.h()},h(){C(e,"d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z")},m(t,i){G(t,e,i)},p:he,d(t){t&&w(e)}}}function Bt(n){let e,t;const i=[{viewBox:"0 0 24 24"},n[0]];let l={$$slots:{default:[Tt]},$$scope:{ctx:n}};for(let o=0;o<i.length;o+=1)l=j(l,i[o]);return e=new _e({props:l}),{c(){P(e.$$.fragment)},l(o){S(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,[s]){const r=s&1?ue(i,[i[0],ce(o[0])]):{};s&2&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){X(e,o)}}}function Lt(n,e,t){return n.$$set=i=>{t(0,e=j(j({},e),te(i)))},e=te(e),[e]}class Ht extends x{constructor(e){super(),$(this,e,Lt,Bt,le,{})}}function Rt(n){let e,t,i,l,o,s,r,f,u,h,a,_,b,g,I,v,D,T;function V(c){n[28](c)}function d(c){n[29](c)}function E(c){n[30](c)}function N(c){n[31](c)}let B={onDone:n[17]};n[8]!==void 0&&(B.open=n[8]),n[10]!==void 0&&(B.math=n[10]),n[11]!==void 0&&(B.inline=n[11]),n[12]!==void 0&&(B.isNew=n[12]),e=new Le({props:B}),Y.push(()=>Q(e,"open",V)),Y.push(()=>Q(e,"math",d)),Y.push(()=>Q(e,"inline",E)),Y.push(()=>Q(e,"isNew",N)),a=new yt({}),b=new Ot({}),I=new Ht({});const K=n[27].default,m=pe(K,n,n[26],null);return{c(){P(e.$$.fragment),s=M("div"),r=M("div"),f=M("span"),u=M("div"),h=M("button"),P(a.$$.fragment),_=M("button"),P(b.$$.fragment),g=M("button"),P(I.$$.fragment),m&&m.c(),this.h()},l(c){S(e.$$.fragment,c),s=O(c,"DIV",{class:!0,"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0});var k=y(s);r=O(k,"DIV",{class:!0,contenteditable:!0});var L=y(r);f=O(L,"SPAN",{}),y(f).forEach(w),u=O(L,"DIV",{class:!0});var W=y(u);h=O(W,"BUTTON",{class:!0});var q=y(h);S(a.$$.fragment,q),q.forEach(w),_=O(W,"BUTTON",{class:!0});var re=y(_);S(b.$$.fragment,re),re.forEach(w),g=O(W,"BUTTON",{class:!0});var ee=y(g);S(I.$$.fragment,ee),ee.forEach(w),W.forEach(w),L.forEach(w),m&&m.l(k),k.forEach(w),this.h()},h(){C(h,"class","svelte-1v8xkls"),C(_,"class","svelte-1v8xkls"),C(g,"class","svelte-1v8xkls"),C(u,"class","math-edit svelte-1v8xkls"),z(u,"math-selected",n[13]),C(r,"class","math-value svelte-1v8xkls"),C(r,"contenteditable",!1),z(r,"math-selectable",!n[7]),z(r,"math-inline",n[5]),z(r,"math-selected",n[13]),C(s,"class","math-element svelte-1v8xkls"),C(s,"data-slate-node","element"),C(s,"data-slate-inline",n[1]),C(s,"data-slate-void",n[2]),C(s,"dir",n[4]),C(s,"contenteditable",n[3]),z(s,"math-inline",n[5])},m(c,k){U(e,c,k),G(c,s,k),H(s,r),H(r,f),n[32](f),H(r,u),H(u,h),U(a,h,null),H(u,_),U(b,_,null),H(u,g),U(I,g,null),n[33](u),m&&m.m(s,null),n[34](s),v=!0,D||(T=[F(h,"mousedown",n[20]),F(h,"touchstart",n[20],{passive:!0}),F(_,"mousedown",n[19]),F(_,"touchstart",n[19],{passive:!0}),F(g,"mousedown",n[18]),F(g,"touchstart",n[18],{passive:!0})],D=!0)},p(c,k){const L={};!t&&k[0]&256&&(t=!0,L.open=c[8],Z(()=>t=!1)),!i&&k[0]&1024&&(i=!0,L.math=c[10],Z(()=>i=!1)),!l&&k[0]&2048&&(l=!0,L.inline=c[11],Z(()=>l=!1)),!o&&k[0]&4096&&(o=!0,L.isNew=c[12],Z(()=>o=!1)),e.$set(L),(!v||k[0]&8192)&&z(u,"math-selected",c[13]),(!v||k[0]&128)&&z(r,"math-selectable",!c[7]),(!v||k[0]&32)&&z(r,"math-inline",c[5]),(!v||k[0]&8192)&&z(r,"math-selected",c[13]),m&&m.p&&(!v||k[0]&67108864)&&be(m,K,c,c[26],v?we(K,c[26],k,null):ve(c[26]),null),(!v||k[0]&2)&&C(s,"data-slate-inline",c[1]),(!v||k[0]&4)&&C(s,"data-slate-void",c[2]),(!v||k[0]&16)&&C(s,"dir",c[4]),(!v||k[0]&8)&&C(s,"contenteditable",c[3]),(!v||k[0]&32)&&z(s,"math-inline",c[5])},i(c){v||(R(e.$$.fragment,c),R(a.$$.fragment,c),R(b.$$.fragment,c),R(I.$$.fragment,c),R(m,c),v=!0)},o(c){A(e.$$.fragment,c),A(a.$$.fragment,c),A(b.$$.fragment,c),A(I.$$.fragment,c),A(m,c),v=!1},d(c){X(e,c),c&&w(s),n[32](null),X(a),X(b),X(I),n[33](null),m&&m.d(c),n[34](null),D=!1,ye(T)}}}const Ce="math";function Ne(n){return n.type===Ce}function xt(n){const{isVoid:e,isInline:t,insertBreak:i}=n;return n.isInline=l=>Ne(l)?!!l.inline:t(l),n.isVoid=l=>Ne(l)?!0:e(l),n.insertBreak=()=>{!n.selection||!Ve.isCollapsed(n.selection)?i():oe.isVoid(n,Qe.get(n,Ze.parent(n.selection.anchor.path)))?oe.insertNode(n,{type:Oe,children:[{text:""}]}):i()},n}function At(n,e,t,i){const l={type:Ce,math:e,inline:t,children:[{text:""}]};t?oe.withoutNormalizing(n,()=>{ne.insertNodes(n,l,{at:i})}):ne.insertNodes(n,l,{at:i})}function Yt(n,e,t){let i,l,o,s,r,f,{$$slots:u={},$$scope:h}=e,{element:a}=e,{isInline:_}=e,{isVoid:b}=e,{contenteditable:g}=e,{ref:I=void 0}=e,{dir:v=void 0}=e;const D=Je(),T=xe();J(n,T,p=>t(24,r=p));const V=Ee();J(n,V,p=>t(23,s=p));const d=$e();J(n,d,p=>t(25,f=p));let E=a.math,N=a.inline,B=!1;function K(p,fe){if(a.inline!==fe){m();const ke={type:"math",math:p,inline:fe,children:[{text:""}]};fe?ne.insertNodes(D,{type:Oe,children:[ke]},{at:o}):ne.insertNodes(D,ke,{at:o.slice(0,-1)})}else ne.setNodes(D,{math:p,inline:fe},{at:o}),t(8,B=!1);t(12,q=!0)}function m(){t(8,B=!1),ne.delete(D,{at:o})}function c(){navigator.clipboard.writeText(E)}let k,L=E,W=N,q;function re(){tt(D)||(t(10,L=E),t(11,W=N),nt(k),t(8,B=!0),t(12,q=!1))}let ee;function He(p){B=p,t(8,B)}function Re(p){L=p,t(10,L)}function Ae(p){W=p,t(11,W)}function Ye(p){q=p,t(12,q)}function ze(p){Y[p?"unshift":"push"](()=>{ee=p,t(6,ee)})}function Pe(p){Y[p?"unshift":"push"](()=>{k=p,t(9,k)})}function Se(p){Y[p?"unshift":"push"](()=>{I=p,t(0,I)})}return n.$$set=p=>{"element"in p&&t(21,a=p.element),"isInline"in p&&t(1,_=p.isInline),"isVoid"in p&&t(2,b=p.isVoid),"contenteditable"in p&&t(3,g=p.contenteditable),"ref"in p&&t(0,I=p.ref),"dir"in p&&t(4,v=p.dir),"$$scope"in p&&t(26,h=p.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&33554432&&t(7,i=f),n.$$.dirty[0]&25165952&&t(13,l=i?!1:r&&s),n.$$.dirty[0]&2097152&&(o=et(a)),n.$$.dirty[0]&6291456&&E!==a.math&&t(22,E=a.math),n.$$.dirty[0]&2097184&&N!==a.inline&&t(5,N=a.inline),n.$$.dirty[0]&4194400&&ee&&Me.render(E,ee,{displayMode:!N,output:"html",throwOnError:!1})},[I,_,b,g,v,N,ee,i,B,k,L,W,q,l,T,V,d,K,m,c,re,a,E,s,r,f,h,u,He,Re,Ae,Ye,ze,Pe,Se]}class $t extends x{constructor(e){super(),$(this,e,Yt,Rt,ae,{element:21,isInline:1,isVoid:2,contenteditable:3,ref:0,dir:4},null,[-1,-1])}}function en(n,e=500){let t=null;function i(){t=setTimeout(()=>{n.dispatchEvent(new CustomEvent("longpress"))},e)}function l(){t!==null&&(clearTimeout(t),t=null)}return n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),n.addEventListener("mouseup",l),n.addEventListener("touchend",l),{update(o){l(),e=o},destroy(){l(),n.removeEventListener("mousedown",i),n.removeEventListener("touchstart",i),n.removeEventListener("mouseup",l),n.removeEventListener("touchend",l)}}}function zt(n){let e;return{c(){e=de("path"),this.h()},l(t){e=me(t,"path",{d:!0}),y(e).forEach(w),this.h()},h(){C(e,"d","M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z")},m(t,i){G(t,e,i)},p:he,d(t){t&&w(e)}}}function Pt(n){let e,t;const i=[{viewBox:"0 0 24 24"},n[0]];let l={$$slots:{default:[zt]},$$scope:{ctx:n}};for(let o=0;o<i.length;o+=1)l=j(l,i[o]);return e=new _e({props:l}),{c(){P(e.$$.fragment)},l(o){S(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,[s]){const r=s&1?ue(i,[i[0],ce(o[0])]):{};s&2&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){A(e.$$.fragment,o),t=!1},d(o){X(e,o)}}}function St(n,e,t){return n.$$set=i=>{t(0,e=j(j({},e),te(i)))},e=te(e),[e]}class Ut extends x{constructor(e){super(),$(this,e,St,Pt,le,{})}}function Xt(n){let e,t;return e=new Ut({}),{c(){P(e.$$.fragment)},l(i){S(e.$$.fragment,i)},m(i,l){U(e,i,l),t=!0},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){X(e,i)}}}function Wt(n){let e,t,i,l,o,s;function r(a){n[11](a)}function f(a){n[12](a)}function u(a){n[13](a)}let h={onDone:n[7]};return n[0]!==void 0&&(h.open=n[0]),n[1]!==void 0&&(h.math=n[1]),n[2]!==void 0&&(h.inline=n[2]),e=new Le({props:h}),Y.push(()=>Q(e,"open",r)),Y.push(()=>Q(e,"math",f)),Y.push(()=>Q(e,"inline",u)),o=new rt({props:{active:n[3],onMouseDown:n[6],$$slots:{default:[Xt]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment),P(o.$$.fragment)},l(a){S(e.$$.fragment,a),S(o.$$.fragment,a)},m(a,_){U(e,a,_),U(o,a,_),s=!0},p(a,[_]){const b={};!t&&_&1&&(t=!0,b.open=a[0],Z(()=>t=!1)),!i&&_&2&&(i=!0,b.math=a[1],Z(()=>i=!1)),!l&&_&4&&(l=!0,b.inline=a[2],Z(()=>l=!1)),e.$set(b);const g={};_&8&&(g.active=a[3]),_&131072&&(g.$$scope={dirty:_,ctx:a}),o.$set(g)},i(a){s||(R(e.$$.fragment,a),R(o.$$.fragment,a),s=!0)},o(a){A(e.$$.fragment,a),A(o.$$.fragment,a),s=!1},d(a){X(e,a),X(o,a)}}}function jt(n,e,t){let i,l,o,s,r;const f=Ie();J(n,f,d=>t(10,r=d));const u=Ee();J(n,u,d=>t(9,s=d));let h,a=!1,_="",b=!0;function g(){h=i.selection?i.selection.anchor||i.selection.focus:void 0,t(1,_=""),t(2,b=!0),t(0,a=!a)}function I(d,E){At(i,d,E,h)}function v(d){it("ctrl+m",d)&&(l?(h=i.selection?i.selection.anchor||i.selection.focus:void 0,t(1,_=""),t(2,b=!0),t(0,a=!0)):t(0,a=!1))}Fe(()=>(document.body.addEventListener("keydown",v),()=>{document.body.removeEventListener("keydown",v)}));function D(d){a=d,t(0,a)}function T(d){_=d,t(1,_)}function V(d){b=d,t(2,b)}return n.$$.update=()=>{n.$$.dirty&1024&&t(8,i=r),n.$$.dirty&512&&(l=s),n.$$.dirty&256&&t(3,o=ot(i,Ce))},[a,_,b,o,f,u,g,I,i,s,r,D,T,V]}class tn extends x{constructor(e){super(),$(this,e,jt,Wt,le,{})}}export{Jt as H,Ce as M,$t as a,tn as b,en as l,xt as w};
