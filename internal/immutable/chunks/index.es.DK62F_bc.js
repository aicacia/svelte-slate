var ga=Object.defineProperty;var ha=(t,e,r)=>e in t?ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Kr=(t,e,r)=>(ha(t,typeof e!="symbol"?e+"":e,r),r);import{z as du,X as Ca,Y as ma,n as Ue,N as _t,Q as It,R as kt,S as Mt,Z as va,_ as gu,e as Ve,c as He,k as Ye,d as K,v as J,E as Ba,i as te,$ as pa,q as $,b as Je,t as $t,l as er,m as hu,o as Cu,a as vt,a0 as Ea,x as Pe,p as et,a1 as Aa,h as mu,j as tr,T as Er,a2 as Ur,a3 as Yr,W as ge,a4 as Gr,u as Fa,r as wa,y as Xr,U as ba}from"./scheduler.D7I3SLiv.js";import{d as W,t as z,S as Se,i as Ne,g as Fe,f as we,c as ue,a as ve,m as ae,e as se,b as Kt}from"./index.D4X93WYU.js";import{g as ya}from"./spread.CgU5AtxT.js";import{w as Oa}from"./index.GWXep99W.js";function Ut(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function vu(t,e){W(t,1,1,()=>{e.delete(t.key)})}function Bu(t,e,r,n,u,a,s,o,i,l,c,d){let g=t.length,h=a.length,v=g;const E={};for(;v--;)E[t[v].key]=v;const B=[],F=new Map,A=new Map,b=[];for(v=h;v--;){const S=d(u,a,v),D=r(S);let L=s.get(D);L?n&&b.push(()=>L.p(S,e)):(L=l(D,S),L.c()),F.set(D,B[v]=L),D in E&&A.set(D,Math.abs(v-E[D]))}const O=new Set,y=new Set;function N(S){z(S,1),S.m(o,c),s.set(S.key,S),c=S.first,h--}for(;g&&h;){const S=B[h-1],D=t[g-1],L=S.key,_=D.key;S===D?(c=S.first,g--,h--):F.has(_)?!s.has(L)||O.has(L)?N(S):y.has(_)?g--:A.get(L)>A.get(_)?(y.add(L),N(S)):(O.add(_),g--):(i(D,s),g--)}for(;g--;){const S=t[g];F.has(S.key)||i(S,s)}for(;h;)N(B[h-1]);return du(b),B}const rr=new WeakMap,nr=new WeakMap,Ar=new WeakMap,Vt=new WeakMap,ur=new WeakMap,Yt=new WeakMap,Fr=new WeakMap,ar=new WeakMap,pu=new WeakMap,ht=new WeakMap,wr=new WeakMap,St=Symbol("placeholder");/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Jr(t){return Object.prototype.toString.call(t)==="[object Object]"}function me(t){var e,r;return Jr(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Jr(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}var Eu=Symbol.for("immer-nothing"),Zr=Symbol.for("immer-draftable"),Re=Symbol.for("immer-state");function ze(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Bt=Object.getPrototypeOf;function it(t){return!!t&&!!t[Re]}function ot(t){var e;return t?Au(t)||Array.isArray(t)||!!t[Zr]||!!((e=t.constructor)!=null&&e[Zr])||ir(t)||or(t):!1}var Pa=Object.prototype.constructor.toString();function Au(t){if(!t||typeof t!="object")return!1;const e=Bt(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Pa}function Nt(t,e){sr(t)===0?Object.entries(t).forEach(([r,n])=>{e(r,n,t)}):t.forEach((r,n)=>e(n,r,t))}function sr(t){const e=t[Re];return e?e.type_:Array.isArray(t)?1:ir(t)?2:or(t)?3:0}function br(t,e){return sr(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Fu(t,e,r){const n=sr(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Sa(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ir(t){return t instanceof Map}function or(t){return t instanceof Set}function ut(t){return t.copy_||t.base_}function yr(t,e){if(ir(t))return new Map(t);if(or(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&Au(t))return Bt(t)?{...t}:Object.assign(Object.create(null),t);const r=Object.getOwnPropertyDescriptors(t);delete r[Re];let n=Reflect.ownKeys(r);for(let u=0;u<n.length;u++){const a=n[u],s=r[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[a]})}return Object.create(Bt(t),r)}function xr(t,e=!1){return lr(t)||it(t)||!ot(t)||(sr(t)>1&&(t.set=t.add=t.clear=t.delete=Na),Object.freeze(t),e&&Nt(t,(r,n)=>xr(n,!0))),t}function Na(){ze(2)}function lr(t){return Object.isFrozen(t)}var Ta={};function lt(t){const e=Ta[t];return e||ze(0,t),e}var Tt;function wu(){return Tt}function xa(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qr(t,e){e&&(lt("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Or(t){Pr(t),t.drafts_.forEach(Ra),t.drafts_=null}function Pr(t){t===Tt&&(Tt=t.parent_)}function $r(t){return Tt=xa(Tt,t)}function Ra(t){const e=t[Re];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function en(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Re].modified_&&(Or(e),ze(4)),ot(t)&&(t=Gt(e,t),e.parent_||Xt(e,t)),e.patches_&&lt("Patches").generateReplacementPatches_(r[Re].base_,t,e.patches_,e.inversePatches_)):t=Gt(e,r,[]),Or(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Eu?t:void 0}function Gt(t,e,r){if(lr(e))return e;const n=e[Re];if(!n)return Nt(e,(u,a)=>tn(t,n,e,u,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Xt(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const u=n.copy_;let a=u,s=!1;n.type_===3&&(a=new Set(u),u.clear(),s=!0),Nt(a,(o,i)=>tn(t,n,u,o,i,r,s)),Xt(t,u,!1),r&&t.patches_&&lt("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function tn(t,e,r,n,u,a,s){if(it(u)){const o=a&&e&&e.type_!==3&&!br(e.assigned_,n)?a.concat(n):void 0,i=Gt(t,u,o);if(Fu(r,n,i),it(i))t.canAutoFreeze_=!1;else return}else s&&r.add(u);if(ot(u)&&!lr(u)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Gt(t,u),(!e||!e.scope_.parent_)&&Xt(t,u)}}function Xt(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&xr(e,r)}function ja(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:wu(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=n,a=Rr;r&&(u=[n],a=xt);const{revoke:s,proxy:o}=Proxy.revocable(u,a);return n.draft_=o,n.revoke_=s,o}var Rr={get(t,e){if(e===Re)return t;const r=ut(t);if(!br(r,e))return _a(t,r,e);const n=r[e];return t.finalized_||!ot(n)?n:n===dr(t.base_,e)?(gr(t),t.copy_[e]=Nr(n,t)):n},has(t,e){return e in ut(t)},ownKeys(t){return Reflect.ownKeys(ut(t))},set(t,e,r){const n=bu(ut(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const u=dr(ut(t),e),a=u==null?void 0:u[Re];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Sa(r,u)&&(r!==void 0||br(t.base_,e)))return!0;gr(t),Sr(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return dr(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,gr(t),Sr(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=ut(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){ze(11)},getPrototypeOf(t){return Bt(t.base_)},setPrototypeOf(){ze(12)}},xt={};Nt(Rr,(t,e)=>{xt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});xt.deleteProperty=function(t,e){return xt.set.call(this,t,e,void 0)};xt.set=function(t,e,r){return Rr.set.call(this,t[0],e,r,t[0])};function dr(t,e){const r=t[Re];return(r?ut(r):t)[e]}function _a(t,e,r){var u;const n=bu(e,r);return n?"value"in n?n.value:(u=n.get)==null?void 0:u.call(t.draft_):void 0}function bu(t,e){if(!(e in t))return;let r=Bt(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Bt(r)}}function Sr(t){t.modified_||(t.modified_=!0,t.parent_&&Sr(t.parent_))}function gr(t){t.copy_||(t.copy_=yr(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Ia=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const s=this;return function(i=a,...l){return s.produce(i,c=>r.call(this,c,...l))}}typeof r!="function"&&ze(6),n!==void 0&&typeof n!="function"&&ze(7);let u;if(ot(e)){const a=$r(this),s=Nr(e,void 0);let o=!0;try{u=r(s),o=!1}finally{o?Or(a):Pr(a)}return Qr(a,n),en(u,a)}else if(!e||typeof e!="object"){if(u=r(e),u===void 0&&(u=e),u===Eu&&(u=void 0),this.autoFreeze_&&xr(u,!0),n){const a=[],s=[];lt("Patches").generateReplacementPatches_(e,u,a,s),n(a,s)}return u}else ze(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,i=>e(i,...o));let n,u;return[this.produce(e,r,(s,o)=>{n=s,u=o}),n,u]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ot(t)||ze(8),it(t)&&(t=ka(t));const e=$r(this),r=Nr(t,void 0);return r[Re].isManual_=!0,Pr(e),r}finishDraft(t,e){const r=t&&t[Re];(!r||!r.isManual_)&&ze(9);const{scope_:n}=r;return Qr(n,e),en(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const u=e[r];if(u.path.length===0&&u.op==="replace"){t=u.value;break}}r>-1&&(e=e.slice(r+1));const n=lt("Patches").applyPatches_;return it(t)?n(t,e):this.produce(t,u=>n(u,e))}};function Nr(t,e){const r=ir(t)?lt("MapSet").proxyMap_(t,e):or(t)?lt("MapSet").proxySet_(t,e):ja(t,e);return(e?e.scope_:wu()).drafts_.push(r),r}function ka(t){return it(t)||ze(10,t),yu(t)}function yu(t){if(!ot(t)||lr(t))return t;const e=t[Re];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=yr(t,e.scope_.immer_.useStrictShallowCopy_)}else r=yr(t,!0);return Nt(r,(n,u)=>{Fu(r,n,yu(u))}),e&&(e.finalized_=!1),r}var je=new Ia,jr=je.produce;je.produceWithPatches.bind(je);je.setAutoFreeze.bind(je);je.setUseStrictShallowCopy.bind(je);je.applyPatches.bind(je);var rn=je.createDraft.bind(je),nn=je.finishDraft.bind(je),Ma={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var u=C.transform(r,e,{affinity:n});t.current=u,u==null&&t.unref()}}},La={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var u=X.transform(r,e,{affinity:n});t.current=u,u==null&&t.unref()}}},qa={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var u=p.transform(r,e,{affinity:n});t.current=u,u==null&&t.unref()}}},Jt=new WeakMap,Zt=new WeakMap,Pt=new WeakMap,Ou=new WeakMap,un=new WeakMap,an=new WeakMap,sn=new WeakMap,C={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=C.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var u=t[n],a=e[n];if(u!==a)break;r.push(u)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),u=e.slice(0,r),a=t[r],s=e[r];return C.equals(n,u)&&a>s},endsAt(t,e){var r=t.length,n=t.slice(0,r),u=e.slice(0,r);return C.equals(n,u)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),u=e.slice(0,r),a=t[r],s=e[r];return C.equals(n,u)&&a<s},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return C.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&C.compare(t,e)===0},isBefore(t,e){return C.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&C.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&C.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&C.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&C.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),u=t[t.length-1],a=e[e.length-1];return u!==a&&C.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],u=0;u<=t.length;u++)n.push(t.slice(0,u));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!C.isAncestor(e,t)&&!C.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:u="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(C.equals(a,n)||C.endsBefore(a,n)||C.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(C.equals(s,n)||C.isAncestor(s,n))return null;C.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:o,position:i}=e;C.equals(o,n)||C.endsBefore(o,n)?n[o.length-1]-=1:C.isAncestor(o,n)&&(n[o.length-1]-=1,n[o.length]+=i);break}case"split_node":{var{path:l,position:c}=e;if(C.equals(l,n)){if(u==="forward")n[n.length-1]+=1;else if(u!=="backward")return null}else C.endsBefore(l,n)?n[l.length-1]+=1:C.isAncestor(l,n)&&t[l.length]>=c&&(n[l.length-1]+=1,n[l.length]-=c);break}case"move_node":{var{path:d,newPath:g}=e;if(C.equals(d,g))return n;if(C.isAncestor(d,n)||C.equals(d,n)){var h=g.slice();return C.endsBefore(d,g)&&d.length<g.length&&(h[d.length-1]-=1),h.concat(n.slice(d.length))}else C.isSibling(d,g)&&(C.isAncestor(g,n)||C.equals(g,n))?C.endsBefore(d,n)?n[d.length-1]-=1:n[d.length-1]+=1:C.endsBefore(g,n)||C.equals(g,n)||C.isAncestor(g,n)?(C.endsBefore(d,n)&&(n[d.length-1]-=1),n[g.length-1]+=1):C.endsBefore(d,n)&&(C.equals(g,n)&&(n[g.length-1]+=1),n[d.length-1]-=1);break}}return n}};function Rt(t){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(t)}function za(t,e){if(Rt(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rt(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wa(t){var e=za(t,"string");return Rt(e)==="symbol"?e:String(e)}function be(t,e,r){return e=Wa(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function on(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function wt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?on(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Va=(t,e,r)=>{switch(r.type){case"insert_node":{var{path:n,node:u}=r,a=P.parent(t,n),s=n[n.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(s,0,u),e)for(var[o,i]of p.points(e))e[i]=X.transform(o,r);break}case"insert_text":{var{path:l,offset:c,text:d}=r;if(d.length===0)break;var g=P.leaf(t,l),h=g.text.slice(0,c),v=g.text.slice(c);if(g.text=h+d+v,e)for(var[E,B]of p.points(e))e[B]=X.transform(E,r);break}case"merge_node":{var{path:F}=r,A=P.get(t,F),b=C.previous(F),O=P.get(t,b),y=P.parent(t,F),N=F[F.length-1];if(R.isText(A)&&R.isText(O))O.text+=A.text;else if(!R.isText(A)&&!R.isText(O))O.children.push(...A.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(F,"] to nodes of different interfaces: ").concat(xe.stringify(A)," ").concat(xe.stringify(O)));if(y.children.splice(N,1),e)for(var[S,D]of p.points(e))e[D]=X.transform(S,r);break}case"move_node":{var{path:L,newPath:_}=r;if(C.isAncestor(L,_))throw new Error("Cannot move a path [".concat(L,"] to new path [").concat(_,"] because the destination is inside itself."));var U=P.get(t,L),Z=P.parent(t,L),k=L[L.length-1];Z.children.splice(k,1);var Y=C.transform(L,r),ie=P.get(t,C.parent(Y)),T=Y[Y.length-1];if(ie.children.splice(T,0,U),e)for(var[V,ce]of p.points(e))e[ce]=X.transform(V,r);break}case"remove_node":{var{path:ee}=r,le=ee[ee.length-1],Ee=P.parent(t,ee);if(Ee.children.splice(le,1),e)for(var[de,Be]of p.points(e)){var ye=X.transform(de,r);if(e!=null&&ye!=null)e[Be]=ye;else{var H=void 0,re=void 0;for(var[Ae,Oe]of P.texts(t))if(C.compare(Oe,ee)===-1)H=[Ae,Oe];else{re=[Ae,Oe];break}var Ce=!1;H&&re&&(C.equals(re[1],ee)?Ce=!C.hasPrevious(re[1]):Ce=C.common(H[1],ee).length<C.common(re[1],ee).length),H&&!Ce?(de.path=H[1],de.offset=H[0].text.length):re?(de.path=re[1],de.offset=0):e=null}}break}case"remove_text":{var{path:pe,offset:_e,text:Ie}=r;if(Ie.length===0)break;var ke=P.leaf(t,pe),De=ke.text.slice(0,_e),Qe=ke.text.slice(_e+Ie.length);if(ke.text=De+Qe,e)for(var[Dt,fr]of p.points(e))e[fr]=X.transform(Dt,r);break}case"set_node":{var{path:Lt,properties:cr,newProperties:Ft}=r;if(Lt.length===0)throw new Error("Cannot set properties on the root node!");var m=P.get(t,Lt);for(var x in Ft){if(x==="children"||x==="text")throw new Error('Cannot set the "'.concat(x,'" property of nodes!'));var I=Ft[x];I==null?delete m[x]:m[x]=I}for(var Q in cr)Ft.hasOwnProperty(Q)||delete m[Q];break}case"set_selection":{var{newProperties:M}=r;if(M==null)e=M;else{if(e==null){if(!p.isRange(M))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(xe.stringify(M)," when there is no current selection."));e=wt({},M)}for(var G in M){var rt=M[G];if(rt==null){if(G==="anchor"||G==="focus")throw new Error('Cannot remove the "'.concat(G,'" selection property'));delete e[G]}else e[G]=rt}}break}case"split_node":{var{path:Te,position:dt,properties:Hr}=r;if(Te.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Te,"] because the root node cannot be split."));var nt=P.get(t,Te),sa=P.parent(t,Te),ia=Te[Te.length-1],Dr;if(R.isText(nt)){var oa=nt.text.slice(0,dt),la=nt.text.slice(dt);nt.text=oa,Dr=wt(wt({},Hr),{},{text:la})}else{var fa=nt.children.slice(0,dt),ca=nt.children.slice(dt);nt.children=fa,Dr=wt(wt({},Hr),{},{children:ca})}if(sa.children.splice(ia+1,0,Dr),e)for(var[Da,da]of p.points(e))e[da]=X.transform(Da,r);break}}return e},Ha={transform(t,e){t.children=rn(t.children);var r=t.selection&&rn(t.selection);try{r=Va(t,r,e)}finally{t.children=nn(t.children),r?t.selection=it(r)?nn(r):r:t.selection=null}}},Ka={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},Ua={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},Pu=(t,e)=>{for(var r in t){var n=t[r],u=e[r];if(me(n)&&me(u)){if(!Pu(n,u))return!1}else if(Array.isArray(n)&&Array.isArray(u)){if(n.length!==u.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==u[a])return!1}else if(n!==u)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function Ya(t,e){if(t==null)return{};var r={},n=Object.keys(t),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function Ze(t,e){if(t==null)return{};var r=Ya(t,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Ga=["anchor","focus"];function ln(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function Xa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ln(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ln(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var p={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:u}=t;return p.isBackward(t)===r?[n,u]:[u,n]},end(t){var[,e]=p.edges(t);return e},equals(t,e){return X.equals(t.anchor,e.anchor)&&X.equals(t.focus,e.focus)},includes(t,e){if(p.isRange(e)){if(p.includes(t,e.anchor)||p.includes(t,e.focus))return!0;var[r,n]=p.edges(t),[u,a]=p.edges(e);return X.isBefore(r,u)&&X.isAfter(n,a)}var[s,o]=p.edges(t),i=!1,l=!1;return X.isPoint(e)?(i=X.compare(e,s)>=0,l=X.compare(e,o)<=0):(i=C.compare(e,s.path)>=0,l=C.compare(e,o.path)<=0),i&&l},intersection(t,e){var r=Ze(t,Ga),[n,u]=p.edges(t),[a,s]=p.edges(e),o=X.isBefore(n,a)?a:n,i=X.isBefore(u,s)?u:s;return X.isBefore(i,o)?null:Xa({anchor:o,focus:i},r)},isBackward(t){var{anchor:e,focus:r}=t;return X.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return X.equals(e,r)},isExpanded(t){return!p.isCollapsed(t)},isForward(t){return!p.isBackward(t)},isRange(t){return me(t)&&X.isPoint(t.anchor)&&X.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=p.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return jr(t,n=>{if(n===null)return null;var{affinity:u="inward"}=r,a,s;if(u==="inward"){var o=p.isCollapsed(n);p.isForward(n)?(a="forward",s=o?a:"backward"):(a="backward",s=o?a:"forward")}else u==="outward"?p.isForward(n)?(a="backward",s="forward"):(a="forward",s="backward"):(a=u,s=u);var i=X.transform(n.anchor,e,{affinity:a}),l=X.transform(n.focus,e,{affinity:s});if(!i||!l)return null;n.anchor=i,n.focus=l})}},fn=t=>me(t)&&P.isNodeList(t.children)&&!f.isEditor(t),j={isAncestor(t){return me(t)&&P.isNodeList(t.children)},isElement:fn,isElementList(t){return Array.isArray(t)&&t.every(e=>j.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return fn(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},Ja=["children"],Za=["text"],cn=new WeakMap,P={ancestor(t,e){var r=P.get(t,e);if(R.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(xe.stringify(r)));return r},ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of C.ancestors(e,r)){var u=P.ancestor(t,n),a=[u,n];yield a}}()},child(t,e){if(R.isText(t))throw new Error("Cannot get the child of a text node: ".concat(xe.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(xe.stringify(t)));return r},children(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=r,u=P.ancestor(t,e),{children:a}=u,s=n?a.length-1:0;n?s>=0:s<a.length;){var o=P.child(u,s),i=e.concat(s);yield[o,i],s=n?s-1:s+1}}()},common(t,e,r){var n=C.common(e,r),u=P.get(t,n);return[u,n]},descendant(t,e){var r=P.get(t,e);if(f.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(xe.stringify(r)));return r},descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,n]of P.nodes(t,e))n.length!==0&&(yield[r,n])}()},elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,n]of P.nodes(t,e))j.isElement(r)&&(yield[r,n])}()},extractProps(t){if(j.isAncestor(t)){var e=Ze(t,Ja);return e}else{var e=Ze(t,Za);return e}},first(t,e){for(var r=e.slice(),n=P.get(t,r);n&&!(R.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){if(R.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(xe.stringify(t)));var r=jr({children:t.children},n=>{var[u,a]=p.edges(e),s=P.nodes(n,{reverse:!0,pass:g=>{var[,h]=g;return!p.includes(e,h)}});for(var[,o]of s){if(!p.includes(e,o)){var i=P.parent(n,o),l=o[o.length-1];i.children.splice(l,1)}if(C.equals(o,a.path)){var c=P.leaf(n,o);c.text=c.text.slice(0,a.offset)}if(C.equals(o,u.path)){var d=P.leaf(n,o);d.text=d.text.slice(u.offset)}}f.isEditor(n)&&(n.selection=null)});return r.children},get(t,e){for(var r=t,n=0;n<e.length;n++){var u=e[n];if(R.isText(r)||!r.children[u])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(xe.stringify(t)));r=r.children[u]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var u=e[n];if(R.isText(r)||!r.children[u])return!1;r=r.children[u]}return!0},isNode(t){return R.isText(t)||j.isElement(t)||f.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=cn.get(t);if(e!==void 0)return e;var r=t.every(n=>P.isNode(n));return cn.set(t,r),r},last(t,e){for(var r=e.slice(),n=P.get(t,r);n&&!(R.isText(n)||n.children.length===0);){var u=n.children.length-1;n=n.children[u],r.push(u)}return[n,r]},leaf(t,e){var r=P.get(t,e);if(!R.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(xe.stringify(r)));return r},levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of C.levels(e,r)){var u=P.get(t,n);yield[u,n]}}()},matches(t,e){return j.isElement(t)&&j.isElementProps(e)&&j.matches(t,e)||R.isText(t)&&R.isTextProps(e)&&R.matches(t,e)},nodes(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:r,reverse:n=!1}=e,{from:u=[],to:a}=e,s=new Set,o=[],i=t;!(a&&(n?C.isBefore(o,a):C.isAfter(o,a)));){if(s.has(i)||(yield[i,o]),!s.has(i)&&!R.isText(i)&&i.children.length!==0&&(r==null||r([i,o])===!1)){s.add(i);var l=n?i.children.length-1:0;C.isAncestor(o,u)&&(l=u[o.length]),o=o.concat(l),i=P.get(t,o);continue}if(o.length===0)break;if(!n){var c=C.next(o);if(P.has(t,c)){o=c,i=P.get(t,o);continue}}if(n&&o[o.length-1]!==0){var d=C.previous(o);o=d,i=P.get(t,o);continue}o=C.parent(o),i=P.get(t,o),s.add(i)}}()},parent(t,e){var r=C.parent(e),n=P.get(t,r);if(R.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return R.isText(t)?t.text:t.children.map(P.string).join("")},texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[r,n]of P.nodes(t,e))R.isText(r)&&(yield[r,n])}()}};function Dn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $e={isNodeOperation(t){return $e.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!me(t))return!1;switch(t.type){case"insert_node":return C.isPath(t.path)&&P.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&C.isPath(t.path);case"merge_node":return typeof t.position=="number"&&C.isPath(t.path)&&me(t.properties);case"move_node":return C.isPath(t.path)&&C.isPath(t.newPath);case"remove_node":return C.isPath(t.path)&&P.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&C.isPath(t.path);case"set_node":return C.isPath(t.path)&&me(t.properties)&&me(t.newProperties);case"set_selection":return t.properties===null&&p.isRange(t.newProperties)||t.newProperties===null&&p.isRange(t.properties)||me(t.properties)&&me(t.newProperties);case"split_node":return C.isPath(t.path)&&typeof t.position=="number"&&me(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>$e.isOperation(e))},isSelectionOperation(t){return $e.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return $e.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return ne(ne({},t),{},{type:"remove_node"});case"insert_text":return ne(ne({},t),{},{type:"remove_text"});case"merge_node":return ne(ne({},t),{},{type:"split_node",path:C.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(C.equals(e,r))return t;if(C.isSibling(r,e))return ne(ne({},t),{},{path:e,newPath:r});var n=C.transform(r,t),u=C.transform(C.next(r),t);return ne(ne({},t),{},{path:n,newPath:u})}case"remove_node":return ne(ne({},t),{},{type:"insert_node"});case"remove_text":return ne(ne({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=t;return ne(ne({},t),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:o,newProperties:i}=t;return o==null?ne(ne({},t),{},{properties:i,newProperties:null}):i==null?ne(ne({},t),{},{properties:null,newProperties:o}):ne(ne({},t),{},{properties:i,newProperties:o})}case"split_node":return ne(ne({},t),{},{type:"merge_node",path:C.next(t.path)})}}},dn=new WeakMap,Qa=t=>{var e=dn.get(t);if(e!==void 0)return e;if(!me(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||me(t.marks))&&(t.selection===null||p.isRange(t.selection))&&P.isNodeList(t.children)&&$e.isOperationList(t.operations);return dn.set(t,r),r},f={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return Qa(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)}},$a={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(C.isPath)}};function gn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var X={compare(t,e){var r=C.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return X.compare(t,e)===1},isBefore(t,e){return X.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&C.equals(t.path,e.path)},isPoint(t){return me(t)&&typeof t.offset=="number"&&C.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return jr(t,n=>{if(n===null)return null;var{affinity:u="forward"}=r,{path:a,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=C.transform(a,e,r);break}case"insert_text":{C.equals(e.path,a)&&(e.offset<s||e.offset===s&&u==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{C.equals(e.path,a)&&(n.offset+=e.position),n.path=C.transform(a,e,r);break}case"remove_text":{C.equals(e.path,a)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(C.equals(e.path,a)||C.isAncestor(e.path,a))return null;n.path=C.transform(a,e,r);break}case"split_node":{if(C.equals(e.path,a)){if(e.position===s&&u==null)return null;(e.position<s||e.position===s&&u==="forward")&&(n.offset-=e.position,n.path=C.transform(a,e,hn(hn({},r),{},{affinity:"forward"})))}else n.path=C.transform(a,e,r);break}}})}},Cn=void 0,xe={setScrubber(t){Cn=t},stringify(t){return JSON.stringify(t,Cn)}},es=["text"],ts=["anchor","focus"];function mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function Ge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var R={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function u(a){var s=Ze(a,es);return s}return Pu(n?u(t):t,n?u(e):e)},isText(t){return me(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>R.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[Ge({},t)];for(var n of e){var u=Ze(n,ts),[a,s]=p.edges(n),o=[],i=0,l=a.offset,c=s.offset;for(var d of r){var{length:g}=d.text,h=i;if(i+=g,l<=h&&i<=c){Object.assign(d,u),o.push(d);continue}if(l!==c&&(l===i||c===h)||l>i||c<h||c===h&&h!==0){o.push(d);continue}var v=d,E=void 0,B=void 0;if(c<i){var F=c-h;B=Ge(Ge({},v),{},{text:v.text.slice(F)}),v=Ge(Ge({},v),{},{text:v.text.slice(0,F)})}if(l>h){var A=l-h;E=Ge(Ge({},v),{},{text:v.text.slice(0,A)}),v=Ge(Ge({},v),{},{text:v.text.slice(A)})}Object.assign(v,u),E&&o.push(E),o.push(v),B&&o.push(B)}r=o}return r}},_r=t=>t.selection?t.selection:t.children.length>0?f.end(t,[]):[0],Et=(t,e)=>{var[r]=f.node(t,e);return n=>n===r},Ir=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,u=r?is(e):e,a=q.None,s=q.None,o=0,i=null,l=null;for(var c of u){var d=c.codePointAt(0);if(!d)break;var g=Bs(c,d);if([a,s]=n?[s,g]:[g,a],Ct(a,q.ZWJ)&&Ct(s,q.ExtPict)&&(n?i=vn(e.substring(0,o)):i=vn(e.substring(0,e.length-o)),!i)||Ct(a,q.RI)&&Ct(s,q.RI)&&(l!==null?l=!l:n?l=!0:l=ws(e.substring(0,e.length-o)),!l)||a!==q.None&&s!==q.None&&Es(a,s))break;o+=c.length}return o||1},rs=/\s/,ns=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,us=/['\u2018\u2019]/,as=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,u=!1;e.length>0;){var a=Ir(e,r),[s,o]=kr(e,a,r);if(ss(s,o,r))u=!0,n+=a;else if(!u)n+=a;else break;e=o}return n},kr=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},ss=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(rs.test(e))return!1;if(us.test(e)){var u=Ir(r,n),[a,s]=kr(r,u,n);if(t(a,s,n))return!0}return!ns.test(e)},is=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var u=e.charAt(r-n);if(ls(u.charCodeAt(0))){var a=e.charAt(r-n-1);if(os(a.charCodeAt(0))){yield a+u,n++;continue}}yield u}},os=t=>t>=55296&&t<=56319,ls=t=>t>=56320&&t<=57343,q;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(q||(q={}));var fs=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,cs=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Ds=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,ds=/^[\u1100-\u115F\uA960-\uA97C]$/,gs=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,hs=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Cs=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,ms=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,vs=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Bs=(t,e)=>{var r=q.Any;return t.search(fs)!==-1&&(r|=q.Extend),e===8205&&(r|=q.ZWJ),e>=127462&&e<=127487&&(r|=q.RI),t.search(cs)!==-1&&(r|=q.Prepend),t.search(Ds)!==-1&&(r|=q.SpacingMark),t.search(ds)!==-1&&(r|=q.L),t.search(gs)!==-1&&(r|=q.V),t.search(hs)!==-1&&(r|=q.T),t.search(Cs)!==-1&&(r|=q.LV),t.search(ms)!==-1&&(r|=q.LVT),t.search(vs)!==-1&&(r|=q.ExtPict),r};function Ct(t,e){return(t&e)!==0}var ps=[[q.L,q.L|q.V|q.LV|q.LVT],[q.LV|q.V,q.V|q.T],[q.LVT|q.T,q.T],[q.Any,q.Extend|q.ZWJ],[q.Any,q.SpacingMark],[q.Prepend,q.Any],[q.ZWJ,q.ExtPict],[q.RI,q.RI]];function Es(t,e){return ps.findIndex(r=>Ct(t,r[0])&&Ct(e,r[1]))===-1}var As=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,vn=t=>t.search(As)!==-1,Fs=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,ws=t=>{var e=t.match(Fs);if(e===null)return!1;var r=e[0].length/2;return r%2===1},bs={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:u=_r(t)}=r;if(C.isPath(u)&&(u=f.range(t,u)),p.isRange(u))if(p.isCollapsed(u))u=u.anchor;else{var a=p.end(u);if(!n&&f.void(t,{at:a}))return;var s=p.start(u),o=f.pointRef(t,s),i=f.pointRef(t,a);w.delete(t,{at:u,voids:n});var l=o.unref(),c=i.unref();u=l||c,w.setSelection(t,{anchor:u,focus:u})}if(!(!n&&f.void(t,{at:u})||f.elementReadOnly(t,{at:u}))){var{path:d,offset:g}=u;e.length>0&&t.apply({type:"insert_text",path:d,offset:g,text:e})}})}};function Bn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var w=qt(qt(qt(qt({},Ha),Ka),Ua),bs),Ht=new WeakMap,ys=t=>Ht.get(t)||!1,Os=(t,e,r)=>{var n=Ht.get(t)||!1;Ht.set(t,!0);try{e(),r()}finally{Ht.set(t,n)}};function Su(t,e,r){var n=Jt.get(t)||[],u=Zt.get(t)||new Set,a,s,o=d=>{if(d){var g=d.join(",");s.has(g)||(s.add(g),a.push(d))}};if(r){a=[],s=new Set;for(var i of n){var l=r(i);o(l)}}else a=n,s=u;for(var c of e)o(c);Jt.set(t,a),Zt.set(t,s)}var Ps=(t,e)=>{for(var r of f.pathRefs(t))Ma.transform(r,e);for(var n of f.pointRefs(t))La.transform(n,e);for(var u of f.rangeRefs(t))qa.transform(u,e);if(!ys(t)){var a=C.operationCanTransformPath(e)?s=>C.transform(s,e):void 0;Su(t,t.getDirtyPaths(e),a)}w.transform(t,e),t.operations.push(e),f.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),Pt.get(t)||(Pt.set(t,!0),Promise.resolve().then(()=>{Pt.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},Ss=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return C.levels(r)}case"insert_node":{var{node:n,path:u}=e,a=C.levels(u),s=R.isText(n)?[]:Array.from(P.nodes(n),_=>{var[,U]=_;return u.concat(U)});return[...a,...s]}case"merge_node":{var{path:o}=e,i=C.ancestors(o),l=C.previous(o);return[...i,l]}case"move_node":{var{path:c,newPath:d}=e;if(C.equals(c,d))return[];var g=[],h=[];for(var v of C.ancestors(c)){var E=C.transform(v,e);g.push(E)}for(var B of C.ancestors(d)){var F=C.transform(B,e);h.push(F)}var A=h[h.length-1],b=d[d.length-1],O=A.concat(b);return[...g,...h,O]}case"remove_node":{var{path:y}=e,N=C.ancestors(y);return[...N]}case"split_node":{var{path:S}=e,D=C.levels(S),L=C.next(S);return[...D,L]}default:return[]}},Ns=t=>{var{selection:e}=t;return e?P.fragment(t,e):[]},Ts=(t,e)=>{var[r,n]=e;if(!R.isText(r)){if(j.isElement(r)&&r.children.length===0){var u={text:""};w.insertNodes(t,u,{at:n.concat(0),voids:!0});return}for(var a=f.isEditor(r)?!1:j.isElement(r)&&(t.isInline(r)||r.children.length===0||R.isText(r.children[0])||t.isInline(r.children[0])),s=0,o=0;o<r.children.length;o++,s++){var i=P.get(t,n);if(!R.isText(i)){var l=i.children[s],c=i.children[s-1],d=o===r.children.length-1,g=R.isText(l)||j.isElement(l)&&t.isInline(l);if(g!==a)w.removeNodes(t,{at:n.concat(s),voids:!0}),s--;else if(j.isElement(l)){if(t.isInline(l)){if(c==null||!R.isText(c)){var h={text:""};w.insertNodes(t,h,{at:n.concat(s),voids:!0}),s++}else if(d){var v={text:""};w.insertNodes(t,v,{at:n.concat(s+1),voids:!0}),s++}}}else c!=null&&R.isText(c)&&(R.equals(l,c,{loose:!0})?(w.mergeNodes(t,{at:n.concat(s),voids:!0}),s--):c.text===""?(w.removeNodes(t,{at:n.concat(s-1),voids:!0}),s--):l.text===""&&(w.removeNodes(t,{at:n.concat(s),voids:!0}),s--))}}}},xs=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,u=n*42;if(r>u)throw new Error("Could not completely normalize the editor after ".concat(u," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Rs=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:u="lowest",at:a=e.selection,match:s}=r;if(a){var o=f.path(e,a),i=u==="lowest";for(var[l,c]of f.levels(e,{at:o,voids:n,match:s,reverse:i}))if(!R.isText(l)){if(p.isRange(a)){if(C.isAncestor(c,a.anchor.path)&&C.isAncestor(c,a.focus.path))return[l,c]}else if(!C.equals(o,c))return[l,c]}}};function pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var js=(t,e,r)=>{var{selection:n}=t;if(n){var u=(d,g)=>{if(!R.isText(d))return!1;var[h,v]=f.parent(t,g);return!t.isVoid(h)||t.markableVoid(h)},a=p.isExpanded(n),s=!1;if(!a){var[o,i]=f.node(t,n);if(o&&u(o,i)){var[l]=f.parent(t,i);s=l&&t.markableVoid(l)}}if(a||s)w.setNodes(t,{[e]:r},{match:u,split:!0,voids:!0});else{var c=En(En({},f.marks(t)||{}),{},{[e]:r});t.marks=c,Pt.get(t)||t.onChange()}}};function An(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function Fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?An(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _s=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=f.point(e,r,{edge:"end"}),a=f.end(e,[]),s={anchor:u,focus:a},{distance:o=1}=n,i=0,l;for(var c of f.positions(e,Fn(Fn({},n),{},{at:s}))){if(i>o)break;i!==0&&(l=c),i++}return l};function wn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Is=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=f.start(e,[]),a=f.point(e,r,{edge:"start"}),s={anchor:u,focus:a},{distance:o=1}=n,i=0,l;for(var c of f.positions(e,bn(bn({},n),{},{at:s,reverse:!0}))){if(i>o)break;i!==0&&(l=c),i++}return l},ks=(t,e)=>{var{selection:r}=t;r&&p.isCollapsed(r)&&w.delete(t,{unit:e,reverse:!0})},Ms=(t,e)=>{var{selection:r}=t;r&&p.isCollapsed(r)&&w.delete(t,{unit:e})},Ls=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&p.isExpanded(n)&&w.delete(e,{reverse:r==="backward"})},qs=(t,e)=>[f.start(t,e),f.end(t,e)];function yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function On(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var zs=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.above(e,On(On({},r),{},{match:n=>j.isElement(n)&&f.isElementReadOnly(e,n)}))},Ws=(t,e)=>f.point(t,e,{edge:"end"}),Vs=(t,e)=>{var r=f.path(t,e,{edge:"start"});return f.node(t,r)},Hs=(t,e)=>{var r=f.range(t,e);return P.fragment(t,r)};function Pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function Sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ks=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.above(e,Sn(Sn({},r),{},{match:n=>j.isElement(n)&&f.isVoid(e,n)}))},Us=(t,e)=>e.children.some(r=>j.isElement(r)&&f.isBlock(t,r)),Ys=(t,e)=>e.children.some(r=>R.isText(r)||f.isInline(t,r)),Gs=(t,e)=>P.has(t,e),Xs=(t,e)=>e.children.every(r=>R.isText(r)),Js=t=>{w.splitNodes(t,{always:!0})},Zs=(t,e,r)=>{w.insertNodes(t,e,r)},Qs=t=>{w.splitNodes(t,{always:!0})};function Nn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function $s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ei=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u,marks:a}=e;if(u){if(a){var s=$s({text:r},a);w.insertNodes(e,s,{at:n.at,voids:n.voids})}else w.insertText(e,r,n);e.marks=null}},ti=(t,e)=>!t.isInline(e),ri=(t,e,r)=>f.isStart(t,e,r)||f.isEnd(t,e,r),ni=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&R.isText(n)&&n.text===""&&!t.isVoid(e)},ui=(t,e,r)=>{var n=f.end(t,r);return X.equals(e,n)},ai=t=>{var e=Ou.get(t);return e===void 0?!0:e},si=(t,e,r)=>{if(e.offset!==0)return!1;var n=f.start(t,r);return X.equals(e,n)},ii=(t,e)=>{var r=f.path(t,e,{edge:"end"});return f.node(t,r)},oi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=f.path(e,r,n),a=P.leaf(e,u);return[a,u]};function li(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=t.selection,reverse:n=!1,voids:u=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!r){var s=[],o=f.path(t,r);for(var[i,l]of P.levels(t,o))if(a(i,l)&&(s.push([i,l]),!u&&j.isElement(i)&&f.isVoid(t,i)))break;n&&s.reverse(),yield*s}}()}var fi=["text"],ci=["text"],Di=function(e){var{marks:r,selection:n}=e;if(!n)return null;var{anchor:u,focus:a}=n;if(r)return r;if(p.isExpanded(n)){var s=f.isEnd(e,u,u.path);if(s){var o=f.after(e,u);o&&(u=o)}var[i]=f.nodes(e,{match:R.isText,at:{anchor:u,focus:a}});if(i){var[l]=i,c=Ze(l,fi);return c}else return{}}var{path:d}=u,[g]=f.leaf(e,d);if(u.offset===0){var h=f.previous(e,{at:d,match:R.isText}),v=f.above(e,{match:O=>j.isElement(O)&&f.isVoid(e,O)&&e.markableVoid(O)});if(!v){var E=f.above(e,{match:O=>j.isElement(O)&&f.isBlock(e,O)});if(h&&E){var[B,F]=h,[,A]=E;C.isAncestor(A,F)&&(g=B)}}}var b=Ze(g,ci);return b},di=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:u=!1}=r,{match:a,at:s=e.selection}=r;if(s){var o=f.after(e,s,{voids:u});if(o){var[,i]=f.last(e,[]),l=[o.path,i];if(C.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(C.isPath(s)){var[c]=f.parent(e,s);a=g=>c.children.includes(g)}else a=()=>!0;var[d]=f.nodes(e,{at:l,match:a,mode:n,voids:u});return d}}},gi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=f.path(e,r,n),a=P.get(e,u);return[a,u]};function hi(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=t.selection,mode:n="all",universal:u=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:o=!1}=e,{match:i}=e;if(i||(i=()=>!0),!!r){var l,c;if($a.isSpan(r))l=r[0],c=r[1];else{var d=f.path(t,r,{edge:"start"}),g=f.path(t,r,{edge:"end"});l=a?g:d,c=a?d:g}var h=P.nodes(t,{reverse:a,from:l,to:c,pass:O=>{var[y]=O;return j.isElement(y)?!!(!s&&(f.isVoid(t,y)||f.isElementReadOnly(t,y))||o&&!f.isSelectable(t,y)):!1}}),v=[],E;for(var[B,F]of h)if(!(o&&j.isElement(B)&&!f.isSelectable(t,B))){var A=E&&C.compare(F,E[1])===0;if(!(n==="highest"&&A)){if(!i(B,F)){if(u&&!A&&R.isText(B))return;continue}if(n==="lowest"&&A){E=[B,F];continue}var b=n==="lowest"?E:[B,F];b&&(u?v.push(b):yield b),E=[B,F]}}n==="lowest"&&E&&(u?v.push(E):yield E),u&&(yield*v)}}()}var Ci=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:u}=r,a=c=>Jt.get(c)||[],s=c=>Zt.get(c)||new Set,o=c=>{var d=a(c).pop(),g=d.join(",");return s(c).delete(g),d};if(f.isNormalizing(e)){if(n){var i=Array.from(P.nodes(e),c=>{var[,d]=c;return d}),l=new Set(i.map(c=>c.join(",")));Jt.set(e,i),Zt.set(e,l)}a(e).length!==0&&f.withoutNormalizing(e,()=>{for(var c of a(e))if(P.has(e,c)){var d=f.node(e,c),[g,h]=d;j.isElement(g)&&g.children.length===0&&e.normalizeNode(d,{operation:u})}for(var v=a(e),E=v.length,B=0;v.length!==0;){if(!e.shouldNormalize({dirtyPaths:v,iteration:B,initialDirtyPathsLength:E,operation:u}))return;var F=o(e);if(P.has(e,F)){var A=f.node(e,F);e.normalizeNode(A,{operation:u})}B++,v=a(e)}})}},mi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=f.path(e,r,n),a=C.parent(u),s=f.node(e,a);return s},vi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:r,affinity:u,unref(){var{current:o}=a,i=f.pathRefs(e);return i.delete(a),a.current=null,o}},s=f.pathRefs(e);return s.add(a),a},Bi=t=>{var e=un.get(t);return e||(e=new Set,un.set(t,e)),e},pi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:u,edge:a}=n;if(C.isPath(r)){if(a==="start"){var[,s]=P.first(e,r);r=s}else if(a==="end"){var[,o]=P.last(e,r);r=o}}return p.isRange(r)&&(a==="start"?r=p.start(r):a==="end"?r=p.end(r):r=C.common(r.anchor.path,r.focus.path)),X.isPoint(r)&&(r=r.path),u!=null&&(r=r.slice(0,u)),r},Ei=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:r,affinity:u,unref(){var{current:o}=a,i=f.pointRefs(e);return i.delete(a),a.current=null,o}},s=f.pointRefs(e);return s.add(a),a},Ai=t=>{var e=an.get(t);return e||(e=new Set,an.set(t,e)),e},Fi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:u="start"}=n;if(C.isPath(r)){var a;if(u==="end"){var[,s]=P.last(e,r);a=s}else{var[,o]=P.first(e,r);a=o}var i=P.get(e,a);if(!R.isText(i))throw new Error("Cannot get the ".concat(u," point in the node at path [").concat(r,"] because it has no ").concat(u," text node."));return{path:a,offset:u==="end"?i.text.length:0}}if(p.isRange(r)){var[l,c]=p.edges(r);return u==="start"?l:c}return r};function wi(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:r=t.selection,unit:n="offset",reverse:u=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!r)return;var o=f.range(t,r),[i,l]=p.edges(o),c=u?l:i,d=!1,g="",h=0,v=0,E=0;for(var[B,F]of f.nodes(t,{at:r,reverse:u,voids:a,ignoreNonSelectable:s})){if(j.isElement(B)){if(!a&&(t.isVoid(B)||t.isElementReadOnly(B))){yield f.start(t,F);continue}if(t.isInline(B))continue;if(f.hasInlines(t,B)){var A=C.isAncestor(F,l.path)?l:f.end(t,F),b=C.isAncestor(F,i.path)?i:f.start(t,F);g=f.string(t,{anchor:b,focus:A},{voids:a}),d=!0}}if(R.isText(B)){var O=C.equals(F,c.path);for(O?(v=u?c.offset:B.text.length-c.offset,E=c.offset):(v=B.text.length,E=u?v:0),(O||d||n==="offset")&&(yield{path:F,offset:E},d=!1);;){if(h===0){if(g==="")break;h=y(g,n,u),g=kr(g,h,u)[1]}if(E=u?E-h:E+h,v=v-h,v<0){h=-v;break}h=0,yield{path:F,offset:E}}}}function y(N,S,D){return S==="character"?Ir(N,D):S==="word"?as(N,D):S==="line"||S==="block"?N.length:1}}()}var bi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:u=!1}=r,{match:a,at:s=e.selection}=r;if(s){var o=f.before(e,s,{voids:u});if(o){var[,i]=f.first(e,[]),l=[o.path,i];if(C.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(C.isPath(s)){var[c]=f.parent(e,s);a=g=>c.children.includes(g)}else a=()=>!0;var[d]=f.nodes(e,{reverse:!0,at:l,match:a,mode:n,voids:u});return d}}},yi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:r,affinity:u,unref(){var{current:o}=a,i=f.rangeRefs(e);return i.delete(a),a.current=null,o}},s=f.rangeRefs(e);return s.add(a),a},Oi=t=>{var e=sn.get(t);return e||(e=new Set,sn.set(t,e)),e},Pi=(t,e,r)=>{if(p.isRange(e)&&!r)return e;var n=f.start(t,e),u=f.end(t,r||e);return{anchor:n,focus:u}};function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function Si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ni=(t,e)=>{var{selection:r}=t;if(r){var n=(c,d)=>{if(!R.isText(c))return!1;var[g,h]=f.parent(t,d);return!t.isVoid(g)||t.markableVoid(g)},u=p.isExpanded(r),a=!1;if(!u){var[s,o]=f.node(t,r);if(s&&n(s,o)){var[i]=f.parent(t,o);a=i&&t.markableVoid(i)}}if(u||a)w.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var l=Si({},f.marks(t)||{});delete l[e],t.marks=l,Pt.get(t)||t.onChange()}}},Ti=(t,e)=>{Ou.set(t,e)},xi=(t,e)=>f.point(t,e,{edge:"start"}),Ri=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=n,a=f.range(e,r),[s,o]=p.edges(a),i="";for(var[l,c]of f.nodes(e,{at:a,match:R.isText,voids:u})){var d=l.text;C.equals(c,o.path)&&(d=d.slice(0,o.offset)),C.equals(c,s.path)&&(d=d.slice(s.offset)),i+=d}return i},ji=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=n,[a,s]=p.edges(r);if(a.offset!==0||s.offset!==0||p.isCollapsed(r)||C.hasPrevious(s.path))return r;var o=f.above(e,{at:s,match:v=>j.isElement(v)&&f.isBlock(e,v),voids:u}),i=o?o[1]:[],l=f.start(e,a),c={anchor:l,focus:s},d=!0;for(var[g,h]of f.nodes(e,{at:c,match:R.isText,reverse:!0,voids:u})){if(d){d=!1;continue}if(g.text!==""||C.isBefore(h,i)){s={path:h,offset:g.text.length};break}}return{anchor:a,focus:s}},_i=(t,e)=>{var r=f.isNormalizing(t);f.setNormalizing(t,!1);try{e()}finally{f.setNormalizing(t,r)}f.normalize(t)},Ii=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var n,u,{reverse:a=!1,unit:s="character",distance:o=1,voids:i=!1}=r,{at:l=e.selection,hanging:c=!1}=r;if(l){var d=!1;if(p.isRange(l)&&p.isCollapsed(l)&&(d=!0,l=l.anchor),X.isPoint(l)){var g=f.void(e,{at:l,mode:"highest"});if(!i&&g){var[,h]=g;l=h}else{var v={unit:s,distance:o},E=a?f.before(e,l,v)||f.start(e,[]):f.after(e,l,v)||f.end(e,[]);l={anchor:l,focus:E},c=!0}}if(C.isPath(l)){w.removeNodes(e,{at:l,voids:i});return}if(!p.isCollapsed(l)){if(!c){var[,B]=p.edges(l),F=f.end(e,[]);X.equals(B,F)||(l=f.unhangRange(e,l,{voids:i}))}var[A,b]=p.edges(l),O=f.above(e,{match:De=>j.isElement(De)&&f.isBlock(e,De),at:A,voids:i}),y=f.above(e,{match:De=>j.isElement(De)&&f.isBlock(e,De),at:b,voids:i}),N=O&&y&&!C.equals(O[1],y[1]),S=C.equals(A.path,b.path),D=i?null:(n=f.void(e,{at:A,mode:"highest"}))!==null&&n!==void 0?n:f.elementReadOnly(e,{at:A,mode:"highest"}),L=i?null:(u=f.void(e,{at:b,mode:"highest"}))!==null&&u!==void 0?u:f.elementReadOnly(e,{at:b,mode:"highest"});if(D){var _=f.before(e,A);_&&O&&C.isAncestor(O[1],_.path)&&(A=_)}if(L){var U=f.after(e,b);U&&y&&C.isAncestor(y[1],U.path)&&(b=U)}var Z=[],k;for(var Y of f.nodes(e,{at:l,voids:i})){var[ie,T]=Y;k&&C.compare(T,k)===0||(!i&&j.isElement(ie)&&(f.isVoid(e,ie)||f.isElementReadOnly(e,ie))||!C.isCommon(T,A.path)&&!C.isCommon(T,b.path))&&(Z.push(Y),k=T)}var V=Array.from(Z,De=>{var[,Qe]=De;return f.pathRef(e,Qe)}),ce=f.pointRef(e,A),ee=f.pointRef(e,b),le="";if(!S&&!D){var Ee=ce.current,[de]=f.leaf(e,Ee),{path:Be}=Ee,{offset:ye}=A,H=de.text.slice(ye);H.length>0&&(e.apply({type:"remove_text",path:Be,offset:ye,text:H}),le=H)}if(V.reverse().map(De=>De.unref()).filter(De=>De!==null).forEach(De=>w.removeNodes(e,{at:De,voids:i})),!L){var re=ee.current,[Ae]=f.leaf(e,re),{path:Oe}=re,Ce=S?A.offset:0,pe=Ae.text.slice(Ce,b.offset);pe.length>0&&(e.apply({type:"remove_text",path:Oe,offset:Ce,text:pe}),le=pe)}!S&&N&&ee.current&&ce.current&&w.mergeNodes(e,{at:ee.current,hanging:!0,voids:i}),d&&a&&s==="character"&&le.length>1&&le.match(/[\u0E00-\u0E7F]+/)&&w.insertText(e,le.slice(0,le.length-o));var _e=ce.unref(),Ie=ee.unref(),ke=a?_e||Ie:Ie||_e;r.at==null&&ke&&w.select(e,ke)}}})},ki=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1}=n,{at:s=_r(e),batchDirty:o=!0}=n;if(r.length){if(p.isRange(s))if(u||(s=f.unhangRange(e,s,{voids:a})),p.isCollapsed(s))s=s.anchor;else{var[,i]=p.edges(s);if(!a&&f.void(e,{at:i}))return;var l=f.pointRef(e,i);w.delete(e,{at:s}),s=l.unref()}else C.isPath(s)&&(s=f.start(e,s));if(!(!a&&f.void(e,{at:s}))){var c=f.above(e,{at:s,match:H=>j.isElement(H)&&f.isInline(e,H),mode:"highest",voids:a});if(c){var[,d]=c;if(f.isEnd(e,s,d)){var g=f.after(e,d);s=g}else if(f.isStart(e,s,d)){var h=f.before(e,d);s=h}}var v=f.above(e,{match:H=>j.isElement(H)&&f.isBlock(e,H),at:s,voids:a}),[,E]=v,B=f.isStart(e,s,E),F=f.isEnd(e,s,E),A=B&&F,b=!B||B&&F,O=!F,[,y]=P.first({children:r},[]),[,N]=P.last({children:r},[]),S=[],D=H=>{var[re,Ae]=H,Oe=Ae.length===0;return Oe?!1:A?!0:!(b&&C.isAncestor(Ae,y)&&j.isElement(re)&&!e.isVoid(re)&&!e.isInline(re)||O&&C.isAncestor(Ae,N)&&j.isElement(re)&&!e.isVoid(re)&&!e.isInline(re))};for(var L of P.nodes({children:r},{pass:D}))D(L)&&S.push(L);var _=[],U=[],Z=[],k=!0,Y=!1;for(var[ie]of S)j.isElement(ie)&&!e.isInline(ie)?(k=!1,Y=!0,U.push(ie)):k?_.push(ie):Z.push(ie);var[T]=f.nodes(e,{at:s,match:H=>R.isText(H)||f.isInline(e,H),mode:"highest",voids:a}),[,V]=T,ce=f.isStart(e,s,V),ee=f.isEnd(e,s,V),le=f.pathRef(e,F&&!Z.length?C.next(E):E),Ee=f.pathRef(e,ee?C.next(V):V);w.splitNodes(e,{at:s,match:H=>Y?j.isElement(H)&&f.isBlock(e,H):R.isText(H)||f.isInline(e,H),mode:Y?"lowest":"highest",always:Y&&(!B||_.length>0)&&(!F||Z.length>0),voids:a});var de=f.pathRef(e,!ce||ce&&ee?C.next(V):V);if(w.insertNodes(e,_,{at:de.current,match:H=>R.isText(H)||f.isInline(e,H),mode:"highest",voids:a,batchDirty:o}),A&&!_.length&&U.length&&!Z.length&&w.delete(e,{at:E,voids:a}),w.insertNodes(e,U,{at:le.current,match:H=>j.isElement(H)&&f.isBlock(e,H),mode:"lowest",voids:a,batchDirty:o}),w.insertNodes(e,Z,{at:Ee.current,match:H=>R.isText(H)||f.isInline(e,H),mode:"highest",voids:a,batchDirty:o}),!n.at){var Be;if(Z.length>0&&Ee.current?Be=C.previous(Ee.current):U.length>0&&le.current?Be=C.previous(le.current):de.current&&(Be=C.previous(de.current)),Be){var ye=f.end(e,Be);w.select(e,ye)}}de.unref(),le.unref(),Ee.unref()}}})},Mi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:u}=e;if(u){if(n==="anchor")w.select(e,u.anchor);else if(n==="focus")w.select(e,u.focus);else if(n==="start"){var[a]=p.edges(u);w.select(e,a)}else if(n==="end"){var[,s]=p.edges(u);w.select(e,s)}}else return},Li=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},qi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:u=1,unit:a="character",reverse:s=!1}=r,{edge:o=null}=r;if(n){o==="start"&&(o=p.isBackward(n)?"focus":"anchor"),o==="end"&&(o=p.isBackward(n)?"anchor":"focus");var{anchor:i,focus:l}=n,c={distance:u,unit:a,ignoreNonSelectable:!0},d={};if(o==null||o==="anchor"){var g=s?f.before(e,i,c):f.after(e,i,c);g&&(d.anchor=g)}if(o==null||o==="focus"){var h=s?f.before(e,l,c):f.after(e,l,c);h&&(d.focus=h)}w.setSelection(e,d)}},zi=(t,e)=>{var{selection:r}=t;if(e=f.range(t,e),r){w.setSelection(t,e);return}if(!p.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(xe.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function Rn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Wi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u}=e,{edge:a="both"}=n;if(u){a==="start"&&(a=p.isBackward(u)?"focus":"anchor"),a==="end"&&(a=p.isBackward(u)?"anchor":"focus");var{anchor:s,focus:o}=u,i=a==="anchor"?s:o;w.setSelection(e,{[a==="anchor"?"anchor":"focus"]:Rn(Rn({},i),r)})}},Vi=(t,e)=>{var{selection:r}=t,n={},u={};if(r){for(var a in e)(a==="anchor"&&e.anchor!=null&&!X.equals(e.anchor,r.anchor)||a==="focus"&&e.focus!=null&&!X.equals(e.focus,r.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==r[a])&&(n[a]=r[a],u[a]=e[a]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:u})}},Hi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1,mode:s="lowest",batchDirty:o=!0}=n,{at:i,match:l,select:c}=n;if(P.isNode(r)&&(r=[r]),r.length!==0){var[d]=r;if(i||(i=_r(e),c!==!1&&(c=!0)),c==null&&(c=!1),p.isRange(i))if(u||(i=f.unhangRange(e,i,{voids:a})),p.isCollapsed(i))i=i.anchor;else{var[,g]=p.edges(i),h=f.pointRef(e,g);w.delete(e,{at:i}),i=h.unref()}if(X.isPoint(i)){l==null&&(R.isText(d)?l=_=>R.isText(_):e.isInline(d)?l=_=>R.isText(_)||f.isInline(e,_):l=_=>j.isElement(_)&&f.isBlock(e,_));var[v]=f.nodes(e,{at:i.path,match:l,mode:s,voids:a});if(v){var[,E]=v,B=f.pathRef(e,E),F=f.isEnd(e,i,E);w.splitNodes(e,{at:i,match:l,mode:s,voids:a});var A=B.unref();i=F?C.next(A):A}else return}var b=C.parent(i),O=i[i.length-1];if(!(!a&&f.void(e,{at:b}))){if(o){var y=[],N=C.levels(b);Os(e,()=>{var _=function(){var k=b.concat(O);O++;var Y={type:"insert_node",path:k,node:U};e.apply(Y),i=C.next(i),y.push(Y),R.isText?N.push(...Array.from(P.nodes(U),ie=>{var[,T]=ie;return k.concat(T)})):N.push(k)};for(var U of r)_()},()=>{Su(e,N,_=>{var U=_;for(var Z of y)if(C.operationCanTransformPath(Z)&&(U=C.transform(U,Z),!U))return null;return U})})}else for(var S of r){var D=b.concat(O);O++,e.apply({type:"insert_node",path:D,node:S}),i=C.next(i)}if(i=C.previous(i),c){var L=f.end(e,i);L&&w.select(e,L)}}}})},Ki=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:u="lowest",voids:a=!1}=r,{match:s}=r;if(s==null&&(s=C.isPath(n)?Et(e,n):O=>j.isElement(O)&&f.isBlock(e,O)),!!n){var o=f.nodes(e,{at:n,match:s,mode:u,voids:a}),i=Array.from(o,O=>{var[,y]=O;return f.pathRef(e,y)});for(var l of i){var c=l.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var d=f.node(e,C.parent(c)),[g,h]=d,v=c[c.length-1],{length:E}=g.children;if(E===1){var B=C.next(h);w.moveNodes(e,{at:c,to:B,voids:a}),w.removeNodes(e,{at:h,voids:a})}else if(v===0)w.moveNodes(e,{at:c,to:h,voids:a});else if(v===E-1){var F=C.next(h);w.moveNodes(e,{at:c,to:F,voids:a})}else{var A=C.next(c),b=C.next(h);w.splitNodes(e,{at:A,voids:a}),w.moveNodes(e,{at:c,to:b,voids:a})}}}})},Ui=["text"],Yi=["children"],Nu=(t,e)=>{if(j.isElement(e)){var r=e;return f.isVoid(t,e)?!0:r.children.length===1?Nu(t,r.children[0]):!1}else return!f.isEditor(e)},Gi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{match:n,at:u=e.selection}=r,{hanging:a=!1,voids:s=!1,mode:o="lowest"}=r;if(u){if(n==null)if(C.isPath(u)){var[i]=f.parent(e,u);n=_=>i.children.includes(_)}else n=_=>j.isElement(_)&&f.isBlock(e,_);if(!a&&p.isRange(u)&&(u=f.unhangRange(e,u,{voids:s})),p.isRange(u))if(p.isCollapsed(u))u=u.anchor;else{var[,l]=p.edges(u),c=f.pointRef(e,l);w.delete(e,{at:u}),u=c.unref(),r.at==null&&w.select(e,u)}var[d]=f.nodes(e,{at:u,match:n,voids:s,mode:o}),g=f.previous(e,{at:u,match:n,voids:s,mode:o});if(!(!d||!g)){var[h,v]=d,[E,B]=g;if(!(v.length===0||B.length===0)){var F=C.next(B),A=C.common(v,B),b=C.isSibling(v,B),O=Array.from(f.levels(e,{at:v}),_=>{var[U]=_;return U}).slice(A.length).slice(0,-1),y=f.above(e,{at:v,mode:"highest",match:_=>O.includes(_)&&Nu(e,_)}),N=y&&f.pathRef(e,y[1]),S,D;if(R.isText(h)&&R.isText(E)){var L=Ze(h,Ui);D=E.text.length,S=L}else if(j.isElement(h)&&j.isElement(E)){var L=Ze(h,Yi);D=E.children.length,S=L}else throw new Error("Cannot merge the node at path [".concat(v,"] with the previous sibling because it is not the same kind: ").concat(xe.stringify(h)," ").concat(xe.stringify(E)));b||w.moveNodes(e,{at:v,to:F,voids:s}),N&&w.removeNodes(e,{at:N.current,voids:s}),j.isElement(E)&&f.isEmpty(e,E)||R.isText(E)&&E.text===""&&B[B.length-1]!==0?w.removeNodes(e,{at:B,voids:s}):e.apply({type:"merge_node",path:F,position:D,properties:S}),N&&N.unref()}}}})},Xi=(t,e)=>{f.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:u="lowest",voids:a=!1}=e,{match:s}=e;if(n){s==null&&(s=C.isPath(n)?Et(t,n):h=>j.isElement(h)&&f.isBlock(t,h));var o=f.pathRef(t,r),i=f.nodes(t,{at:n,match:s,mode:u,voids:a}),l=Array.from(i,h=>{var[,v]=h;return f.pathRef(t,v)});for(var c of l){var d=c.unref(),g=o.current;d.length!==0&&t.apply({type:"move_node",path:d,newPath:g}),o.current&&C.isSibling(g,d)&&C.isAfter(g,d)&&(o.current=C.next(o.current))}o.unref()}})},Ji=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:u=!1,mode:a="lowest"}=r,{at:s=e.selection,match:o}=r;if(s){o==null&&(o=C.isPath(s)?Et(e,s):h=>j.isElement(h)&&f.isBlock(e,h)),!n&&p.isRange(s)&&(s=f.unhangRange(e,s,{voids:u}));var i=f.nodes(e,{at:s,match:o,mode:a,voids:u}),l=Array.from(i,h=>{var[,v]=h;return f.pathRef(e,v)});for(var c of l){var d=c.unref();if(d){var[g]=f.node(e,d);e.apply({type:"remove_node",path:d,node:g})}}}})},Zi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{match:u,at:a=e.selection,compare:s,merge:o}=n,{hanging:i=!1,mode:l="lowest",split:c=!1,voids:d=!1}=n;if(a){if(u==null&&(u=C.isPath(a)?Et(e,a):D=>j.isElement(D)&&f.isBlock(e,D)),!i&&p.isRange(a)&&(a=f.unhangRange(e,a,{voids:d})),c&&p.isRange(a)){if(p.isCollapsed(a)&&f.leaf(e,a.anchor)[0].text.length>0)return;var g=f.rangeRef(e,a,{affinity:"inward"}),[h,v]=p.edges(a),E=l==="lowest"?"lowest":"highest",B=f.isEnd(e,v,v.path);w.splitNodes(e,{at:v,match:u,mode:E,voids:d,always:!B});var F=f.isStart(e,h,h.path);w.splitNodes(e,{at:h,match:u,mode:E,voids:d,always:!F}),a=g.unref(),n.at==null&&w.select(e,a)}s||(s=(D,L)=>D!==L);for(var[A,b]of f.nodes(e,{at:a,match:u,mode:l,voids:d})){var O={},y={};if(b.length!==0){var N=!1;for(var S in r)S==="children"||S==="text"||s(r[S],A[S])&&(N=!0,A.hasOwnProperty(S)&&(O[S]=A[S]),o?r[S]!=null&&(y[S]=o(A[S],r[S])):r[S]!=null&&(y[S]=r[S]));N&&e.apply({type:"set_node",path:b,properties:O,newProperties:y})}}}})},Qi=(t,e)=>{if(p.isCollapsed(e))return e.anchor;var[,r]=p.edges(e),n=f.pointRef(t,r);return w.delete(t,{at:e}),n.unref()},$i=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:u=!1}=r,{match:a,at:s=e.selection,height:o=0,always:i=!1}=r;if(a==null&&(a=ee=>j.isElement(ee)&&f.isBlock(e,ee)),p.isRange(s)&&(s=Qi(e,s)),C.isPath(s)){var l=s,c=f.point(e,l),[d]=f.parent(e,l);a=ee=>ee===d,o=c.path.length-l.length+1,s=c,i=!0}if(s){var g=f.pointRef(e,s,{affinity:"backward"}),h;try{var[v]=f.nodes(e,{at:s,match:a,mode:n,voids:u});if(!v)return;var E=f.void(e,{at:s,mode:"highest"}),B=0;if(!u&&E){var[F,A]=E;if(j.isElement(F)&&e.isInline(F)){var b=f.after(e,A);if(!b){var O={text:""},y=C.next(A);w.insertNodes(e,O,{at:y,voids:u}),b=f.point(e,y)}s=b,i=!0}var N=s.path.length-A.length;o=N+1,i=!0}h=f.pointRef(e,s);var S=s.path.length-o,[,D]=v,L=s.path.slice(0,S),_=o===0?s.offset:s.path[S]+B;for(var[U,Z]of f.levels(e,{at:L,reverse:!0,voids:u})){var k=!1;if(Z.length<D.length||Z.length===0||!u&&j.isElement(U)&&f.isVoid(e,U))break;var Y=g.current,ie=f.isEnd(e,Y,Z);if(i||!g||!f.isEdge(e,Y,Z)){k=!0;var T=P.extractProps(U);e.apply({type:"split_node",path:Z,position:_,properties:T})}_=Z[Z.length-1]+(k||ie?1:0)}if(r.at==null){var V=h.current||f.end(e,[]);w.select(e,V)}}finally{var ce;g.unref(),(ce=h)===null||ce===void 0||ce.unref()}}})},eo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var u={};for(var a of r)u[a]=null;w.setNodes(e,u,n)},to=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{mode:n="lowest",split:u=!1,voids:a=!1}=r,{at:s=e.selection,match:o}=r;if(s){o==null&&(o=C.isPath(s)?Et(e,s):h=>j.isElement(h)&&f.isBlock(e,h)),C.isPath(s)&&(s=f.range(e,s));var i=p.isRange(s)?f.rangeRef(e,s):null,l=f.nodes(e,{at:s,match:o,mode:n,voids:a}),c=Array.from(l,h=>{var[,v]=h;return f.pathRef(e,v)}).reverse(),d=function(){var v=g.unref(),[E]=f.node(e,v),B=f.range(e,v);u&&i&&(B=p.intersection(i.current,B)),w.liftNodes(e,{at:B,match:F=>j.isAncestor(E)&&E.children.includes(F),voids:a})};for(var g of c)d();i&&i.unref()}})};function jn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,n)}return r}function _n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(r),!0).forEach(function(n){be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ro=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{mode:u="lowest",split:a=!1,voids:s=!1}=n,{match:o,at:i=e.selection}=n;if(i){if(o==null&&(C.isPath(i)?o=Et(e,i):e.isInline(r)?o=B=>j.isElement(B)&&f.isInline(e,B)||R.isText(B):o=B=>j.isElement(B)&&f.isBlock(e,B)),a&&p.isRange(i)){var[l,c]=p.edges(i),d=f.rangeRef(e,i,{affinity:"inward"});w.splitNodes(e,{at:c,match:o,voids:s}),w.splitNodes(e,{at:l,match:o,voids:s}),i=d.unref(),n.at==null&&w.select(e,i)}var g=Array.from(f.nodes(e,{at:i,match:e.isInline(r)?B=>j.isElement(B)&&f.isBlock(e,B):B=>f.isEditor(B),mode:"lowest",voids:s})),h=function(){var F=p.isRange(i)?p.intersection(i,f.range(e,E)):i;if(!F)return 0;var A=Array.from(f.nodes(e,{at:F,match:o,mode:u,voids:s}));if(A.length>0){var[b]=A,O=A[A.length-1],[,y]=b,[,N]=O;if(y.length===0&&N.length===0)return 0;var S=C.equals(y,N)?C.parent(y):C.common(y,N),D=f.range(e,y,N),L=f.node(e,S),[_]=L,U=S.length+1,Z=C.next(N.slice(0,U)),k=_n(_n({},r),{},{children:[]});w.insertNodes(e,k,{at:Z,voids:s}),w.moveNodes(e,{at:D,match:Y=>j.isAncestor(_)&&_.children.includes(Y),to:Z.concat(0),voids:s})}},v;for(var[,E]of g)v=h()}})},pf=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ps(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return js(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ks(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ms(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ls(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ns(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Js(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Qs(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ki(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Zs(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ei(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ts(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ni(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ss(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return xs(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Rs(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return _s(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Is(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Mi(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ii(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Li(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return qs(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return zs(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ws(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Vs(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Hs(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Di(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Us(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ys(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Gs(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Xs(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Hi(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ti(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ri(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ni(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ui(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ai(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return si(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ii(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return oi(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return li(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ki(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Gi(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return qi(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Xi(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return di(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return gi(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return hi(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ci(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return mi(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return pi(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return vi(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Bi(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Fi(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ei(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ai(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return wi(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return bi(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Pi(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return yi(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Oi(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ji(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return zi(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Zi(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ti(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Wi(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Vi(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return $i(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return xi(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ri(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ji(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return eo(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return to(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return Ks(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return _i(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return ro(t,...n)}};return t},no=Object.getOwnPropertyNames,uo=Object.getOwnPropertySymbols,ao=Object.prototype.hasOwnProperty;function In(t,e){return function(n,u,a){return t(n,u,a)&&e(n,u,a)}}function zt(t){return function(r,n,u){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,u);var a=u.cache,s=a.get(r),o=a.get(n);if(s&&o)return s===n&&o===r;a.set(r,n),a.set(n,r);var i=t(r,n,u);return a.delete(r),a.delete(n),i}}function kn(t){return no(t).concat(uo(t))}var Tu=Object.hasOwn||function(t,e){return ao.call(t,e)};function At(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var xu="_owner",Mn=Object.getOwnPropertyDescriptor,Ln=Object.keys;function so(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function io(t,e){return At(t.getTime(),e.getTime())}function qn(t,e,r){if(t.size!==e.size)return!1;for(var n={},u=t.entries(),a=0,s,o;(s=u.next())&&!s.done;){for(var i=e.entries(),l=!1,c=0;(o=i.next())&&!o.done;){var d=s.value,g=d[0],h=d[1],v=o.value,E=v[0],B=v[1];!l&&!n[c]&&(l=r.equals(g,E,a,c,t,e,r)&&r.equals(h,B,g,E,t,e,r))&&(n[c]=!0),c++}if(!l)return!1;a++}return!0}function oo(t,e,r){var n=Ln(t),u=n.length;if(Ln(e).length!==u)return!1;for(var a;u-- >0;)if(a=n[u],a===xu&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Tu(e,a)||!r.equals(t[a],e[a],a,a,t,e,r))return!1;return!0}function bt(t,e,r){var n=kn(t),u=n.length;if(kn(e).length!==u)return!1;for(var a,s,o;u-- >0;)if(a=n[u],a===xu&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Tu(e,a)||!r.equals(t[a],e[a],a,a,t,e,r)||(s=Mn(t,a),o=Mn(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function lo(t,e){return At(t.valueOf(),e.valueOf())}function fo(t,e){return t.source===e.source&&t.flags===e.flags}function zn(t,e,r){if(t.size!==e.size)return!1;for(var n={},u=t.values(),a,s;(a=u.next())&&!a.done;){for(var o=e.values(),i=!1,l=0;(s=o.next())&&!s.done;)!i&&!n[l]&&(i=r.equals(a.value,s.value,a.value,s.value,t,e,r))&&(n[l]=!0),l++;if(!i)return!1}return!0}function co(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var Do="[object Arguments]",go="[object Boolean]",ho="[object Date]",Co="[object Map]",mo="[object Number]",vo="[object Object]",Bo="[object RegExp]",po="[object Set]",Eo="[object String]",Ao=Array.isArray,Wn=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Vn=Object.assign,Fo=Object.prototype.toString.call.bind(Object.prototype.toString);function wo(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,u=t.areObjectsEqual,a=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,o=t.areSetsEqual,i=t.areTypedArraysEqual;return function(c,d,g){if(c===d)return!0;if(c==null||d==null||typeof c!="object"||typeof d!="object")return c!==c&&d!==d;var h=c.constructor;if(h!==d.constructor)return!1;if(h===Object)return u(c,d,g);if(Ao(c))return e(c,d,g);if(Wn!=null&&Wn(c))return i(c,d,g);if(h===Date)return r(c,d,g);if(h===RegExp)return s(c,d,g);if(h===Map)return n(c,d,g);if(h===Set)return o(c,d,g);var v=Fo(c);return v===ho?r(c,d,g):v===Bo?s(c,d,g):v===Co?n(c,d,g):v===po?o(c,d,g):v===vo?typeof c.then!="function"&&typeof d.then!="function"&&u(c,d,g):v===Do?u(c,d,g):v===go||v===mo||v===Eo?a(c,d,g):!1}}function bo(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,u={areArraysEqual:n?bt:so,areDatesEqual:io,areMapsEqual:n?In(qn,bt):qn,areObjectsEqual:n?bt:oo,arePrimitiveWrappersEqual:lo,areRegExpsEqual:fo,areSetsEqual:n?In(zn,bt):zn,areTypedArraysEqual:n?bt:co};if(r&&(u=Vn({},u,r(u))),e){var a=zt(u.areArraysEqual),s=zt(u.areMapsEqual),o=zt(u.areObjectsEqual),i=zt(u.areSetsEqual);u=Vn({},u,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:i})}return u}function yo(t){return function(e,r,n,u,a,s,o){return t(e,r,o)}}function Oo(t){var e=t.circular,r=t.comparator,n=t.createState,u=t.equals,a=t.strict;if(n)return function(i,l){var c=n(),d=c.cache,g=d===void 0?e?new WeakMap:void 0:d,h=c.meta;return r(i,l,{cache:g,equals:u,meta:h,strict:a})};if(e)return function(i,l){return r(i,l,{cache:new WeakMap,equals:u,meta:void 0,strict:a})};var s={cache:void 0,equals:u,meta:void 0,strict:a};return function(i,l){return r(i,l,s)}}tt();tt({strict:!0});tt({circular:!0});tt({circular:!0,strict:!0});var Po=tt({createInternalComparator:function(){return At}});tt({strict:!0,createInternalComparator:function(){return At}});tt({circular:!0,createInternalComparator:function(){return At}});tt({circular:!0,createInternalComparator:function(){return At},strict:!0});function tt(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,u=t.createState,a=t.strict,s=a===void 0?!1:a,o=bo(t),i=wo(o),l=n?n(i):yo(i);return Oo({circular:r,comparator:i,createState:u,equals:l,strict:s})}let So=0;class No{constructor(){Kr(this,"id");this.id=`${So++}`}toString(){return this.id}}const To=globalThis.Element;function Mr(t){const e=t;return e&&e.ownerDocument&&e.ownerDocument.defaultView||null}function xo(t){return ft(t)&&t.nodeType===8}function We(t){return ft(t)&&t.nodeType===1}function ft(t){const e=Mr(t);return!!e&&t instanceof e.Node}function Hn(t){const e=t,r=e&&e.anchorNode&&Mr(e.anchorNode);return!!r&&t instanceof r.Selection}function Ru(t){return ft(t)&&t.nodeType===3}function Ro(t){return t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1}function jo(t){let[e,r]=t;if(We(e)&&e.childNodes.length){let n=r===e.childNodes.length,u=n?r-1:r;for([e,u]=ju(e,u,n?"backward":"forward"),n=u<r;We(e)&&e.childNodes.length;){const a=n?e.childNodes.length-1:0;e=Io(e,a,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]}function _o(){return!!(window.document.activeElement&&window.document.activeElement.shadowRoot)}function ju(t,e,r){const{childNodes:n}=t;let u=n[e],a=e,s=!1,o=!1;for(;(xo(u)||We(u)&&u.childNodes.length===0||We(u)&&u.getAttribute("contenteditable")==="false")&&!(s&&o);){if(a>=n.length){s=!0,a=e-1,r="backward";continue}if(a<0){o=!0,a=e+1,r="forward";continue}u=n[a],e=a,a+=r==="forward"?1:-1}return[u,e]}function Io(t,e,r){const[n]=ju(t,e,r);return n}function _u(t){let e="";if(Ru(t)&&t.nodeValue)return t.nodeValue;if(We(t)){for(const n of Array.from(t.childNodes))e+=_u(n);const r=getComputedStyle(t).getPropertyValue("display");(r==="block"||r==="list"||t.tagName==="BR")&&(e+=`
`)}return e}const ko=/data-slate-fragment="(.+?)"/m;function Mo(t){const e=t.getData("text/html"),[,r]=e.match(ko)||[];return r}const Lo=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Kn=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Tr=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),hr=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),qo=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Iu=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),zo=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),Wo=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),Vo=typeof navigator<"u"&&/.*QQBrowser/.test(navigator.userAgent),Un=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Yn=!zo&&!qo&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Lr(t){const e=Ar.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e}function st(t){let e=Fr.get(t);return e||(e=new No,Fr.set(t,e)),e}function pt(t){const e=[];let r=t;for(;;){const n=nr.get(r);if(n==null){if(f.isEditor(r))return e;break}const u=rr.get(r);if(u==null)break;e.unshift(u),r=n}throw new Error(`Unable to find the path for Slate node: ${JSON.stringify(t)}`)}function yt(t){const e=Xe(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument}function Gn(t){return!!ht.get(t)}function Ho(t){const e=Xe(t,t),r=yt(t);ht.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})}function qr(t,e,r={}){const{editable:n=!1}=r,u=Xe(t,t);let a=null;try{a=We(e)?e:e.parentElement}catch(s){if(!s.message.includes('Permission denied to access property "nodeType"'))throw s}return a?a.closest("[data-svelte-editor]")===u&&(!n||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===u||!!a.getAttribute("data-slate-zero-width")):!1}function Xe(t,e,r=!0){const n=ar.get(t),u=f.isEditor(e)?Vt.get(t):n==null?void 0:n.get(st(e));if(!u&&r)throw new Error(`Cannot resolve a DOM node from Slate node: ${JSON.stringify(e)}`);return u}function Xn(t,e,r=!0){const[n]=f.node(t,e.path),u=Xe(t,n,r);let a;f.void(t,{at:e})&&(e={path:e.path,offset:0});const o=u?Array.from(u.querySelectorAll("[data-slate-string], [data-slate-zero-width]")):[];let i=0;for(const l of o){const c=l.childNodes[0];if(c==null||c.textContent==null)continue;const{length:d}=c.textContent,g=l.getAttribute("data-slate-length"),h=g==null?d:parseInt(g,10),v=i+h;if(e.offset<=v){const E=Math.min(d,Math.max(0,e.offset-i));a=[c,E];break}i=v}if(!a&&r)throw new Error(`Cannot resolve a DOM point from Slate point: ${JSON.stringify(e)}`);return a}function Qt(t,e,r=!0){const{anchor:n,focus:u}=e,a=p.isBackward(e),s=Xn(t,n,r);if(!s)return;const o=p.isCollapsed(e)?s:Xn(t,u),l=Lr(t).document.createRange(),[c,d]=a?o:s,[g,h]=a?s:o,E=!!(We(c)?c:c.parentElement).getAttribute("data-slate-zero-width"),F=!!(We(g)?g:g.parentElement).getAttribute("data-slate-zero-width");return l.setStart(c,E?1:d),l.setEnd(g,F?1:h),l}function at(t){let e=We(t)?t:t.parentElement;e&&!e.hasAttribute("data-slate-node")&&(e=e.closest("[data-slate-node]"));const r=e?ur.get(e):null;if(!r)throw new Error(`Cannot resolve a Slate node from DOM node: ${e}`);return r}function Ko(t,e){const{clientX:r,clientY:n,target:u}=e;if(r==null||n==null)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);const a=at(e.target),s=pt(a);if(f.isVoid(t,a)){const c=u.getBoundingClientRect(),d=t.isInline(a)?r-c.left<c.left+c.width-r:n-c.top<c.top+c.height-n,g=f.point(t,s,{edge:d?"start":"end"}),h=d?f.before(t,g):f.after(t,g);if(h)return f.range(t,h)}let o=null;const{document:i}=Lr(t);if(i.caretRangeFromPoint)o=i.caretRangeFromPoint(r,n);else{const c=i.caretPositionFromPoint(r,n);c&&(o=i.createRange(),o.setStart(c.offsetNode,c.offset),o.setEnd(c.offsetNode,c.offset))}if(!o)throw new Error(`Cannot resolve a Slate range from a DOM event: ${e}`);return Ot(t,o,{exactMatch:!1,suppressThrow:!1})}function Jn(t,e,r){var h,v,E,B;const{exactMatch:n,suppressThrow:u}=r,[a,s]=n?e:jo(e),i=a instanceof To&&a.getAttribute("data-slate-node")==="element"?a:a.parentNode;let l=null,c=0;if(i){let F,A;i.getAttribute("data-slate-node")==="element"?(A=i.querySelector("[data-slate-leaf]"),i.getAttribute("data-slate-void")&&(F=i)):(A=i.closest("[data-slate-leaf]"),F=i.closest('[data-slate-void="true"]'));let b=null;if(A){if(l=A.closest('[data-slate-node="text"]'),l){const y=Lr(t).document.createRange();y.setStart(l,0),y.setEnd(a,s);const N=y.cloneContents();[...Array.prototype.slice.call(N.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(N.querySelectorAll("[contenteditable=false]"))].forEach(D=>{D.parentNode.removeChild(D)}),c=((h=N==null?void 0:N.textContent)==null?void 0:h.length)||0,b=l}}else F&&(A=F.querySelector("[data-slate-leaf]"),A?(l=A.closest('[data-slate-node="text"]'),b=A,c=((v=b==null?void 0:b.textContent)==null?void 0:v.length)||0,b.querySelectorAll("[data-slate-zero-width]").forEach(O=>{var y;c-=((y=O==null?void 0:O.textContent)==null?void 0:y.length)||0})):c=1);b&&c===((E=b==null?void 0:b.textContent)==null?void 0:E.length)&&(i.hasAttribute("data-slate-zero-width")||Tr&&((B=b.textContent)!=null&&B.endsWith(`

`)))&&c--}if(!l){if(u)return null;throw new Error(`Cannot resolve a Slate point from DOM point: ${e}`)}const d=at(l);return{path:pt(d),offset:c}}function Ot(t,e,r){const{exactMatch:n,suppressThrow:u}=r,a=Hn(e)?e.anchorNode:e.startContainer;let s=null,o=0,i=null,l=0,c=!1;if(a&&(Hn(e)?(s=e.anchorNode,o=e.anchorOffset,i=e.focusNode,l=e.focusOffset,Iu&&_o()?c=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:c=e.isCollapsed):(s=e.startContainer,o=e.startOffset,i=e.endContainer,l=e.endOffset,c=e.collapsed)),s==null||i==null||o==null||l==null)throw new Error(`Cannot resolve a Slate range from DOM range: ${e}`);const d=Jn(t,[s,o],{exactMatch:n,suppressThrow:u});if(!d)return null;const g=c?d:Jn(t,[i,l],{exactMatch:n,suppressThrow:u});if(!g)return null;let h={anchor:d,focus:g};return p.isExpanded(h)&&p.isForward(h)&&We(i)&&f.void(t,{at:h.focus,mode:"highest"})&&(h=f.unhangRange(t,h,{voids:!0})),h}function Uo(t,e){const{anchor:r,focus:n}=e;return f.hasPath(t,r.path)&&f.hasPath(t,n.path)}function ku(t,e){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const n=t[r],u=e[r],{anchor:a,focus:s,...o}=n,{anchor:i,focus:l,...c}=u;if(!p.equals(n,u)||n[St]!==u[St]||!Po(o,c))return!1}return!0}function Mu(t,e){return t===e||!!t&&!!e&&p.equals(t,e)}function qe(){return{}}function Ke(t){const e=ma(t);if(!e)throw new Error("Must be used inside the component's context.");return e}function Le(t,e){const r=Oa(e);return Ca(t,r),r}function Yo(t){let e;const r=t[7].default,n=_t(r,t,t[6],null);return{c(){n&&n.c()},l(u){n&&n.l(u)},m(u,a){n&&n.m(u,a),e=!0},p(u,[a]){n&&n.p&&(!e||a&64)&&It(n,r,u,u[6],e?Mt(r,u[6],a,null):kt(u[6]),null)},i(u){e||(z(n,u),e=!0)},o(u){W(n,u),e=!1},d(u){n&&n.d(u)}}}const Lu=qe(),qu=qe(),zu=qe(),Wu=qe(),Vu=qe(),Go=qe(),Hu=qe(),Ku=qe();function he(t,e,r){const u=gu(t)[e]||[];for(const a of u){const s=a(r);if(s===!1||r.cancelBubble)return s}}function Uu(){return Ke(Lu)}function ct(){return gu(Uu())}function Yu(){return Ke(qu)}function Xo(){return Ke(zu)}function zr(){return Ke(Wu)}function Jo(){return Ke(Vu)}function Zo(){return Ke(Hu)}function Qo(){return Ke(Ku)}function Gu(t){return[]}function $o(t,e,r){let{$$slots:n={},$$scope:u}=e,{editor:a}=e,{value:s=a.children}=e,{selection:o=a.selection}=e;const i=va(),l=Le(Lu,a),c=Le(Vu,a.selection),d=Le(Go,a.children);Le(qu,!0),Le(zu,!1),Le(Wu,Gu),Le(Hu,{}),Le(Ku,void 0);function g(){r(1,o=a.selection),r(0,s=a.children),a.operations.some(F=>F.type!=="set_selection")&&i("value",s),i("selection",o)}wr.set(a,g);let h=a,v,E;return t.$$set=B=>{"editor"in B&&r(2,a=B.editor),"value"in B&&r(0,s=B.value),"selection"in B&&r(1,o=B.selection),"$$scope"in B&&r(6,u=B.$$scope)},t.$$.update=()=>{t.$$.dirty&12&&h!==a&&(r(3,h=a),wr.set(a,g),l.set(a)),t.$$.dirty&17&&v!==s&&(l.update(B=>(B.children=s,B)),r(4,v=s),d.set(s),i("value",s)),t.$$.dirty&38&&(Mu(E,o)||(c.set(o),l.set(a),r(5,E=o),i("selection",o)))},[s,o,a,h,v,E,u,n]}class Ef extends Se{constructor(e){super(),Ne(this,e,$o,Yo,Ue,{editor:2,value:0,selection:1})}}const el=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Cr={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Xu={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:el?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Wr={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(let t=1;t<20;t++)Wr["f"+t]=111+t;function Ju(t,e={}){Array.isArray(t)||(t=[t]);const r=t.map(n=>rl(n,e));return function(u){return r.some(a=>nl(a,u))}}function tl(t,e,r={}){return Ju(t,r)(e)}function mr(t){return Ju(t,{byKey:!0})}function rl(t,e={}){const r=e&&e.byKey,n={};t=t.replace("++","+add");const u=t.split("+"),{length:a}=u;for(const s in Cr)n[Cr[s]]=!1;for(let s of u){const o=s.endsWith("?")&&s.length>1;o&&(s=s.slice(0,-1));const i=Zu(s),l=Cr[i];if(s.length>1&&!l&&!Xu[s]&&!Wr[i])throw new TypeError(`Unknown modifier: "${s}"`);(a===1||!l)&&(r?n.key=i:n.which=ul(s)),l&&(n[l]=o?null:!0)}return n}function nl(t,e){for(const r in t){const n=t[r];let u;if(n!=null&&(r==="key"&&e.key!=null?u=e.key.toLowerCase():r==="which"?u=n===91&&e.which===93?91:e.which:u=e[r],!(u==null&&n===!1)&&u!==n))return!1}return!0}function ul(t){return t=Zu(t),Wr[t]||t.toUpperCase().charCodeAt(0)}function Zu(t){return t=t.toLowerCase(),t=Xu[t]||t,t}const al={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},sl={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},il={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]};function oe(t){const e=al[t],r=sl[t],n=il[t],u=e&&mr(e),a=r&&mr(r),s=n&&mr(n);return o=>!!(u&&u(o)||Kn&&a&&a(o)||!Kn&&s&&s(o))}const fe={isBold:oe("bold"),isCompose:oe("compose"),isMoveBackward:oe("moveBackward"),isMoveForward:oe("moveForward"),isDeleteBackward:oe("deleteBackward"),isDeleteForward:oe("deleteForward"),isDeleteLineBackward:oe("deleteLineBackward"),isDeleteLineForward:oe("deleteLineForward"),isDeleteWordBackward:oe("deleteWordBackward"),isDeleteWordForward:oe("deleteWordForward"),isExtendBackward:oe("extendBackward"),isExtendForward:oe("extendForward"),isExtendLineBackward:oe("extendLineBackward"),isExtendLineForward:oe("extendLineForward"),isItalic:oe("italic"),isMoveLineBackward:oe("moveLineBackward"),isMoveLineForward:oe("moveLineForward"),isMoveWordBackward:oe("moveWordBackward"),isMoveWordForward:oe("moveWordForward"),isRedo:oe("redo"),isSplitBlock:oe("splitBlock"),isTransposeCharacter:oe("transposeCharacter"),isUndo:oe("undo")};function ol(t){let e,r,n;const u=t[2].default,a=_t(u,t,t[1],null);return{c(){e=Ve("span"),a&&a.c(),this.h()},l(s){e=He(s,"SPAN",{"data-slate-placeholder":!0,contenteditable:!0,class:!0});var o=Ye(e);a&&a.l(o),o.forEach(K),this.h()},h(){J(e,"data-slate-placeholder","true"),J(e,"contenteditable","false"),J(e,"class","svelte-lqbb94"),Ba(()=>t[3].call(e))},m(s,o){te(s,e,o),a&&a.m(e,null),r=pa(e,t[3].bind(e)),n=!0},p(s,[o]){a&&a.p&&(!n||o&2)&&It(a,u,s,s[1],n?Mt(u,s[1],o,null):kt(s[1]),null)},i(s){n||(z(a,s),n=!0)},o(s){W(a,s),n=!1},d(s){s&&K(e),a&&a.d(s),r()}}}function ll(t,e,r){let{$$slots:n={},$$scope:u}=e,{clientHeight:a=void 0}=e;function s(){a=this.clientHeight,r(0,a)}return t.$$set=o=>{"clientHeight"in o&&r(0,a=o.clientHeight),"$$scope"in o&&r(1,u=o.$$scope)},[a,u,n,s]}class fl extends Se{constructor(e){super(),Ne(this,e,ll,ol,Ue,{clientHeight:0})}}function cl(t){let e,r;const n=t[2].default,u=_t(n,t,t[1],null);return{c(){e=Ve("span"),u&&u.c(),this.h()},l(a){e=He(a,"SPAN",{"data-slate-leaf":!0});var s=Ye(e);u&&u.l(s),s.forEach(K),this.h()},h(){J(e,"data-slate-leaf","true")},m(a,s){te(a,e,s),u&&u.m(e,null),r=!0},p(a,[s]){u&&u.p&&(!r||s&2)&&It(u,n,a,a[1],r?Mt(n,a[1],s,null):kt(a[1]),null)},i(a){r||(z(u,a),r=!0)},o(a){W(u,a),r=!1},d(a){a&&K(e),u&&u.d(a)}}}function Dl(t,e,r){let{$$slots:n={},$$scope:u}=e,{leaf:a}=e;return t.$$set=s=>{"leaf"in s&&r(0,a=s.leaf),"$$scope"in s&&r(1,u=s.$$scope)},[a,u,n]}class dl extends Se{constructor(e){super(),Ne(this,e,Dl,cl,Ue,{leaf:0})}}function gl(t){let e,r;const n=t[7].default,u=_t(n,t,t[6],null);return{c(){e=Ve("div"),u&&u.c(),this.h()},l(a){e=He(a,"DIV",{"data-slate-node":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=Ye(e);u&&u.l(s),s.forEach(K),this.h()},h(){J(e,"data-slate-node","element"),J(e,"data-slate-void",t[2]),J(e,"dir",t[4]),J(e,"contenteditable",t[3]),J(e,"class","svelte-19k8gul")},m(a,s){te(a,e,s),u&&u.m(e,null),t[9](e),r=!0},p(a,s){u&&u.p&&(!r||s&64)&&It(u,n,a,a[6],r?Mt(n,a[6],s,null):kt(a[6]),null),(!r||s&4)&&J(e,"data-slate-void",a[2]),(!r||s&16)&&J(e,"dir",a[4]),(!r||s&8)&&J(e,"contenteditable",a[3])},i(a){r||(z(u,a),r=!0)},o(a){W(u,a),r=!1},d(a){a&&K(e),u&&u.d(a),t[9](null)}}}function hl(t){let e,r;const n=t[7].default,u=_t(n,t,t[6],null);return{c(){e=Ve("span"),u&&u.c(),this.h()},l(a){e=He(a,"SPAN",{"data-slate-node":!0,"data-slate-inline":!0,"data-slate-void":!0,dir:!0,contenteditable:!0,class:!0});var s=Ye(e);u&&u.l(s),s.forEach(K),this.h()},h(){J(e,"data-slate-node","element"),J(e,"data-slate-inline",t[1]),J(e,"data-slate-void",t[2]),J(e,"dir",t[4]),J(e,"contenteditable",t[3]),J(e,"class","svelte-19k8gul")},m(a,s){te(a,e,s),u&&u.m(e,null),t[8](e),r=!0},p(a,s){u&&u.p&&(!r||s&64)&&It(u,n,a,a[6],r?Mt(n,a[6],s,null):kt(a[6]),null),(!r||s&2)&&J(e,"data-slate-inline",a[1]),(!r||s&4)&&J(e,"data-slate-void",a[2]),(!r||s&16)&&J(e,"dir",a[4]),(!r||s&8)&&J(e,"contenteditable",a[3])},i(a){r||(z(u,a),r=!0)},o(a){W(u,a),r=!1},d(a){a&&K(e),u&&u.d(a),t[8](null)}}}function Cl(t){let e,r,n,u;const a=[hl,gl],s=[];function o(i,l){return i[1]?0:1}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=$()},l(i){r.l(i),n=$()},m(i,l){s[e].m(i,l),te(i,n,l),u=!0},p(i,[l]){let c=e;e=o(i),e===c?s[e].p(i,l):(Fe(),W(s[c],1,1,()=>{s[c]=null}),we(),r=s[e],r?r.p(i,l):(r=s[e]=a[e](i),r.c()),z(r,1),r.m(n.parentNode,n))},i(i){u||(z(r),u=!0)},o(i){W(r),u=!1},d(i){i&&K(n),s[e].d(i)}}}function ml(t,e,r){let{$$slots:n={},$$scope:u}=e,{element:a}=e,{isInline:s}=e,{isVoid:o}=e,{contenteditable:i}=e,{ref:l=void 0}=e,{dir:c=void 0}=e;function d(h){Je[h?"unshift":"push"](()=>{l=h,r(0,l)})}function g(h){Je[h?"unshift":"push"](()=>{l=h,r(0,l)})}return t.$$set=h=>{"element"in h&&r(5,a=h.element),"isInline"in h&&r(1,s=h.isInline),"isVoid"in h&&r(2,o=h.isVoid),"contenteditable"in h&&r(3,i=h.contenteditable),"ref"in h&&r(0,l=h.ref),"dir"in h&&r(4,c=h.dir),"$$scope"in h&&r(6,u=h.$$scope)},[l,s,o,i,c,a,u,n,d,g]}class vl extends Se{constructor(e){super(),Ne(this,e,ml,Cl,Ue,{element:5,isInline:1,isVoid:2,contenteditable:3,ref:0,dir:4})}}const Qu="֑-߿יִ-﷽ﹰ-ﻼ",$u="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Bl=new RegExp("^[^"+$u+"]*["+Qu+"]"),pl=new RegExp("^[^"+Qu+"]*["+$u+"]");function ea(t){const e=String(t||"");return Bl.test(e)?"rtl":pl.test(e)?"ltr":"neutral"}function Zn(t){let e=`
`,r;return{c(){r=$t(e)},l(n){r=er(n,e)},m(n,u){te(n,r,u)},d(n){n&&K(r)}}}function El(t){let e,r=t[0].text+"",n,u=t[1]&&Zn();return{c(){e=Ve("span"),n=$t(r),u&&u.c(),this.h()},l(a){e=He(a,"SPAN",{"data-slate-string":!0});var s=Ye(e);n=er(s,r),u&&u.l(s),s.forEach(K),this.h()},h(){J(e,"data-slate-string","true")},m(a,s){te(a,e,s),hu(e,n),u&&u.m(e,null),t[3](e)},p(a,[s]){s&1&&r!==(r=a[0].text+"")&&Cu(n,r),a[1]?u||(u=Zn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:vt,o:vt,d(a){a&&K(e),u&&u.d(),t[3](null)}}}function Al(t,e,r){let{leaf:n}=e,{isTrailing:u=!1}=e,a;Ea(()=>{a&&r(2,a.textContent=n.text,a)});function s(o){Je[o?"unshift":"push"](()=>{a=o,r(2,a)})}return t.$$set=o=>{"leaf"in o&&r(0,n=o.leaf),"isTrailing"in o&&r(1,u=o.isTrailing)},[n,u,a,s]}class Fl extends Se{constructor(e){super(),Ne(this,e,Al,El,Ue,{leaf:0,isTrailing:1})}}function Qn(t){let e;return{c(){e=Ve("br")},l(r){e=He(r,"BR",{})},m(r,n){te(r,e,n)},d(r){r&&K(e)}}}function wl(t){let e,r="\uFEFF",n,u,a=t[1]&&Qn();return{c(){e=Ve("span"),n=$t(r),a&&a.c(),this.h()},l(s){e=He(s,"SPAN",{"data-slate-zero-width":!0,"data-slate-length":!0});var o=Ye(e);n=er(o,r),a&&a.l(o),o.forEach(K),this.h()},h(){J(e,"data-slate-zero-width",u=t[1]?"n":"z"),J(e,"data-slate-length",t[0])},m(s,o){te(s,e,o),hu(e,n),a&&a.m(e,null)},p(s,[o]){s[1]?a||(a=Qn(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),o&2&&u!==(u=s[1]?"n":"z")&&J(e,"data-slate-zero-width",u),o&1&&J(e,"data-slate-length",s[0])},i:vt,o:vt,d(s){s&&K(e),a&&a.d()}}}function bl(t,e,r){let{length:n=0}=e,{isLineBreak:u=!1}=e;return t.$$set=a=>{"length"in a&&r(0,n=a.length),"isLineBreak"in a&&r(1,u=a.isLineBreak)},[n,u]}class Vr extends Se{constructor(e){super(),Ne(this,e,bl,wl,Ue,{length:0,isLineBreak:1})}}function yl(t){let e,r;return e=new Fl({props:{isTrailing:t[5],leaf:t[0]}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p(n,u){const a={};u&32&&(a.isTrailing=n[5]),u&1&&(a.leaf=n[0]),e.$set(a)},i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function Ol(t){let e,r;return e=new Vr({}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p:vt,i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function Pl(t){let e,r;return e=new Vr({props:{isLineBreak:!0}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p:vt,i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function Sl(t){let e,r;return e=new Vr({props:{length:P.string(t[1]).length}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p(n,u){const a={};u&2&&(a.length=P.string(n[1]).length),e.$set(a)},i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function Nl(t){let e,r,n,u;const a=[Sl,Pl,Ol,yl],s=[];function o(i,l){return i[4]?0:i[3]?1:i[2]?2:3}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=$()},l(i){r.l(i),n=$()},m(i,l){s[e].m(i,l),te(i,n,l),u=!0},p(i,[l]){let c=e;e=o(i),e===c?s[e].p(i,l):(Fe(),W(s[c],1,1,()=>{s[c]=null}),we(),r=s[e],r?r.p(i,l):(r=s[e]=a[e](i),r.c()),z(r,1),r.m(n.parentNode,n))},i(i){u||(z(r),u=!0)},o(i){W(r),u=!1},d(i){i&&K(n),s[e].d(i)}}}function Tl(t,e,r){let n,u,a,s,o,i,{isLast:l}=e,{leaf:c}=e,{parent:d}=e,{text:g}=e;const h=ct();return t.$$set=v=>{"isLast"in v&&r(6,l=v.isLast),"leaf"in v&&r(0,c=v.leaf),"parent"in v&&r(1,d=v.parent),"text"in v&&r(7,g=v.text)},t.$$.update=()=>{t.$$.dirty&65&&r(5,n=l&&c.text.slice(-1)===`
`),t.$$.dirty&128&&r(9,u=pt(g)),t.$$.dirty&512&&r(8,a=C.parent(u)),t.$$.dirty&2&&r(4,s=h.isVoid(d)),t.$$.dirty&1&&r(2,o=c.text===""),t.$$.dirty&390&&r(3,i=o&&d.children[d.children.length-1]===g&&!h.isInline(d)&&f.string(h,a)==="")},[c,d,o,i,s,n,l,g,a,u]}let xl=class extends Se{constructor(e){super(),Ne(this,e,Tl,Nl,Ue,{isLast:6,leaf:0,parent:1,text:7})}};function $n(t){let e,r,n,u;function a(i){t[12](i)}var s=t[5];function o(i,l){let c={$$slots:{default:[Rl]},$$scope:{ctx:i}};return i[4]!==void 0&&(c.clientHeight=i[4]),{props:c}}return s&&(e=Pe(s,o(t)),Je.push(()=>Kt(e,"clientHeight",a))),{c(){e&&ue(e.$$.fragment),n=$()},l(i){e&&ve(e.$$.fragment,i),n=$()},m(i,l){e&&ae(e,i,l),te(i,n,l),u=!0},p(i,l){if(l&32&&s!==(s=i[5])){if(e){Fe();const c=e;W(c.$$.fragment,1,0,()=>{se(c,1)}),we()}s?(e=Pe(s,o(i)),Je.push(()=>Kt(e,"clientHeight",a)),ue(e.$$.fragment),z(e.$$.fragment,1),ae(e,n.parentNode,n)):e=null}else if(s){const c={};l&8194&&(c.$$scope={dirty:l,ctx:i}),!r&&l&16&&(r=!0,c.clientHeight=i[4],mu(()=>r=!1)),e.$set(c)}},i(i){u||(e&&z(e.$$.fragment,i),u=!0)},o(i){e&&W(e.$$.fragment,i),u=!1},d(i){i&&K(n),e&&se(e,i)}}}function Rl(t){let e=t[1].placeholder+"",r;return{c(){r=$t(e)},l(n){r=er(n,e)},m(n,u){te(n,r,u)},p(n,u){u&2&&e!==(e=n[1].placeholder+"")&&Cu(r,e)},d(n){n&&K(r)}}}function jl(t){let e,r,n,u=St in t[1]&&$n(t);return r=new xl({props:{isLast:t[0],leaf:t[1],parent:t[2],text:t[3]}}),{c(){u&&u.c(),e=$(),ue(r.$$.fragment)},l(a){u&&u.l(a),e=$(),ve(r.$$.fragment,a)},m(a,s){u&&u.m(a,s),te(a,e,s),ae(r,a,s),n=!0},p(a,s){St in a[1]?u?(u.p(a,s),s&2&&z(u,1)):(u=$n(a),u.c(),z(u,1),u.m(e.parentNode,e)):u&&(Fe(),W(u,1,1,()=>{u=null}),we());const o={};s&1&&(o.isLast=a[0]),s&2&&(o.leaf=a[1]),s&4&&(o.parent=a[2]),s&8&&(o.text=a[3]),r.$set(o)},i(a){n||(z(u),z(r.$$.fragment,a),n=!0)},o(a){W(u),W(r.$$.fragment,a),n=!1},d(a){a&&K(e),u&&u.d(a),se(r,a)}}}function _l(t){let e,r,n;var u=t[6];function a(s,o){return{props:{leaf:s[1],$$slots:{default:[jl]},$$scope:{ctx:s}}}}return u&&(e=Pe(u,a(t))),{c(){e&&ue(e.$$.fragment),r=$()},l(s){e&&ve(e.$$.fragment,s),r=$()},m(s,o){e&&ae(e,s,o),te(s,r,o),n=!0},p(s,[o]){if(o&64&&u!==(u=s[6])){if(e){Fe();const i=e;W(i.$$.fragment,1,0,()=>{se(i,1)}),we()}u?(e=Pe(u,a(s)),ue(e.$$.fragment),z(e.$$.fragment,1),ae(e,r.parentNode,r)):e=null}else if(u){const i={};o&2&&(i.leaf=s[1]),o&8255&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)}},i(s){n||(e&&z(e.$$.fragment,s),n=!0)},o(s){e&&W(e.$$.fragment,s),n=!1},d(s){s&&K(r),e&&se(e,s)}}}function Il(t,e,r){let n,u,a,s,{isLast:o}=e,{leaf:i}=e,{parent:l}=e,{text:c}=e;const d=Ke(ua);et(t,d,B=>r(11,s=B));const g=Ke(aa);et(t,g,B=>r(10,a=B));let h,v;Aa(()=>{if(Un){const B=document.querySelector('[data-svelte-editor="true"]');B&&(B.style.minHeight="auto")}});function E(B){h=B,r(4,h)}return t.$$set=B=>{"isLast"in B&&r(0,o=B.isLast),"leaf"in B&&r(1,i=B.leaf),"parent"in B&&r(2,l=B.parent),"text"in B&&r(3,c=B.text)},t.$$.update=()=>{if(t.$$.dirty&2048&&r(6,n=s),t.$$.dirty&1024&&r(5,u=a),t.$$.dirty&528&&v!==h&&Un){const B=document.querySelector('[data-svelte-editor="true"]');B&&(B.style.minHeight=`${h}px`),r(9,v=h)}},[o,i,l,c,h,u,n,d,g,v,a,s,E]}class eu extends Se{constructor(e){super(),Ne(this,e,Il,_l,Ue,{isLast:0,leaf:1,parent:2,text:3})}}function tu(t,e,r){const n=t.slice();return n[9]=e[r],n[11]=r,n}function ru(t,e){let r,n,u,a;var s=eu;function o(i,l){return{props:{isLast:i[0]&&i[11]===i[5].length-1,parent:i[1],leaf:i[9],text:i[2]}}}return s&&(n=Pe(s,o(e))),{key:t,first:null,c(){r=$(),n&&ue(n.$$.fragment),u=$(),this.h()},l(i){r=$(),n&&ve(n.$$.fragment,i),u=$(),this.h()},h(){this.first=r},m(i,l){te(i,r,l),n&&ae(n,i,l),te(i,u,l),a=!0},p(i,l){if(e=i,s!==(s=eu)){if(n){Fe();const c=n;W(c.$$.fragment,1,0,()=>{se(c,1)}),we()}s?(n=Pe(s,o(e)),ue(n.$$.fragment),z(n.$$.fragment,1),ae(n,u.parentNode,u)):n=null}else if(s){const c={};l&33&&(c.isLast=e[0]&&e[11]===e[5].length-1),l&2&&(c.parent=e[1]),l&32&&(c.leaf=e[9]),l&4&&(c.text=e[2]),n.$set(c)}},i(i){a||(n&&z(n.$$.fragment,i),a=!0)},o(i){n&&W(n.$$.fragment,i),a=!1},d(i){i&&(K(r),K(u)),n&&se(n,i)}}}function kl(t){let e,r=[],n=new Map,u,a=Ut(t[5]);const s=o=>`${o[4]}-${o[11]}`;for(let o=0;o<a.length;o+=1){let i=tu(t,a,o),l=s(i);n.set(l,r[o]=ru(l,i))}return{c(){e=Ve("span");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=He(o,"SPAN",{"data-slate-node":!0});var i=Ye(e);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach(K),this.h()},h(){J(e,"data-slate-node","text")},m(o,i){te(o,e,i);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);t[7](e),u=!0},p(o,[i]){i&55&&(a=Ut(o[5]),Fe(),r=Bu(r,i,s,1,o,a,n,e,vu,ru,null,tu),we())},i(o){if(!u){for(let i=0;i<a.length;i+=1)z(r[i]);u=!0}},o(o){for(let i=0;i<r.length;i+=1)W(r[i]);u=!1},d(o){o&&K(e);for(let i=0;i<r.length;i+=1)r[i].d();t[7](null)}}}function Ml(t,e,r){let n,u,{decorations:a}=e,{isLast:s}=e,{parent:o}=e,{text:i}=e;const l=ct();let c;function d(g){Je[g?"unshift":"push"](()=>{c=g,r(3,c)})}return t.$$set=g=>{"decorations"in g&&r(6,a=g.decorations),"isLast"in g&&r(0,s=g.isLast),"parent"in g&&r(1,o=g.parent),"text"in g&&r(2,i=g.text)},t.$$.update=()=>{var g;t.$$.dirty&68&&r(5,n=R.decorations(i,a)),t.$$.dirty&4&&r(4,u=st(i)),t.$$.dirty&28&&c&&((g=ar.get(l))==null||g.set(u,c),Yt.set(i,c),ur.set(c,i))},[s,o,i,c,u,n,a,d]}class jt extends Se{constructor(e){super(),Ne(this,e,Ml,kl,Ue,{decorations:6,isLast:0,parent:1,text:2})}}function Ll(t){let e,r;return e=new ra({props:{node:t[0],decorations:t[1],selection:t[2]}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p(n,u){const a={};u&1&&(a.node=n[0]),u&2&&(a.decorations=n[1]),u&4&&(a.selection=n[2]),e.$set(a)},i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function ql(t){let e,r,n,u;const a=[Wl,zl],s=[];function o(i,l){return i[4]?0:1}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=$()},l(i){r.l(i),n=$()},m(i,l){s[e].m(i,l),te(i,n,l),u=!0},p(i,l){let c=e;e=o(i),e===c?s[e].p(i,l):(Fe(),W(s[c],1,1,()=>{s[c]=null}),we(),r=s[e],r?r.p(i,l):(r=s[e]=a[e](i),r.c()),z(r,1),r.m(n.parentNode,n))},i(i){u||(z(r),u=!0)},o(i){W(r),u=!1},d(i){i&&K(n),s[e].d(i)}}}function zl(t){let e,r,n;var u=jt;function a(s,o){return{props:{decorations:[],isLast:!1,parent:s[0],text:s[8]}}}return u&&(r=Pe(u,a(t))),{c(){e=Ve("div"),r&&ue(r.$$.fragment),this.h()},l(s){e=He(s,"DIV",{"data-slate-spacer":!0,class:!0});var o=Ye(e);r&&ve(r.$$.fragment,o),o.forEach(K),this.h()},h(){J(e,"data-slate-spacer",""),J(e,"class","svelte-yux06v")},m(s,o){te(s,e,o),r&&ae(r,e,null),n=!0},p(s,o){if(u!==(u=jt)){if(r){Fe();const i=r;W(i.$$.fragment,1,0,()=>{se(i,1)}),we()}u?(r=Pe(u,a(s)),ue(r.$$.fragment),z(r.$$.fragment,1),ae(r,e,null)):r=null}else if(u){const i={};o&1&&(i.parent=s[0]),o&256&&(i.text=s[8]),r.$set(i)}},i(s){n||(r&&z(r.$$.fragment,s),n=!0)},o(s){r&&W(r.$$.fragment,s),n=!1},d(s){s&&K(e),r&&se(r)}}}function Wl(t){let e,r,n;var u=jt;function a(s,o){return{props:{decorations:[],isLast:!1,parent:s[0],text:s[8]}}}return u&&(r=Pe(u,a(t))),{c(){e=Ve("span"),r&&ue(r.$$.fragment),this.h()},l(s){e=He(s,"SPAN",{"data-slate-spacer":!0,class:!0});var o=Ye(e);r&&ve(r.$$.fragment,o),o.forEach(K),this.h()},h(){J(e,"data-slate-spacer",""),J(e,"class","svelte-yux06v")},m(s,o){te(s,e,o),r&&ae(r,e,null),n=!0},p(s,o){if(u!==(u=jt)){if(r){Fe();const i=r;W(i.$$.fragment,1,0,()=>{se(i,1)}),we()}u?(r=Pe(u,a(s)),ue(r.$$.fragment),z(r.$$.fragment,1),ae(r,e,null)):r=null}else if(u){const i={};o&1&&(i.parent=s[0]),o&256&&(i.text=s[8]),r.$set(i)}},i(s){n||(r&&z(r.$$.fragment,s),n=!0)},o(s){r&&W(r.$$.fragment,s),n=!1},d(s){s&&K(e),r&&se(r)}}}function Vl(t){let e,r,n,u;const a=[ql,Ll],s=[];function o(i,l){return i[6]&&!i[5]?0:1}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=$()},l(i){r.l(i),n=$()},m(i,l){s[e].m(i,l),te(i,n,l),u=!0},p(i,l){let c=e;e=o(i),e===c?s[e].p(i,l):(Fe(),W(s[c],1,1,()=>{s[c]=null}),we(),r=s[e],r?r.p(i,l):(r=s[e]=a[e](i),r.c()),z(r,1),r.m(n.parentNode,n))},i(i){u||(z(r),u=!0)},o(i){W(r),u=!1},d(i){i&&K(n),s[e].d(i)}}}function Hl(t){let e,r,n,u;function a(i){t[16](i)}var s=t[10];function o(i,l){let c={isVoid:i[6],isInline:i[4],contenteditable:i[9],element:i[0],dir:i[7],$$slots:{default:[Vl]},$$scope:{ctx:i}};return i[3]!==void 0&&(c.ref=i[3]),{props:c}}return s&&(e=Pe(s,o(t)),Je.push(()=>Kt(e,"ref",a))),{c(){e&&ue(e.$$.fragment),n=$()},l(i){e&&ve(e.$$.fragment,i),n=$()},m(i,l){e&&ae(e,i,l),te(i,n,l),u=!0},p(i,[l]){if(l&1024&&s!==(s=i[10])){if(e){Fe();const c=e;W(c.$$.fragment,1,0,()=>{se(c,1)}),we()}s?(e=Pe(s,o(i)),Je.push(()=>Kt(e,"ref",a)),ue(e.$$.fragment),z(e.$$.fragment,1),ae(e,n.parentNode,n)):e=null}else if(s){const c={};l&64&&(c.isVoid=i[6]),l&16&&(c.isInline=i[4]),l&512&&(c.contenteditable=i[9]),l&1&&(c.element=i[0]),l&128&&(c.dir=i[7]),l&262519&&(c.$$scope={dirty:l,ctx:i}),!r&&l&8&&(r=!0,c.ref=i[3],mu(()=>r=!1)),e.$set(c)}},i(i){u||(e&&z(e.$$.fragment,i),u=!0)},o(i){e&&W(e.$$.fragment,i),u=!1},d(i){i&&K(n),e&&se(e,i)}}}function Kl(t,e,r){let n,u,a,s,o,i,l,c,{element:d}=e,{decorations:g}=e,{selection:h=null}=e;const v=Ke(na);et(t,v,y=>r(15,c=y));const E=ct(),B=Yu();et(t,B,y=>r(14,l=y));let F,A,b;function O(y){b=y,r(3,b)}return t.$$set=y=>{"element"in y&&r(0,d=y.element),"decorations"in y&&r(1,g=y.decorations),"selection"in y&&r(2,h=y.selection)},t.$$.update=()=>{var y;if(t.$$.dirty&32768&&r(10,n=c),t.$$.dirty&16384&&r(5,u=l),t.$$.dirty&1&&r(4,a=E.isInline(d)),t.$$.dirty&1&&r(13,s=st(d)),t.$$.dirty&17&&!a&&f.hasInlines(E,d)){const N=ea(P.string(d));N==="rtl"&&r(7,F=N)}if(t.$$.dirty&1&&r(6,o=f.isVoid(E,d)),t.$$.dirty&32&&r(9,i=!u),t.$$.dirty&113&&o){!u&&a&&r(9,i=!1);const[[N]]=P.texts(d);r(8,A=N),rr.set(N,0),nr.set(N,d)}t.$$.dirty&8201&&b&&((y=ar.get(E))==null||y.set(s,b),Yt.set(d,b),ur.set(b,d))},[d,g,h,b,a,u,o,F,A,i,n,v,B,s,l,c,O]}class nu extends Se{constructor(e){super(),Ne(this,e,Kl,Hl,Ue,{element:0,decorations:1,selection:2})}}function Ul(t){let e,r,n;var u=nu;function a(s,o){return{props:{decorations:s[2],element:s[0],selection:s[1]}}}return u&&(e=Pe(u,a(t))),{c(){e&&ue(e.$$.fragment),r=$()},l(s){e&&ve(e.$$.fragment,s),r=$()},m(s,o){e&&ae(e,s,o),te(s,r,o),n=!0},p(s,[o]){if(u!==(u=nu)){if(e){Fe();const i=e;W(i.$$.fragment,1,0,()=>{se(i,1)}),we()}u?(e=Pe(u,a(s)),ue(e.$$.fragment),z(e.$$.fragment,1),ae(e,r.parentNode,r)):e=null}else if(u){const i={};o&4&&(i.decorations=s[2]),o&1&&(i.element=s[0]),o&2&&(i.selection=s[1]),e.$set(i)}},i(s){n||(e&&z(e.$$.fragment,s),n=!0)},o(s){e&&W(e.$$.fragment,s),n=!1},d(s){s&&K(r),e&&se(e,s)}}}const Yl=qe();function Gl(t,e,r){let n,u,a,s,o,i,{parent:l}=e,{element:c}=e,{path:d}=e,{index:g}=e,{decorations:h}=e,{selection:v=null}=e;const E=zr();et(t,E,D=>r(18,i=D));const B=Le(Yl,!1),F=ct();let A=g,b=l,O=c,y=d,N=h,S=v;return t.$$set=D=>{"parent"in D&&r(4,l=D.parent),"element"in D&&r(5,c=D.element),"path"in D&&r(6,d=D.path),"index"in D&&r(7,g=D.index),"decorations"in D&&r(8,h=D.decorations),"selection"in D&&r(9,v=D.selection)},t.$$.update=()=>{t.$$.dirty&1152&&A!==g&&r(10,A=g),t.$$.dirty&2064&&b!==l&&r(11,b=l),t.$$.dirty&33&&O!==c&&r(0,O=c),t.$$.dirty&4160&&y!==d&&r(12,y=d),t.$$.dirty&8448&&(ku(N,h)||r(13,N=h)),t.$$.dirty&16896&&(Mu(S,v)||r(14,S=v)),t.$$.dirty&1025&&rr.set(O,A),t.$$.dirty&2049&&nr.set(O,b),t.$$.dirty&5120&&r(16,n=y.concat(A)),t.$$.dirty&65536&&r(15,u=f.range(F,n)),t.$$.dirty&262144&&r(17,a=i),t.$$.dirty&237569&&r(2,s=ta(a([O,n]),u,N)),t.$$.dirty&49152&&r(1,o=S&&p.intersection(u,S)),t.$$.dirty&2&&B.set(!!o)},[O,o,s,E,l,c,d,g,h,v,A,b,y,N,S,u,n,a,i]}class Xl extends Se{constructor(e){super(),Ne(this,e,Gl,Ul,tr,{parent:4,element:5,path:6,index:7,decorations:8,selection:9})}}function Jl(t){let e,r;return e=new jt({props:{decorations:t[2],isLast:t[3],parent:t[1],text:t[0]}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p(n,[u]){const a={};u&4&&(a.decorations=n[2]),u&8&&(a.isLast=n[3]),u&2&&(a.parent=n[1]),u&1&&(a.text=n[0]),e.$set(a)},i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function Zl(t,e,r){let n,u,a,s,o,i,{parent:l}=e,{text:c}=e,{path:d}=e,{index:g}=e,{isLeafBlock:h}=e,{decorations:v}=e;const E=zr();et(t,E,N=>r(17,i=N));const B=ct();let F=g,A=c,b=d,O=l,y=v;return t.$$set=N=>{"parent"in N&&r(5,l=N.parent),"text"in N&&r(6,c=N.text),"path"in N&&r(7,d=N.path),"index"in N&&r(8,g=N.index),"isLeafBlock"in N&&r(9,h=N.isLeafBlock),"decorations"in N&&r(10,v=N.decorations)},t.$$.update=()=>{t.$$.dirty&2304&&F!==g&&r(11,F=g),t.$$.dirty&65&&A!==c&&r(0,A=c),t.$$.dirty&4224&&b!==d&&r(12,b=d),t.$$.dirty&34&&O!==l&&r(1,O=l),t.$$.dirty&9216&&(ku(y,v)||r(13,y=v)),t.$$.dirty&2049&&rr.set(A,F),t.$$.dirty&3&&nr.set(A,O),t.$$.dirty&6144&&r(15,n=b.concat(F)),t.$$.dirty&2562&&r(3,u=h&&F===O.children.length-1),t.$$.dirty&32768&&r(14,a=f.range(B,n)),t.$$.dirty&131072&&r(16,s=i),t.$$.dirty&122881&&r(2,o=ta(s([A,n]),a,y))},[A,O,o,u,E,l,c,d,g,h,v,F,b,y,a,n,s,i]}class Ql extends Se{constructor(e){super(),Ne(this,e,Zl,Jl,tr,{parent:5,text:6,path:7,index:8,isLeafBlock:9,decorations:10})}}function uu(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function $l(t){let e,r;return e=new Ql({props:{decorations:t[0],parent:t[2],text:t[7],index:t[9],path:t[4],isLeafBlock:t[3]}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p(n,u){const a={};u&1&&(a.decorations=n[0]),u&4&&(a.parent=n[2]),u&4&&(a.text=n[7]),u&4&&(a.index=n[9]),u&16&&(a.path=n[4]),u&8&&(a.isLeafBlock=n[3]),e.$set(a)},i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function ef(t){let e,r;return e=new Xl({props:{decorations:t[0],selection:t[1],element:t[7],parent:t[2],index:t[9],path:t[4]}}),{c(){ue(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,u){ae(e,n,u),r=!0},p(n,u){const a={};u&1&&(a.decorations=n[0]),u&2&&(a.selection=n[1]),u&4&&(a.element=n[7]),u&4&&(a.parent=n[2]),u&4&&(a.index=n[9]),u&16&&(a.path=n[4]),e.$set(a)},i(n){r||(z(e.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),r=!1},d(n){se(e,n)}}}function au(t,e){let r,n,u,a,s,o;const i=[ef,$l],l=[];function c(d,g){return g&4&&(n=null),n==null&&(n=!!j.isElement(d[7])),n?0:1}return u=c(e,-1),a=l[u]=i[u](e),{key:t,first:null,c(){r=$(),a.c(),s=$(),this.h()},l(d){r=$(),a.l(d),s=$(),this.h()},h(){this.first=r},m(d,g){te(d,r,g),l[u].m(d,g),te(d,s,g),o=!0},p(d,g){e=d;let h=u;u=c(e,g),u===h?l[u].p(e,g):(Fe(),W(l[h],1,1,()=>{l[h]=null}),we(),a=l[u],a?a.p(e,g):(a=l[u]=i[u](e),a.c()),z(a,1),a.m(s.parentNode,s))},i(d){o||(z(a),o=!0)},o(d){W(a),o=!1},d(d){d&&(K(r),K(s)),l[u].d(d)}}}function tf(t){let e=[],r=new Map,n,u,a=Ut(t[2].children);const s=o=>st(o[7]);for(let o=0;o<a.length;o+=1){let i=uu(t,a,o),l=s(i);r.set(l,e[o]=au(l,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=$()},l(o){for(let i=0;i<e.length;i+=1)e[i].l(o);n=$()},m(o,i){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,i);te(o,n,i),u=!0},p(o,[i]){i&31&&(a=Ut(o[2].children),Fe(),e=Bu(e,i,s,1,o,a,r,n.parentNode,vu,au,n,uu),we())},i(o){if(!u){for(let i=0;i<a.length;i+=1)z(e[i]);u=!0}},o(o){for(let i=0;i<e.length;i+=1)W(e[i]);u=!1},d(o){o&&K(n);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function ta(t,e,r=[]){for(const n of r){const u=p.intersection(n,e);u&&t.push(u)}return t}function rf(t,e,r){let n,u,{node:a}=e,{decorations:s}=e,{selection:o=null}=e;const i=ct();let l=a;return t.$$set=c=>{"node"in c&&r(5,a=c.node),"decorations"in c&&r(0,s=c.decorations),"selection"in c&&r(1,o=c.selection)},t.$$.update=()=>{t.$$.dirty&36&&(l!==a||a===i)&&r(2,l=a),t.$$.dirty&4&&r(4,n=pt(l)),t.$$.dirty&4&&r(3,u=j.isElement(l)&&!i.isInline(l)&&f.hasInlines(i,l))},[s,o,l,u,n,a]}class ra extends Se{constructor(e){super(),Ne(this,e,rf,tf,tr,{node:5,decorations:0,selection:1})}}const su=t=>typeof t=="object"&&t!=null&&t.nodeType===1,iu=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",vr=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const r=getComputedStyle(t,null);return iu(r.overflowY,e)||iu(r.overflowX,e)||(n=>{const u=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!u&&(u.clientHeight<n.scrollHeight||u.clientWidth<n.scrollWidth)})(t)}return!1},Wt=(t,e,r,n,u,a,s,o)=>a<t&&s>e||a>t&&s<e?0:a<=t&&o<=r||s>=e&&o>=r?a-t-n:s>e&&o<r||a<t&&o>r?s-e+u:0,nf=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},ou=(t,e)=>{var r,n,u,a;if(typeof document>"u")return[];const{scrollMode:s,block:o,inline:i,boundary:l,skipOverflowHiddenElements:c}=e,d=typeof l=="function"?l:T=>T!==l;if(!su(t))throw new TypeError("Invalid target");const g=document.scrollingElement||document.documentElement,h=[];let v=t;for(;su(v)&&d(v);){if(v=nf(v),v===g){h.push(v);break}v!=null&&v===document.body&&vr(v)&&!vr(document.documentElement)||v!=null&&vr(v,c)&&h.push(v)}const E=(n=(r=window.visualViewport)==null?void 0:r.width)!=null?n:innerWidth,B=(a=(u=window.visualViewport)==null?void 0:u.height)!=null?a:innerHeight,{scrollX:F,scrollY:A}=window,{height:b,width:O,top:y,right:N,bottom:S,left:D}=t.getBoundingClientRect(),{top:L,right:_,bottom:U,left:Z}=(T=>{const V=window.getComputedStyle(T);return{top:parseFloat(V.scrollMarginTop)||0,right:parseFloat(V.scrollMarginRight)||0,bottom:parseFloat(V.scrollMarginBottom)||0,left:parseFloat(V.scrollMarginLeft)||0}})(t);let k=o==="start"||o==="nearest"?y-L:o==="end"?S+U:y+b/2-L+U,Y=i==="center"?D+O/2-Z+_:i==="end"?N+_:D-Z;const ie=[];for(let T=0;T<h.length;T++){const V=h[T],{height:ce,width:ee,top:le,right:Ee,bottom:de,left:Be}=V.getBoundingClientRect();if(s==="if-needed"&&y>=0&&D>=0&&S<=B&&N<=E&&y>=le&&S<=de&&D>=Be&&N<=Ee)return ie;const ye=getComputedStyle(V),H=parseInt(ye.borderLeftWidth,10),re=parseInt(ye.borderTopWidth,10),Ae=parseInt(ye.borderRightWidth,10),Oe=parseInt(ye.borderBottomWidth,10);let Ce=0,pe=0;const _e="offsetWidth"in V?V.offsetWidth-V.clientWidth-H-Ae:0,Ie="offsetHeight"in V?V.offsetHeight-V.clientHeight-re-Oe:0,ke="offsetWidth"in V?V.offsetWidth===0?0:ee/V.offsetWidth:0,De="offsetHeight"in V?V.offsetHeight===0?0:ce/V.offsetHeight:0;if(g===V)Ce=o==="start"?k:o==="end"?k-B:o==="nearest"?Wt(A,A+B,B,re,Oe,A+k,A+k+b,b):k-B/2,pe=i==="start"?Y:i==="center"?Y-E/2:i==="end"?Y-E:Wt(F,F+E,E,H,Ae,F+Y,F+Y+O,O),Ce=Math.max(0,Ce+A),pe=Math.max(0,pe+F);else{Ce=o==="start"?k-le-re:o==="end"?k-de+Oe+Ie:o==="nearest"?Wt(le,de,ce,re,Oe+Ie,k,k+b,b):k-(le+ce/2)+Ie/2,pe=i==="start"?Y-Be-H:i==="center"?Y-(Be+ee/2)+_e/2:i==="end"?Y-Ee+Ae+_e:Wt(Be,Ee,ee,H,Ae+_e,Y,Y+O,O);const{scrollLeft:Qe,scrollTop:Dt}=V;Ce=De===0?0:Math.max(0,Math.min(Dt+Ce/De,V.scrollHeight-ce/De+Ie)),pe=ke===0?0:Math.max(0,Math.min(Qe+pe/ke,V.scrollWidth-ee/ke+_e)),k+=Dt-Ce,Y+=Qe-pe}ie.push({el:V,top:Ce,left:pe})}return ie},uf=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function af(t,e){if(!t.isConnected||!(u=>{let a=u;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(t))return;const r=(u=>{const a=window.getComputedStyle(u);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(t);if((u=>typeof u=="object"&&typeof u.behavior=="function")(e))return e.behavior(ou(t,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:u,top:a,left:s}of ou(t,uf(e))){const o=a-r.top+r.bottom,i=s-r.left+r.right;u.scroll({top:o,left:i,behavior:n})}}const lu=()=>{};function sf(t,e=0,r={}){let n=!1,u=null,a=null;const s=r.before||lu,o=r.after||lu;function i(){return u!==null?(clearTimeout(u),u=null,!0):!1}function l(){i()&&(a=null),n=!1}function c(){a!==null&&(a(),a=null),l()}const d=function(...h){const v=this;function E(){t.apply(v,h),o()}n||(n=!0,s()),a=E,i(),u=setTimeout(E,e)};return d.cancel=l,d.flush=c,d}function of(t){let e,r,n,u,a,s,o;r=new ra({props:{node:t[6],selection:t[7],decorations:t[5]}});let i=[t[28],{role:n=t[4].readOnly?void 0:"textbox"},{spellcheck:t[1]},{autocorrect:t[2]},{autocapitalize:t[3]},{"data-svelte-editor":""},{"data-slate-node":"value"},{contenteditable:u=!t[4].readOnly}],l={};for(let c=0;c<i.length;c+=1)l=Er(l,i[c]);return{c(){e=Ve("div"),ue(r.$$.fragment),this.h()},l(c){e=He(c,"DIV",{role:!0,spellcheck:!0,autocorrect:!0,autocapitalize:!0,"data-svelte-editor":!0,"data-slate-node":!0,contenteditable:!0});var d=Ye(e);ve(r.$$.fragment,d),d.forEach(K),this.h()},h(){Ur(e,l),Yr(e,"svelte-m59z04",!0)},m(c,d){te(c,e,d),ae(r,e,null),t[40](e),a=!0,s||(o=[ge(e,"beforeinput",t[10]),ge(e,"keydown",t[12]),ge(e,"keyup",t[13]),ge(e,"keypress",t[14]),ge(e,"input",t[11]),ge(e,"focus",t[15]),ge(e,"blur",t[16]),ge(e,"click",t[17]),ge(e,"compositionend",t[18]),ge(e,"compositionupdate",t[19]),ge(e,"compositionstart",t[20]),ge(e,"paste",t[21]),ge(e,"copy",t[22]),ge(e,"cut",t[23]),ge(e,"dragover",t[24]),ge(e,"dragstart",t[25]),ge(e,"drop",t[26]),ge(e,"dragend",t[27])],s=!0)},p(c,d){const g={};d[0]&64&&(g.node=c[6]),d[0]&128&&(g.selection=c[7]),d[0]&32&&(g.decorations=c[5]),r.$set(g),Ur(e,l=ya(i,[d[0]&268435456&&c[28],(!a||d[0]&16&&n!==(n=c[4].readOnly?void 0:"textbox"))&&{role:n},(!a||d[0]&2)&&{spellcheck:c[1]},(!a||d[0]&4)&&{autocorrect:c[2]},(!a||d[0]&8)&&{autocapitalize:c[3]},{"data-svelte-editor":""},{"data-slate-node":"value"},(!a||d[0]&16&&u!==(u=!c[4].readOnly))&&{contenteditable:u}])),Yr(e,"svelte-m59z04",!0)},i(c){a||(z(r.$$.fragment,c),a=!0)},o(c){W(r.$$.fragment,c),a=!1},d(c){c&&K(e),se(r),t[40](null),s=!1,du(o)}}}const na=qe(),ua=qe(),aa=qe();function gt(t,e){return ft(e)&&qr(t,e)}function Me(t,e){return ft(e)&&qr(t,e,{editable:!0})}function fu(t,e){return pu.get(t)?!1:gt(t,e)&&f.isVoid(t,at(e))}function lf(t,e){const r=e.startContainer.parentElement,n=r.getBoundingClientRect;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),af(r,{scrollMode:"if-needed"}),r.getBoundingClientRect=n}function ff(t,e,r){const n=["Element","Leaf","Placeholder","placeholder","readOnly","autoFocus","decorate","scrollSelectionIntoView","ref","spellcheck","autocorrect","autocapitalize","onKeyDown"];let u=Gr(e,n),a,s,{Element:o=vl}=e,{Leaf:i=dl}=e,{Placeholder:l=fl}=e,{placeholder:c=void 0}=e,{readOnly:d=!1}=e,{autoFocus:g=!1}=e,{decorate:h=Gu}=e,{scrollSelectionIntoView:v=lf}=e,{ref:E=void 0}=e,{spellcheck:B=!0}=e,{autocorrect:F="true"}=e,{autocapitalize:A="true"}=e,{onKeyDown:b=()=>{}}=e;const O=Qo(),y=Le(na,o),N=Le(ua,i),S=Le(aa,l),D=ct(),L=Uu();et(t,L,m=>r(6,a=m));const _=Yu(),U=Xo(),Z=zr(),k=Zo(),Y=Jo();et(t,Y,m=>r(7,s=m));const ie=[],T={isComposing:!1,hasInsertPrefixInCompositon:!0,updateSelectionTimeoutId:null,isDraggingInternally:!1,latestElement:null,readOnly:d};let V=[],ce;function ee(){if(T.isComposing||T.isDraggingInternally||T.updateSelectionTimeoutId)le();else{const m=yt(D),x=Xe(D,D),I=m.getSelection();if(m.activeElement===x?(r(4,T.latestElement=m.activeElement,T),ht.set(D,!0),U.set(!0)):(ht.delete(D),U.set(!1)),!I){w.deselect(D);return}const Q=Me(D,I.anchorNode)||fu(D,I.anchorNode),M=Me(D,I.focusNode)||fu(D,I.focusNode);if(Q&&M){const G=Ot(D,I,{exactMatch:!1,suppressThrow:!0});if(G){w.select(D,G);return}}w.deselect(D)}}const le=sf(()=>Xr().then(ee),0);Fa(()=>{const m=Mr(E);return m&&(Ar.set(D,m),m.document.addEventListener("selectionchange",le)),Vt.set(D,E),Yt.set(D,E),ur.set(E,D),()=>{Vt.delete(D),Yt.delete(D),m&&(Ar.delete(D),m.document.removeEventListener("selectionchange",le))}});function Ee(){if(!E)return;const m=yt(D),x=m==null?void 0:m.getSelection();if(T.isComposing||!x||!Gn(D))return;const I=x.type!=="None";if(!D.selection&&!I)return;const Q=Vt.get(D);let M=!1;if(Q.contains(x.anchorNode)&&Q.contains(x.focusNode)&&(M=!0),I&&M&&D.selection){const Te=Ot(D,x,{exactMatch:!0,suppressThrow:!0});if(Te&&p.equals(Te,D.selection))return}if(D.selection&&!Uo(D,D.selection)){r(38,D.selection=Ot(D,x,{exactMatch:!1,suppressThrow:!1}),D),Y.set(D.selection);return}const G=D.selection&&M&&Qt(D,D.selection);G?(p.isBackward(D.selection)?x.setBaseAndExtent(G.endContainer,G.endOffset,G.startContainer,G.startOffset):x.setBaseAndExtent(G.startContainer,G.startOffset,G.endContainer,G.endOffset),v(D,G)):x.removeAllRanges(),T.updateSelectionTimeoutId&&clearTimeout(T.updateSelectionTimeoutId);let rt=setTimeout(()=>{G&&Tr&&Xe(D,D).focus(),Object.assign(T,{updateSelectionTimeoutId:null})});Object.assign(T,{updateSelectionTimeoutId:rt})}wa(()=>Xr().then(Ee));function de(m){if(!T.readOnly&&Me(D,m.target)){const x=m.inputType,I=m.dataTransfer||m.data||void 0;if(he(k,"onBeforeInput",m)===!1||m.cancelBubble||x==="insertCompositionText"||x==="deleteCompositionText")return;let Q=!1;if(x==="insertText"&&D.selection&&p.isCollapsed(D.selection)&&m.data&&m.data.length===1&&/[a-z ]/i.test(m.data)&&D.selection.anchor.offset!==0){Q=!0,D.marks&&(Q=!1);const M=f.above(D,{at:D.selection.anchor,match:G=>f.isInline(D,G),mode:"highest"});if(M){const[,G]=M;f.isEnd(D,D.selection.anchor,G)&&(Q=!1)}}if(Q||m.preventDefault(),!x.startsWith("delete")||x.startsWith("deleteBy")){const[M]=m.getTargetRanges();if(M){const G=Ot(D,M,{exactMatch:!1,suppressThrow:!1});(!D.selection||!p.equals(D.selection,G))&&w.select(D,G)}}if(D.selection&&p.isExpanded(D.selection)&&x.startsWith("delete")){const M=x.endsWith("Backward")?"backward":"forward";f.deleteFragment(D,{direction:M});return}switch(x){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{f.deleteFragment(D);break}case"deleteContent":case"deleteContentForward":{f.deleteForward(D);break}case"deleteContentBackward":{f.deleteBackward(D);break}case"deleteEntireSoftLine":{f.deleteBackward(D,{unit:"line"}),f.deleteForward(D,{unit:"line"});break}case"deleteHardLineBackward":{f.deleteBackward(D,{unit:"block"});break}case"deleteSoftLineBackward":{f.deleteBackward(D,{unit:"line"});break}case"deleteHardLineForward":{f.deleteForward(D,{unit:"block"});break}case"deleteSoftLineForward":{f.deleteForward(D,{unit:"line"});break}case"deleteWordBackward":{f.deleteBackward(D,{unit:"word"});break}case"deleteWordForward":{f.deleteForward(D,{unit:"word"});break}case"insertLineBreak":{f.insertSoftBreak(D);break}case"insertParagraph":{f.insertBreak(D);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{D.selection&&p.isExpanded(D.selection)&&f.deleteFragment(D),x==="insertFromComposition"&&T.isComposing&&r(4,T.isComposing=!1,T),(I==null?void 0:I.constructor.name)==="DataTransfer"?D.insertData(I):typeof I=="string"&&(Q?ie.push(()=>f.insertText(D,I)):f.insertText(D,I));break}}}}function Be(m){for(const x of ie)x();ie.length=0}function ye(m){if(!T.readOnly&&!T.isComposing&&Me(D,m.target)){const x=he(k,"onKeyDown",m);if(x===!1||m.cancelBubble)return x;const I=D.children[D.selection!==null?D.selection.focus.path[0]:0],Q=ea(P.string(I))==="rtl";if(fe.isRedo(m)){m.preventDefault();const M=D;typeof M.redo=="function"&&M.redo()}else if(fe.isUndo(m)){m.preventDefault();const M=D;typeof M.undo=="function"&&M.undo()}else if(fe.isMoveLineBackward(m))m.preventDefault(),w.move(D,{unit:"line",reverse:!0});else if(fe.isMoveLineForward(m))m.preventDefault(),w.move(D,{unit:"line"});else if(fe.isExtendLineBackward(m))m.preventDefault(),w.move(D,{unit:"line",edge:"focus",reverse:!0});else if(fe.isExtendLineForward(m))m.preventDefault(),w.move(D,{unit:"line",edge:"focus"});else if(fe.isMoveBackward(m))m.preventDefault(),D.selection&&p.isCollapsed(D.selection)?w.move(D,{reverse:!Q}):w.collapse(D,{edge:"start"});else if(fe.isMoveForward(m))m.preventDefault(),D.selection&&p.isCollapsed(D.selection)?w.move(D,{reverse:Q}):w.collapse(D,{edge:"end"});else if(fe.isMoveWordBackward(m))m.preventDefault(),D.selection&&p.isExpanded(D.selection)&&w.collapse(D,{edge:"focus"}),w.move(D,{unit:"word",reverse:!Q});else if(fe.isMoveWordForward(m))m.preventDefault(),D.selection&&p.isExpanded(D.selection)&&w.collapse(D,{edge:"focus"}),w.move(D,{unit:"word",reverse:Q});else if(tl("mod+a",m))m.preventDefault(),w.select(D,f.range(D,[]));else if(Yn){if((Iu||hr)&&D.selection&&(fe.isDeleteBackward(m)||fe.isDeleteForward(m))&&p.isCollapsed(D.selection)){const G=P.parent(D,D.selection.anchor.path);if(j.isElement(G)&&f.isVoid(D,G)&&f.isInline(D,G)){m.preventDefault(),f.deleteBackward(D,{unit:"block"});return}}const M=b(m);if(M===!1||m.cancelBubble)return M}else{fe.isBold(m)||fe.isItalic(m)||fe.isTransposeCharacter(m)?m.preventDefault():fe.isSplitBlock(m)?(m.preventDefault(),f.insertBreak(D)):fe.isDeleteBackward(m)?(m.preventDefault(),D.selection&&p.isExpanded(D.selection)?f.deleteFragment(D,{direction:"backward"}):f.deleteBackward(D)):fe.isDeleteForward(m)?(m.preventDefault(),D.selection&&p.isExpanded(D.selection)?f.deleteFragment(D,{direction:"forward"}):f.deleteForward(D)):fe.isDeleteLineBackward(m)?(m.preventDefault(),D.selection&&p.isExpanded(D.selection)?f.deleteFragment(D,{direction:"backward"}):f.deleteBackward(D,{unit:"line"})):fe.isDeleteLineForward(m)?(m.preventDefault(),D.selection&&p.isExpanded(D.selection)?f.deleteFragment(D,{direction:"forward"}):f.deleteForward(D,{unit:"line"})):fe.isDeleteWordBackward(m)?(m.preventDefault(),D.selection&&p.isExpanded(D.selection)?f.deleteFragment(D,{direction:"backward"}):f.deleteBackward(D,{unit:"word"})):fe.isDeleteWordForward(m)&&(m.preventDefault(),D.selection&&p.isExpanded(D.selection)?f.deleteFragment(D,{direction:"forward"}):f.deleteForward(D,{unit:"word"}));const M=b(m);return M===!1||m.cancelBubble?M:he(k,"onKeyDown",m)}}}function H(m){return he(k,"onKeyUp",m)}function re(m){return he(k,"onKeyPress",m)}function Ae(m){if(!T.readOnly&&!T.updateSelectionTimeoutId&&Me(D,m.target)){const x=Xe(D,D),I=yt(D);if(r(4,T.latestElement=I.activeElement,T),Tr&&m.target!==x){x.focus();return}return ht.set(D,!0),U.set(!0),he(k,"onFocus",m)}}function Oe(m){if(T.readOnly||T.updateSelectionTimeoutId||!Me(D,m.target))return;const x=yt(D);if(T.latestElement===x.activeElement)return;const I=m.relatedTarget,Q=Xe(D,D);if(I!==Q&&!(We(I)&&I.hasAttribute("data-slate-spacer"))){if(I!=null&&ft(I)&&qr(D,I)){const M=at(I);if(j.isElement(M)&&!D.isVoid(M))return}if(hr){const M=x.getSelection();M==null||M.removeAllRanges()}return ht.delete(D),U.set(!1),he(k,"onBlur",m)}}function Ce(m){if(!T.readOnly&&gt(D,m.target)&&ft(m.target)){const x=at(m.target),I=pt(x);if(f.hasPath(D,I)&&P.get(D,I)===x){const M=f.start(D,I),G=f.end(D,I),rt=f.void(D,{at:M}),Te=f.void(D,{at:G});if(rt&&Te&&C.equals(rt[1],Te[1])){const dt=f.range(D,M);w.select(D,dt)}}return he(k,"onClick",m)}}function pe(m){if(Me(D,m.target)){r(4,T.isComposing=!1,T);const x=m.data;if(!hr&&!Wo&&!Lo&&!Vo&&x&&f.insertText(D,x),D.selection&&p.isCollapsed(D.selection)){const I=D.selection.anchor.path,Q=P.leaf(D,I);T.hasInsertPrefixInCompositon&&(r(4,T.hasInsertPrefixInCompositon=!1,T),f.withoutNormalizing(D,()=>{const M=Q.text.replace(/^\uFEFF/,"");w.delete(D,{distance:Q.text.length,reverse:!0}),w.insertText(D,M)}))}return he(k,"onCompositionEnd",m)}}function _e(m){if(Me(D,m.target))return r(4,T.isComposing=!0,T),he(k,"onCompositionUpdate",m)}function Ie(m){if(Me(D,m.target)){if(D.selection){if(p.isExpanded(D.selection)){f.deleteFragment(D);return}const x=f.above(D,{match:I=>f.isInline(D,I),mode:"highest"});if(x){const[,I]=x;if(f.isEnd(D,D.selection.anchor,I)){const Q=f.after(D,I);w.setSelection(D,{anchor:Q,focus:Q})}}D.marks&&(r(4,T.hasInsertPrefixInCompositon=!0,T),w.insertNodes(D,{text:"\uFEFF",...D.marks},{select:!0}))}return he(k,"onCompositionStart",m)}}function ke(m){if(!T.readOnly&&Me(D,m.target))return(!Yn||Ro(m))&&(m.preventDefault(),m.clipboardData&&D.insertData(m.clipboardData)),he(k,"onPaste",m)}function De(m){if(Me(D,m.target))return m.preventDefault(),D.setFragmentData(m.clipboardData),he(k,"onCopy",m)}function Qe(m){if(!T.readOnly&&Me(D,m.target)){if(m.preventDefault(),D.setFragmentData(m.clipboardData),D.selection)if(p.isExpanded(D.selection))f.deleteFragment(D);else{const x=P.parent(D,D.selection.anchor.path);f.isVoid(D,x)&&w.delete(D)}return he(k,"onCut",m)}}function Dt(m){if(gt(D,m.target)){const x=at(m.target);return f.isVoid(D,x)&&m.preventDefault(),he(k,"onDragOver",m)}}function fr(m){if(!T.readOnly&&gt(D,m.target)){const x=at(m.target),I=pt(x);if(f.isVoid(D,x)||f.void(D,{at:I,voids:!0})){const M=f.range(D,I);w.select(D,M)}return r(4,T.isDraggingInternally=!0,T),D.setFragmentData(m.dataTransfer),he(k,"onDragStart",m)}}function Lt(m){if(!T.readOnly&&gt(D,m.target)){m.preventDefault();const x=D.selection,I=Ko(D,m),Q=m.dataTransfer;return w.select(D,I),T.isDraggingInternally&&(x&&!p.equals(x,I)&&!f.void(D,{at:I,voids:!0})&&w.delete(D,{at:x}),r(4,T.isDraggingInternally=!1,T)),D.insertData(Q),Gn(D)||Ho(D),he(k,"onDrop",m)}}function cr(m){if(!T.readOnly&&T.isDraggingInternally&&gt(D,m.target))return r(4,T.isDraggingInternally=!1,T),he(k,"onDragEnd",m)}function Ft(m){Je[m?"unshift":"push"](()=>{E=m,r(0,E)})}return t.$$set=m=>{e=Er(Er({},e),ba(m)),r(28,u=Gr(e,n)),"Element"in m&&r(29,o=m.Element),"Leaf"in m&&r(30,i=m.Leaf),"Placeholder"in m&&r(31,l=m.Placeholder),"placeholder"in m&&r(32,c=m.placeholder),"readOnly"in m&&r(33,d=m.readOnly),"autoFocus"in m&&r(34,g=m.autoFocus),"decorate"in m&&r(35,h=m.decorate),"scrollSelectionIntoView"in m&&r(36,v=m.scrollSelectionIntoView),"ref"in m&&r(0,E=m.ref),"spellcheck"in m&&r(1,B=m.spellcheck),"autocorrect"in m&&r(2,F=m.autocorrect),"autocapitalize"in m&&r(3,A=m.autocapitalize),"onKeyDown"in m&&r(37,b=m.onKeyDown)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&O.set(E),t.$$.dirty[0]&536870912&&y.set(o),t.$$.dirty[0]&1073741824&&N.set(i),t.$$.dirty[1]&1&&S.set(l),t.$$.dirty[1]&132&&pu.set(D,d),t.$$.dirty[1]&4&&_.set(d),t.$$.dirty[1]&4&&r(4,T.readOnly=d,T),t.$$.dirty[1]&16&&Z.set(h),t.$$.dirty[0]&112|t.$$.dirty[1]&146)if(a.children.length===1&&Array.from(P.texts(a)).length===1&&P.string(a)===""&&!T.isComposing){const m=f.start(D,[]);r(5,V=[...h([D,[]]),{[St]:!0,placeholder:c,anchor:m,focus:m}])}else V.length&&r(5,V=h([D,[]]));t.$$.dirty[0]&1|t.$$.dirty[1]&264&&ce!==g&&E&&(g&&E.focus(),r(39,ce=g))},[E,B,F,A,T,V,a,s,L,Y,de,Be,ye,H,re,Ae,Oe,Ce,pe,_e,Ie,ke,De,Qe,Dt,fr,Lt,cr,u,o,i,l,c,d,g,h,v,b,D,ce,Ft]}class Ff extends Se{constructor(e){super(),Ne(this,e,ff,of,tr,{Element:29,Leaf:30,Placeholder:31,placeholder:32,readOnly:33,autoFocus:34,decorate:35,scrollSelectionIntoView:36,ref:0,spellcheck:1,autocorrect:2,autocapitalize:3,onKeyDown:37},null,[-1,-1])}}function cu(t,e){if(t===e)return!0;if(!t||!e)return!1;const r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r}function Du(t,e,r){var a,s;const n=(a=Qt(t,e))==null?void 0:a.getBoundingClientRect(),u=(s=Qt(t,r))==null?void 0:s.getBoundingClientRect();return cu(n,u)&&cu(u,n)}function cf(t,e){const r=f.range(t,p.end(e)),n=Array.from(f.positions(t,{at:e}));let u=0,a=n.length,s=Math.floor(a/2);if(Du(t,f.range(t,n[u]),r))return f.range(t,n[u],r);if(n.length<2)return f.range(t,n[n.length-1],r);for(;s!==n.length&&s!==u;)Du(t,f.range(t,n[s]),r)?a=s:u=s,s=Math.floor((u+a)/2);return f.range(t,n[a],r)}function wf(t){const e=t,{apply:r,onChange:n,deleteBackward:u}=e;return ar.set(e,new WeakMap),e.deleteBackward=a=>{if(a!=="line")return u(a);if(t.selection&&p.isCollapsed(t.selection)){const s=f.above(t,{match:o=>f.isBlock(t,o),at:t.selection});if(s){const[,o]=s,i=f.range(t,o,t.selection.anchor),l=cf(e,i);p.isCollapsed(l)||w.delete(t,{at:l})}}},e.apply=a=>{const s=[];switch(a.type){case"insert_text":case"remove_text":case"set_node":{for(const[o,i]of f.levels(e,{at:a.path})){const l=st(o);s.push([i,l])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(const[o,i]of f.levels(e,{at:C.parent(a.path)})){const l=st(o);s.push([i,l])}break}case"move_node":{for(const[o,i]of f.levels(e,{at:C.common(C.parent(a.path),C.parent(a.newPath))})){const l=st(o);s.push([i,l])}break}}r(a);for(const[o,i]of s){const[l]=f.node(e,o);Fr.set(l,i)}},e.setFragmentData=a=>{const{selection:s}=e;if(!s)return;const[o,i]=p.edges(s),l=f.void(e,{at:o.path}),c=f.void(e,{at:i.path});if(p.isCollapsed(s)&&!l)return;const d=Qt(e,s);if(!d)return;let g=d.cloneContents(),h=g.childNodes[0];if(g.childNodes.forEach(A=>{A.textContent&&A.textContent.trim()!==""&&(h=A)}),c){const[A]=c,b=d.cloneRange(),O=Xe(e,A);b.setEndAfter(O),g=b.cloneContents()}if(l&&(h=g.querySelector("[data-slate-spacer]")),Array.from(g.querySelectorAll("[data-slate-zero-width]")).forEach(A=>{const b=A.getAttribute("data-slate-zero-width")==="n";A.textContent=b?`
`:""}),Ru(h)){const A=document.createElement("span");A.style.whiteSpace="pre",A.appendChild(h),g.appendChild(A),h=A}const v=e.getFragment(),E=JSON.stringify(v),B=window.btoa(encodeURIComponent(E));h.setAttribute("data-slate-fragment",B),a.setData("application/x-slate-fragment",B);const F=document.createElement("div");return F.appendChild(g),F.setAttribute("hidden","true"),document.body.appendChild(F),a.setData("text/html",F.innerHTML),a.setData("text/plain",_u(F)),document.body.removeChild(F),a},e.insertData=a=>{e.insertFragmentData(a)||e.insertTextData(a)},e.insertFragmentData=a=>{const s=a.getData("application/x-slate-fragment")||Mo(a);if(s){const o=decodeURIComponent(window.atob(s)),i=JSON.parse(o);return e.insertFragment(i),!0}return!1},e.insertTextData=a=>{const s=a.getData("text/plain");if(s){const o=s.split(/\r\n|\r|\n/);let i=!1;for(const l of o)i&&w.splitNodes(e,{always:!0}),e.insertText(l),i=!0;return!0}return!1},e.onChange=()=>{const a=wr.get(e);a&&a(),n()},e.hasOwnContext=()=>!0,e}var Df={isHistory(t){return me(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||$e.isOperationList(t.redos[0].operations))&&(t.undos.length===0||$e.isOperationList(t.undos[0].operations))}},Br=new WeakMap,pr=new WeakMap,mt={isHistoryEditor(t){return Df.isHistory(t.history)&&f.isEditor(t)},isMerging(t){return pr.get(t)},isSaving(t){return Br.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=mt.isMerging(t);pr.set(t,!1),e(),pr.set(t,r)},withoutSaving(t,e){var r=mt.isSaving(t);Br.set(t,!1),e(),Br.set(t,r)}},bf=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:u}=n;if(u.length>0){var a=u[u.length-1];a.selectionBefore&&w.setSelection(e,a.selectionBefore),mt.withoutSaving(e,()=>{f.withoutNormalizing(e,()=>{for(var s of a.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",a)}},e.undo=()=>{var{history:n}=e,{undos:u}=n;if(u.length>0){var a=u[u.length-1];mt.withoutSaving(e,()=>{f.withoutNormalizing(e,()=>{var s=a.operations.map($e.inverse).reverse();for(var o of s)e.apply(o);a.selectionBefore&&w.setSelection(e,a.selectionBefore)})}),e.writeHistory("redos",a),n.undos.pop()}},e.apply=n=>{var{operations:u,history:a}=e,{undos:s}=a,o=s[s.length-1],i=o&&o.operations[o.operations.length-1],l=mt.isSaving(e),c=mt.isMerging(e);if(l==null&&(l=gf(n)),l){if(c==null&&(o==null?c=!1:u.length!==0?c=!0:c=df(n,i)),o&&c)o.operations.push(n);else{var d={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",d)}for(;s.length>100;)s.shift();a.redos=[]}r(n)},e.writeHistory=(n,u)=>{e.history[n].push(u)},e},df=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&C.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&C.equals(t.path,e.path)),gf=(t,e)=>t.type!=="set_selection";export{Ff as E,Ef as S,wf as a,pf as c,bf as w};
